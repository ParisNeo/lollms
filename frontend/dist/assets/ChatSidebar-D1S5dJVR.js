import{u as g,a as y,c,o as C,w as k,b as r,d as i,e as t,f as m,g as d,h as s,_ as x,T as _,F as w}from"./index-BX8JWUVq.js";import{_ as S,a as B}from"./DmWindow-Cfmj4tbC.js";const U={key:0,class:"fixed inset-y-0 right-0 z-50 w-full sm:w-96 bg-white dark:bg-gray-900 shadow-2xl flex flex-col border-l dark:border-gray-700"},V={class:"flex items-center justify-between p-3 border-b dark:border-gray-700"},z={class:"flex-grow overflow-hidden relative"},I={key:0,class:"absolute inset-0 z-10 bg-white dark:bg-gray-900"},N={class:"h-full"},F={__name:"ChatSidebar",setup(O){const e=g(),u=y(),o=c(()=>u.isChatSidebarOpen),l=c(()=>e.activeConversationUserId),v=c(()=>l.value?e.activeConversations[l.value]:null);function p(n){const a=e.conversations.find(b=>b.partner_user_id===n);a&&e.openConversation({id:a.partner_user_id,username:a.partner_username,icon:a.partner_icon})}function f(){u.isChatSidebarOpen=!1}function h(){e.activeConversationUserId=null}return C(()=>{o.value&&e.fetchConversations()}),k(o,n=>{n&&e.fetchConversations()}),(n,a)=>(i(),r(w,null,[t(_,{"enter-active-class":"transform transition ease-in-out duration-300 sm:duration-500","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transform transition ease-in-out duration-300 sm:duration-500","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:m(()=>[o.value?(i(),r("div",U,[s("div",V,[a[0]||(a[0]=s("h2",{class:"font-semibold text-lg"},"Messages",-1)),s("button",{onClick:f,class:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800"},[t(x,{class:"w-6 h-6"})])]),s("div",z,[v.value?(i(),r("div",I,[t(S,{conversation:v.value,compact:!0,onBack:h,class:"h-full"},null,8,["conversation"])])):d("",!0),s("div",N,[t(B,{"model-value":l.value,"onUpdate:modelValue":p},null,8,["model-value"])])])])):d("",!0)]),_:1}),t(_,{"enter-active-class":"opacity-0 transition-opacity duration-300","enter-to-class":"opacity-100","leave-active-class":"opacity-100 transition-opacity duration-300","leave-to-class":"opacity-0"},{default:m(()=>[o.value?(i(),r("div",{key:0,onClick:f,class:"fixed inset-0 bg-black/20 z-40 sm:hidden"})):d("",!0)]),_:1})],64))}};export{F as default};
