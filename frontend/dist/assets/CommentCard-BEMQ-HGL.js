import{u as w,L as _,c,P as p,O as k,b as l,e as u,f as o,h as i,A as d,_ as b,d as C,E as M,t as f}from"./index-9wbqBHSN.js";const S={class:"flex space-x-3 py-2"},V={class:"flex-shrink-0"},$={class:"flex-1 min-w-0"},A={class:"bg-gray-100 dark:bg-gray-700 rounded-xl p-3"},D={class:"flex justify-between items-center"},L=["innerHTML"],z={class:"pl-3 mt-1 text-xs text-gray-500 dark:text-gray-400"},H={__name:"CommentCard",props:{comment:{type:Object,required:!0}},setup(n){const r=n,m=w();_();const h=c(()=>{var e;return((e=m.user)==null?void 0:e.id)===r.comment.author.id}),v=c(()=>{var e;return((e=m.user)==null?void 0:e.is_admin)===!0}),x=c(()=>p.parse(r.comment.content,{gfm:!0,breaks:!0}));function g(e){const a=new Date(e),t=Math.round((new Date-a)/1e3);return t<60?`${t}s ago`:t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<2592e3?`${Math.floor(t/86400)}d ago`:a.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}async function y(){confirm("Are you sure you want to delete this comment?")&&console.log("Deleting comment:",r.comment.id)}return(e,a)=>{const s=k("router-link");return u(),l("div",S,[o("div",V,[i(s,{to:`/profile/${n.comment.author.username}`},{default:d(()=>[i(b,{icon:n.comment.author.icon,username:n.comment.author.username,"size-class":"h-8 w-8"},null,8,["icon","username"])]),_:1},8,["to"])]),o("div",$,[o("div",A,[o("div",D,[i(s,{to:`/profile/${n.comment.author.username}`,class:"font-bold text-sm text-gray-900 dark:text-gray-100 hover:underline"},{default:d(()=>[M(f(n.comment.author.username),1)]),_:1},8,["to"]),h.value||v.value?(u(),l("button",{key:0,onClick:y,class:"text-gray-400 hover:text-red-500",title:"Delete comment"},a[0]||(a[0]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]))):C("",!0)]),o("div",{class:"mt-1 prose prose-sm dark:prose-invert max-w-none",innerHTML:x.value},null,8,L)]),o("div",z,f(g(n.comment.created_at)),1)])])}}};export{H as default};
