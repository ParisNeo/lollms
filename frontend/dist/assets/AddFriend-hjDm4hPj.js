const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-JxWhWBVP.js","assets/index-B6ABlARi.css"])))=>i.map(i=>d[i]);
import{K as h,r as u,c as y,b as r,e as o,f as t,i as x,v as g,d as w,t as v,F as b,x as k,h as m,_ as S,L as A,J as F}from"./index-JxWhWBVP.js";const T={class:"max-w-2xl mx-auto"},V={class:"relative"},B={class:"mt-4"},C={key:0,class:"text-center py-6 text-gray-500"},L={key:1,class:"space-y-3"},N={class:"flex items-center space-x-3"},z={class:"font-medium text-gray-800 dark:text-gray-100"},D=["onClick"],R={__name:"AddFriend",setup(E){const _=h(),l=u(""),s=u([]),i=u(!1);let c=null;const d=y(()=>i.value?"Searching...":l.value&&s.value.length===0?"No users found.":"");function f(){if(clearTimeout(c),!l.value||l.value.length<2){s.value=[];return}i.value=!0,c=setTimeout(async()=>{try{const n=await(await F(async()=>{const{default:e}=await import("./index-JxWhWBVP.js").then(a=>a.at);return{default:e}},__vite__mapDeps([0,1]))).default.get("/api/users/search",{params:{q:l.value}});s.value=n.data}catch(n){console.error("User search failed:",n),s.value=[]}finally{i.value=!1}},500)}async function p(n){try{await _.sendFriendRequest(n),s.value=s.value.filter(e=>e.username!==n)}catch{}}return(n,e)=>(o(),r("div",T,[t("div",V,[x(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>l.value=a),onInput:f,placeholder:"Search by username...",class:"input-field w-full !pl-10"},null,544),[[g,l.value]]),e[1]||(e[1]=t("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[t("svg",{class:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))]),t("div",B,[d.value?(o(),r("div",C,v(d.value),1)):s.value.length>0?(o(),r("ul",L,[(o(!0),r(b,null,k(s.value,a=>(o(),r("li",{key:a.id,class:"bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm flex items-center justify-between"},[t("div",N,[m(S,{icon:a.icon,username:a.username,"size-class":"h-10 w-10"},null,8,["icon","username"]),t("span",z,v(a.username),1)]),t("button",{onClick:I=>p(a.username),class:"btn btn-secondary btn-sm flex items-center space-x-1"},[m(A,{class:"w-4 h-4"}),e[2]||(e[2]=t("span",null,"Add",-1))],8,D)]))),128))])):w("",!0)])]))}};export{R as default};
