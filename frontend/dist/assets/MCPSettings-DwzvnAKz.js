import{f as A,a as L,u as $,s as _,r as v,o as F,p as f,c as n,b as o,d as e,t as r,w as T,e as k,v as M,i as y,F as C,k as S}from"./index-B3TroP28.js";const V={class:"space-y-8"},j={class:"text-lg font-semibold mb-4 border-b dark:border-gray-600 pb-2"},q={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},B={class:"text-right flex justify-end items-center space-x-2"},Y=["disabled"],z={key:0},G={key:1},H=["disabled"],I={key:0},J={key:1},K={class:"max-h-60 overflow-y-auto border dark:border-gray-600 rounded p-2 space-y-1"},O={key:0,class:"italic text-sm text-gray-500 p-2"},Q={class:"font-medium text-gray-800 dark:text-gray-100"},W={class:"text-xs text-gray-500 dark:text-gray-400 font-mono"},X={class:"space-x-4 flex-shrink-0"},Z=["onClick"],ee=["onClick"],te={class:"max-h-60 overflow-y-auto border dark:border-gray-600 rounded p-2 space-y-1"},se={key:0,class:"italic text-sm text-gray-500 p-2"},ae={class:"font-medium text-gray-800 dark:text-gray-100"},le={class:"text-xs text-gray-500 dark:text-gray-400 font-mono"},re={__name:"MCPSettings",setup(ne){const i=A(),g=L(),w=$(),{userMcps:b}=_(i),{user:P}=_(w),l=v({name:"",url:""}),d=v(null),c=v(!1);F(()=>{i.fetchMcps()});const u=f(()=>d.value!==null),m=v(!1),x=f(()=>b.value.filter(s=>{var t;return s.owner_username===((t=P.value)==null?void 0:t.username)}).sort((s,t)=>s.name.localeCompare(t.name))),h=f(()=>b.value.filter(s=>s.owner_username===null).sort((s,t)=>s.name.localeCompare(t.name)));function N(s){d.value={...s},l.value.name=s.name,l.value.url=s.url}function p(){d.value=null,l.value={name:"",url:""}}async function D(){m.value=!0;try{await i.triggerMcpReload()}catch{}finally{m.value=!1}}async function R(){if(!l.value.name||!l.value.url){g.addNotification("Name and URL are required.","warning");return}c.value=!0;try{u.value?await i.updateMcp(d.value.id,{name:l.value.name,url:l.value.url}):await i.addMcp(l.value),p()}catch{}finally{c.value=!1}}async function U(s){await g.showConfirmation({title:`Delete '${s.name}'?`,message:`Are you sure you want to remove the MCP server at ${s.url}? This cannot be undone.`,confirmText:"Delete"})&&(d.value&&d.value.id===s.id&&p(),await i.deleteMcp(s.id))}return(s,t)=>(o(),n("div",V,[e("section",null,[e("h4",j,r(u.value?"Edit Personal MCP Server":"Add Personal MCP Server"),1),e("form",{onSubmit:T(R,["prevent"]),class:"space-y-4 max-w-xl"},[e("div",q,[e("div",null,[t[3]||(t[3]=e("label",{for:"mcpName",class:"block text-sm font-medium"},"Name",-1)),k(e("input",{type:"text",id:"mcpName","onUpdate:modelValue":t[0]||(t[0]=a=>l.value.name=a),class:"input-field mt-1",placeholder:"e.g., My Local Server",required:""},null,512),[[M,l.value.name]])]),e("div",null,[t[4]||(t[4]=e("label",{for:"mcpUrl",class:"block text-sm font-medium"},"URL",-1)),k(e("input",{type:"url",id:"mcpUrl","onUpdate:modelValue":t[1]||(t[1]=a=>l.value.url=a),class:"input-field mt-1",placeholder:"http://127.0.0.1:9602",required:""},null,512),[[M,l.value.url]])])]),e("div",B,[u.value?(o(),n("button",{key:0,onClick:p,type:"button",class:"btn btn-secondary"}," Cancel ")):y("",!0),e("button",{type:"submit",class:"btn btn-primary",disabled:c.value},[c.value?(o(),n("span",z,r(u.value?"Saving...":"Adding..."),1)):(o(),n("span",G,r(u.value?"Save Changes":"Add MCP Server"),1))],8,Y)])],32),e("button",{onClick:t[2]||(t[2]=a=>D()),class:"btn btn-primary",disabled:m.value},[m.value?(o(),n("span",I,"Reloading...")):(o(),n("span",J,"Reload"))],8,H)]),e("section",null,[t[5]||(t[5]=e("h4",{class:"text-lg font-semibold mb-2"},"Your MCP Servers",-1)),e("div",K,[x.value.length===0?(o(),n("p",O," No personal MCP servers configured. ")):y("",!0),(o(!0),n(C,null,S(x.value,a=>(o(),n("div",{key:a.id,class:"flex justify-between items-center py-1.5 px-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded text-sm"},[e("div",null,[e("strong",Q,r(a.name),1),e("p",W,r(a.url),1)]),e("div",X,[e("button",{onClick:E=>N(a),class:"font-medium text-blue-500 hover:text-blue-700",title:"Edit MCP Server"},"Edit",8,Z),e("button",{onClick:E=>U(a),class:"font-medium text-red-500 hover:text-red-700",title:"Delete MCP Server"},"Delete",8,ee)])]))),128))])]),e("section",null,[t[6]||(t[6]=e("h4",{class:"text-lg font-semibold mb-2"},"System MCP Servers",-1)),e("div",te,[h.value.length===0?(o(),n("p",se," No system-wide MCP servers available. ")):y("",!0),(o(!0),n(C,null,S(h.value,a=>(o(),n("div",{key:a.id,class:"flex justify-between items-center py-1.5 px-2 text-sm"},[e("div",null,[e("strong",ae,r(a.name),1),e("p",le,r(a.url),1)])]))),128))])])]))}};export{re as default};
