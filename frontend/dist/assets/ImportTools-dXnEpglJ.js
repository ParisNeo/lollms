import{D as y,a as k,r as i,b as n,e as d,f as t,y as h,g as u,t as p,p as c}from"./index-9wbqBHSN.js";const w={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},I={class:"p-6"},_={class:"space-y-6"},D={class:"text-center"},S={key:0,class:"mt-4 text-sm text-gray-600 dark:text-gray-300"},B={class:"font-semibold"},C={class:"text-xs text-gray-500"},M={key:1,class:"mt-4 flex text-sm leading-6 text-gray-600 dark:text-gray-400"},U={class:"flex justify-end"},F=["disabled"],O={__name:"ImportTools",setup(N){const l=y(),o=k(),g=i(null),a=i(null),s=i(!1);function b(r){const e=r.target.files;e.length>0&&(e[0].name==="webui.db"?a.value=e[0]:(o.addNotification("Invalid file. Please select 'webui.db'.","error"),a.value=null))}function f(){var r;(r=g.value)==null||r.click()}function m(r){s.value=!1;const e=r.dataTransfer.files;e.length>0&&(e[0].name==="webui.db"?a.value=e[0]:(o.addNotification("Invalid file. Please select 'webui.db'.","error"),a.value=null))}async function v(){if(!a.value){o.addNotification("Please select a file to import.","warning");return}try{await l.importOpenWebUIData(a.value),a.value=null}catch{}}return(r,e)=>(d(),n("div",w,[e[6]||(e[6]=t("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-xl font-semibold leading-6 text-gray-900 dark:text-white"}," Data Import "),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Import data from other compatible applications. ")],-1)),t("div",I,[t("div",_,[e[5]||(e[5]=t("div",null,[t("h4",{class:"text-base font-medium text-gray-800 dark:text-gray-200"},"Import from Open-WebUI"),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Migrate users and discussions from an Open-WebUI instance by uploading its `webui.db` database file. The migration will run in the background. ")],-1)),t("div",null,[t("input",{type:"file",ref_key:"fileInput",ref:g,onChange:b,accept:".db",class:"hidden"},null,544),t("div",{onClick:f,onDragover:e[0]||(e[0]=u(x=>s.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=u(x=>s.value=!1,["prevent"])),onDrop:u(m,["prevent"]),class:h(["mt-2 flex justify-center rounded-lg border-2 border-dashed px-6 py-10 transition-colors",s.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"])},[t("div",D,[e[3]||(e[3]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[t("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),a.value?(d(),n("div",S,[t("p",B,p(a.value.name),1),t("p",C,p((a.value.size/1024/1024).toFixed(2))+" MB",1)])):(d(),n("p",M,e[2]||(e[2]=[t("span",{class:"font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-500"},"Upload a file",-1),t("span",{class:"pl-1"},"or drag and drop",-1)]))),e[4]||(e[4]=t("p",{class:"text-xs leading-5 text-gray-600 dark:text-gray-400"},"webui.db file only",-1))])],34)]),t("div",U,[t("button",{onClick:v,disabled:!a.value||c(l).isImporting,class:"btn btn-primary"},p(c(l).isImporting?"Importing...":"Start Import"),9,F)])])])]))}};export{O as default};
