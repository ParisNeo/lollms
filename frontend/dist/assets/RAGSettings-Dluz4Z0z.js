import{u as f,s as c,r as g,o as b,w as v,c as n,b as i,g as t,f as k,h as l,l as u,k as h,m as S,p as G,d as R,v as w,T}from"./index-CXGkbbrS.js";const A={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},M={class:"border-t border-gray-200 dark:border-gray-700"},V={class:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-8"},N={class:"space-y-4 pt-2"},U={class:"relative flex items-start"},C={class:"flex h-6 items-center"},L={key:0,class:"pl-9"},O={class:"flex justify-end pt-4"},H=["disabled"],J={key:0},B={key:1},P={__name:"RAGSettings",setup(K){const m=f(),{user:r}=c(m),a=g({rag_top_k:10,max_rag_len:8e4,rag_n_hops:0,rag_min_sim_percent:50,rag_use_graph:!1,rag_graph_response_type:"chunks_summary"}),o=g(!1),p=g(!1);let y={};const x=()=>{r.value&&(a.value={rag_top_k:r.value.rag_top_k??10,max_rag_len:r.value.max_rag_len??8e4,rag_n_hops:r.value.rag_n_hops??0,rag_min_sim_percent:r.value.rag_min_sim_percent??50,rag_use_graph:r.value.rag_use_graph||!1,rag_graph_response_type:r.value.rag_graph_response_type||"chunks_summary"},y=JSON.parse(JSON.stringify(a.value)),p.value=!1)};b(x),v(r,x,{deep:!0}),v(a,d=>{p.value=JSON.stringify(d)!==JSON.stringify(y)},{deep:!0});async function _(){o.value=!0;try{await m.updateUserPreferences(a.value)}catch{}finally{o.value=!1}}return(d,e)=>(i(),n("div",A,[e[18]||(e[18]=t("div",{class:"px-4 py-5 sm:p-6"},[t("h2",{class:"text-xl font-bold leading-6 text-gray-900 dark:text-white"},"RAG Parameters"),t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-400"}," Configure the Retrieval-Augmented Generation (RAG) settings to control how context is retrieved from documents. ")],-1)),t("div",M,[t("form",{onSubmit:k(_,["prevent"]),class:"p-4 sm:p-6 space-y-6"},[t("div",V,[t("div",null,[e[6]||(e[6]=t("label",{for:"ragTopK",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"RAG Top K",-1)),l(t("input",{type:"number",id:"ragTopK","onUpdate:modelValue":e[0]||(e[0]=s=>a.value.rag_top_k=s),class:"input-field mt-1",step:"1",min:"1",placeholder:"e.g., 10"},null,512),[[u,a.value.rag_top_k,void 0,{number:!0}]]),e[7]||(e[7]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"The number of top matching document chunks to retrieve.",-1))]),t("div",null,[e[8]||(e[8]=t("label",{for:"ragMaxLen",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Maximum RAG Length (chars)",-1)),l(t("input",{type:"number",id:"ragMaxLen","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.max_rag_len=s),class:"input-field mt-1",step:"1",min:"1",placeholder:"e.g., 80000"},null,512),[[u,a.value.max_rag_len,void 0,{number:!0}]]),e[9]||(e[9]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"The maximum total characters of retrieved chunks to add to the context.",-1))]),t("div",null,[e[10]||(e[10]=t("label",{for:"ragHops",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Maximum RAG Hops",-1)),l(t("input",{type:"number",id:"ragHops","onUpdate:modelValue":e[2]||(e[2]=s=>a.value.rag_n_hops=s),class:"input-field mt-1",step:"1",min:"0",placeholder:"e.g., 0"},null,512),[[u,a.value.rag_n_hops,void 0,{number:!0}]]),e[11]||(e[11]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Number of RAG steps for context expansion.",-1))]),t("div",null,[e[12]||(e[12]=t("label",{for:"ragMinSim",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"RAG Min Similarity %",-1)),l(t("input",{type:"number",id:"ragMinSim","onUpdate:modelValue":e[3]||(e[3]=s=>a.value.rag_min_sim_percent=s),class:"input-field mt-1",step:"1",min:"1",max:"100",placeholder:"e.g., 50"},null,512),[[u,a.value.rag_min_sim_percent,void 0,{number:!0}]]),e[13]||(e[13]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"The minimum similarity score for a chunk to be considered.",-1))])]),t("div",N,[t("div",U,[t("div",C,[l(t("input",{id:"useGraph","onUpdate:modelValue":e[4]||(e[4]=s=>a.value.rag_use_graph=s),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-blue-600 focus:ring-blue-600 dark:focus:ring-blue-600 dark:ring-offset-gray-800"},null,512),[[S,a.value.rag_use_graph]])]),e[14]||(e[14]=t("div",{class:"ml-3 text-sm leading-6"},[t("label",{for:"useGraph",class:"font-medium text-gray-900 dark:text-gray-300"},"Use Graph for RAG"),t("p",{class:"text-gray-500 dark:text-gray-400"},"Leverage knowledge graphs for more contextual responses, if available.")],-1))]),h(T,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:G(()=>[a.value.rag_use_graph?(i(),n("div",L,[e[16]||(e[16]=t("label",{for:"graphResponseType",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Graph Response Type",-1)),l(t("select",{id:"graphResponseType","onUpdate:modelValue":e[5]||(e[5]=s=>a.value.rag_graph_response_type=s),class:"input-field"},e[15]||(e[15]=[t("option",{value:"chunks_summary"},"Chunks Summary",-1),t("option",{value:"graph_only"},"Graph Only",-1),t("option",{value:"full"},"Full Response",-1)]),512),[[w,a.value.rag_graph_response_type]]),e[17]||(e[17]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"How the graph information should be integrated into the response.",-1))])):R("",!0)]),_:1})]),t("div",O,[t("button",{type:"submit",class:"btn btn-primary",disabled:o.value||!p.value},[o.value?(i(),n("span",J,"Saving...")):(i(),n("span",B,"Save RAG Settings"))],8,H)])],32)])]))}};export{P as default};
