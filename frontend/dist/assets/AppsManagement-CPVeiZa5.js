import{z as A,b as a,e as l,f as s,c as h,l as N,al as we,am as _e,d as v,t as c,h as u,an as re,D as Ae,y as L,ak as $e,ai as Ce,a as Se,s as Ie,r as y,o as Le,w as ae,ao as W,A as Me,g as Te,i as j,v as G,T as Ue,p as U,F as _,x as I,E as oe,q as J,ap as Re}from"./index-BELWB9zV.js";const De={},je={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function Ne(i,o){return l(),a("svg",je,o[0]||(o[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1),s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"},null,-1)]))}const Ze=A(De,[["render",Ne]]),Ve={},Be={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function ze(i,o){return l(),a("svg",Be,o[0]||(o[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1),s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9.563C9 9.252 9.252 9 9.563 9h4.874c.311 0 .563.252.563.563v4.874c0 .311-.252.563-.563.563H9.564A.562.562 0 0 1 9 14.437V9.564Z"},null,-1)]))}const K=A(Ve,[["render",ze]]),Pe={},Oe={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function Ee(i,o){return l(),a("svg",Oe,o[0]||(o[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-.778.099-1.533.284-2.253"},null,-1)]))}const He=A(Pe,[["render",Ee]]),Fe={},qe={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function We(i,o){return l(),a("svg",qe,o[0]||(o[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 19.5v-15m0 0-6.75 6.75M12 4.5l6.75 6.75"},null,-1)]))}const Ge=A(Fe,[["render",We]]),Je={},Ke={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function Qe(i,o){return l(),a("svg",Ke,o[0]||(o[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m0 0l6.75-6.75M12 19.5l-6.75-6.75"},null,-1)]))}const Xe=A(Je,[["render",Qe]]),Ye={},et={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function tt(i,o){return l(),a("svg",et,o[0]||(o[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 9 6-6m0 0-6 6m6-6v12a6 6 0 0 1-12 0v-3"},null,-1)]))}const de=A(Ye,[["render",tt]]),st={},nt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-5 h-5"};function lt(i,o){return l(),a("svg",nt,o[0]||(o[0]=[s("path",{d:"M13.3252 3.05011L8.66765 20.4323L10.5995 20.9499L15.257 3.56775L13.3252 3.05011Z"},null,-1),s("path",{d:"M7.61222 18.3608L8.97161 16.9124L8.9711 16.8933L3.87681 12.1121L8.66724 7.00798L7.20892 5.63928L1.0498 12.2017L7.61222 18.3608Z"},null,-1),s("path",{d:"M16.3883 18.3608L15.0289 16.9124L15.0294 16.8933L20.1237 12.1121L15.3333 7.00798L16.7916 5.63928L22.9507 12.2017L16.3883 18.3608Z"},null,-1)]))}const at=A(st,[["render",lt]]),ot={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 flex flex-col justify-between"},it=["title"],rt={class:"flex items-center space-x-3 mb-4 flex-grow-0"},dt=["src"],ct={class:"flex-grow min-w-0"},ut=["title"],pt=["title"],gt={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},vt={key:0,class:"text-sm text-gray-600 dark:text-gray-300 mb-4 flex-grow line-clamp-3"},mt={key:1,class:"text-sm text-gray-500 dark:text-gray-400 mb-4 flex-grow italic"},ft={class:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-4"},bt={key:0,class:"px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700"},yt={key:1,class:"ml-auto"},ht={class:"flex flex-col space-y-2 flex-shrink-0"},kt={key:0,class:"flex items-center text-blue-600 dark:text-blue-400 text-sm"},xt={class:"flex-grow truncate"},wt={key:1,class:"flex items-center space-x-2"},ie={__name:"AppCard",props:{app:{type:Object,required:!0},task:{type:Object,default:null},isStarred:{type:Boolean,default:!1}},emits:["install","update","details","help","star","cancel-install"],setup(i,{emit:o}){const r=i,x=o,E=h(()=>!r.app.is_installed&&!r.task),M=h(()=>r.app.is_installed),T=h(()=>r.app.status==="running"),z=h(()=>r.task&&(r.task.status==="running"||r.task.status==="pending"));function $(k){k==="install"&&x("install",r.app),k==="update"&&x("update",r.app),k==="details"&&x("details",r.app),k==="help"&&x("help",r.app),k==="star"&&x("star",r.app.name),k==="cancel-install"&&x("cancel-install",r.task.id)}return(k,m)=>(l(),a("div",ot,[s("button",{onClick:m[0]||(m[0]=p=>$("star")),class:"absolute top-2 right-2 text-gray-400 hover:text-yellow-500 z-10",title:i.isStarred?"Unstar App":"Star App"},[i.isStarred?(l(),N(we,{key:0,class:"w-5 h-5 text-yellow-400"})):(l(),N(_e,{key:1,class:"w-5 h-5"}))],8,it),s("div",rt,[i.app.icon?(l(),a("img",{key:0,src:i.app.icon,class:"h-14 w-14 rounded-md object-cover flex-shrink-0",alt:"App Icon"},null,8,dt)):v("",!0),s("div",ct,[s("h3",{class:"font-semibold text-lg text-gray-900 dark:text-white truncate",title:i.app.name},c(i.app.name),9,ut),i.app.author?(l(),a("p",{key:0,class:"text-xs text-gray-500 dark:text-gray-400 truncate",title:i.app.author},"by "+c(i.app.author),9,pt)):(l(),a("p",gt,"No author"))])]),i.app.description?(l(),a("p",vt,c(i.app.description),1)):(l(),a("p",mt,"No description available.")),s("div",ft,[i.app.category?(l(),a("span",bt,c(i.app.category),1)):v("",!0),i.app.version?(l(),a("span",yt,"v"+c(i.app.version),1)):v("",!0)]),s("div",ht,[z.value?(l(),a("div",kt,[u(re,{class:"w-5 h-5 mr-2"}),s("span",xt,c(i.task.name.split(":")[0])+"... ("+c(i.task.progress)+"%)",1),s("button",{onClick:m[1]||(m[1]=p=>$("cancel-install")),class:"btn btn-warning btn-sm ml-2 !p-1",title:"Cancel Installation"},[u(K,{class:"w-4 h-4"})])])):(l(),a("div",wt,[s("button",{onClick:m[2]||(m[2]=p=>$("details")),class:"btn btn-secondary btn-sm flex-1"},"Details"),i.app.has_readme?(l(),a("button",{key:0,onClick:m[3]||(m[3]=p=>$("help")),class:"btn btn-secondary btn-sm flex-1"},"Help")):v("",!0),E.value?(l(),a("button",{key:1,onClick:m[4]||(m[4]=p=>$("install")),class:"btn btn-primary btn-sm flex-1"},"Install")):v("",!0),M.value&&i.app.update_available?(l(),a("button",{key:2,onClick:m[5]||(m[5]=p=>$("update")),class:"btn btn-warning btn-sm flex-1"},[u(de,{class:"w-4 h-4 mr-1"}),m[6]||(m[6]=Ae(" Update "))])):v("",!0),M.value&&!i.app.update_available?(l(),a("span",{key:3,class:L(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":T.value,"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300":!T.value}])},c(T.value?"Running":"Installed"),3)):v("",!0)]))])]))}},_t={},At={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 animate-pulse"};function $t(i,o){return l(),a("div",At,o[0]||(o[0]=[$e('<div class="flex items-start gap-4 mb-3"><div class="h-16 w-16 rounded-md flex-shrink-0 bg-gray-300 dark:bg-gray-700"></div><div class="flex-grow min-w-0 mt-1"><div class="h-5 w-3/4 rounded bg-gray-300 dark:bg-gray-600"></div><div class="h-4 w-1/2 rounded bg-gray-200 dark:bg-gray-700 mt-2"></div></div></div><div class="space-y-2"><div class="h-4 rounded bg-gray-200 dark:bg-gray-700"></div><div class="h-4 rounded bg-gray-200 dark:bg-gray-700"></div><div class="h-4 w-5/6 rounded bg-gray-200 dark:bg-gray-700"></div></div><div class="mt-5"><div class="flex items-center justify-between text-xs mb-3"><div class="h-4 w-12 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="h-4 w-20 rounded-full bg-gray-200 dark:bg-gray-700"></div></div><div class="h-10 w-full rounded-md bg-gray-300 dark:bg-gray-600"></div></div>',3)]))}const Ct=A(_t,[["render",$t]]),St={class:"space-y-8"},It={class:"border-b border-gray-200 dark:border-gray-700"},Lt={class:"-mb-px flex space-x-6","aria-label":"Tabs"},Mt={key:0},Tt={class:"flex justify-between items-center mb-4 flex-wrap gap-2"},Ut={class:"flex items-center gap-2"},Rt=["disabled"],Dt={key:0,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm mb-6 overflow-hidden"},jt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Nt={class:"md:col-span-2"},Zt={class:"flex justify-end"},Vt=["disabled"],Bt={key:0,class:"text-center p-4"},zt={key:1,class:"text-center p-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},Pt={key:2,class:"space-y-4"},Ot={class:"flex-grow truncate"},Et={class:"font-semibold text-gray-900 dark:text-white"},Ht=["title"],Ft={class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},qt={class:"flex items-center gap-x-2 flex-shrink-0"},Wt=["onClick","disabled"],Gt=["onClick","disabled"],Jt={key:1},Kt={class:"flex justify-between items-center mb-4 flex-wrap gap-2"},Qt=["disabled"],Xt={class:"space-y-4"},Yt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},es={class:"relative lg:col-span-1"},ts={class:"grid grid-cols-2 lg:col-span-2 gap-4"},ss=["value"],ns={class:"flex items-center gap-2"},ls=["value"],as={key:0,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6"},os={key:1,class:"text-center p-10 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},is={key:2,class:"text-center p-10 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},rs={key:3},ds={key:0,class:"space-y-8"},cs={class:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3 border-b pb-2 dark:border-gray-700"},us={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6"},ps={key:1,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6"},gs={key:2},vs={key:0,class:"text-center p-10"},ms={key:1,class:"text-center p-10 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},fs={key:2,class:"space-y-4"},bs={class:"flex items-center gap-4 flex-grow truncate"},ys=["src"],hs={class:"flex-grow truncate"},ks=["title"],xs=["title"],ws={class:"flex items-center gap-x-2 flex-shrink-0 flex-wrap justify-end"},_s={key:0,class:"flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400"},As={class:"capitalize"},$s=["onClick"],Cs=["onClick"],Ss=["href"],Is=["onClick"],Ls=["onClick"],Ms=["onClick"],Ts=["onClick","disabled"],Us=["onClick"],Rs={__name:"AppsManagement",setup(i){const o=Ce(),r=Se(),{zooRepositories:x,isLoadingZooRepositories:E,zooApps:M,isLoadingZooApps:T,installedApps:z,isLoadingInstalledApps:$,tasks:k,activeTaskIds:m}=Ie(o),p=y("repositories"),Z=y(!1),w=y({name:"",url:""}),g=y(null),R=y(""),P=y("All"),V=y("All"),O=y(!1),D=y("last_update_date"),B=y("desc"),C=y(JSON.parse(localStorage.getItem("starredApps")||"[]")),ce=[{value:"last_update_date",label:"Last Updated"},{value:"creation_date",label:"Creation Date"},{value:"name",label:"Name"},{value:"author",label:"Author"}];Le(()=>{o.fetchZooRepositories(),o.fetchZooApps(),o.fetchInstalledApps(),o.fetchTasks()}),ae(p,n=>{n==="available_apps"&&(o.fetchZooApps(),o.fetchInstalledApps(),o.fetchTasks()),n==="installed_apps"&&(o.fetchInstalledApps(),o.fetchTasks())}),ae(C,n=>{localStorage.setItem("starredApps",JSON.stringify(n))},{deep:!0});const ue=h(()=>{const n=new Map;return k.value.forEach(e=>{if(e.name.startsWith("Installing app: ")){const t=e.name.replace("Installing app: ","");(!n.has(t)||new Date(e.created_at)>new Date(n.get(t).created_at))&&n.set(t,e)}}),M.value.map(e=>{const t=n.get(e.name);return{...e,task:t&&(t.status==="running"||t.status==="pending")?t:null}})}),Q=h(()=>x.value?[...x.value].sort((n,e)=>n.name.localeCompare(e.name)):[]),pe=h(()=>{const n=new Set(M.value.map(e=>e.category||"Uncategorized"));return["All",...Array.from(n).sort()]}),H=h(()=>{let n=ue.value.filter(e=>{const t=V.value==="All"||V.value==="Installed"&&e.is_installed||V.value==="Uninstalled"&&!e.is_installed&&!e.task,d=P.value==="All"||e.category===P.value,f=!R.value||e.name.toLowerCase().includes(R.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(R.value.toLowerCase())||e.author&&e.author.toLowerCase().includes(R.value.toLowerCase());return t&&d&&f});return n.sort((e,t)=>{const d=C.value.includes(e.name),f=C.value.includes(t.name);if(d&&!f)return-1;if(!d&&f)return 1;if(e.is_installed&&!t.is_installed)return-1;if(!e.is_installed&&t.is_installed)return 1;let b=e[D.value]||"",S=t[D.value]||"";return D.value.includes("date")&&(b=b?new Date(b).getTime():0,S=S?new Date(S).getTime():0),typeof b=="string"&&typeof S=="string"?B.value==="asc"?b.localeCompare(S):S.localeCompare(b):B.value==="asc"?b-S:S-b}),n}),X=h(()=>D.value!=="author"?null:H.value.reduce((n,e)=>{const t=e.author||"Unknown Author";return n[t]||(n[t]=[]),n[t].push(e),n},{})),ge=h(()=>z.value?[...z.value].sort((n,e)=>n.name.localeCompare(e.name)):[]),Y=h(()=>{const n=new Map;return k.value.forEach(e=>{let t="";e.name.startsWith("Start app: ")?t=e.name.replace("Start app: ",""):e.name.startsWith("Installing app: ")&&(t=e.name.replace("Installing app: ","")),t&&(e.status==="running"||e.status==="pending")&&(!n.has(t)||new Date(e.created_at)>new Date(n.get(t).created_at))&&n.set(t,e)}),ge.value.map(e=>({...e,task:n.get(e.name)||null}))});function ee(n){const e=C.value.indexOf(n);e>-1?C.value.splice(e,1):C.value.push(n)}function ve(n){return n?new Date(n).toLocaleString():"Never"}async function me(){if(!w.value.name||!w.value.url){r.addNotification("Repository name and URL are required.","warning");return}g.value="add";try{await o.addZooRepository(w.value.name,w.value.url),w.value={name:"",url:""},Z.value=!1}catch{}finally{g.value=null}}async function fe(n){g.value=n.id;try{await o.pullZooRepository(n.id)}catch{}finally{g.value=null}}async function be(){O.value=!0;try{await o.pullAllZooRepositories()}finally{O.value=!1}}async function ye(n){if(await r.showConfirmation({title:`Delete Repository '${n.name}'?`,message:"This will remove the repository from the list and delete its cached files from the server. This action cannot be undone.",confirmText:"Delete"})){g.value=n.id;try{await o.deleteZooRepository(n.id)}catch{}finally{g.value=null}}}function F(n){r.openModal("appInstall",{app:n})}function te(n){const e=M.value.find(t=>t.name===n.name);if(!e){r.addNotification(`Could not find app details for '${n.name}' in the zoo. Try refreshing repositories.`,"error");return}r.showConfirmation({title:`Update '${n.name}'?`,message:"This will reinstall the app with the latest version from the zoo. The app will be stopped during this process. Are you sure you want to continue?",confirmText:"Update"}).then(t=>{t&&F(e)})}async function se(n,e){g.value=`${e}-${n}`;try{e==="start"&&await o.startApp(n),e==="stop"&&await o.stopApp(n)}catch{}finally{g.value=null}}async function he(n){if(await r.showConfirmation({title:`Uninstall '${n.name}'?`,message:"This will stop the app if it is running and permanently delete its files and virtual environment. This action cannot be undone.",confirmText:"Uninstall"})){g.value=`uninstall-${n.id}`;try{await o.uninstallApp(n.id)}catch{}finally{g.value=null}}}function ne(n){r.openModal("appDetails",{app:n})}function ke(n){r.openModal("appConfig",{app:n})}async function xe(n){try{const e=await o.fetchAppLog(n.id);r.openModal("sourceViewer",{title:`Logs: ${n.name}`,content:e||"No log content found.",language:"log"})}catch{}}async function le(n){try{const e=await o.fetchAppReadme(n.repository,n.folder_name);r.openModal("sourceViewer",{title:`README: ${n.name}`,content:e,language:"markdown"})}catch{}}async function q(n){await o.cancelTask(n)}return(n,e)=>(l(),a("div",St,[e[25]||(e[25]=s("div",null,[s("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Apps Management"),s("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"}," Install and manage LOLLMS Applications from various sources (Zoos). ")],-1)),s("div",It,[s("nav",Lt,[s("button",{onClick:e[0]||(e[0]=t=>p.value="repositories"),class:L(["tab-button",p.value==="repositories"?"active":"inactive"])}," Repositories ",2),s("button",{onClick:e[1]||(e[1]=t=>p.value="available_apps"),class:L(["tab-button",p.value==="available_apps"?"active":"inactive"])}," Available Apps ",2),s("button",{onClick:e[2]||(e[2]=t=>p.value="installed_apps"),class:L(["tab-button",p.value==="installed_apps"?"active":"inactive"])}," Installed Apps ",2)])]),p.value==="repositories"?(l(),a("section",Mt,[s("div",Tt,[e[13]||(e[13]=s("h3",{class:"text-xl font-semibold"},"App Zoo Repositories",-1)),s("div",Ut,[s("button",{onClick:be,class:"btn btn-secondary",disabled:O.value},[u(W,{class:L(["w-4 h-4",{"animate-spin":O.value}])},null,8,["class"]),e[12]||(e[12]=s("span",{class:"ml-2"},"Pull All",-1))],8,Rt),s("button",{onClick:e[3]||(e[3]=t=>Z.value=!Z.value),class:"btn btn-primary"},c(Z.value?"Cancel":"Add Repository"),1)])]),u(Ue,{name:"form-fade"},{default:Me(()=>[Z.value?(l(),a("div",Dt,[s("form",{onSubmit:Te(me,["prevent"]),class:"space-y-4"},[s("div",jt,[s("div",null,[e[14]||(e[14]=s("label",{for:"repo-name",class:"block text-sm font-medium"},"Name",-1)),j(s("input",{id:"repo-name","onUpdate:modelValue":e[4]||(e[4]=t=>w.value.name=t),type:"text",class:"input-field mt-1",placeholder:"e.g., Official Zoo",required:""},null,512),[[G,w.value.name]])]),s("div",Nt,[e[15]||(e[15]=s("label",{for:"repo-url",class:"block text-sm font-medium"},"Git URL",-1)),j(s("input",{id:"repo-url","onUpdate:modelValue":e[5]||(e[5]=t=>w.value.url=t),type:"url",class:"input-field mt-1",placeholder:"https://github.com/ParisNeo/lollms_apps_zoo.git",required:""},null,512),[[G,w.value.url]])])]),s("div",Zt,[s("button",{type:"submit",class:"btn btn-primary",disabled:g.value==="add"},c(g.value==="add"?"Adding...":"Add Repository"),9,Vt)])],32)])):v("",!0)]),_:1}),U(E)?(l(),a("div",Bt,"Loading repositories...")):Q.value.length===0?(l(),a("div",zt,e[16]||(e[16]=[s("p",null,"No App Zoo repositories have been added yet.",-1)]))):(l(),a("div",Pt,[(l(!0),a(_,null,I(Q.value,t=>(l(),a("div",{key:t.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm flex flex-col md:flex-row md:items-center justify-between gap-4"},[s("div",Ot,[s("p",Et,c(t.name),1),s("p",{class:"text-sm text-gray-500 dark:text-gray-400 font-mono truncate",title:t.url},c(t.url),9,Ht),s("p",Ft,"Last updated: "+c(ve(t.last_pulled_at)),1)]),s("div",qt,[s("button",{onClick:d=>fe(t),class:"btn btn-secondary btn-sm",disabled:g.value===t.id,title:"Refresh (git pull)"},[u(W,{class:L(["w-4 h-4",{"animate-spin":g.value===t.id}])},null,8,["class"]),e[17]||(e[17]=s("span",{class:"ml-1"},"Pull",-1))],8,Wt),s("button",{onClick:d=>ye(t),class:"btn btn-danger btn-sm",disabled:g.value===t.id,title:"Delete"},[u(oe,{class:"w-4 h-4"})],8,Gt)])]))),128))]))])):v("",!0),p.value==="available_apps"?(l(),a("section",Jt,[s("div",Kt,[e[19]||(e[19]=s("h3",{class:"text-xl font-semibold"},"Available Apps",-1)),s("button",{onClick:e[6]||(e[6]=t=>U(o).fetchZooApps()),class:"btn btn-secondary",disabled:U(T)},[u(W,{class:L(["w-4 h-4",{"animate-spin":U(T)}])},null,8,["class"]),e[18]||(e[18]=s("span",{class:"ml-2"},"Rescan All Sources",-1))],8,Qt)]),s("div",Xt,[s("div",Yt,[s("div",es,[j(s("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=t=>R.value=t),placeholder:"Search apps...",class:"input-field w-full pl-10"},null,512),[[G,R.value]]),e[20]||(e[20]=s("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[s("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),s("div",ts,[j(s("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>V.value=t),class:"input-field"},e[21]||(e[21]=[s("option",{value:"All"},"All Statuses",-1),s("option",{value:"Installed"},"Installed",-1),s("option",{value:"Uninstalled"},"Uninstalled",-1)]),512),[[J,V.value]]),j(s("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>P.value=t),class:"input-field"},[(l(!0),a(_,null,I(pe.value,t=>(l(),a("option",{key:t,value:t},c(t),9,ss))),128))],512),[[J,P.value]])])]),s("div",ns,[j(s("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>D.value=t),class:"input-field w-48"},[(l(),a(_,null,I(ce,t=>s("option",{key:t.value,value:t.value},"Sort by "+c(t.label),9,ls)),64))],512),[[J,D.value]]),s("button",{onClick:e[11]||(e[11]=t=>B.value=B.value==="asc"?"desc":"asc"),class:"btn btn-secondary p-2"},[B.value==="asc"?(l(),N(Ge,{key:0,class:"w-5 h-5"})):(l(),N(Xe,{key:1,class:"w-5 h-5"}))])]),U(T)?(l(),a("div",as,[(l(),a(_,null,I(8,t=>u(Ct,{key:t})),64))])):U(M).length===0?(l(),a("div",os,e[22]||(e[22]=[s("h4",{class:"font-semibold"},"No Apps Found",-1),s("p",{class:"text-sm text-gray-500"},"Please add and pull a repository to see available apps.",-1)]))):H.value.length===0?(l(),a("div",is,e[23]||(e[23]=[s("h4",{class:"font-semibold"},"No Matching Apps",-1),s("p",{class:"text-sm text-gray-500"},"Try adjusting your search or filter.",-1)]))):(l(),a("div",rs,[X.value?(l(),a("div",ds,[(l(!0),a(_,null,I(X.value,(t,d)=>(l(),a("div",{key:d},[s("h3",cs,c(d),1),s("div",us,[(l(!0),a(_,null,I(t,f=>(l(),N(ie,{key:`${f.repository}/${f.folder_name}`,app:f,task:f.task,"is-starred":C.value.includes(f.name),onStar:b=>ee(f.name),onInstall:b=>F(f),onDetails:b=>ne(f),onHelp:b=>le(f),onCancelInstall:q},null,8,["app","task","is-starred","onStar","onInstall","onDetails","onHelp"]))),128))])]))),128))])):(l(),a("div",ps,[(l(!0),a(_,null,I(H.value,t=>(l(),N(ie,{key:`${t.repository}/${t.folder_name}`,app:t,task:t.task,"is-starred":C.value.includes(t.name),onStar:d=>ee(t.name),onInstall:d=>F(t),onUpdate:d=>te(t),onDetails:d=>ne(t),onHelp:d=>le(t),onCancelInstall:q},null,8,["app","task","is-starred","onStar","onInstall","onUpdate","onDetails","onHelp"]))),128))]))]))])])):v("",!0),p.value==="installed_apps"?(l(),a("section",gs,[U($)?(l(),a("div",vs,"Loading installed apps...")):Y.value.length===0?(l(),a("div",ms,e[24]||(e[24]=[s("h4",{class:"font-semibold"},"No Apps Installed",-1),s("p",{class:"text-sm text-gray-500"},'Go to the "Available Apps" tab to install an application.',-1)]))):(l(),a("div",fs,[(l(!0),a(_,null,I(Y.value,t=>(l(),a("div",{key:t.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm flex flex-col md:flex-row md:items-center justify-between gap-4"},[s("div",bs,[t.icon?(l(),a("img",{key:0,src:t.icon,class:"h-10 w-10 rounded-md flex-shrink-0 object-cover",alt:"App Icon"},null,8,ys)):v("",!0),s("div",hs,[s("p",{class:"font-semibold text-gray-900 dark:text-white truncate",title:t.name},c(t.name),9,ks),s("p",{class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate",title:`Port: ${t.port}`},"Port: "+c(t.port),9,xs)])]),s("div",ws,[t.task?(l(),a("div",_s,[u(re,{class:"w-4 h-4"}),s("span",As,c(t.task.name.split(":")[0])+"... ("+c(t.task.progress)+"%)",1),s("button",{onClick:d=>q(t.task.id),class:"btn btn-warning btn-sm !p-1",title:"Cancel Task"},[u(K,{class:"w-4 h-4"})],8,$s)])):(l(),a(_,{key:1},[t.update_available?(l(),a("button",{key:0,onClick:d=>te(t),class:"btn btn-warning btn-sm p-2",title:"Update App"},[u(de,{class:"w-5 h-5"})],8,Cs)):v("",!0),s("span",{class:L(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":t.status==="running","bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300":t.status==="stopped","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300":t.status==="error"}])},c(t.status),3),t.status==="running"&&t.url?(l(),a("a",{key:1,href:t.url,target:"_blank",class:"btn btn-secondary btn-sm p-2",title:"Open App"},[u(He,{class:"w-5 h-5"})],8,Ss)):v("",!0),s("button",{onClick:d=>ke(t),class:"btn btn-secondary btn-sm p-2",title:"Edit App Settings"},[u(Re,{class:"w-5 h-5"})],8,Is),s("button",{onClick:d=>xe(t),class:"btn btn-secondary btn-sm p-2",title:"View App Logs"},[u(at,{class:"w-5 h-5"})],8,Ls),t.status!=="running"?(l(),a("button",{key:2,onClick:d=>se(t.id,"start"),class:"btn btn-success btn-sm p-2",title:"Start App"},[u(Ze,{class:"w-5 h-5"})],8,Ms)):v("",!0),t.status==="running"?(l(),a("button",{key:3,onClick:d=>se(t.id,"stop"),class:"btn btn-warning btn-sm p-2",disabled:g.value===`stop-${t.id}`,title:"Stop App"},[u(K,{class:"w-5 h-5"})],8,Ts)):v("",!0),s("button",{onClick:d=>he(t),class:"btn btn-danger btn-sm p-2",title:"Uninstall App"},[u(oe,{class:"w-5 h-5"})],8,Us)],64))])]))),128))]))])):v("",!0)]))}},js=A(Rs,[["__scopeId","data-v-dec1b1b0"]]);export{js as default};
