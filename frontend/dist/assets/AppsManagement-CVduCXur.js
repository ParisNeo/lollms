import{z as b,b as a,e as l,f as s,r as h,c as C,l as D,al as we,am as ke,t as u,d as y,h as c,an as xe,D as ne,ao as _e,aj as Ae,ap as $e,aq as Ce,ak as Ie,ai as Se,a as Le,s as Me,o as je,w as le,y as S,ar as F,A as Te,g as Ue,i as U,v as q,T as De,p as L,F as x,x as $,E as ae,q as W,as as Re}from"./index-qRqNjLWr.js";const Ze={},Ve={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function Be(i,o){return l(),a("svg",Ve,o[0]||(o[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1),s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"},null,-1)]))}const Ne=b(Ze,[["render",Be]]),ze={},Pe={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function He(i,o){return l(),a("svg",Pe,o[0]||(o[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1),s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9.563C9 9.252 9.252 9 9.563 9h4.874c.311 0 .563.252.563.563v4.874c0 .311-.252.563-.563.563H9.564A.562.562 0 0 1 9 14.437V9.564Z"},null,-1)]))}const oe=b(ze,[["render",He]]),Oe={},Ee={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function Fe(i,o){return l(),a("svg",Ee,o[0]||(o[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-.778.099-1.533.284-2.253"},null,-1)]))}const qe=b(Oe,[["render",Fe]]),We={},Ge={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function Je(i,o){return l(),a("svg",Ge,o[0]||(o[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 19.5v-15m0 0-6.75 6.75M12 4.5l6.75 6.75"},null,-1)]))}const Ke=b(We,[["render",Je]]),Qe={},Xe={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function Ye(i,o){return l(),a("svg",Xe,o[0]||(o[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m0 0l6.75-6.75M12 19.5l-6.75-6.75"},null,-1)]))}const et=b(Qe,[["render",Ye]]),tt={},st={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function nt(i,o){return l(),a("svg",st,o[0]||(o[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 9 6-6m0 0-6 6m6-6v12a6 6 0 0 1-12 0v-3"},null,-1)]))}const lt=b(tt,[["render",nt]]),at={},ot={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-5 h-5"};function rt(i,o){return l(),a("svg",ot,o[0]||(o[0]=[s("path",{d:"M13.3252 3.05011L8.66765 20.4323L10.5995 20.9499L15.257 3.56775L13.3252 3.05011Z"},null,-1),s("path",{d:"M7.61222 18.3608L8.97161 16.9124L8.9711 16.8933L3.87681 12.1121L8.66724 7.00798L7.20892 5.63928L1.0498 12.2017L7.61222 18.3608Z"},null,-1),s("path",{d:"M16.3883 18.3608L15.0289 16.9124L15.0294 16.8933L20.1237 12.1121L15.3333 7.00798L16.7916 5.63928L22.9507 12.2017L16.3883 18.3608Z"},null,-1)]))}const it=b(at,[["render",rt]]),dt={},ct={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function ut(i,o){return l(),a("svg",ct,o[0]||(o[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"},null,-1)]))}const pt=b(dt,[["render",ut]]),gt={},vt={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function mt(i,o){return l(),a("svg",vt,o[0]||(o[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 11.667 0l3.181-3.183m-4.991-2.696v4.992h-4.992m0 0-3.181-3.183a8.25 8.25 0 0 1 11.667 0l3.181 3.183"},null,-1)]))}const ft=b(gt,[["render",mt]]),ht={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md transition-shadow hover:shadow-lg flex flex-col h-full relative"},yt={class:"p-4 flex-grow"},bt={class:"flex items-start gap-4 mb-3"},wt={class:"h-16 w-16 rounded-md flex-shrink-0 bg-gray-200 dark:bg-gray-700 flex items-center justify-center overflow-hidden"},kt=["src"],xt={key:1,class:"w-9 h-9 text-gray-500 dark:text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},_t={class:"flex-grow min-w-0"},At=["title"],$t=["title"],Ct={class:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed min-h-[60px]"},It={class:"px-4 pb-4 mt-auto"},St={class:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-3"},Lt={key:0,class:"flex items-center gap-1"},Mt={class:"px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700 font-medium"},jt={class:"flex items-center gap-2 mb-2"},Tt={key:0,class:"space-y-2"},Ut={class:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-600"},Dt={key:3,class:"w-full text-center px-4 py-2 rounded-md bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 font-semibold flex items-center justify-center gap-2"},re={__name:"AppCard",props:{app:{type:Object,required:!0},isStarred:{type:Boolean,default:!1},task:{type:Object,default:null}},emits:["install","star","details","help","update","cancel-install"],setup(i){const o=i,m=h(!1),B=C(()=>o.task&&o.task.status==="running");function P(){m.value=!0}function M(g,r=100){return g?g.length<=r?g:g.substring(0,r)+"...":""}return(g,r)=>(l(),a("div",ht,[s("button",{onClick:r[0]||(r[0]=I=>g.$emit("star")),class:"absolute top-3 right-3 p-1 text-gray-400 hover:text-yellow-500 dark:hover:text-yellow-400 transition-colors z-10"},[i.isStarred?(l(),D(we,{key:0,class:"w-6 h-6 text-yellow-500 dark:text-yellow-400"})):(l(),D(ke,{key:1,class:"w-6 h-6"}))]),s("div",yt,[s("div",bt,[s("div",wt,[i.app.icon&&!m.value?(l(),a("img",{key:0,src:i.app.icon,onError:P,alt:"App Icon",class:"h-full w-full object-cover"},null,40,kt)):(l(),a("svg",xt,r[6]||(r[6]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"},null,-1)])))]),s("div",_t,[s("h3",{class:"font-bold text-lg text-gray-900 dark:text-white truncate pr-8",title:i.app.name},u(i.app.name),9,At),s("p",{class:"text-sm text-gray-600 dark:text-gray-400 truncate",title:`by ${i.app.author}`},"by "+u(i.app.author||"Unknown"),9,$t)])]),s("p",Ct,u(M(i.app.description)),1)]),s("div",It,[s("div",St,[i.app.version?(l(),a("div",Lt,[c(xe,{class:"w-3.5 h-3.5"}),s("span",null,"v"+u(i.app.version),1)])):y("",!0),s("div",Mt,u(i.app.category||"General"),1)]),s("div",jt,[s("button",{onClick:r[1]||(r[1]=I=>g.$emit("details")),class:"btn btn-secondary flex-1 flex items-center justify-center gap-1.5 text-xs"},[c(_e,{class:"w-4 h-4"}),r[7]||(r[7]=ne(" Details "))]),i.app.has_readme?(l(),a("button",{key:0,onClick:r[2]||(r[2]=I=>g.$emit("help")),class:"btn btn-secondary flex-1 flex items-center justify-center gap-1.5 text-xs"},[c(pt,{class:"w-4 h-4"}),r[8]||(r[8]=ne(" Help "))])):y("",!0)]),B.value?(l(),a("div",Tt,[s("div",Ut,[s("div",{class:"bg-blue-500 h-2.5 rounded-full",style:Ae({width:`${i.task.progress}%`})},null,4)]),s("button",{onClick:r[3]||(r[3]=I=>g.$emit("cancel-install",i.task.id)),class:"btn btn-danger w-full text-xs"},"Cancel")])):i.app.update_available?(l(),a("button",{key:1,onClick:r[4]||(r[4]=I=>g.$emit("update")),class:"btn btn-warning w-full flex items-center justify-center gap-2"},[c(ft,{class:"w-4 h-4"}),r[9]||(r[9]=s("span",null,"Update Available",-1))])):i.app.is_installed?(l(),a("div",Dt,[c(Ce,{class:"w-5 h-5"}),r[11]||(r[11]=s("span",null,"Installed",-1))])):(l(),a("button",{key:2,onClick:r[5]||(r[5]=I=>g.$emit("install")),class:"btn btn-primary w-full flex items-center justify-center gap-2"},[c($e,{class:"w-4 h-4"}),r[10]||(r[10]=s("span",null,"Install",-1))]))])]))}},Rt={},Zt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 animate-pulse"};function Vt(i,o){return l(),a("div",Zt,o[0]||(o[0]=[Ie('<div class="flex items-start gap-4 mb-3"><div class="h-16 w-16 rounded-md flex-shrink-0 bg-gray-300 dark:bg-gray-700"></div><div class="flex-grow min-w-0 mt-1"><div class="h-5 w-3/4 rounded bg-gray-300 dark:bg-gray-600"></div><div class="h-4 w-1/2 rounded bg-gray-200 dark:bg-gray-700 mt-2"></div></div></div><div class="space-y-2"><div class="h-4 rounded bg-gray-200 dark:bg-gray-700"></div><div class="h-4 rounded bg-gray-200 dark:bg-gray-700"></div><div class="h-4 w-5/6 rounded bg-gray-200 dark:bg-gray-700"></div></div><div class="mt-5"><div class="flex items-center justify-between text-xs mb-3"><div class="h-4 w-12 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="h-4 w-20 rounded-full bg-gray-200 dark:bg-gray-700"></div></div><div class="h-10 w-full rounded-md bg-gray-300 dark:bg-gray-600"></div></div>',3)]))}const Bt=b(Rt,[["render",Vt]]),Nt={class:"space-y-8"},zt={class:"border-b border-gray-200 dark:border-gray-700"},Pt={class:"-mb-px flex space-x-6","aria-label":"Tabs"},Ht={key:0},Ot={class:"flex justify-between items-center mb-4 flex-wrap gap-2"},Et={class:"flex items-center gap-2"},Ft=["disabled"],qt={key:0,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm mb-6 overflow-hidden"},Wt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Gt={class:"md:col-span-2"},Jt={class:"flex justify-end"},Kt=["disabled"],Qt={key:0,class:"text-center p-4"},Xt={key:1,class:"text-center p-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},Yt={key:2,class:"space-y-4"},es={class:"flex-grow truncate"},ts={class:"font-semibold text-gray-900 dark:text-white"},ss=["title"],ns={class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},ls={class:"flex items-center gap-x-2 flex-shrink-0"},as=["onClick","disabled"],os=["onClick","disabled"],rs={key:1},is={class:"flex justify-between items-center mb-4 flex-wrap gap-2"},ds=["disabled"],cs={class:"space-y-4"},us={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},ps={class:"relative lg:col-span-1"},gs={class:"grid grid-cols-2 lg:col-span-2 gap-4"},vs=["value"],ms={class:"flex items-center gap-2"},fs=["value"],hs={key:0,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6"},ys={key:1,class:"text-center p-10 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},bs={key:2,class:"text-center p-10 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},ws={key:3},ks={key:0,class:"space-y-8"},xs={class:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3 border-b pb-2 dark:border-gray-700"},_s={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6"},As={key:1,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6"},$s={key:2},Cs={key:0,class:"text-center p-10"},Is={key:1,class:"text-center p-10 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},Ss={key:2,class:"space-y-4"},Ls={class:"flex items-center gap-4 flex-grow truncate"},Ms=["src"],js={class:"flex-grow truncate"},Ts=["title"],Us=["title"],Ds={class:"flex items-center gap-x-2 flex-shrink-0 flex-wrap justify-end"},Rs={key:0,class:"flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400"},Zs={class:"capitalize"},Vs=["onClick"],Bs=["onClick"],Ns=["href"],zs=["onClick"],Ps=["onClick"],Hs=["onClick"],Os=["onClick","disabled"],Es=["onClick"],Fs={__name:"AppsManagement",setup(i){const o=Se(),m=Le(),{zooRepositories:B,isLoadingZooRepositories:P,zooApps:M,isLoadingZooApps:g,installedApps:r,isLoadingInstalledApps:I,tasks:G,activeTaskIds:qs}=Me(o),w=h("repositories"),R=h(!1),k=h({name:"",url:""}),p=h(null),j=h(""),N=h("All"),Z=h("All"),z=h(!1),T=h("last_update_date"),V=h("desc"),_=h(JSON.parse(localStorage.getItem("starredApps")||"[]")),ie=[{value:"last_update_date",label:"Last Updated"},{value:"creation_date",label:"Creation Date"},{value:"name",label:"Name"},{value:"author",label:"Author"}];je(()=>{o.fetchZooRepositories(),o.fetchZooApps(),o.fetchInstalledApps(),o.fetchTasks()}),le(w,n=>{n==="available_apps"&&(o.fetchZooApps(),o.fetchInstalledApps(),o.fetchTasks()),n==="installed_apps"&&(o.fetchInstalledApps(),o.fetchTasks())}),le(_,n=>{localStorage.setItem("starredApps",JSON.stringify(n))},{deep:!0});const de=C(()=>{const n=new Map;return G.value.forEach(e=>{if(e.name.startsWith("Installing app: ")){const t=e.name.replace("Installing app: ","");(!n.has(t)||new Date(e.created_at)>new Date(n.get(t).created_at))&&n.set(t,e)}}),M.value.map(e=>{const t=n.get(e.name);return{...e,task:t&&(t.status==="running"||t.status==="pending")?t:null}})}),J=C(()=>B.value?[...B.value].sort((n,e)=>n.name.localeCompare(e.name)):[]),ce=C(()=>{const n=new Set(M.value.map(e=>e.category||"Uncategorized"));return["All",...Array.from(n).sort()]}),H=C(()=>{let n=de.value.filter(e=>{const t=Z.value==="All"||Z.value==="Installed"&&e.is_installed||Z.value==="Uninstalled"&&!e.is_installed&&!e.task,d=N.value==="All"||e.category===N.value,v=!j.value||e.name.toLowerCase().includes(j.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(j.value.toLowerCase())||e.author&&e.author.toLowerCase().includes(j.value.toLowerCase());return t&&d&&v});return n.sort((e,t)=>{const d=_.value.includes(e.name),v=_.value.includes(t.name);if(d&&!v)return-1;if(!d&&v)return 1;if(e.is_installed&&!t.is_installed)return-1;if(!e.is_installed&&t.is_installed)return 1;let f=e[T.value]||"",A=t[T.value]||"";return T.value.includes("date")&&(f=f?new Date(f).getTime():0,A=A?new Date(A).getTime():0),typeof f=="string"&&typeof A=="string"?V.value==="asc"?f.localeCompare(A):A.localeCompare(f):V.value==="asc"?f-A:A-f}),n}),K=C(()=>T.value!=="author"?null:H.value.reduce((n,e)=>{const t=e.author||"Unknown Author";return n[t]||(n[t]=[]),n[t].push(e),n},{})),ue=C(()=>r.value?[...r.value].sort((n,e)=>n.name.localeCompare(e.name)):[]),Q=C(()=>{const n=new Map;return G.value.forEach(e=>{let t="";e.name.startsWith("Start app: ")?t=e.name.replace("Start app: ",""):e.name.startsWith("Installing app: ")&&(t=e.name.replace("Installing app: ","")),t&&(e.status==="running"||e.status==="pending")&&(!n.has(t)||new Date(e.created_at)>new Date(n.get(t).created_at))&&n.set(t,e)}),ue.value.map(e=>({...e,task:n.get(e.name)||null}))});function X(n){const e=_.value.indexOf(n);e>-1?_.value.splice(e,1):_.value.push(n)}function pe(n){return n?new Date(n).toLocaleString():"Never"}async function ge(){if(!k.value.name||!k.value.url){m.addNotification("Repository name and URL are required.","warning");return}p.value="add";try{await o.addZooRepository(k.value.name,k.value.url),k.value={name:"",url:""},R.value=!1}catch{}finally{p.value=null}}async function ve(n){p.value=n.id;try{await o.pullZooRepository(n.id)}catch{}finally{p.value=null}}async function me(){z.value=!0;try{await o.pullAllZooRepositories()}finally{z.value=!1}}async function fe(n){if(await m.showConfirmation({title:`Delete Repository '${n.name}'?`,message:"This will remove the repository from the list and delete its cached files from the server. This action cannot be undone.",confirmText:"Delete"})){p.value=n.id;try{await o.deleteZooRepository(n.id)}catch{}finally{p.value=null}}}function O(n){m.openModal("appInstall",{app:n})}function Y(n){const e=M.value.find(t=>t.name===n.name);if(!e){m.addNotification(`Could not find app details for '${n.name}' in the zoo. Try refreshing repositories.`,"error");return}m.showConfirmation({title:`Update '${n.name}'?`,message:"This will reinstall the app with the latest version from the zoo. The app will be stopped during this process. Are you sure you want to continue?",confirmText:"Update"}).then(t=>{t&&O(e)})}async function ee(n,e){p.value=`${e}-${n}`;try{e==="start"&&await o.startApp(n),e==="stop"&&await o.stopApp(n)}catch{}finally{p.value=null}}async function he(n){if(await m.showConfirmation({title:`Uninstall '${n.name}'?`,message:"This will stop the app if it is running and permanently delete its files and virtual environment. This action cannot be undone.",confirmText:"Uninstall"})){p.value=`uninstall-${n.id}`;try{await o.uninstallApp(n.id)}catch{}finally{p.value=null}}}function te(n){m.openModal("appDetails",{app:n})}function ye(n){m.openModal("appConfig",{app:n})}async function be(n){try{const e=await o.fetchAppLog(n.id);m.openModal("sourceViewer",{title:`Logs: ${n.name}`,content:e||"No log content found.",language:"log"})}catch{}}async function se(n){try{const e=await o.fetchAppReadme(n.repository,n.folder_name);m.openModal("sourceViewer",{title:`README: ${n.name}`,content:e,language:"markdown"})}catch{}}async function E(n){await o.cancelTask(n)}return(n,e)=>(l(),a("div",Nt,[e[25]||(e[25]=s("div",null,[s("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Apps Management"),s("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"}," Install and manage LOLLMS Applications from various sources (Zoos). ")],-1)),s("div",zt,[s("nav",Pt,[s("button",{onClick:e[0]||(e[0]=t=>w.value="repositories"),class:S(["tab-button",w.value==="repositories"?"active":"inactive"])}," Repositories ",2),s("button",{onClick:e[1]||(e[1]=t=>w.value="available_apps"),class:S(["tab-button",w.value==="available_apps"?"active":"inactive"])}," Available Apps ",2),s("button",{onClick:e[2]||(e[2]=t=>w.value="installed_apps"),class:S(["tab-button",w.value==="installed_apps"?"active":"inactive"])}," Installed Apps ",2)])]),w.value==="repositories"?(l(),a("section",Ht,[s("div",Ot,[e[13]||(e[13]=s("h3",{class:"text-xl font-semibold"},"App Zoo Repositories",-1)),s("div",Et,[s("button",{onClick:me,class:"btn btn-secondary",disabled:z.value},[c(F,{class:S(["w-4 h-4",{"animate-spin":z.value}])},null,8,["class"]),e[12]||(e[12]=s("span",{class:"ml-2"},"Pull All",-1))],8,Ft),s("button",{onClick:e[3]||(e[3]=t=>R.value=!R.value),class:"btn btn-primary"},u(R.value?"Cancel":"Add Repository"),1)])]),c(De,{name:"form-fade"},{default:Te(()=>[R.value?(l(),a("div",qt,[s("form",{onSubmit:Ue(ge,["prevent"]),class:"space-y-4"},[s("div",Wt,[s("div",null,[e[14]||(e[14]=s("label",{for:"repo-name",class:"block text-sm font-medium"},"Name",-1)),U(s("input",{id:"repo-name","onUpdate:modelValue":e[4]||(e[4]=t=>k.value.name=t),type:"text",class:"input-field mt-1",placeholder:"e.g., Official Zoo",required:""},null,512),[[q,k.value.name]])]),s("div",Gt,[e[15]||(e[15]=s("label",{for:"repo-url",class:"block text-sm font-medium"},"Git URL",-1)),U(s("input",{id:"repo-url","onUpdate:modelValue":e[5]||(e[5]=t=>k.value.url=t),type:"url",class:"input-field mt-1",placeholder:"https://github.com/ParisNeo/lollms_apps_zoo.git",required:""},null,512),[[q,k.value.url]])])]),s("div",Jt,[s("button",{type:"submit",class:"btn btn-primary",disabled:p.value==="add"},u(p.value==="add"?"Adding...":"Add Repository"),9,Kt)])],32)])):y("",!0)]),_:1}),L(P)?(l(),a("div",Qt,"Loading repositories...")):J.value.length===0?(l(),a("div",Xt,e[16]||(e[16]=[s("p",null,"No App Zoo repositories have been added yet.",-1)]))):(l(),a("div",Yt,[(l(!0),a(x,null,$(J.value,t=>(l(),a("div",{key:t.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm flex flex-col md:flex-row md:items-center justify-between gap-4"},[s("div",es,[s("p",ts,u(t.name),1),s("p",{class:"text-sm text-gray-500 dark:text-gray-400 font-mono truncate",title:t.url},u(t.url),9,ss),s("p",ns,"Last updated: "+u(pe(t.last_pulled_at)),1)]),s("div",ls,[s("button",{onClick:d=>ve(t),class:"btn btn-secondary btn-sm",disabled:p.value===t.id,title:"Refresh (git pull)"},[c(F,{class:S(["w-4 h-4",{"animate-spin":p.value===t.id}])},null,8,["class"]),e[17]||(e[17]=s("span",{class:"ml-1"},"Pull",-1))],8,as),s("button",{onClick:d=>fe(t),class:"btn btn-danger btn-sm",disabled:p.value===t.id,title:"Delete"},[c(ae,{class:"w-4 h-4"})],8,os)])]))),128))]))])):y("",!0),w.value==="available_apps"?(l(),a("section",rs,[s("div",is,[e[19]||(e[19]=s("h3",{class:"text-xl font-semibold"},"Available Apps",-1)),s("button",{onClick:e[6]||(e[6]=t=>L(o).fetchZooApps()),class:"btn btn-secondary",disabled:L(g)},[c(F,{class:S(["w-4 h-4",{"animate-spin":L(g)}])},null,8,["class"]),e[18]||(e[18]=s("span",{class:"ml-2"},"Rescan All Sources",-1))],8,ds)]),s("div",cs,[s("div",us,[s("div",ps,[U(s("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=t=>j.value=t),placeholder:"Search apps...",class:"input-field w-full pl-10"},null,512),[[q,j.value]]),e[20]||(e[20]=s("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[s("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),s("div",gs,[U(s("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>Z.value=t),class:"input-field"},e[21]||(e[21]=[s("option",{value:"All"},"All Statuses",-1),s("option",{value:"Installed"},"Installed",-1),s("option",{value:"Uninstalled"},"Uninstalled",-1)]),512),[[W,Z.value]]),U(s("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>N.value=t),class:"input-field"},[(l(!0),a(x,null,$(ce.value,t=>(l(),a("option",{key:t,value:t},u(t),9,vs))),128))],512),[[W,N.value]])])]),s("div",ms,[U(s("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>T.value=t),class:"input-field w-48"},[(l(),a(x,null,$(ie,t=>s("option",{key:t.value,value:t.value},"Sort by "+u(t.label),9,fs)),64))],512),[[W,T.value]]),s("button",{onClick:e[11]||(e[11]=t=>V.value=V.value==="asc"?"desc":"asc"),class:"btn btn-secondary p-2"},[V.value==="asc"?(l(),D(Ke,{key:0,class:"w-5 h-5"})):(l(),D(et,{key:1,class:"w-5 h-5"}))])]),L(g)?(l(),a("div",hs,[(l(),a(x,null,$(8,t=>c(Bt,{key:t})),64))])):L(M).length===0?(l(),a("div",ys,e[22]||(e[22]=[s("h4",{class:"font-semibold"},"No Apps Found",-1),s("p",{class:"text-sm text-gray-500"},"Please add and pull a repository to see available apps.",-1)]))):H.value.length===0?(l(),a("div",bs,e[23]||(e[23]=[s("h4",{class:"font-semibold"},"No Matching Apps",-1),s("p",{class:"text-sm text-gray-500"},"Try adjusting your search or filter.",-1)]))):(l(),a("div",ws,[K.value?(l(),a("div",ks,[(l(!0),a(x,null,$(K.value,(t,d)=>(l(),a("div",{key:d},[s("h3",xs,u(d),1),s("div",_s,[(l(!0),a(x,null,$(t,v=>(l(),D(re,{key:`${v.repository}/${v.folder_name}`,app:v,task:v.task,"is-starred":_.value.includes(v.name),onStar:f=>X(v.name),onInstall:f=>O(v),onDetails:f=>te(v),onHelp:f=>se(v),onCancelInstall:E},null,8,["app","task","is-starred","onStar","onInstall","onDetails","onHelp"]))),128))])]))),128))])):(l(),a("div",As,[(l(!0),a(x,null,$(H.value,t=>(l(),D(re,{key:`${t.repository}/${t.folder_name}`,app:t,task:t.task,"is-starred":_.value.includes(t.name),onStar:d=>X(t.name),onInstall:d=>O(t),onUpdate:d=>Y(t),onDetails:d=>te(t),onHelp:d=>se(t),onCancelInstall:E},null,8,["app","task","is-starred","onStar","onInstall","onUpdate","onDetails","onHelp"]))),128))]))]))])])):y("",!0),w.value==="installed_apps"?(l(),a("section",$s,[L(I)?(l(),a("div",Cs,"Loading installed apps...")):Q.value.length===0?(l(),a("div",Is,e[24]||(e[24]=[s("h4",{class:"font-semibold"},"No Apps Installed",-1),s("p",{class:"text-sm text-gray-500"},'Go to the "Available Apps" tab to install an application.',-1)]))):(l(),a("div",Ss,[(l(!0),a(x,null,$(Q.value,t=>(l(),a("div",{key:t.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm flex flex-col md:flex-row md:items-center justify-between gap-4"},[s("div",Ls,[t.icon?(l(),a("img",{key:0,src:t.icon,class:"h-10 w-10 rounded-md flex-shrink-0 object-cover",alt:"App Icon"},null,8,Ms)):y("",!0),s("div",js,[s("p",{class:"font-semibold text-gray-900 dark:text-white truncate",title:t.name},u(t.name),9,Ts),s("p",{class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate",title:`Port: ${t.port}`},"Port: "+u(t.port),9,Us)])]),s("div",Ds,[t.task?(l(),a("div",Rs,[s("span",Zs,u(t.task.name.split(":")[0])+"... ("+u(t.task.progress)+"%)",1),s("button",{onClick:d=>E(t.task.id),class:"btn btn-warning btn-sm !p-1",title:"Cancel Task"},[c(oe,{class:"w-4 h-4"})],8,Vs)])):(l(),a(x,{key:1},[t.update_available?(l(),a("button",{key:0,onClick:d=>Y(t),class:"btn btn-warning btn-sm p-2",title:"Update App"},[c(lt,{class:"w-5 h-5"})],8,Bs)):y("",!0),s("span",{class:S(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":t.status==="running","bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300":t.status==="stopped","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300":t.status==="error"}])},u(t.status),3),t.status==="running"&&t.url?(l(),a("a",{key:1,href:t.url,target:"_blank",class:"btn btn-secondary btn-sm p-2",title:"Open App"},[c(qe,{class:"w-5 h-5"})],8,Ns)):y("",!0),s("button",{onClick:d=>ye(t),class:"btn btn-secondary btn-sm p-2",title:"Edit App Settings"},[c(Re,{class:"w-5 h-5"})],8,zs),s("button",{onClick:d=>be(t),class:"btn btn-secondary btn-sm p-2",title:"View App Logs"},[c(it,{class:"w-5 h-5"})],8,Ps),t.status!=="running"?(l(),a("button",{key:2,onClick:d=>ee(t.id,"start"),class:"btn btn-success btn-sm p-2",title:"Start App"},[c(Ne,{class:"w-5 h-5"})],8,Hs)):y("",!0),t.status==="running"?(l(),a("button",{key:3,onClick:d=>ee(t.id,"stop"),class:"btn btn-warning btn-sm p-2",disabled:p.value===`stop-${t.id}`,title:"Stop App"},[c(oe,{class:"w-5 h-5"})],8,Os)):y("",!0),s("button",{onClick:d=>he(t),class:"btn btn-danger btn-sm p-2",title:"Uninstall App"},[c(ae,{class:"w-5 h-5"})],8,Es)],64))])]))),128))]))])):y("",!0)]))}},Gs=b(Fs,[["__scopeId","data-v-a16db841"]]);export{Gs as default};
