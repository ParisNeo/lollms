import{u as w,s as L,r as f,o as N,k as h,b as i,e as r,f as t,d as p,l as y,w as A,F as x,m as k,h as b,t as u,n as V,p as C}from"./index-BMdIGedQ.js";const F={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},I={class:"border-t border-gray-200 dark:border-gray-700"},U={key:0},E=["for"],J=["id","onUpdate:modelValue","value"],M=["value"],O={class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},D={key:1,class:"relative flex items-start"},B={class:"flex h-6 items-center"},G=["id","onUpdate:modelValue"],R={class:"ml-3 text-sm leading-6"},j=["for"],P={class:"text-gray-500 dark:text-gray-400"},T={class:"flex justify-end pt-4"},z=["disabled"],H={key:0},q={key:1},W={__name:"GeneralSettings",setup(K){const _=w(),{user:n}=L(_),m=[{key:"auto_title",type:"toggle",label:"Automatic Discussion Title",description:"If enabled, a title will be automatically generated for new discussions.",defaultValue:!0},{key:"fun_mode",type:"toggle",label:"Fun Mode",description:"If activated, the AI will be more playful and creative.",defaultValue:!1},{key:"receive_notification_emails",type:"toggle",label:"Receive Notification Emails",description:"Allow the system to send you emails for announcements or other notifications.",defaultValue:!0},{key:"chat_active",type:"toggle",label:"Activate Social Chat",description:"Enable or disable direct messaging with other users.",defaultValue:!1,minLevel:2},{key:"user_ui_level",type:"select",label:"UI Level",description:"Adjust the complexity of the user interface. More advanced levels show more options.",defaultValue:0,options:[{value:0,text:"Beginner"},{value:1,text:"Novice"},{value:2,text:"Intermediate"},{value:3,text:"Advanced"},{value:4,text:"Expert"}]},{key:"first_page",type:"select",label:"Home Page",description:"Choose the default page you see after logging in.",defaultValue:"feed",options:[{value:"feed",text:"Social Feed",minLevel:2},{value:"new_discussion",text:"New Discussion"},{value:"last_discussion",text:"Last Used Discussion"}]},{key:"ai_response_language",type:"select",label:"AI Response Language",description:"Changes the output language of the AI messages.",defaultValue:"auto",options:[{value:"auto",text:"Auto"},{value:"en",text:"English"},{value:"fr",text:"French"},{value:"it",text:"Italian"},{value:"es",text:"Spanish"}]}],a=f({}),d=f(!1),c=f(!1);let v={};const g=()=>{if(n.value){const s={};m.forEach(o=>{s[o.key]=n.value[o.key]??o.defaultValue}),a.value=s,v=JSON.parse(JSON.stringify(a.value)),c.value=!1}};N(g),h(n,g,{deep:!0}),h(a,(s,o)=>{c.value=JSON.stringify(s)!==JSON.stringify(v),o&&s.user_ui_level===1&&o.user_ui_level!==1&&(a.value.first_page="new_discussion"),s.user_ui_level<2&&s.first_page==="feed"&&(a.value.first_page="new_discussion")},{deep:!0});async function S(){d.value=!0;try{await _.updateUserPreferences(a.value),v=JSON.parse(JSON.stringify(a.value)),c.value=!1}catch(s){console.error("Failed to save settings:",s)}finally{d.value=!1}}return(s,o)=>(r(),i("div",F,[o[0]||(o[0]=t("div",{class:"px-4 py-5 sm:p-6"},[t("h2",{class:"text-xl font-bold leading-6 text-gray-900 dark:text-white"},"General Settings"),t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-400"}," Customize your user interface experience and general application behavior. ")],-1)),t("div",I,[y(n)?(r(),i("form",{key:0,onSubmit:A(S,["prevent"]),class:"p-4 sm:p-6 space-y-8"},[(r(),i(x,null,k(m,e=>t("div",{key:e.key},[e.type==="select"?(r(),i("div",U,[t("label",{for:e.key,class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},u(e.label),9,E),b(t("select",{id:e.key,"onUpdate:modelValue":l=>a.value[e.key]=l,class:"input-field mt-1",value:a.value[e.key]},[(r(!0),i(x,null,k(e.options.filter(l=>!l.minLevel||y(n).user_ui_level>=l.minLevel),l=>(r(),i("option",{key:l.value,value:l.value},u(l.text),9,M))),128))],8,J),[[V,a.value[e.key]]]),t("p",O,u(e.description),1)])):p("",!0),e.type==="toggle"&&(!e.minLevel||y(n).user_ui_level>=e.minLevel)?(r(),i("div",D,[t("div",B,[b(t("input",{id:e.key,"onUpdate:modelValue":l=>a.value[e.key]=l,type:"checkbox",class:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-blue-600 focus:ring-blue-600 dark:focus:ring-blue-600 dark:ring-offset-gray-800"},null,8,G),[[C,a.value[e.key]]])]),t("div",R,[t("label",{for:e.key,class:"font-medium text-gray-900 dark:text-gray-300"},u(e.label),9,j),t("p",P,u(e.description),1)])])):p("",!0)])),64)),t("div",T,[t("button",{type:"submit",class:"btn btn-primary",disabled:d.value||!c.value},[d.value?(r(),i("span",H,"Saving...")):(r(),i("span",q,"Save General Settings"))],8,z)])],32)):p("",!0)])]))}};export{W as default};
