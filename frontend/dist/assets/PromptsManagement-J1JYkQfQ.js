import{a0 as lt,c as n,b as o,g as e,d,t as c,n as Q,f as ot,B as C,bL as jt,bM as Lt,k as g,bN as Nt,A as k,bO as At,D as St,bS as It,E as nt,S as ht,P as Dt,q as $t,p as Ct,s as _,r as u,x as w,w as U,o as Tt,y as zt,z as Pt,h as f,j as O,v as G,F as j,i as L,e as N,_ as Et,bJ as et,Q as Ut}from"./index-C0EgH78e.js";import Ot from"./IconArrowUpCircle-Bn7FCoou.js";import{_ as Qt,A as Rt}from"./AppCardSkeleton-DtJJ1uLs.js";const Zt={class:"card"},Vt={class:"card-header"},Yt=["src","alt"],_t={class:"flex-grow min-w-0"},Gt={class:"flex justify-between items-start"},Bt=["title"],Wt={class:"card-tags"},Ft={key:0,class:"tag installed-tag"},qt={key:1,class:"tag"},Ht={key:2,class:"tag"},Jt={key:3,class:"tag"},Xt={class:"card-body"},Kt=["title"],te={key:0,class:"px-4 pb-2 text-xs text-gray-400 dark:text-gray-500 flex items-center gap-1"},ee=["title"],se={class:"card-footer"},le={class:"flex-1 min-w-0"},oe={key:1,class:"flex gap-2 w-full"},ne={class:"flex-shrink-0 flex gap-1"},ae="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iY3VycmVudENvbG9yIj4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik05LjE3MiA0LjU4NmMxLjA3Mi0xLjA3MiAyLjgyNy0xLjA3MiAzLjkwNiAwIGwxLjkyOCAxLjkyOGMuMDkuMDkuMTQ2LjIxMy4xNDYuMzM3djEuMjE5Yy43MTMuMDU0IDEuMzk3LjIxOCAyLjAyOC40NzhsMS45MS0xLjA0Yy4xNTYtLjA4NS4zMy0uMTA0LjQ5OC0uMDVMMjAuNzUgOC4xN2MuMjU0LjA4NC4zOTQuMzQzLjM5NC42MjV2My40M2MwIC4yODItLjE0LjU0MS0uMzk0LjYyNWwtMi42NTQgMS40NDRjLS4xNjguMDktLjM0Mi4xMDgtLjUxLjA1M2wtMS45MS0xLjA0Yy0uNjMyLS4yNi0xLjMxNS0uNDI0LTIuMDI4LS40NzhWNS41NUw5LjE3MiA0LjU4NnpNNCAxMS4yNWMwLS45OTQuNTk2LTEuODYgMS40NDctMi4yNTlMMTAuMDMgNC40M2MtLjM2OS4wMjYtLjczLjEzOC0xLjA3Mi4zMzJsLTEuOTI4IDEuOTI4Yy0xLjA3MiAxLjA3Mi0xLjA3MiAyLjgyNyAwIDMuOTA2bDQuNTk2IDQuNTk2Yy4zNzQuMzc0LjU4Ni44OC41ODYgMS40MTR2My4yMDJjLS45NC4wNS0xLjg1NS4zNzktMi41My45NDNsLTEuNzM2IDEuNzM3YTEuNSAxLjUgMCAwMS0yLjEyMiAwTDMgMTkuNWExLjUgMS41IDAgMDEgMC0yLjEyMWwxLjczNy0xLjczN2MuNTY0LS41NjQgMS4yMzYtLjkxNCAxLjk0My0uOTk2YTQuNDgzIDQuNDgzIDAgMDEtLjY4LS44NDhWMTMuNWExLjUgMS41IDAgMDEtLjQ0LTEuMDYxTDEuNDQ3IDkuMDA5QTcuNSA3LjUgMCAwMSA0IDQuNUMyLjQ4IDEuNSA1LjMzNCAxLjUgNy4wMyA1LjAzaDEuOTQzYy4wMy4zNjIuMTE4LjcxLjI2IDEuMDQzTDQuNDMgMTAuODNjLS44NTEuNDUtMS40MyAxLjMyMi0xLjQzIDIuMjQ4djIuODQ4YzAgMS4zMy42NzIgMi41MzMgMS42ODggMy4yMThhLjc1Ljc1IDAgMTEtLjgyMiAxLjE4NEEzLjAwMiAzLjAwMiAwIDAgMSA0IDE2LjM0OFYxMS4yNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIgLz4KPC9zdmc+",ie={__name:"PromptCard",props:{prompt:{type:Object,required:!0},task:{type:Object,default:null},isStarred:{type:Boolean,default:!1}},emits:["star","install","update","uninstall","help","edit","view-task","cancel-install"],setup(i,{emit:m}){return(p,a)=>(o(),n("div",Zt,[e("div",Vt,[e("img",{src:i.prompt.icon||ae,alt:i.prompt.name,class:"card-icon"},null,8,Yt),e("div",_t,[e("div",Gt,[e("h3",{class:"card-title",title:i.prompt.name},c(i.prompt.name),9,Bt),e("button",{onClick:a[0]||(a[0]=ot(v=>p.$emit("star"),["stop"])),class:Q(["p-1.5 rounded-full transition-colors flex-shrink-0",i.isStarred?"bg-yellow-400/20 text-yellow-500":"text-gray-400 hover:text-yellow-500"])},[i.isStarred?(o(),C(jt,{key:0,class:"w-5 h-5"})):(o(),C(Lt,{key:1,class:"w-5 h-5"}))],2)]),e("div",Wt,[i.prompt.is_installed?(o(),n("span",Ft,"Installed")):d("",!0),i.prompt.author?(o(),n("span",qt,"by "+c(i.prompt.author),1)):d("",!0),i.prompt.category?(o(),n("span",Ht,c(i.prompt.category),1)):d("",!0),i.prompt.version?(o(),n("span",Jt,"v"+c(i.prompt.version),1)):d("",!0)])])]),e("div",Xt,[e("p",{class:"card-description",title:i.prompt.description},c(i.prompt.description),9,Kt)]),i.prompt.repository?(o(),n("div",te,[g(Nt,{class:"w-3 h-3"}),e("span",{class:"truncate",title:`From: ${i.prompt.repository}`},c(i.prompt.repository),9,ee)])):d("",!0),e("div",se,[e("div",le,[i.task?(o(),C(Qt,{key:0,task:i.task,onView:a[1]||(a[1]=v=>p.$emit("view-task",i.task.id)),onCancel:a[2]||(a[2]=v=>p.$emit("cancel-install"))},null,8,["task"])):(o(),n("div",oe,[i.prompt.is_installed?i.prompt.update_available?(o(),n("button",{key:1,onClick:a[4]||(a[4]=v=>p.$emit("update",i.prompt)),class:"btn btn-warning w-full"},[g(Ot,{class:"w-4 h-4 mr-2"}),a[9]||(a[9]=k("Update "))])):(o(),n("button",{key:2,onClick:a[5]||(a[5]=v=>p.$emit("edit",i.prompt)),class:"btn btn-secondary w-full"},[g(St,{class:"w-4 h-4 mr-2"}),a[10]||(a[10]=k("Edit "))])):(o(),n("button",{key:0,onClick:a[3]||(a[3]=v=>p.$emit("install",i.prompt)),class:"btn btn-primary w-full"},[g(At,{class:"w-4 h-4 mr-2"}),a[8]||(a[8]=k("Install "))]))]))]),e("div",ne,[i.prompt.has_readme?(o(),n("button",{key:0,onClick:a[6]||(a[6]=v=>p.$emit("help",i.prompt)),class:"btn btn-secondary p-2",title:"Help"},[g(It,{class:"w-4 h-4"})])):d("",!0),i.prompt.is_installed?(o(),n("button",{key:1,onClick:a[7]||(a[7]=v=>p.$emit("uninstall",i.prompt)),class:"btn btn-danger-outline p-2",title:"Uninstall"},[g(nt,{class:"w-4 h-4"})])):d("",!0)])])]))}},st=lt(ie,[["__scopeId","data-v-be50f213"]]),re={class:"space-y-6"},de={class:"border-b border-gray-200 dark:border-gray-700"},ue={class:"-mb-px flex space-x-6"},ce={key:0},me={class:"space-y-4"},pe={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},ve={class:"relative lg:col-span-1"},ye={class:"grid grid-cols-1 sm:grid-cols-3 lg:col-span-3 gap-4"},ge=["value"],Me=["value"],fe={key:0,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},be={key:1,class:"empty-state-card"},ke={key:2},xe={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},we={key:0,class:"flex justify-between items-center mt-6"},je=["disabled"],Le={class:"text-sm text-gray-600 dark:text-gray-400"},Ne=["disabled"],Ae={key:1},Se={class:"flex justify-between items-center mb-4"},Ie={class:"flex gap-2"},he={key:0,class:"text-center p-4"},De={key:1,class:"empty-state-card"},$e={key:2,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},Ce={key:2},Te={class:"flex justify-between items-center mb-4"},ze={key:0,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm mb-6"},Pe={class:"flex items-center gap-x-4"},Ee={key:0},Ue=["required"],Oe={key:1},Qe=["required"],Re={key:1,class:"text-center p-4"},Ze={key:2,class:"empty-state-card"},Ve={key:3,class:"space-y-4"},Ye={class:"font-semibold"},_e={class:"text-sm text-gray-500"},Ge={class:"text-xs text-gray-400"},Be={class:"flex items-center gap-2"},We=["onClick"],Fe=["onClick"],qe={__name:"PromptsManagement",setup(i){const m=ht(),p=Dt(),a=$t(),v=Ct(),{on:at,off:it}=zt(),{promptZooRepositories:B,isLoadingPromptZooRepositories:rt,zooPrompts:T,isLoadingZooPrompts:dt}=_(m),{systemPrompts:z,isLoading:W}=_(v),{tasks:ut}=_(p),M=u("zoo"),r=u({type:"git",name:"",url:"",path:""}),A=u(!1),x=u(null),P=u(""),S=u("All"),I=u("All"),h=u("All"),F=u("name"),q=u("asc"),D=u(JSON.parse(localStorage.getItem("starredPrompts")||"[]")),y=u(1),R=u(24);let H=null;const Z=u(null),V=w(()=>T.value.total||0),J=w(()=>T.value.pages||1),ct=w(()=>{if(V.value===0)return"Showing 0-0 of 0";const l=(y.value-1)*R.value+1,t=Math.min(y.value*R.value,V.value);return`Showing ${l}-${t} of ${V.value}`});async function $(){const l={page:y.value,page_size:R.value,sort_by:F.value,sort_order:q.value,category:S.value!=="All"?S.value:void 0,repository:h.value!=="All"?h.value:void 0,search_query:P.value||void 0,installation_status:I.value!=="All"?I.value:void 0};await m.fetchZooPrompts(l)}const X=w(()=>{const l=new Map;return(ut.value||[]).forEach(t=>{var s;if((s=t==null?void 0:t.name)!=null&&s.startsWith("Installing prompt: ")&&(t.status==="running"||t.status==="pending")){const b=t.name.replace("Installing prompt: ","");l.set(b,t)}}),(T.value.items||[]).map(t=>({...t,task:l.get(t.folder_name)||null}))});function mt(){clearTimeout(H),H=setTimeout(()=>{y.value=1,$()},300)}U([F,q,S,I,h],()=>{y.value=1,$()}),U(P,mt),U(y,$),U(D,l=>{localStorage.setItem("starredPrompts",JSON.stringify(l))},{deep:!0}),Tt(()=>{v.fetchPrompts(),m.fetchPromptZooRepositories(),$(),at("task:completed",tt)}),Pt(()=>{it("task:completed",tt)});const E=w(()=>Array.isArray(B.value)?[...B.value].sort((l,t)=>(l.name||"").localeCompare(t.name||"")):[]),pt=w(()=>["All","Starred",...T.value.categories||[]]);function vt(l){return l?new Date(l).toLocaleString():"Never"}async function yt(){if(!r.value.name){a.addNotification("Repository name is required.","warning");return}const l={name:r.value.name};r.value.type==="git"?l.url=r.value.url:l.path=r.value.path,x.value="add";try{await m.addPromptZooRepository(l),r.value={type:"git",name:"",url:"",path:""},A.value=!1}finally{x.value=null}}async function gt(l){x.value=l.id;try{await m.pullPromptZooRepository(l.id)}finally{x.value=null}}async function Mt(l){if(await a.showConfirmation({title:`Delete Repository '${l.name}'?`})){x.value=l.id;try{await m.deletePromptZooRepository(l.id)}finally{x.value=null}}}async function ft(l){await m.installZooPrompt({repository:l.repository,folder_name:l.folder_name})}async function K(l){const t=z.value.find(s=>s.name===l.name);t&&await a.showConfirmation({title:`Uninstall '${l.name}'?`,message:"This will remove the prompt from the system."})&&(await m.deleteSystemPrompt(t.id),await $())}async function bt(l){const t=await m.fetchPromptReadme(l.repository,l.folder_name);a.openModal("sourceViewer",{title:`README: ${l.name}`,content:t,language:"markdown"})}function kt(l){const t=D.value.indexOf(l);t>-1?D.value.splice(t,1):D.value.push(l)}function xt(){a.openModal("generatePrompt",{isSystemPrompt:!0,onTaskSubmitted:l=>{Z.value=l}})}function tt(l){l&&l.id===Z.value&&(Z.value=null,a.isModalOpen("tasksManager")&&a.closeModal("tasksManager"),l.status==="completed"&&l.result?Y(l.result):a.addNotification("Prompt generation did not complete successfully.","warning"))}async function wt(l){const t=z.value.find(s=>s.name===l.name);t&&await m.updateSystemPromptFromZoo(t.id)}function Y(l){m.setPromptToEdit({...l}),a.openModal("editSystemPrompt")}return(l,t)=>(o(),n("div",re,[e("div",de,[e("nav",ue,[e("button",{onClick:t[0]||(t[0]=s=>M.value="zoo"),class:Q(["tab-button",M.value==="zoo"?"active":"inactive"])},"Zoo",2),e("button",{onClick:t[1]||(t[1]=s=>M.value="installed"),class:Q(["tab-button",M.value==="installed"?"active":"inactive"])},"Installed",2),e("button",{onClick:t[2]||(t[2]=s=>M.value="source"),class:Q(["tab-button",M.value==="source"?"active":"inactive"])},"Repositories",2)])]),M.value==="zoo"?(o(),n("section",ce,[t[20]||(t[20]=e("h3",{class:"text-xl font-semibold mb-4"},"Prompts Zoo",-1)),e("div",me,[e("div",pe,[e("div",ve,[f(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>P.value=s),type:"text",placeholder:"Search Prompts...",class:"input-field w-full pl-10"},null,512),[[O,P.value]]),t[16]||(t[16]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),e("div",ye,[f(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>I.value=s),class:"input-field"},t[17]||(t[17]=[e("option",{value:"All"},"All Statuses",-1),e("option",{value:"Installed"},"Installed",-1),e("option",{value:"Uninstalled"},"Uninstalled",-1)]),512),[[G,I.value]]),f(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>S.value=s),class:"input-field"},[(o(!0),n(j,null,L(pt.value,s=>(o(),n("option",{key:s,value:s},c(s),9,ge))),128))],512),[[G,S.value]]),f(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>h.value=s),class:"input-field"},[t[18]||(t[18]=e("option",{value:"All"},"All Sources",-1)),(o(!0),n(j,null,L(E.value,s=>(o(),n("option",{key:s.id,value:s.name},c(s.name),9,Me))),128))],512),[[G,h.value]])])]),N(dt)||N(W)?(o(),n("div",fe,[(o(),n(j,null,L(6,s=>g(Rt,{key:s})),64))])):X.value.length===0?(o(),n("div",be,t[19]||(t[19]=[e("h4",{class:"font-semibold"},"No Prompts Found",-1)]))):(o(),n("div",ke,[e("div",xe,[(o(!0),n(j,null,L(X.value,s=>(o(),C(st,{key:s.id||`${s.repository}/${s.folder_name}`,prompt:s,task:s.task,"is-starred":D.value.includes(s.name),onStar:b=>kt(s.name),onInstall:ft,onUninstall:K,onHelp:bt,onUpdate:b=>wt(s)},null,8,["prompt","task","is-starred","onStar","onUpdate"]))),128))]),J.value>1?(o(),n("div",we,[e("button",{onClick:t[7]||(t[7]=s=>y.value--),disabled:y.value===1,class:"btn btn-secondary"},"Previous",8,je),e("span",Le,c(ct.value),1),e("button",{onClick:t[8]||(t[8]=s=>y.value++),disabled:y.value>=J.value,class:"btn btn-secondary"},"Next",8,Ne)])):d("",!0)]))])])):d("",!0),M.value==="installed"?(o(),n("section",Ae,[e("div",Se,[t[22]||(t[22]=e("h3",{class:"text-xl font-semibold"},"Installed Prompts",-1)),e("div",Ie,[e("button",{onClick:xt,class:"btn btn-secondary"},[g(Et,{class:"w-4 h-4 mr-2"}),t[21]||(t[21]=k(" Generate with AI"))]),e("button",{onClick:t[9]||(t[9]=s=>Y({})),class:"btn btn-primary"},"Create New Prompt")])]),N(W)?(o(),n("div",he,"Loading...")):N(z).length===0?(o(),n("div",De,t[23]||(t[23]=[e("p",null,"No system prompts installed.",-1)]))):(o(),n("div",$e,[(o(!0),n(j,null,L(N(z),s=>(o(),C(st,{key:s.id,prompt:{...s,is_installed:!0},onEdit:b=>Y(s),onUninstall:b=>K(s)},null,8,["prompt","onEdit","onUninstall"]))),128))]))])):d("",!0),M.value==="source"?(o(),n("section",Ce,[e("div",Te,[t[24]||(t[24]=e("h3",{class:"text-xl font-semibold"},"Prompt Zoo Repositories",-1)),e("button",{onClick:t[10]||(t[10]=s=>A.value=!A.value),class:"btn btn-primary"},c(A.value?"Cancel":"Add"),1)]),A.value?(o(),n("div",ze,[e("form",{onSubmit:ot(yt,["prevent"]),class:"space-y-4"},[e("div",Pe,[e("label",null,[f(e("input",{type:"radio","onUpdate:modelValue":t[11]||(t[11]=s=>r.value.type=s),value:"git",class:"radio-input"},null,512),[[et,r.value.type]]),t[25]||(t[25]=k(" Git"))]),e("label",null,[f(e("input",{type:"radio","onUpdate:modelValue":t[12]||(t[12]=s=>r.value.type=s),value:"local",class:"radio-input"},null,512),[[et,r.value.type]]),t[26]||(t[26]=k(" Local"))])]),e("div",null,[t[27]||(t[27]=e("label",null,"Name",-1)),f(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>r.value.name=s),type:"text",class:"input-field",required:""},null,512),[[O,r.value.name]])]),r.value.type==="git"?(o(),n("div",Ee,[t[28]||(t[28]=e("label",null,"URL",-1)),f(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>r.value.url=s),type:"url",class:"input-field",required:r.value.type==="git"},null,8,Ue),[[O,r.value.url]])])):d("",!0),r.value.type==="local"?(o(),n("div",Oe,[t[29]||(t[29]=e("label",null,"Path",-1)),f(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>r.value.path=s),type:"text",class:"input-field",required:r.value.type==="local"},null,8,Qe),[[O,r.value.path]])])):d("",!0),t[30]||(t[30]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"btn btn-primary"},"Add")],-1))],32)])):d("",!0),N(rt)?(o(),n("div",Re,"Loading...")):!E.value||E.value.length===0?(o(),n("div",Ze,t[31]||(t[31]=[e("p",null,"No repositories added.",-1)]))):(o(),n("div",Ve,[(o(!0),n(j,null,L(E.value,s=>(o(),n("div",{key:s.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm flex items-center justify-between"},[e("div",null,[e("p",Ye,c(s.name),1),e("p",_e,c(s.url),1),e("p",Ge,"Pulled: "+c(vt(s.last_pulled_at)),1)]),e("div",Be,[e("button",{onClick:b=>gt(s),class:"btn btn-secondary btn-sm"},[g(Ut,{class:"w-4 h-4 mr-1"}),k(c(s.type==="git"?"Pull":"Rescan"),1)],8,We),s.is_deletable?(o(),n("button",{key:0,onClick:b=>Mt(s),class:"btn btn-danger btn-sm"},[g(nt,{class:"w-4 h-4"})],8,Fe)):d("",!0)])]))),128))]))])):d("",!0)]))}},Ke=lt(qe,[["__scopeId","data-v-abb1fd53"]]);export{Ke as default};
