import{u as L,q as M,s as y,r as m,c as w,o as V,w as b,b as p,e as _,f as t,g as N,h as U,x as c,I as z,i as o,v as r,j as T}from"./index-qLYxsC-P.js";const P={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},A={class:"border-t border-gray-200 dark:border-gray-700"},C={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},I={class:"relative flex items-start"},J={class:"flex h-6 items-center"},O={class:"flex justify-end pt-4"},j=["disabled"],B={key:0},D={key:1},q={__name:"LLMSettings",setup(K){const g=L(),d=M(),{user:s}=y(g),{availableLollmsModelsGrouped:k,isLoadingLollmsModels:h}=y(d),l=m({lollms_model_name:"",llm_ctx_size:4096,llm_temperature:.7,llm_top_k:50,llm_top_p:.95,llm_repeat_penalty:1.1,llm_repeat_last_n:64,put_thoughts_in_context:!1}),u=m(!1),i=m(!1);let v={};const x=w({get:()=>l.value.lollms_model_name,set:n=>l.value.lollms_model_name=n}),f=()=>{s.value&&(l.value={lollms_model_name:s.value.lollms_model_name||"",llm_ctx_size:s.value.llm_ctx_size??4096,llm_temperature:s.value.llm_temperature??.7,llm_top_k:s.value.llm_top_k??50,llm_top_p:s.value.llm_top_p??.95,llm_repeat_penalty:s.value.llm_repeat_penalty??1.1,llm_repeat_last_n:s.value.llm_repeat_last_n??64,put_thoughts_in_context:s.value.put_thoughts_in_context||!1},v=JSON.parse(JSON.stringify(l.value)),i.value=!1)};V(()=>{d.availableLollmsModels.length===0&&d.fetchAvailableLollmsModels(),f()}),b(s,f,{deep:!0}),b(l,n=>{i.value=JSON.stringify(n)!==JSON.stringify(v)},{deep:!0});async function S(){u.value=!0;try{await g.updateUserPreferences(l.value)}catch{}finally{u.value=!1}}return(n,e)=>(_(),p("div",P,[e[16]||(e[16]=t("div",{class:"px-4 py-5 sm:p-6"},[t("h2",{class:"text-xl font-bold leading-6 text-gray-900 dark:text-white"},"LLM Configuration"),t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-400"}," Adjust the default parameters for the Large Language Model. These settings will apply to new discussions. ")],-1)),t("div",A,[t("form",{onSubmit:N(S,["prevent"]),class:"p-4 sm:p-6 space-y-6"},[t("div",null,[e[8]||(e[8]=t("label",{for:"lollmsModelSelect",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Default LLM Model",-1)),U(z,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),items:c(k),"is-loading":c(h),placeholder:"Select a model",class:"mt-1"},null,8,["modelValue","items","is-loading"])]),t("div",C,[t("div",null,[e[9]||(e[9]=t("label",{for:"contextSize",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Context Size (tokens)",-1)),o(t("input",{type:"number",id:"contextSize","onUpdate:modelValue":e[1]||(e[1]=a=>l.value.llm_ctx_size=a),class:"input-field mt-1",placeholder:"e.g., 4096"},null,512),[[r,l.value.llm_ctx_size,void 0,{number:!0}]])]),t("div",null,[e[10]||(e[10]=t("label",{for:"temperature",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Temperature",-1)),o(t("input",{type:"number",id:"temperature","onUpdate:modelValue":e[2]||(e[2]=a=>l.value.llm_temperature=a),class:"input-field mt-1",step:"0.01",min:"0",max:"2",placeholder:"e.g., 0.7"},null,512),[[r,l.value.llm_temperature,void 0,{number:!0}]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"topK",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Top K",-1)),o(t("input",{type:"number",id:"topK","onUpdate:modelValue":e[3]||(e[3]=a=>l.value.llm_top_k=a),class:"input-field mt-1",step:"1",min:"1",placeholder:"e.g., 50"},null,512),[[r,l.value.llm_top_k,void 0,{number:!0}]])]),t("div",null,[e[12]||(e[12]=t("label",{for:"topP",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Top P",-1)),o(t("input",{type:"number",id:"topP","onUpdate:modelValue":e[4]||(e[4]=a=>l.value.llm_top_p=a),class:"input-field mt-1",step:"0.01",min:"0",max:"1",placeholder:"e.g., 0.95"},null,512),[[r,l.value.llm_top_p,void 0,{number:!0}]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"repeatPenalty",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Repeat Penalty",-1)),o(t("input",{type:"number",id:"repeatPenalty","onUpdate:modelValue":e[5]||(e[5]=a=>l.value.llm_repeat_penalty=a),class:"input-field mt-1",step:"0.01",min:"0",placeholder:"e.g., 1.1"},null,512),[[r,l.value.llm_repeat_penalty,void 0,{number:!0}]])]),t("div",null,[e[14]||(e[14]=t("label",{for:"repeatLastN",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Repeat Last N",-1)),o(t("input",{type:"number",id:"repeatLastN","onUpdate:modelValue":e[6]||(e[6]=a=>l.value.llm_repeat_last_n=a),class:"input-field mt-1",step:"1",min:"0",placeholder:"e.g., 64"},null,512),[[r,l.value.llm_repeat_last_n,void 0,{number:!0}]])])]),t("div",I,[t("div",J,[o(t("input",{id:"putThoughts","onUpdate:modelValue":e[7]||(e[7]=a=>l.value.put_thoughts_in_context=a),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-blue-600 focus:ring-blue-600 dark:focus:ring-blue-600 dark:ring-offset-gray-800"},null,512),[[T,l.value.put_thoughts_in_context]])]),e[15]||(e[15]=t("div",{class:"ml-3 text-sm leading-6"},[t("label",{for:"putThoughts",class:"font-medium text-gray-900 dark:text-gray-300"},'Include "think" blocks in context'),t("p",{class:"text-gray-500 dark:text-gray-400"},"Allows the AI to see its previous reasoning steps.")],-1))]),t("div",O,[t("button",{type:"submit",class:"btn btn-primary",disabled:u.value||!i.value},[u.value?(_(),p("span",B,"Saving...")):(_(),p("span",D,"Save LLM Settings"))],8,j)])],32)])]))}};export{q as default};
