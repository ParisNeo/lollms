import{aj as S,a as k,r as v,c as w,o as _,w as y,b as i,e as n,f as t,g as T,ai as C,h as H,i as d,v as u,y as m,A as L,d as P,T as V,t as b,p as N}from"./index-BTshDTOS.js";const A={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},M={class:"space-y-8"},U={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},j={class:"flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-md"},z={key:0,class:"space-y-6 pt-4 border-t border-gray-200 dark:border-gray-600"},B={class:"mt-8 pt-5 border-t border-gray-200 dark:border-gray-700"},F={class:"flex justify-end"},E=["disabled"],O={key:1,class:"p-6 text-center"},q={class:"text-gray-500"},J={__name:"HttpsSettings",setup(D){const r=S(),x=k(),s=v({https_enabled:!1,ssl_certfile:"",ssl_keyfile:""}),o=v(!1),p=v(!1);let c="{}";const f=w(()=>r.globalSettings.filter(a=>a.category==="Server"));_(()=>{r.globalSettings.length===0?r.fetchGlobalSettings():g()}),y(()=>r.globalSettings,g,{deep:!0}),y(s,a=>{p.value=JSON.stringify(a)!==c},{deep:!0});function g(){const a={};f.value.length>0&&(f.value.forEach(e=>{a[e.key]=e.value}),s.value=a,c=JSON.stringify(s.value),p.value=!1)}async function h(){o.value=!0;try{await r.updateGlobalSettings({...s.value}),x.addNotification("HTTPS settings saved. A server restart is required for changes to take effect.","warning",8e3)}catch{}finally{o.value=!1}}return(a,e)=>(n(),i("div",A,[e[13]||(e[13]=t("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-xl font-semibold leading-6 text-gray-900 dark:text-white"}," Server & HTTPS Settings "),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Configure server binding and enable secure connections (HTTPS). ")],-1)),Object.keys(s.value).length?(n(),i("form",{key:0,onSubmit:T(h,["prevent"]),class:"p-6"},[t("div",M,[e[12]||(e[12]=C('<div class="p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800/50 rounded-lg"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><h3 class="text-sm font-medium text-yellow-800 dark:text-yellow-200">Restart Required</h3><div class="mt-2 text-sm text-yellow-700 dark:text-yellow-100"><p>Any changes made on this page will only take effect after the server application has been restarted.</p></div></div></div></div>',1)),t("div",U,[t("div",null,[e[5]||(e[5]=t("label",{for:"host",class:"block text-sm font-medium"},"Host Address",-1)),d(t("input",{type:"text",id:"host","onUpdate:modelValue":e[0]||(e[0]=l=>s.value.host=l),class:"input-field mt-1",placeholder:"e.g., 0.0.0.0"},null,512),[[u,s.value.host]])]),t("div",null,[e[6]||(e[6]=t("label",{for:"port",class:"block text-sm font-medium"},"Port",-1)),d(t("input",{type:"number",id:"port","onUpdate:modelValue":e[1]||(e[1]=l=>s.value.port=l),class:"input-field mt-1",placeholder:"e.g., 9642"},null,512),[[u,s.value.port,void 0,{number:!0}]])])]),t("div",j,[e[7]||(e[7]=t("span",{class:"flex-grow flex flex-col pr-4"},[t("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Enable HTTPS"),t("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"Serve the application over a secure HTTPS connection.")],-1)),t("button",{onClick:e[2]||(e[2]=l=>s.value.https_enabled=!s.value.https_enabled),type:"button",class:m([s.value.https_enabled?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out"])},[t("span",{class:m([s.value.https_enabled?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition-colors duration-200 ease-in-out"])},null,2)],2)]),H(V,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:L(()=>[s.value.https_enabled?(n(),i("div",z,[t("div",null,[e[8]||(e[8]=t("label",{for:"ssl_certfile",class:"block text-sm font-medium"},"SSL Certificate File Path",-1)),d(t("input",{type:"text",id:"ssl_certfile","onUpdate:modelValue":e[3]||(e[3]=l=>s.value.ssl_certfile=l),class:"input-field mt-1",placeholder:"/path/to/your/certificate.pem"},null,512),[[u,s.value.ssl_certfile]]),e[9]||(e[9]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"The full path to your SSL certificate file (e.g., cert.pem, fullchain.pem).",-1))]),t("div",null,[e[10]||(e[10]=t("label",{for:"ssl_keyfile",class:"block text-sm font-medium"},"SSL Key File Path",-1)),d(t("input",{type:"text",id:"ssl_keyfile","onUpdate:modelValue":e[4]||(e[4]=l=>s.value.ssl_keyfile=l),class:"input-field mt-1",placeholder:"/path/to/your/private_key.pem"},null,512),[[u,s.value.ssl_keyfile]]),e[11]||(e[11]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"The full path to your SSL private key file.",-1))])])):P("",!0)]),_:1})]),t("div",B,[t("div",F,[t("button",{type:"submit",class:"btn btn-primary",disabled:o.value||!p.value},b(o.value?"Saving...":"Save Server Settings"),9,E)])])],32)):(n(),i("div",O,[t("p",q,b(N(r).isLoadingSettings?"Loading settings...":"Could not load server settings."),1)]))]))}};export{J as default};
