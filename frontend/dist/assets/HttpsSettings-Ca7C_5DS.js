import{W as S,a as h,r as m,c as w,o as _,w as g,b as d,e as u,f as t,g as T,a2 as C,h as P,i as o,v as i,z as y,A as V,d as L,T as N,t as b,q as U}from"./index-BWST0Tav.js";const H={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},A={class:"space-y-8"},z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},M={class:"flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-md"},O={key:0,class:"space-y-6 pt-4 border-t border-gray-200 dark:border-gray-600"},B={class:"mt-8 pt-5 border-t border-gray-200 dark:border-gray-700"},E={class:"flex justify-end"},F=["disabled"],j={key:1,class:"p-6 text-center"},q={class:"text-gray-500"},R={__name:"HttpsSettings",setup(D){const r=S(),x=h(),s=m({host:"0.0.0.0",port:9642,public_domain_name:"",https_enabled:!1,ssl_certfile:"",ssl_keyfile:"",cors_origins_exceptions:""}),n=m(!1),p=m(!1);let v="{}";const c=w(()=>r.globalSettings.filter(a=>a.category==="Server"));_(()=>{r.globalSettings.length===0?r.fetchGlobalSettings():f()}),g(()=>r.globalSettings,f,{deep:!0}),g(s,a=>{p.value=JSON.stringify(a)!==v},{deep:!0});function f(){const a={};c.value.length>0&&(c.value.forEach(e=>{a[e.key]=e.value}),s.value={...s.value,...a},v=JSON.stringify(s.value),p.value=!1)}async function k(){n.value=!0;try{await r.updateGlobalSettings({...s.value}),x.addNotification("Server settings saved. A server restart is required for changes to take effect.","warning",8e3)}catch{}finally{n.value=!1}}return(a,e)=>(u(),d("div",H,[e[19]||(e[19]=t("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-xl font-semibold leading-6 text-gray-900 dark:text-white"}," Server & HTTPS Settings "),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Configure server binding and enable secure connections (HTTPS). ")],-1)),Object.keys(s.value).length?(u(),d("form",{key:0,onSubmit:T(k,["prevent"]),class:"p-6"},[t("div",A,[e[18]||(e[18]=C('<div class="p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800/50 rounded-lg"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><h3 class="text-sm font-medium text-yellow-800 dark:text-yellow-200">Restart Required</h3><div class="mt-2 text-sm text-yellow-700 dark:text-yellow-100"><p>Any changes made on this page will only take effect after the server application has been restarted.</p></div></div></div></div>',1)),t("div",z,[t("div",null,[e[7]||(e[7]=t("label",{for:"host",class:"block text-sm font-medium"},"Host Address",-1)),o(t("input",{type:"text",id:"host","onUpdate:modelValue":e[0]||(e[0]=l=>s.value.host=l),class:"input-field mt-1",placeholder:"e.g., 0.0.0.0"},null,512),[[i,s.value.host]])]),t("div",null,[e[8]||(e[8]=t("label",{for:"port",class:"block text-sm font-medium"},"Port",-1)),o(t("input",{type:"number",id:"port","onUpdate:modelValue":e[1]||(e[1]=l=>s.value.port=l),class:"input-field mt-1",placeholder:"e.g., 9642"},null,512),[[i,s.value.port,void 0,{number:!0}]])])]),t("div",null,[e[9]||(e[9]=t("label",{for:"public_domain_name",class:"block text-sm font-medium"},"Public Domain Name / IP",-1)),o(t("input",{type:"text",id:"public_domain_name","onUpdate:modelValue":e[2]||(e[2]=l=>s.value.public_domain_name=l),class:"input-field mt-1",placeholder:"e.g., my-lollms.com"},null,512),[[i,s.value.public_domain_name]]),e[10]||(e[10]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Used for links to apps when the server is bound to 0.0.0.0. If empty, it will try to auto-detect the server's public IP.",-1))]),t("div",null,[e[11]||(e[11]=t("label",{for:"cors_exceptions",class:"block text-sm font-medium"},"CORS Origins Exceptions",-1)),o(t("textarea",{id:"cors_exceptions","onUpdate:modelValue":e[3]||(e[3]=l=>s.value.cors_origins_exceptions=l),rows:"3",class:"input-field mt-1",placeholder:"http://localhost:8000, https://my-app.com"},null,512),[[i,s.value.cors_origins_exceptions]]),e[12]||(e[12]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Comma-separated list of additional origins to allow access from.",-1))]),t("div",M,[e[13]||(e[13]=t("span",{class:"flex-grow flex flex-col pr-4"},[t("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Enable HTTPS"),t("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"Serve the application over a secure HTTPS connection.")],-1)),t("button",{onClick:e[4]||(e[4]=l=>s.value.https_enabled=!s.value.https_enabled),type:"button",class:y([s.value.https_enabled?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out"])},[t("span",{class:y([s.value.https_enabled?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition-colors duration-200 ease-in-out"])},null,2)],2)]),P(N,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:V(()=>[s.value.https_enabled?(u(),d("div",O,[t("div",null,[e[14]||(e[14]=t("label",{for:"ssl_certfile",class:"block text-sm font-medium"},"SSL Certificate File Path",-1)),o(t("input",{type:"text",id:"ssl_certfile","onUpdate:modelValue":e[5]||(e[5]=l=>s.value.ssl_certfile=l),class:"input-field mt-1",placeholder:"/path/to/your/certificate.pem"},null,512),[[i,s.value.ssl_certfile]]),e[15]||(e[15]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"The full path to your SSL certificate file (e.g., cert.pem, fullchain.pem).",-1))]),t("div",null,[e[16]||(e[16]=t("label",{for:"ssl_keyfile",class:"block text-sm font-medium"},"SSL Key File Path",-1)),o(t("input",{type:"text",id:"ssl_keyfile","onUpdate:modelValue":e[6]||(e[6]=l=>s.value.ssl_keyfile=l),class:"input-field mt-1",placeholder:"/path/to/your/private_key.pem"},null,512),[[i,s.value.ssl_keyfile]]),e[17]||(e[17]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"The full path to your SSL private key file.",-1))])])):L("",!0)]),_:1})]),t("div",B,[t("div",E,[t("button",{type:"submit",class:"btn btn-primary",disabled:n.value||!p.value},b(n.value?"Saving...":"Save Server Settings"),9,F)])])],32)):(u(),d("div",j,[t("p",q,b(U(r).isLoadingSettings?"Loading settings...":"Could not load server settings."),1)]))]))}};export{R as default};
