import{al as D,a as I,s as U,r as x,c as N,o as P,b as a,e as o,d as f,f as e,t as n,i as u,E as v,v as c,y as E,F as B,z as A,x as b,A as p,g as j}from"./index-BL6MsFJ_.js";const $={class:"space-y-8"},q={key:0,class:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6"},O={class:"text-xl font-semibold mb-4"},z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},H=["value"],R=["placeholder"],K={class:"flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-md"},G={class:"flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-md"},J={class:"flex justify-end gap-3"},Q=["disabled"],W={class:"flex justify-between items-center mb-4"},X={key:0,class:"text-center p-6"},Y={key:1,class:"text-center p-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},Z={key:2,class:"space-y-4"},ee=["title"],te={class:"flex-grow"},se={class:"flex justify-between items-center"},le={class:"font-bold text-lg text-gray-900 dark:text-white"},ae={class:"flex gap-3"},oe=["onClick"],ie=["onClick"],ne={class:"text-sm text-gray-500 dark:text-gray-400"},de={class:"mt-2 text-xs space-y-1 text-gray-600 dark:text-gray-300"},re={key:0},ue={key:1},me={key:2},ce={__name:"BindingsSettings",setup(fe){const d=D(),S=I(),{bindings:k,availableBindingTypes:C,isLoadingBindings:L}=U(d),r=x(!1),m=x(null),g=x(!1),_=()=>({id:null,alias:"",name:"",host_address:"",models_path:"",service_key:"",default_model_name:"",verify_ssl_certificate:!0,is_active:!0}),l=x(_()),y=N(()=>m.value!==null);P(()=>{d.fetchBindings(),d.fetchAvailableBindingTypes()});function h(){m.value=null,l.value=_(),r.value=!0,window.scrollTo({top:0,behavior:"smooth"})}function V(i){m.value=i,l.value={...i,service_key:""},r.value=!0,window.scrollTo({top:0,behavior:"smooth"})}function w(){r.value=!1,m.value=null}async function T(){g.value=!0;try{const i={...l.value};delete i.id,y.value?await d.updateBinding(m.value.id,i):await d.addBinding(i),w()}catch{}finally{g.value=!1}}async function M(i){await S.showConfirmation({title:`Delete Binding '${i.alias}'?`,message:"Are you sure? This action cannot be undone.",confirmText:"Delete"})&&await d.deleteBinding(i.id)}return(i,t)=>(o(),a("div",$,[r.value?(o(),a("div",q,[e("h3",O,n(y.value?"Edit Binding":"Add New Binding"),1),e("form",{onSubmit:j(T,["prevent"]),class:"space-y-6"},[e("div",z,[e("div",null,[t[8]||(t[8]=e("label",{for:"alias",class:"block text-sm font-medium"},[v("Alias "),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{type:"text",id:"alias","onUpdate:modelValue":t[0]||(t[0]=s=>l.value.alias=s),class:"input-field mt-1",required:"",placeholder:"e.g., local_ollama"},null,512),[[c,l.value.alias]]),t[9]||(t[9]=e("p",{class:"text-xs text-gray-500 mt-1"},"A unique, short name for this configuration.",-1))]),e("div",null,[t[11]||(t[11]=e("label",{for:"name",class:"block text-sm font-medium"},[v("Binding Type "),e("span",{class:"text-red-500"},"*")],-1)),u(e("select",{id:"name","onUpdate:modelValue":t[1]||(t[1]=s=>l.value.name=s),class:"input-field mt-1",required:""},[t[10]||(t[10]=e("option",{disabled:"",value:""},"Select a type",-1)),(o(!0),a(B,null,A(b(C),s=>(o(),a("option",{key:s,value:s},n(s),9,H))),128))],512),[[E,l.value.name]])])]),e("div",null,[t[12]||(t[12]=e("label",{for:"host_address",class:"block text-sm font-medium"},"Host Address",-1)),u(e("input",{type:"text",id:"host_address","onUpdate:modelValue":t[2]||(t[2]=s=>l.value.host_address=s),class:"input-field mt-1",placeholder:"e.g., http://localhost:11434"},null,512),[[c,l.value.host_address]]),t[13]||(t[13]=e("p",{class:"text-xs text-gray-500 mt-1"},"URL for remote bindings like Ollama or OpenAI-compatible servers.",-1))]),e("div",null,[t[14]||(t[14]=e("label",{for:"models_path",class:"block text-sm font-medium"},"Models Path",-1)),u(e("input",{type:"text",id:"models_path","onUpdate:modelValue":t[3]||(t[3]=s=>l.value.models_path=s),class:"input-field mt-1",placeholder:"e.g., /path/to/your/models"},null,512),[[c,l.value.models_path]]),t[15]||(t[15]=e("p",{class:"text-xs text-gray-500 mt-1"},"Local file path for bindings that load models from disk (e.g., LlamaCPP).",-1))]),e("div",null,[t[16]||(t[16]=e("label",{for:"service_key",class:"block text-sm font-medium"},"Service API Key",-1)),u(e("input",{type:"password",id:"service_key","onUpdate:modelValue":t[4]||(t[4]=s=>l.value.service_key=s),class:"input-field mt-1",placeholder:y.value?"Leave blank to keep existing key":"Paste API key here"},null,8,R),[[c,l.value.service_key]]),t[17]||(t[17]=e("p",{class:"text-xs text-gray-500 mt-1"},"For services like OpenAI. Can also be set as an environment variable.",-1))]),e("div",null,[t[18]||(t[18]=e("label",{for:"default_model_name",class:"block text-sm font-medium"},"Default Model Name",-1)),u(e("input",{type:"text",id:"default_model_name","onUpdate:modelValue":t[5]||(t[5]=s=>l.value.default_model_name=s),class:"input-field mt-1",placeholder:"e.g., phi3:latest or gpt-4o-mini"},null,512),[[c,l.value.default_model_name]])]),e("div",K,[t[19]||(t[19]=e("span",{class:"flex-grow flex flex-col"},[e("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Verify SSL certificate"),e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Verifies SSL certificates. This is advises to avoid man in the middle attacks. If your server has no certificate or there is no authority that can validate it, you can deactivate this setting. But stay caucious.")],-1)),e("button",{onClick:t[6]||(t[6]=s=>l.value.verify_ssl_certificate=!l.value.verify_ssl_certificate),type:"button",class:p([l.value.verify_ssl_certificate?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out"])},[e("span",{class:p([l.value.verify_ssl_certificate?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition-colors duration-200 ease-in-out"])},null,2)],2)]),e("div",G,[t[20]||(t[20]=e("span",{class:"flex-grow flex flex-col"},[e("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Active"),e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"If disabled, users cannot see or use models from this binding.")],-1)),e("button",{onClick:t[7]||(t[7]=s=>l.value.is_active=!l.value.is_active),type:"button",class:p([l.value.is_active?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out"])},[e("span",{class:p([l.value.is_active?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition-colors duration-200 ease-in-out"])},null,2)],2)]),e("div",J,[e("button",{type:"button",onClick:w,class:"btn btn-secondary"},"Cancel"),e("button",{type:"submit",class:"btn btn-primary",disabled:g.value},n(g.value?"Saving...":y.value?"Save Changes":"Add Binding"),9,Q)])],32)])):f("",!0),e("div",null,[e("div",W,[t[21]||(t[21]=e("h2",{class:"text-2xl font-bold"},"LLM Bindings",-1)),r.value?f("",!0):(o(),a("button",{key:0,onClick:h,class:"btn btn-primary"},"+ Add New Binding"))]),b(L)?(o(),a("div",X,"Loading bindings...")):b(k).length===0&&!r.value?(o(),a("div",Y,[t[22]||(t[22]=e("p",null,"No LLM bindings configured yet.",-1)),e("button",{onClick:h,class:"mt-2 text-blue-600 hover:underline"},"Add your first one")])):(o(),a("div",Z,[(o(!0),a(B,null,A(b(k),s=>(o(),a("div",{key:s.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md flex items-start gap-4"},[e("span",{class:p(["mt-1 h-3 w-3 rounded-full flex-shrink-0",s.is_active?"bg-green-500":"bg-gray-400"]),title:s.is_active?"Active":"Inactive"},null,10,ee),e("div",te,[e("div",se,[e("h4",le,n(s.alias),1),e("div",ae,[e("button",{onClick:F=>V(s),class:"text-sm font-medium text-blue-600 hover:underline"},"Edit",8,oe),e("button",{onClick:F=>M(s),class:"text-sm font-medium text-red-600 hover:underline"},"Delete",8,ie)])]),e("p",ne,n(s.name),1),e("div",de,[s.host_address?(o(),a("p",re,[t[23]||(t[23]=e("span",{class:"font-semibold"},"Host:",-1)),v(" "+n(s.host_address),1)])):f("",!0),s.models_path?(o(),a("p",ue,[t[24]||(t[24]=e("span",{class:"font-semibold"},"Path:",-1)),v(" "+n(s.models_path),1)])):f("",!0),s.default_model_name?(o(),a("p",me,[t[25]||(t[25]=e("span",{class:"font-semibold"},"Default Model:",-1)),v(" "+n(s.default_model_name),1)])):f("",!0)])])]))),128))]))])]))}};export{ce as default};
