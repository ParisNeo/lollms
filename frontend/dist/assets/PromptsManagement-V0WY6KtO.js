import{W,c as n,b as a,g as e,d as p,t as c,n as Q,f as B,C as A,bJ as gt,bK as Mt,k as M,bL as ft,A as f,bM as bt,E as kt,bQ as wt,G as q,Q as jt,N as xt,x as Lt,q as Nt,s as O,r as j,j as x,w as $,o as At,y as St,z as It,_ as ht,h as g,l as P,e as u,v as z,F as L,i as N,bH as G,O as Ct}from"./index-Dgz_WaCM.js";import Dt from"./IconArrowUpCircle-CbOGDlrK.js";import{_ as $t,A as Pt}from"./AppCardSkeleton-6-MXcjhC.js";import zt from"./IconArrowDown-qlZHQUYG.js";import Tt from"./IconArrowUp-B7EPYD6g.js";const Et={class:"card"},Ut={class:"card-header"},Ot=["src","alt"],Qt={class:"flex-grow min-w-0"},Rt={class:"flex justify-between items-start"},Zt=["title"],Vt={class:"card-tags"},Yt={key:0,class:"tag installed-tag"},_t={key:1,class:"tag"},Ft={key:2,class:"tag"},Gt={key:3,class:"tag"},Wt={class:"card-body"},Bt=["title"],qt={key:0,class:"px-4 pb-2 text-xs text-gray-400 dark:text-gray-500 flex items-center gap-1"},Ht=["title"],Kt={class:"card-footer"},Jt={class:"flex-1 min-w-0"},Xt={key:1,class:"flex gap-2 w-full"},te={class:"flex-shrink-0 flex gap-1"},ee="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iY3VycmVudENvbG9yIj4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik05LjE3MiA0LjU4NmMxLjA3Mi0xLjA3MiAyLjgyNy0xLjA3MiAzLjkwNiAwIGwxLjkyOCAxLjkyOGMuMDkuMDkuMTQ2LjIxMy4xNDYuMzM3djEuMjE5Yy43MTMuMDU0IDEuMzk3LjIxOCAyLjAyOC40NzhsMS45MS0xLjA0Yy4xNTYtLjA4NS4zMy0uMTA0LjQ5OC0uMDVMMjAuNzUgOC4xN2MuMjU0LjA4NC4zOTQuMzQzLjM5NC42MjV2My40M2MwIC4yODItLjE0LjU0MS0uMzk0LjYyNWwtMi42NTQgMS40NDRjLS4xNjguMDktLjM0Mi4xMDgtLjUxLjA1M2wtMS45MS0xLjA0Yy0uNjMyLS4yNi0xLjMxNS0uNDI0LTIuMDI4LS40NzhWNS41NUw5LjE3MiA0LjU4NnpNNCAxMS4yNWMwLS45OTQuNTk2LTEuODYgMS40NDctMi4yNTlMMTAuMDMgNC40M2MtLjM2OS4wMjYtLjczLjEzOC0xLjA3Mi4zMzJsLTEuOTI4IDEuOTI4Yy0xLjA3MiAxLjA3Mi0xLjA3MiAyLjgyNyAwIDMuOTA2bDQuNTk2IDQuNTk2Yy4zNzQuMzc0LjU4Ni44OC41ODYgMS40MTR2My4yMDJjLS45NC4wNS0xLjg1NS4zNzktMi41My45NDNsLTEuNzM2IDEuNzM3YTEuNSAxLjUgMCAwMS0yLjEyMiAwTDMgMTkuNWExLjUgMS41IDAgMDEgMC0yLjEyMWwxLjczNy0xLjczN2MuNTY0LS41NjQgMS4yMzYtLjkxNCAxLjk0My0uOTk2YTQuNDgzIDQuNDgzIDAgMDEtLjY4LS44NDhWMTMuNWExLjUgMS41IDAgMDEtLjQ0LTEuMDYxTDEuNDQ3IDkuMDA5QTcuNSA3LjUgMCAwMSA0IDQuNUMyLjQ4IDEuNSA1LjMzNCAxLjUgNy4wMyA1LjAzaDEuOTQzYy4wMy4zNjIuMTE4LjcxLjI2IDEuMDQzTDQuNDMgMTAuODNjLS44NTEuNDUtMS40MyAxLjMyMi0xLjQzIDIuMjQ4djIuODQ4YzAgMS4zMy42NzIgMi41MzMgMS42ODggMy4yMThhLjc1Ljc1IDAgMTEtLjgyMiAxLjE4NEEzLjAwMiAzLjAwMiAwIDAgMSA0IDE2LjM0OFYxMS4yNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIgLz4KPC9zdmc+",se={__name:"PromptCard",props:{prompt:{type:Object,required:!0},task:{type:Object,default:null},isStarred:{type:Boolean,default:!1}},emits:["star","install","update","uninstall","help","edit","view-task","cancel-install"],setup(r,{emit:m}){return(y,i)=>(a(),n("div",Et,[e("div",Ut,[e("img",{src:r.prompt.icon||ee,alt:r.prompt.name,class:"card-icon"},null,8,Ot),e("div",Qt,[e("div",Rt,[e("h3",{class:"card-title",title:r.prompt.name},c(r.prompt.name),9,Zt),e("button",{onClick:i[0]||(i[0]=B(v=>y.$emit("star"),["stop"])),class:Q(["p-1.5 rounded-full transition-colors flex-shrink-0",r.isStarred?"bg-yellow-400/20 text-yellow-500":"text-gray-400 hover:text-yellow-500"])},[r.isStarred?(a(),A(gt,{key:0,class:"w-5 h-5"})):(a(),A(Mt,{key:1,class:"w-5 h-5"}))],2)]),e("div",Vt,[r.prompt.is_installed?(a(),n("span",Yt,"Installed")):p("",!0),r.prompt.author?(a(),n("span",_t,"by "+c(r.prompt.author),1)):p("",!0),r.prompt.category?(a(),n("span",Ft,c(r.prompt.category),1)):p("",!0),r.prompt.version?(a(),n("span",Gt,"v"+c(r.prompt.version),1)):p("",!0)])])]),e("div",Wt,[e("p",{class:"card-description",title:r.prompt.description},c(r.prompt.description),9,Bt)]),r.prompt.repository?(a(),n("div",qt,[M(ft,{class:"w-3 h-3"}),e("span",{class:"truncate",title:`From: ${r.prompt.repository}`},c(r.prompt.repository),9,Ht)])):p("",!0),e("div",Kt,[e("div",Jt,[r.task?(a(),A($t,{key:0,task:r.task,onView:i[1]||(i[1]=v=>y.$emit("view-task",r.task.id)),onCancel:i[2]||(i[2]=v=>y.$emit("cancel-install"))},null,8,["task"])):(a(),n("div",Xt,[r.prompt.is_installed?r.prompt.update_available?(a(),n("button",{key:1,onClick:i[4]||(i[4]=v=>y.$emit("update",r.prompt)),class:"btn btn-warning w-full"},[M(Dt,{class:"w-4 h-4 mr-2"}),i[9]||(i[9]=f("Update "))])):(a(),n("button",{key:2,onClick:i[5]||(i[5]=v=>y.$emit("edit",r.prompt)),class:"btn btn-secondary w-full"},[M(kt,{class:"w-4 h-4 mr-2"}),i[10]||(i[10]=f("Edit "))])):(a(),n("button",{key:0,onClick:i[3]||(i[3]=v=>y.$emit("install",r.prompt)),class:"btn btn-primary w-full"},[M(bt,{class:"w-4 h-4 mr-2"}),i[8]||(i[8]=f("Install "))]))]))]),e("div",te,[r.prompt.has_readme?(a(),n("button",{key:0,onClick:i[6]||(i[6]=v=>y.$emit("help",r.prompt)),class:"btn btn-secondary p-2",title:"Help"},[M(wt,{class:"w-4 h-4"})])):p("",!0),r.prompt.is_installed?(a(),n("button",{key:1,onClick:i[7]||(i[7]=v=>y.$emit("uninstall",r.prompt)),class:"btn btn-danger-outline p-2",title:"Uninstall"},[M(q,{class:"w-4 h-4"})])):p("",!0)])])]))}},oe=W(se,[["__scopeId","data-v-be50f213"]]),le={class:"space-y-6"},ae={class:"border-b border-gray-200 dark:border-gray-700"},ne={class:"-mb-px flex space-x-6"},ie={key:0},re={class:"flex justify-between items-center mb-4"},de={class:"flex gap-2"},ue={class:"space-y-4"},ce={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},pe={class:"relative lg:col-span-1"},me={class:"grid grid-cols-1 sm:grid-cols-3 lg:col-span-3 gap-4"},ye=["value"],ve=["value"],ge={class:"flex items-center gap-2"},Me=["value"],fe={key:0,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},be={key:1,class:"empty-state-card"},ke={key:2},we={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},je={key:0,class:"flex justify-between items-center mt-6"},xe=["disabled"],Le={class:"text-sm text-gray-600 dark:text-gray-400"},Ne=["disabled"],Ae={key:1},Se={class:"flex justify-between items-center mb-4"},Ie={key:0,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm mb-6"},he={class:"flex items-center gap-x-4"},Ce={key:0},De=["required"],$e={key:1},Pe=["required"],ze={key:1,class:"text-center p-4"},Te={key:2,class:"empty-state-card"},Ee={key:3,class:"space-y-4"},Ue={class:"font-semibold"},Oe={class:"text-sm text-gray-500"},Qe={class:"text-xs text-gray-400"},Re={class:"flex items-center gap-2"},Ze=["onClick"],Ve=["onClick"],Ye={__name:"PromptsManagement",setup(r){const m=jt(),y=xt(),i=Lt(),v=Nt(),{on:H,off:K}=St(),{promptFilters:l}=m,{promptZooRepositories:R,isLoadingPromptZooRepositories:J,zooPrompts:C,isLoadingZooPrompts:X}=O(m),{systemPrompts:Z,isLoading:tt}=O(v),{tasks:et}=O(y),b=j("zoo"),d=j({type:"git",name:"",url:"",path:""}),S=j(!1),k=j(null),I=j(JSON.parse(localStorage.getItem("starredPrompts")||"[]"));let V=null;const T=j(null),E=x(()=>C.value.total||0),Y=x(()=>C.value.pages||1),st=x(()=>{if(E.value===0)return"Showing 0-0 of 0";const o=(l.currentPage-1)*l.pageSize+1,t=Math.min(l.currentPage*l.pageSize,E.value);return`Showing ${o}-${t} of ${E.value}`});async function h(){const o={page:l.currentPage,page_size:l.pageSize,sort_by:l.sortKey,sort_order:l.sortOrder,category:l.selectedCategory!=="All"?l.selectedCategory:void 0,repository:l.selectedRepository!=="All"?l.selectedRepository:void 0,search_query:l.searchQuery||void 0,installation_status:l.installationStatusFilter!=="All"?l.installationStatusFilter:void 0};await m.fetchZooPrompts(o)}const _=x(()=>{const o=new Map;return(et.value||[]).forEach(t=>{var s;if((s=t==null?void 0:t.name)!=null&&s.startsWith("Installing prompt: ")&&(t.status==="running"||t.status==="pending")){const w=t.name.replace("Installing prompt: ","");o.set(w,t)}}),(C.value.items||[]).map(t=>({...t,task:o.get(t.folder_name)||null}))});function ot(){clearTimeout(V),V=setTimeout(()=>{l.currentPage!==1?l.currentPage=1:h()},300)}$(()=>[l.sortKey,l.sortOrder,l.selectedCategory,l.installationStatusFilter,l.selectedRepository],()=>{l.currentPage!==1?l.currentPage=1:h()}),$(()=>l.searchQuery,ot),$(()=>l.currentPage,h),$(I,o=>{localStorage.setItem("starredPrompts",JSON.stringify(o))},{deep:!0}),At(()=>{v.fetchPrompts(),m.fetchPromptZooRepositories(),h(),H("task:completed",F)}),It(()=>{K("task:completed",F)});const D=x(()=>Array.isArray(R.value)?[...R.value].sort((o,t)=>(o.name||"").localeCompare(t.name||"")):[]),lt=x(()=>["All","Starred",...C.value.categories||[]]),at=[{value:"name",label:"Name"},{value:"author",label:"Author"},{value:"last_update_date",label:"Last Updated"},{value:"creation_date",label:"Creation Date"}];function nt(o){return o?new Date(o).toLocaleString():"Never"}async function it(){if(!d.value.name){i.addNotification("Repository name is required.","warning");return}const o={name:d.value.name};d.value.type==="git"?o.url=d.value.url:o.path=d.value.path,k.value="add";try{await m.addPromptZooRepository(o),d.value={type:"git",name:"",url:"",path:""},S.value=!1}finally{k.value=null}}async function rt(o){k.value=o.id;try{await m.pullPromptZooRepository(o.id)}finally{k.value=null}}async function dt(o){if(await i.showConfirmation({title:`Delete Repository '${o.name}'?`})){k.value=o.id;try{await m.deletePromptZooRepository(o.id)}finally{k.value=null}}}async function ut(o){await m.installZooPrompt({repository:o.repository,folder_name:o.folder_name})}async function ct(o){const t=Z.value.find(s=>s.name===o.name);t&&await i.showConfirmation({title:`Uninstall '${o.name}'?`,message:"This will remove the prompt from the system."})&&(await m.deleteSystemPrompt(t.id),await h())}async function pt(o){const t=await m.fetchPromptReadme(o.repository,o.folder_name);i.openModal("sourceViewer",{title:`README: ${o.name}`,content:t,language:"markdown"})}function mt(o){const t=I.value.indexOf(o);t>-1?I.value.splice(t,1):I.value.push(o)}function yt(){i.openModal("generatePrompt",{isSystemPrompt:!0,onTaskSubmitted:o=>{T.value=o}})}function F(o){o&&o.id===T.value&&(T.value=null,i.isModalOpen("tasksManager")&&i.closeModal("tasksManager"),o.status==="completed"&&o.result?U(o.result):i.addNotification("Prompt generation did not complete successfully.","warning"))}async function vt(o){const t=Z.value.find(s=>s.name===o.name);t&&await m.updateSystemPromptFromZoo(t.id)}function U(o){i.openModal("editPrompt",{prompt:{...o},isSystemPrompt:!0})}return(o,t)=>(a(),n("div",le,[e("div",ae,[e("nav",ne,[e("button",{onClick:t[0]||(t[0]=s=>b.value="zoo"),class:Q(["tab-button",b.value==="zoo"?"active":"inactive"])},"Zoo",2),e("button",{onClick:t[1]||(t[1]=s=>b.value="source"),class:Q(["tab-button",b.value==="source"?"active":"inactive"])},"Repositories",2)])]),b.value==="zoo"?(a(),n("section",ie,[e("div",re,[t[18]||(t[18]=e("h3",{class:"text-xl font-semibold"},"Prompts Zoo",-1)),e("div",de,[e("button",{onClick:yt,class:"btn btn-secondary"},[M(ht,{class:"w-4 h-4 mr-2"}),t[17]||(t[17]=f(" Generate with AI "))]),e("button",{onClick:t[2]||(t[2]=s=>U({})),class:"btn btn-primary"},"Create New Prompt")])]),e("div",ue,[e("div",ce,[e("div",pe,[g(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>u(l).searchQuery=s),type:"text",placeholder:"Search Prompts...",class:"input-field w-full pl-10"},null,512),[[P,u(l).searchQuery]]),t[19]||(t[19]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),e("div",me,[g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>u(l).installationStatusFilter=s),class:"input-field"},t[20]||(t[20]=[e("option",{value:"All"},"All Statuses",-1),e("option",{value:"Installed"},"Installed",-1),e("option",{value:"Uninstalled"},"Uninstalled",-1)]),512),[[z,u(l).installationStatusFilter]]),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>u(l).selectedCategory=s),class:"input-field"},[(a(!0),n(L,null,N(lt.value,s=>(a(),n("option",{key:s,value:s},c(s),9,ye))),128))],512),[[z,u(l).selectedCategory]]),g(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>u(l).selectedRepository=s),class:"input-field"},[t[21]||(t[21]=e("option",{value:"All"},"All Sources",-1)),(a(!0),n(L,null,N(D.value,s=>(a(),n("option",{key:s.id,value:s.name},c(s.name),9,ve))),128))],512),[[z,u(l).selectedRepository]])])]),e("div",ge,[g(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>u(l).sortKey=s),class:"input-field w-48"},[(a(),n(L,null,N(at,s=>e("option",{key:s.value,value:s.value},"Sort by "+c(s.label),9,Me)),64))],512),[[z,u(l).sortKey]]),e("button",{onClick:t[8]||(t[8]=s=>u(l).sortOrder=u(l).sortOrder==="asc"?"desc":"asc"),class:"btn btn-secondary p-2"},[u(l).sortOrder==="asc"?(a(),A(Tt,{key:0,class:"w-5 h-5"})):(a(),A(zt,{key:1,class:"w-5 h-5"}))])]),u(X)||u(tt)?(a(),n("div",fe,[(a(),n(L,null,N(6,s=>M(Pt,{key:s})),64))])):_.value.length===0?(a(),n("div",be,t[22]||(t[22]=[e("h4",{class:"font-semibold"},"No Prompts Found",-1)]))):(a(),n("div",ke,[e("div",we,[(a(!0),n(L,null,N(_.value,s=>(a(),A(oe,{key:s.id||`${s.repository}/${s.folder_name}`,prompt:s,task:s.task,"is-starred":I.value.includes(s.name),onStar:w=>mt(s.name),onInstall:ut,onUninstall:ct,onHelp:pt,onUpdate:w=>vt(s),onEdit:w=>U(s)},null,8,["prompt","task","is-starred","onStar","onUpdate","onEdit"]))),128))]),Y.value>1?(a(),n("div",je,[e("button",{onClick:t[9]||(t[9]=s=>u(l).currentPage--),disabled:u(l).currentPage===1,class:"btn btn-secondary"},"Previous",8,xe),e("span",Le,c(st.value),1),e("button",{onClick:t[10]||(t[10]=s=>u(l).currentPage++),disabled:u(l).currentPage>=Y.value,class:"btn btn-secondary"},"Next",8,Ne)])):p("",!0)]))])])):p("",!0),b.value==="source"?(a(),n("section",Ae,[e("div",Se,[t[23]||(t[23]=e("h3",{class:"text-xl font-semibold"},"Prompt Zoo Repositories",-1)),e("button",{onClick:t[11]||(t[11]=s=>S.value=!S.value),class:"btn btn-primary"},c(S.value?"Cancel":"Add"),1)]),S.value?(a(),n("div",Ie,[e("form",{onSubmit:B(it,["prevent"]),class:"space-y-4"},[e("div",he,[e("label",null,[g(e("input",{type:"radio","onUpdate:modelValue":t[12]||(t[12]=s=>d.value.type=s),value:"git",class:"radio-input"},null,512),[[G,d.value.type]]),t[24]||(t[24]=f(" Git"))]),e("label",null,[g(e("input",{type:"radio","onUpdate:modelValue":t[13]||(t[13]=s=>d.value.type=s),value:"local",class:"radio-input"},null,512),[[G,d.value.type]]),t[25]||(t[25]=f(" Local"))])]),e("div",null,[t[26]||(t[26]=e("label",null,"Name",-1)),g(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>d.value.name=s),type:"text",class:"input-field",required:""},null,512),[[P,d.value.name]])]),d.value.type==="git"?(a(),n("div",Ce,[t[27]||(t[27]=e("label",null,"URL",-1)),g(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>d.value.url=s),type:"url",class:"input-field",required:d.value.type==="git"},null,8,De),[[P,d.value.url]])])):p("",!0),d.value.type==="local"?(a(),n("div",$e,[t[28]||(t[28]=e("label",null,"Path",-1)),g(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>d.value.path=s),type:"text",class:"input-field",required:d.value.type==="local"},null,8,Pe),[[P,d.value.path]])])):p("",!0),t[29]||(t[29]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"btn btn-primary"},"Add")],-1))],32)])):p("",!0),u(J)?(a(),n("div",ze,"Loading...")):!D.value||D.value.length===0?(a(),n("div",Te,t[30]||(t[30]=[e("p",null,"No repositories added.",-1)]))):(a(),n("div",Ee,[(a(!0),n(L,null,N(D.value,s=>(a(),n("div",{key:s.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm flex items-center justify-between"},[e("div",null,[e("p",Ue,c(s.name),1),e("p",Oe,c(s.url),1),e("p",Qe,"Pulled: "+c(nt(s.last_pulled_at)),1)]),e("div",Re,[e("button",{onClick:w=>rt(s),class:"btn btn-secondary btn-sm"},[M(Ct,{class:"w-4 h-4 mr-1"}),f(c(s.type==="git"?"Pull":"Rescan"),1)],8,Ze),s.is_deletable?(a(),n("button",{key:0,onClick:w=>dt(s),class:"btn btn-danger btn-sm"},[M(q,{class:"w-4 h-4"})],8,Ve)):p("",!0)])]))),128))]))])):p("",!0)]))}},qe=W(Ye,[["__scopeId","data-v-ba38c572"]]);export{qe as default};
