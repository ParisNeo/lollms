import{c as C,b as n,d as g,e as l,h as d,f as s,an as Ce,t as v,g as E,ao as Ie,ap as ce,z as Y,l as D,aq as Se,ar as Te,as as Ue,at as De,D as oe,au as Re,ai as Le,aj as Me,av as Ve,a as Ne,s as ie,r as k,o as je,w as re,y as L,aw as K,A as Ze,i as N,v as Q,T as Oe,p as T,F as $,x as U,E as de,q as X,ax as Pe,ay as ze}from"./index-DjFt6w8F.js";import Be from"./IconGlobeAlt-DNuIFz8G.js";import pe from"./IconArrowUpCircle-CxcLtx22.js";import Ee from"./IconCode-DN28m4uK.js";import We from"./IconArrowUp-CvD4tpRw.js";import qe from"./IconArrowDown-DYKNa4mF.js";const Fe={key:0,class:"flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400 w-full"},He={class:"flex-grow"},Ge={key:0,class:"font-semibold truncate"},Je={class:"text-xs truncate"},Ke={class:"flex-shrink-0 flex items-center gap-1"},ve={__name:"TaskProgressIndicator",props:{task:{type:Object,required:!0},showName:{type:Boolean,default:!1}},emits:["cancel","view"],setup(i,{emit:o}){const m=i,u=C(()=>m.task?m.task.name.startsWith("Installing app:")?`Installing... (${m.task.progress}%)`:m.task.name.startsWith("Start app:")?"Starting...":`${m.task.status.charAt(0).toUpperCase()+m.task.status.slice(1)} (${m.task.progress}%)`:"...");return(R,b)=>i.task?(l(),n("div",Fe,[d(Ce,{class:"w-4 h-4 flex-shrink-0"}),s("div",He,[i.showName?(l(),n("p",Ge,v(i.task.name),1)):g("",!0),s("p",Je,v(u.value),1)]),s("div",Ke,[s("button",{onClick:b[0]||(b[0]=E(h=>R.$emit("view",i.task.id),["stop"])),class:"btn btn-secondary btn-sm !p-1",title:"View Task Details"},[d(Ie,{class:"w-4 h-4"})]),s("button",{onClick:b[1]||(b[1]=E(h=>R.$emit("cancel",i.task.id),["stop"])),class:"btn btn-warning btn-sm !p-1",title:"Cancel Task"},[d(ce,{class:"w-4 h-4"})])])])):g("",!0)}},Qe={class:"relative flex flex-col h-full bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg shadow transition-all hover:shadow-lg"},Xe={class:"flex-grow p-4"},Ye={class:"flex items-start gap-4 mb-3 pr-8"},et=["src"],tt=["title"],st={"class-":"text-xs text-gray-500 dark:text-gray-400"},at={class:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2 h-10"},lt={class:"px-4 py-3 bg-gray-50 dark:bg-gray-700/50 border-t dark:border-gray-700 rounded-b-lg"},nt={key:1,class:"flex items-center justify-between"},ot={class:"flex items-center gap-1"},it={class:"flex items-center gap-2"},rt={key:0,class:"flex items-center text-sm text-green-600 dark:text-green-400"},dt={__name:"AppCard",props:{app:{type:Object,required:!0},task:{type:Object,default:null},isStarred:{type:Boolean,default:!1}},emits:["install","update","details","help","star","view-task","cancel-install"],setup(i,{emit:o}){const m=i,u=o,R=C(()=>!m.app.is_installed&&!m.task);function b(_){u(_,m.app)}function h(_){u("view-task",_)}function j(_){u("cancel-install",_)}return(_,c)=>(l(),n("div",Qe,[s("div",Xe,[s("button",{onClick:c[0]||(c[0]=E(w=>u("star"),["stop"])),class:"absolute top-2 right-2 p-1 rounded-full text-gray-400 hover:text-yellow-400 z-10"},[i.isStarred?(l(),D(Se,{key:0,class:"w-5 h-5 text-yellow-400"})):(l(),D(Te,{key:1,class:"w-5 h-5"}))]),s("div",{onClick:c[1]||(c[1]=w=>b("details")),class:"cursor-pointer"},[s("div",Ye,[i.app.icon?(l(),n("img",{key:0,src:i.app.icon,class:"h-12 w-12 rounded-md flex-shrink-0 object-cover",alt:"App Icon"},null,8,et)):g("",!0),s("div",null,[s("h3",{class:"font-semibold text-gray-900 dark:text-white truncate",title:i.app.name},v(i.app.name),9,tt),s("p",st,"by "+v(i.app.author||"Unknown"),1)])]),s("p",at,v(i.app.description),1)])]),s("div",lt,[i.task?(l(),D(ve,{key:0,task:i.task,onView:h,onCancel:j},null,8,["task"])):(l(),n("div",nt,[s("div",ot,[s("button",{onClick:c[2]||(c[2]=w=>b("details")),class:"btn btn-secondary btn-sm !p-1.5",title:"More Info"},[d(Ue,{class:"w-4 h-4"})]),i.app.has_readme?(l(),n("button",{key:0,onClick:c[3]||(c[3]=w=>b("help")),class:"btn btn-secondary btn-sm !p-1.5",title:"View README"},[d(De,{class:"w-4 h-4"})])):g("",!0)]),s("div",it,[i.app.is_installed?(l(),n("span",rt,[d(Re,{class:"w-5 h-5 mr-1"}),c[6]||(c[6]=oe(" Installed "))])):g("",!0),i.app.update_available?(l(),n("button",{key:1,onClick:c[4]||(c[4]=w=>b("update")),class:"btn btn-warning btn-sm"},[d(pe,{class:"w-4 h-4 mr-1"}),c[7]||(c[7]=oe(" Update "))])):g("",!0),R.value?(l(),n("button",{key:2,onClick:c[5]||(c[5]=w=>b("install")),class:"btn btn-primary btn-sm"},"Install")):g("",!0)])]))])]))}},ue=Y(dt,[["__scopeId","data-v-38337946"]]),ut={},ct={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 animate-pulse"};function pt(i,o){return l(),n("div",ct,o[0]||(o[0]=[Le('<div class="flex items-start gap-4 mb-3"><div class="h-16 w-16 rounded-md flex-shrink-0 bg-gray-300 dark:bg-gray-700"></div><div class="flex-grow min-w-0 mt-1"><div class="h-5 w-3/4 rounded bg-gray-300 dark:bg-gray-600"></div><div class="h-4 w-1/2 rounded bg-gray-200 dark:bg-gray-700 mt-2"></div></div></div><div class="space-y-2"><div class="h-4 rounded bg-gray-200 dark:bg-gray-700"></div><div class="h-4 rounded bg-gray-200 dark:bg-gray-700"></div><div class="h-4 w-5/6 rounded bg-gray-200 dark:bg-gray-700"></div></div><div class="mt-5"><div class="flex items-center justify-between text-xs mb-3"><div class="h-4 w-12 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="h-4 w-20 rounded-full bg-gray-200 dark:bg-gray-700"></div></div><div class="h-10 w-full rounded-md bg-gray-300 dark:bg-gray-600"></div></div>',3)]))}const vt=Y(ut,[["render",pt]]),gt={class:"space-y-8"},mt={class:"border-b border-gray-200 dark:border-gray-700"},ft={class:"-mb-px flex space-x-6","aria-label":"Tabs"},bt={key:0},yt={class:"flex justify-between items-center mb-4 flex-wrap gap-2"},ht={class:"flex items-center gap-2"},kt=["disabled"],wt={key:0,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm mb-6 overflow-hidden"},xt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},_t={class:"md:col-span-2"},At={class:"flex justify-end"},$t=["disabled"],Ct={key:0,class:"text-center p-4"},It={key:1,class:"text-center p-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},St={key:2,class:"space-y-4"},Tt={class:"flex-grow truncate"},Ut={class:"font-semibold text-gray-900 dark:text-white"},Dt=["title"],Rt={class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},Lt={class:"flex items-center gap-x-2 flex-shrink-0"},Mt=["onClick","disabled"],Vt=["onClick","disabled"],Nt={key:1},jt={class:"flex justify-between items-center mb-4 flex-wrap gap-2"},Zt=["disabled"],Ot={class:"space-y-4"},Pt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},zt={class:"relative lg:col-span-1"},Bt={class:"grid grid-cols-2 lg:col-span-2 gap-4"},Et=["value"],Wt={class:"flex items-center gap-2"},qt=["value"],Ft={key:0,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6"},Ht={key:1,class:"text-center p-10 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},Gt={key:2,class:"text-center p-10 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},Jt={key:3},Kt={key:0,class:"space-y-8"},Qt={class:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3 border-b pb-2 dark:border-gray-700"},Xt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6"},Yt={key:1,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6"},es={key:2},ts={key:0,class:"text-center p-10"},ss={key:1,class:"text-center p-10 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},as={key:2,class:"space-y-4"},ls={class:"flex items-center gap-4 flex-grow truncate"},ns=["src"],os={class:"flex-grow truncate"},is=["title"],rs=["title"],ds={class:"flex items-center gap-x-2 flex-shrink-0 flex-wrap justify-end"},us=["onClick"],cs=["href"],ps=["onClick"],vs=["onClick"],gs=["onClick","disabled"],ms=["onClick","disabled"],fs=["onClick"],bs={__name:"AppsManagement",setup(i){const o=Me(),m=Ve(),u=Ne(),{zooRepositories:R,isLoadingZooRepositories:b,zooApps:h,isLoadingZooApps:j,installedApps:_,isLoadingInstalledApps:c}=ie(o),{tasks:w}=ie(m),x=k("repositories"),Z=k(!1),A=k({name:"",url:""}),p=k(null),M=k(""),z=k("All"),O=k("All"),B=k(!1),V=k("last_update_date"),P=k("desc"),I=k(JSON.parse(localStorage.getItem("starredApps")||"[]")),ge=[{value:"last_update_date",label:"Last Updated"},{value:"creation_date",label:"Creation Date"},{value:"name",label:"Name"},{value:"author",label:"Author"}];je(()=>{o.fetchZooRepositories(),o.fetchZooApps(),o.fetchInstalledApps()}),re(x,a=>{a==="available_apps"&&(o.fetchZooApps(),o.fetchInstalledApps()),a==="installed_apps"&&o.fetchInstalledApps()}),re(I,a=>{localStorage.setItem("starredApps",JSON.stringify(a))},{deep:!0});const me=C(()=>{if(!Array.isArray(h.value))return[];const a=new Map;return Array.isArray(w.value)&&w.value.forEach(e=>{if(e&&e.name&&e.name.startsWith("Installing app: ")){const t=e.name.replace("Installing app: ","");(!a.has(t)||new Date(e.created_at)>new Date(a.get(t).created_at))&&a.set(t,e)}}),h.value.map(e=>{const t=a.get(e.name);return{...e,task:t&&(t.status==="running"||t.status==="pending")?t:null}})}),W=C(()=>Array.isArray(R.value)?[...R.value].sort((a,e)=>(a.name||"").localeCompare(e.name||"")):[]),fe=C(()=>{if(!Array.isArray(h.value))return["All"];const a=new Set(h.value.map(e=>e.category||"Uncategorized"));return["All",...Array.from(a).sort()]}),q=C(()=>{let a=me.value.filter(e=>{const t=O.value==="All"||O.value==="Installed"&&e.is_installed||O.value==="Uninstalled"&&!e.is_installed&&!e.task,r=z.value==="All"||e.category===z.value,f=!M.value||e.name.toLowerCase().includes(M.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(M.value.toLowerCase())||e.author&&e.author.toLowerCase().includes(M.value.toLowerCase());return t&&r&&f});return a.sort((e,t)=>{const r=I.value.includes(e.name),f=I.value.includes(t.name);if(r&&!f)return-1;if(!r&&f)return 1;if(e.is_installed&&!t.is_installed)return-1;if(!e.is_installed&&t.is_installed)return 1;let y=e[V.value]||"",S=t[V.value]||"";return V.value.includes("date")&&(y=y?new Date(y).getTime():0,S=S?new Date(S).getTime():0),typeof y=="string"&&typeof S=="string"?P.value==="asc"?y.localeCompare(S):S.localeCompare(y):P.value==="asc"?y-S:S-y}),a}),ee=C(()=>V.value!=="author"?null:q.value.reduce((a,e)=>{const t=e.author||"Unknown Author";return a[t]||(a[t]=[]),a[t].push(e),a},{})),be=C(()=>Array.isArray(_.value)?[..._.value].sort((a,e)=>(a.name||"").localeCompare(e.name||"")):[]),F=C(()=>{const a=new Map;return Array.isArray(w.value)&&w.value.forEach(e=>{if(!e||!e.name)return;let t="";e.name.startsWith("Start app: ")?t=e.name.replace("Start app: ",""):e.name.startsWith("Stop app: ")?t=e.name.replace("Stop app: ",""):e.name.startsWith("Installing app: ")&&(t=e.name.replace("Installing app: ","")),t&&(e.status==="running"||e.status==="pending")&&(!a.has(t)||new Date(e.created_at)>new Date(a.get(t).created_at))&&a.set(t,e)}),be.value.map(e=>({...e,task:a.get(e.name)||null}))});function te(a){const e=I.value.indexOf(a);e>-1?I.value.splice(e,1):I.value.push(a)}function ye(a){return a?new Date(a).toLocaleString():"Never"}async function he(){if(!A.value.name||!A.value.url){u.addNotification("Repository name and URL are required.","warning");return}p.value="add";try{await o.addZooRepository(A.value.name,A.value.url),A.value={name:"",url:""},Z.value=!1}finally{p.value=null}}async function ke(a){p.value=a.id;try{await o.pullZooRepository(a.id)}finally{p.value=null}}async function we(){B.value=!0;try{await o.pullAllZooRepositories()}finally{B.value=!1}}async function xe(a){if(await u.showConfirmation({title:`Delete Repository '${a.name}'?`,message:"This will remove the repository and its cached files. This action cannot be undone.",confirmText:"Delete"})){p.value=a.id;try{await o.deleteZooRepository(a.id)}finally{p.value=null}}}function H(a){u.openModal("appInstall",{app:a})}function se(a){const e=h.value.find(t=>t.name===a.name);if(!e){u.addNotification(`Could not find app details for '${a.name}' in the zoo. Try refreshing repositories.`,"error");return}u.showConfirmation({title:`Update '${a.name}'?`,message:"This will reinstall the app with the latest version. The app will be stopped. Are you sure?",confirmText:"Update"}).then(t=>{t&&H(e)})}async function ae(a,e){p.value=`${e}-${a}`;try{e==="start"&&await o.startApp(a),e==="stop"&&await o.stopApp(a)}finally{p.value=null}}async function _e(a){if(await u.showConfirmation({title:`Uninstall '${a.name}'?`,message:"This will permanently delete all app files. This cannot be undone.",confirmText:"Uninstall"})){p.value=`uninstall-${a.id}`;try{await o.uninstallApp(a.id)}finally{p.value=null}}}function le(a){u.openModal("appDetails",{app:a})}function Ae(a){u.openModal("appConfig",{app:a})}async function $e(a){const e=await o.fetchAppLog(a.id);u.openModal("sourceViewer",{title:`Logs: ${a.name}`,content:e||"No log content found.",language:"log"})}async function ne(a){const e=await o.fetchAppReadme(a.repository,a.folder_name);u.openModal("sourceViewer",{title:`README: ${a.name}`,content:e,language:"markdown"})}async function G(a){await m.cancelTask(a)}function J(a){u.openModal("tasksManager",{initialTaskId:a})}return(a,e)=>(l(),n("div",gt,[e[25]||(e[25]=s("div",null,[s("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Apps Management"),s("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"Install and manage LOLLMS Applications from various sources (Zoos).")],-1)),s("div",mt,[s("nav",ft,[s("button",{onClick:e[0]||(e[0]=t=>x.value="repositories"),class:L(["tab-button",x.value==="repositories"?"active":"inactive"])},"Repositories",2),s("button",{onClick:e[1]||(e[1]=t=>x.value="available_apps"),class:L(["tab-button",x.value==="available_apps"?"active":"inactive"])},"Available Apps",2),s("button",{onClick:e[2]||(e[2]=t=>x.value="installed_apps"),class:L(["tab-button",x.value==="installed_apps"?"active":"inactive"])},"Installed Apps",2)])]),x.value==="repositories"?(l(),n("section",bt,[s("div",yt,[e[13]||(e[13]=s("h3",{class:"text-xl font-semibold"},"App Zoo Repositories",-1)),s("div",ht,[s("button",{onClick:we,class:"btn btn-secondary",disabled:B.value},[d(K,{class:L(["w-4 h-4",{"animate-spin":B.value}])},null,8,["class"]),e[12]||(e[12]=s("span",{class:"ml-2"},"Pull All",-1))],8,kt),s("button",{onClick:e[3]||(e[3]=t=>Z.value=!Z.value),class:"btn btn-primary"},v(Z.value?"Cancel":"Add Repository"),1)])]),d(Oe,{name:"form-fade"},{default:Ze(()=>[Z.value?(l(),n("div",wt,[s("form",{onSubmit:E(he,["prevent"]),class:"space-y-4"},[s("div",xt,[s("div",null,[e[14]||(e[14]=s("label",{for:"repo-name",class:"block text-sm font-medium"},"Name",-1)),N(s("input",{id:"repo-name","onUpdate:modelValue":e[4]||(e[4]=t=>A.value.name=t),type:"text",class:"input-field mt-1",placeholder:"e.g., Official Zoo",required:""},null,512),[[Q,A.value.name]])]),s("div",_t,[e[15]||(e[15]=s("label",{for:"repo-url",class:"block text-sm font-medium"},"Git URL",-1)),N(s("input",{id:"repo-url","onUpdate:modelValue":e[5]||(e[5]=t=>A.value.url=t),type:"url",class:"input-field mt-1",placeholder:"https://github.com/ParisNeo/lollms_apps_zoo.git",required:""},null,512),[[Q,A.value.url]])])]),s("div",At,[s("button",{type:"submit",class:"btn btn-primary",disabled:p.value==="add"},v(p.value==="add"?"Adding...":"Add Repository"),9,$t)])],32)])):g("",!0)]),_:1}),T(b)?(l(),n("div",Ct,"Loading repositories...")):!W.value||W.value.length===0?(l(),n("div",It,e[16]||(e[16]=[s("p",null,"No App Zoo repositories have been added yet.",-1)]))):(l(),n("div",St,[(l(!0),n($,null,U(W.value,t=>(l(),n("div",{key:t.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm flex flex-col md:flex-row md:items-center justify-between gap-4"},[s("div",Tt,[s("p",Ut,v(t.name),1),s("p",{class:"text-sm text-gray-500 dark:text-gray-400 font-mono truncate",title:t.url},v(t.url),9,Dt),s("p",Rt,"Last updated: "+v(ye(t.last_pulled_at)),1)]),s("div",Lt,[s("button",{onClick:r=>ke(t),class:"btn btn-secondary btn-sm",disabled:p.value===t.id,title:"Refresh (git pull)"},[d(K,{class:L(["w-4 h-4",{"animate-spin":p.value===t.id}])},null,8,["class"]),e[17]||(e[17]=s("span",{class:"ml-1"},"Pull",-1))],8,Mt),s("button",{onClick:r=>xe(t),class:"btn btn-danger btn-sm",disabled:p.value===t.id,title:"Delete"},[d(de,{class:"w-4 h-4"})],8,Vt)])]))),128))]))])):g("",!0),x.value==="available_apps"?(l(),n("section",Nt,[s("div",jt,[e[19]||(e[19]=s("h3",{class:"text-xl font-semibold"},"Available Apps",-1)),s("button",{onClick:e[6]||(e[6]=t=>T(o).fetchZooApps()),class:"btn btn-secondary",disabled:T(j)},[d(K,{class:L(["w-4 h-4",{"animate-spin":T(j)}])},null,8,["class"]),e[18]||(e[18]=s("span",{class:"ml-2"},"Rescan All Sources",-1))],8,Zt)]),s("div",Ot,[s("div",Pt,[s("div",zt,[N(s("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=t=>M.value=t),placeholder:"Search apps...",class:"input-field w-full pl-10"},null,512),[[Q,M.value]]),e[20]||(e[20]=s("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[s("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),s("div",Bt,[N(s("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>O.value=t),class:"input-field"},e[21]||(e[21]=[s("option",{value:"All"},"All Statuses",-1),s("option",{value:"Installed"},"Installed",-1),s("option",{value:"Uninstalled"},"Uninstalled",-1)]),512),[[X,O.value]]),N(s("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>z.value=t),class:"input-field"},[(l(!0),n($,null,U(fe.value,t=>(l(),n("option",{key:t,value:t},v(t),9,Et))),128))],512),[[X,z.value]])])]),s("div",Wt,[N(s("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>V.value=t),class:"input-field w-48"},[(l(),n($,null,U(ge,t=>s("option",{key:t.value,value:t.value},"Sort by "+v(t.label),9,qt)),64))],512),[[X,V.value]]),s("button",{onClick:e[11]||(e[11]=t=>P.value=P.value==="asc"?"desc":"asc"),class:"btn btn-secondary p-2"},[P.value==="asc"?(l(),D(We,{key:0,class:"w-5 h-5"})):(l(),D(qe,{key:1,class:"w-5 h-5"}))])]),T(j)?(l(),n("div",Ft,[(l(),n($,null,U(8,t=>d(vt,{key:t})),64))])):!T(h)||T(h).length===0?(l(),n("div",Ht,e[22]||(e[22]=[s("h4",{class:"font-semibold"},"No Apps Found",-1),s("p",{class:"text-sm text-gray-500"},"Please add and pull a repository to see available apps.",-1)]))):q.value.length===0?(l(),n("div",Gt,e[23]||(e[23]=[s("h4",{class:"font-semibold"},"No Matching Apps",-1),s("p",{class:"text-sm text-gray-500"},"Try adjusting your search or filter.",-1)]))):(l(),n("div",Jt,[ee.value?(l(),n("div",Kt,[(l(!0),n($,null,U(ee.value,(t,r)=>(l(),n("div",{key:r},[s("h3",Qt,v(r),1),s("div",Xt,[(l(!0),n($,null,U(t,f=>(l(),D(ue,{key:`${f.repository}/${f.folder_name}`,app:f,task:f.task,"is-starred":I.value.includes(f.name),onStar:y=>te(f.name),onInstall:y=>H(f),onDetails:y=>le(f),onHelp:y=>ne(f),onViewTask:J,onCancelInstall:G},null,8,["app","task","is-starred","onStar","onInstall","onDetails","onHelp"]))),128))])]))),128))])):(l(),n("div",Yt,[(l(!0),n($,null,U(q.value,t=>(l(),D(ue,{key:`${t.repository}/${t.folder_name}`,app:t,task:t.task,"is-starred":I.value.includes(t.name),onStar:r=>te(t.name),onInstall:r=>H(t),onUpdate:r=>se(t),onDetails:r=>le(t),onHelp:r=>ne(t),onViewTask:J,onCancelInstall:G},null,8,["app","task","is-starred","onStar","onInstall","onUpdate","onDetails","onHelp"]))),128))]))]))])])):g("",!0),x.value==="installed_apps"?(l(),n("section",es,[T(c)?(l(),n("div",ts,"Loading installed apps...")):!F.value||F.value.length===0?(l(),n("div",ss,e[24]||(e[24]=[s("h4",{class:"font-semibold"},"No Apps Installed",-1),s("p",{class:"text-sm text-gray-500"},'Go to the "Available Apps" tab to install an application.',-1)]))):(l(),n("div",as,[(l(!0),n($,null,U(F.value,t=>(l(),n("div",{key:t.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm flex flex-col md:flex-row md:items-center justify-between gap-4"},[s("div",ls,[t.icon?(l(),n("img",{key:0,src:t.icon,class:"h-10 w-10 rounded-md flex-shrink-0 object-cover",alt:"App Icon"},null,8,ns)):g("",!0),s("div",os,[s("p",{class:"font-semibold text-gray-900 dark:text-white truncate",title:t.name},v(t.name),9,is),s("p",{class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate",title:`Port: ${t.port}`},"Port: "+v(t.port),9,rs)])]),s("div",ds,[t.task?(l(),D(ve,{key:0,task:t.task,onView:J,onCancel:G},null,8,["task"])):(l(),n($,{key:1},[t.update_available?(l(),n("button",{key:0,onClick:r=>se(t),class:"btn btn-warning btn-sm p-2",title:"Update App"},[d(pe,{class:"w-5 h-5"})],8,us)):g("",!0),s("span",{class:L(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":t.status==="running","bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300":t.status==="stopped","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300":t.status==="error"}])},v(t.status),3),t.status==="running"&&t.url?(l(),n("a",{key:1,href:t.url,target:"_blank",class:"btn btn-secondary btn-sm p-2",title:"Open App"},[d(Be,{class:"w-5 h-5"})],8,cs)):g("",!0),s("button",{onClick:r=>Ae(t),class:"btn btn-secondary btn-sm p-2",title:"Edit App Settings"},[d(Pe,{class:"w-5 h-5"})],8,ps),s("button",{onClick:r=>$e(t),class:"btn btn-secondary btn-sm p-2",title:"View App Logs"},[d(Ee,{class:"w-5 h-5"})],8,vs),t.status!=="running"?(l(),n("button",{key:2,onClick:r=>ae(t.id,"start"),class:"btn btn-success btn-sm p-2",disabled:p.value===`start-${t.id}`,title:"Start App"},[d(ze,{class:"w-5 h-5"})],8,gs)):g("",!0),t.status==="running"||t.status==="error"&&t.pid?(l(),n("button",{key:3,onClick:r=>ae(t.id,"stop"),class:"btn btn-warning btn-sm p-2",disabled:p.value===`stop-${t.id}`,title:"Stop App"},[d(ce,{class:"w-5 h-5"})],8,ms)):g("",!0),s("button",{onClick:r=>_e(t),class:"btn btn-danger btn-sm p-2",title:"Uninstall App"},[d(de,{class:"w-5 h-5"})],8,fs)],64))])]))),128))]))])):g("",!0)]))}},As=Y(bs,[["__scopeId","data-v-d228acb8"]]);export{As as default};
