import{a as B,k as u,r as c,l as O,m as E,p as z,q as A,x as M,o as N,c as l,b as s,g as o,y as R,t as w,z as T,A as D,h as b,d as F,B as j,e as U,j as $,F as q,i as G,n as H,T as I,C as J}from"./index-DT1eZKOd.js";const K={class:"relative w-full"},P={class:"truncate"},Q={class:"p-2 border-b dark:border-gray-700"},W={class:"flex-grow overflow-y-auto"},X={key:0,class:"p-4 text-center text-sm text-gray-500"},Y={key:1,class:"p-4 text-center text-sm text-gray-500"},Z={key:2,class:"py-1"},ee=["onClick"],ae={__name:"LanguageSelector",props:{modelValue:{type:String,default:"auto"},includeAuto:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(v,{emit:x}){const m=v,_=x,d=B(),p=u(()=>d.languages),L=u(()=>d.isLoadingLanguages),n=c(!1),g=c(null),y=c(null),r=c(""),{floatingStyles:C}=O(g,y,{placement:"bottom-start",whileElementsMounted:E,middleware:[z(5),A(),M({padding:5})]}),S={mounted:(e,t)=>{e.clickOutsideEvent=a=>{const i=g.value;e===a.target||e.contains(a.target)||i!=null&&i.contains(a.target)||t.value()},document.addEventListener("mousedown",e.clickOutsideEvent)},unmounted:e=>{document.removeEventListener("mousedown",e.clickOutsideEvent)}},f=u(()=>{const e=[...p.value];return m.includeAuto&&e.unshift({value:"auto",label:"Auto-detect"}),e}),h=u(()=>f.value.find(e=>e.value===m.modelValue)||null),k=u(()=>{if(!r.value)return f.value;const e=r.value.toLowerCase();return f.value.filter(t=>t.label.toLowerCase().includes(e)||t.value.toLowerCase().includes(e))});function V(e){_("update:modelValue",e),n.value=!1,r.value=""}return N(()=>{p.value.length===0&&d.fetchLanguages()}),(e,t)=>(s(),l("div",K,[o("button",{ref_key:"triggerRef",ref:g,onClick:t[0]||(t[0]=a=>n.value=!n.value),type:"button",class:"input-field flex items-center justify-between"},[o("span",P,w(h.value?h.value.label:"Select Language"),1),t[2]||(t[2]=o("svg",{class:"w-4 h-4 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))],512),(s(),R(J,{to:"body"},[T(I,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:D(()=>[n.value?b((s(),l("div",{key:0,ref_key:"floatingRef",ref:y,style:j(U(C)),class:"z-50 w-64 origin-top-left rounded-md bg-white dark:bg-gray-800 shadow-lg ring-1 ring-black ring-opacity-5 dark:ring-gray-700 focus:outline-none flex flex-col max-h-[50vh]"},[o("div",Q,[b(o("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>r.value=a),type:"text",placeholder:"Search language...",class:"input-field-sm w-full"},null,512),[[$,r.value]])]),o("div",W,[L.value?(s(),l("div",X,"Loading...")):k.value.length===0?(s(),l("div",Y,"No matches found.")):(s(),l("ul",Z,[(s(!0),l(q,null,G(k.value,a=>(s(),l("li",{key:a.value,onClick:i=>V(a.value),class:H(["px-3 py-2 text-sm cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",{"bg-blue-100 dark:bg-blue-900/50 font-semibold":v.modelValue===a.value}])},w(a.label),11,ee))),128))]))])],4)),[[S,()=>n.value=!1]]):F("",!0)]),_:1})]))]))}};export{ae as _};
