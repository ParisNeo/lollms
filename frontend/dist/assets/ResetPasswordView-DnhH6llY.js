import{r as a,o as k,x as b,b as l,h as e,i as _,Z as P,t as c,P as M,g as C,l as v,$ as g,z as V,d as r,W as N}from"./index-DnjdbnqE.js";const R={class:"min-h-screen bg-gray-100 dark:bg-gray-900 flex flex-col justify-center items-center py-12 sm:px-6 lg:px-8"},A={class:"sm:mx-auto sm:w-full sm:max-w-md"},B=["src"],j={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},D={class:"bg-white dark:bg-gray-800 py-8 px-4 shadow-lg sm:rounded-lg sm:px-10"},q={key:0},z={class:"text-center text-red-500"},S={key:1},E={class:"text-center text-green-600 dark:text-green-400"},L={class:"relative"},U=["type","disabled"],Y={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},T={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},W=["type","disabled"],Z={key:0,class:"text-red-600 text-sm p-2 bg-red-100 dark:bg-red-900/50 rounded-md",role:"alert"},$=["disabled"],H={__name:"ResetPasswordView",setup(F){const x=b(),f=V(),u=a(""),d=a(""),m=a(""),n=a(!1),s=a(""),p=a(""),i=a(!1);k(()=>{u.value=x.query.token||"",u.value||(s.value="No reset token provided. Please use the link sent to you.")});const y=()=>{i.value=!i.value},h=async()=>{var w,t;if(s.value="",d.value.length<8){s.value="Password must be at least 8 characters long.";return}if(d.value!==m.value){s.value="Passwords do not match.";return}n.value=!0;try{const o=await N.post("/api/auth/reset-password",{token:u.value,new_password:d.value});p.value=o.data.message,setTimeout(()=>{f.push("/")},3e3)}catch(o){s.value=((t=(w=o.response)==null?void 0:w.data)==null?void 0:t.detail)||"An unexpected error occurred."}finally{n.value=!1}};return(w,t)=>(r(),l("div",R,[e("div",A,[e("img",{src:_(P),alt:"Application Logo",class:"mx-auto h-20 w-auto"},null,8,B),t[2]||(t[2]=e("h2",{class:"mt-6 text-center text-2xl font-bold tracking-tight text-gray-900 dark:text-white"}," Reset Your Password ",-1))]),e("div",j,[e("div",D,[u.value?p.value?(r(),l("div",S,[e("p",E,c(p.value),1),t[3]||(t[3]=e("p",{class:"text-center text-sm text-gray-500 mt-2"},"You will be redirected shortly.",-1))])):(r(),l("form",{key:2,onSubmit:M(h,["prevent"]),class:"space-y-6"},[e("div",null,[t[6]||(t[6]=e("label",{for:"new-password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"New Password",-1)),e("div",L,[v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>d.value=o),type:i.value?"text":"password",id:"new-password",required:"",minlength:"8",disabled:n.value,class:"input-field mt-1 w-full pr-10",placeholder:"Enter new password"},null,8,U),[[g,d.value]]),e("button",{type:"button",onClick:y,class:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-500 hover:text-gray-700"},[i.value?(r(),l("svg",Y,t[4]||(t[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a9.97 9.97 0 01-1.563 3.029m-2.135-2.135A6.978 6.978 0 0112 17c-1.855 0-3.56-.736-4.807-1.938"},null,-1)]))):(r(),l("svg",T,t[5]||(t[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])))])])]),e("div",null,[t[7]||(t[7]=e("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Confirm New Password",-1)),v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>m.value=o),type:i.value?"text":"password",id:"confirm-password",required:"",disabled:n.value,class:"input-field mt-1 w-full",placeholder:"Confirm new password"},null,8,W),[[g,m.value]])]),s.value?(r(),l("div",Z,c(s.value),1)):C("",!0),e("div",null,[e("button",{type:"submit",class:"btn btn-primary w-full",disabled:n.value},c(n.value?"Resetting...":"Set New Password"),9,$)])],32)):(r(),l("div",q,[e("p",z,c(s.value),1)]))])])]))}};export{H as default};
