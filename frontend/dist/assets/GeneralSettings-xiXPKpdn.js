import{u as w,s as L,r as v,o as A,k as h,b as r,e as i,f as t,d as p,l as f,w as V,F as x,m as k,h as b,t as n,n as C,p as F}from"./index-DXKlNK4V.js";const I={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},N={class:"border-t border-gray-200 dark:border-gray-700"},U={key:0},M=["for"],D=["id","onUpdate:modelValue","value"],E=["value"],B={class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},J={key:1,class:"relative flex items-start"},O={class:"flex h-6 items-center"},G=["id","onUpdate:modelValue"],j={class:"ml-3 text-sm leading-6"},P=["for"],R={class:"text-gray-500 dark:text-gray-400"},T={class:"flex justify-end pt-4"},z=["disabled"],H={key:0},q={key:1},W={__name:"GeneralSettings",setup(K){const y=w(),{user:u}=L(y),_=[{key:"auto_title",type:"toggle",label:"Automatic Discussion Title",description:"If enabled, a title will be automatically generated for new discussions.",defaultValue:!0},{key:"fun_mode",type:"toggle",label:"Fun Mode",description:"If activated, the AI will be more playful and creative.",defaultValue:!1},{key:"chat_active",type:"toggle",label:"Activate Social Chat",description:"Enable or disable direct messaging with other users.",defaultValue:!1,minLevel:2},{key:"user_ui_level",type:"select",label:"UI Level",description:"Adjust the complexity of the user interface. More advanced levels show more options.",defaultValue:0,options:[{value:0,text:"Beginner"},{value:1,text:"Novice"},{value:2,text:"Intermediate"},{value:3,text:"Advanced"},{value:4,text:"Expert"}]},{key:"first_page",type:"select",label:"Home Page",description:"Choose the default page you see after logging in.",defaultValue:"feed",options:[{value:"feed",text:"Social Feed",minLevel:2},{value:"new_discussion",text:"New Discussion"},{value:"last_discussion",text:"Last Used Discussion"}]},{key:"ai_response_language",type:"select",label:"AI Response Language",description:"Changes the output language of the AI messages.",defaultValue:"auto",options:[{value:"auto",text:"Auto"},{value:"en",text:"English"},{value:"fr",text:"French"},{value:"it",text:"Italian"},{value:"es",text:"Spanish"}]}],a=v({}),d=v(!1),c=v(!1);let m={};const g=()=>{if(u.value){const s={};_.forEach(o=>{s[o.key]=u.value[o.key]??o.defaultValue}),a.value=s,m=JSON.parse(JSON.stringify(a.value)),c.value=!1}};A(g),h(u,g,{deep:!0}),h(a,(s,o)=>{c.value=JSON.stringify(s)!==JSON.stringify(m),o&&s.user_ui_level===1&&o.user_ui_level!==1&&(a.value.first_page="new_discussion"),s.user_ui_level<2&&s.first_page==="feed"&&(a.value.first_page="new_discussion")},{deep:!0});async function S(){d.value=!0;try{await y.updateUserPreferences(a.value)}catch(s){console.error("Failed to save settings:",s)}finally{d.value=!1}}return(s,o)=>(i(),r("div",I,[o[0]||(o[0]=t("div",{class:"px-4 py-5 sm:p-6"},[t("h2",{class:"text-xl font-bold leading-6 text-gray-900 dark:text-white"},"General Settings"),t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-400"}," Customize your user interface experience and general application behavior. ")],-1)),t("div",N,[f(u)?(i(),r("form",{key:0,onSubmit:V(S,["prevent"]),class:"p-4 sm:p-6 space-y-8"},[(i(),r(x,null,k(_,e=>t("div",{key:e.key},[e.type==="select"?(i(),r("div",U,[t("label",{for:e.key,class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},n(e.label),9,M),b(t("select",{id:e.key,"onUpdate:modelValue":l=>a.value[e.key]=l,class:"input-field mt-1",value:a.value[e.key]},[(i(!0),r(x,null,k(e.options.filter(l=>!l.minLevel||f(u).user_ui_level>=l.minLevel),l=>(i(),r("option",{key:l.value,value:l.value},n(l.text),9,E))),128))],8,D),[[C,a.value[e.key]]]),t("p",B,n(e.description),1)])):p("",!0),e.type==="toggle"&&(!e.minLevel||f(u).user_ui_level>=e.minLevel)?(i(),r("div",J,[t("div",O,[b(t("input",{id:e.key,"onUpdate:modelValue":l=>a.value[e.key]=l,type:"checkbox",class:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-blue-600 focus:ring-blue-600 dark:focus:ring-blue-600 dark:ring-offset-gray-800"},null,8,G),[[F,a.value[e.key]]])]),t("div",j,[t("label",{for:e.key,class:"font-medium text-gray-900 dark:text-gray-300"},n(e.label),9,P),t("p",R,n(e.description),1)])])):p("",!0)])),64)),t("div",T,[t("button",{type:"submit",class:"btn btn-primary",disabled:d.value||!c.value},[d.value?(i(),r("span",H,"Saving...")):(i(),r("span",q,"Save General Settings"))],8,z)])],32)):p("",!0)])]))}};export{W as default};
