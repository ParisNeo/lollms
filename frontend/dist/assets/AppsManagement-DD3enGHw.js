import{c as b,b as n,d as c,e as l,h as p,f as s,aq as pt,t as u,g as J,ar as vt,as as He,B as ye,l as C,at as mt,au as ft,E as gt,av as yt,G as Ne,aw as bt,al as ht,am as _t,ax as kt,a as xt,q as wt,s as Ve,r as g,o as At,w as ne,A as x,C as Ze,i as A,v as L,H as Ct,y as oe,k as It,m as $t,n as St,F as $,z as M,j as Mt,T as Pe,ay as K,K as je,x as j,az as Rt}from"./index-CVL4H6dy.js";import Tt from"./IconPlayCircle-BlQxxfo1.js";import Ut from"./IconGlobeAlt-DCekPQzr.js";import Oe from"./IconArrowUpCircle-DZNNUU8i.js";import Dt from"./IconCode-D_0aXLo3.js";import Lt from"./IconArrowUp-ZNU8l_Bw.js";import Nt from"./IconArrowDown-BImp2H9k.js";import{_ as Ee}from"./McpCard-Qj8pCrkM.js";const Vt={key:0,class:"flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400 w-full"},Zt={class:"flex-grow"},Pt={key:0,class:"font-semibold truncate"},jt={class:"text-xs truncate"},Et={class:"flex-shrink-0 flex items-center gap-1"},Be={__name:"TaskProgressIndicator",props:{task:{type:Object,required:!0},showName:{type:Boolean,default:!1}},emits:["cancel","view"],setup(v,{emit:i}){const w=v,f=b(()=>w.task?w.task.name.startsWith("Installing app:")?`Installing... (${w.task.progress}%)`:w.task.name.startsWith("Start app:")?"Starting...":`${w.task.status.charAt(0).toUpperCase()+w.task.status.slice(1)} (${w.task.progress}%)`:"...");return(E,I)=>v.task?(l(),n("div",Vt,[p(pt,{class:"w-4 h-4 flex-shrink-0"}),s("div",Zt,[v.showName?(l(),n("p",Pt,u(v.task.name),1)):c("",!0),s("p",jt,u(f.value),1)]),s("div",Et,[s("button",{onClick:I[0]||(I[0]=J(B=>E.$emit("view",v.task.id),["stop"])),class:"btn btn-secondary btn-sm !p-1",title:"View Task Details"},[p(vt,{class:"w-4 h-4"})]),s("button",{onClick:I[1]||(I[1]=J(B=>E.$emit("cancel",v.task.id),["stop"])),class:"btn btn-warning btn-sm !p-1",title:"Cancel Task"},[p(He,{class:"w-4 h-4"})])])])):c("",!0)}},Ft={class:"relative flex flex-col h-full bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg shadow transition-all hover:shadow-lg"},Ht={class:"flex-grow p-4"},Ot={class:"flex items-start gap-4 mb-3 pr-8"},Bt=["src"],zt=["title"],qt={"class-":"text-xs text-gray-500 dark:text-gray-400"},Wt={class:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2 h-10"},Gt={class:"px-4 py-3 bg-gray-50 dark:bg-gray-700/50 border-t dark:border-gray-700 rounded-b-lg"},Xt={key:1,class:"flex items-center justify-between"},Kt={class:"flex items-center gap-1"},Jt={class:"flex items-center gap-2"},Qt={key:0,class:"flex items-center text-sm text-green-600 dark:text-green-400"},Yt={__name:"AppCard",props:{app:{type:Object,required:!0},task:{type:Object,default:null},isStarred:{type:Boolean,default:!1}},emits:["install","update","details","help","star","view-task","cancel-install"],setup(v,{emit:i}){const w=v,f=i,E=b(()=>!w.app.is_installed&&!w.task);function I(U){f(U,w.app)}function B(U){f("view-task",U)}function ie(U){f("cancel-install",U)}return(U,y)=>(l(),n("div",Ft,[s("div",Ht,[s("button",{onClick:y[0]||(y[0]=J(N=>f("star"),["stop"])),class:"absolute top-2 right-2 p-1 rounded-full text-gray-400 hover:text-yellow-400 z-10"},[v.isStarred?(l(),C(mt,{key:0,class:"w-5 h-5 text-yellow-400"})):(l(),C(ft,{key:1,class:"w-5 h-5"}))]),s("div",{onClick:y[1]||(y[1]=N=>I("details")),class:"cursor-pointer"},[s("div",Ot,[v.app.icon?(l(),n("img",{key:0,src:v.app.icon,class:"h-12 w-12 rounded-md flex-shrink-0 object-cover",alt:"App Icon"},null,8,Bt)):c("",!0),s("div",null,[s("h3",{class:"font-semibold text-gray-900 dark:text-white truncate",title:v.app.name},u(v.app.name),9,zt),s("p",qt,"by "+u(v.app.author||"Unknown"),1)])]),s("p",Wt,u(v.app.description),1)])]),s("div",Gt,[v.task?(l(),C(Be,{key:0,task:v.task,onView:B,onCancel:ie},null,8,["task"])):(l(),n("div",Xt,[s("div",Kt,[s("button",{onClick:y[2]||(y[2]=N=>I("details")),class:"btn btn-secondary btn-sm !p-1.5",title:"More Info"},[p(gt,{class:"w-4 h-4"})]),v.app.has_readme?(l(),n("button",{key:0,onClick:y[3]||(y[3]=N=>I("help")),class:"btn btn-secondary btn-sm !p-1.5",title:"View README"},[p(yt,{class:"w-4 h-4"})])):c("",!0)]),s("div",Jt,[v.app.is_installed?(l(),n("span",Qt,[p(bt,{class:"w-5 h-5 mr-1"}),y[6]||(y[6]=Ne(" Installed "))])):c("",!0),v.app.update_available?(l(),n("button",{key:1,onClick:y[4]||(y[4]=N=>I("update")),class:"btn btn-warning btn-sm"},[p(Oe,{class:"w-4 h-4 mr-1"}),y[7]||(y[7]=Ne(" Update "))])):c("",!0),E.value?(l(),n("button",{key:2,onClick:y[5]||(y[5]=N=>I("install")),class:"btn btn-primary btn-sm"},"Install")):c("",!0)])]))])]))}},Fe=ye(Yt,[["__scopeId","data-v-38337946"]]),es={},ts={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 animate-pulse"};function ss(v,i){return l(),n("div",ts,i[0]||(i[0]=[ht('<div class="flex items-start gap-4 mb-3"><div class="h-16 w-16 rounded-md flex-shrink-0 bg-gray-300 dark:bg-gray-700"></div><div class="flex-grow min-w-0 mt-1"><div class="h-5 w-3/4 rounded bg-gray-300 dark:bg-gray-600"></div><div class="h-4 w-1/2 rounded bg-gray-200 dark:bg-gray-700 mt-2"></div></div></div><div class="space-y-2"><div class="h-4 rounded bg-gray-200 dark:bg-gray-700"></div><div class="h-4 rounded bg-gray-200 dark:bg-gray-700"></div><div class="h-4 w-5/6 rounded bg-gray-200 dark:bg-gray-700"></div></div><div class="mt-5"><div class="flex items-center justify-between text-xs mb-3"><div class="h-4 w-12 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="h-4 w-20 rounded-full bg-gray-200 dark:bg-gray-700"></div></div><div class="h-10 w-full rounded-md bg-gray-300 dark:bg-gray-600"></div></div>',3)]))}const as=ye(es,[["render",ss]]),ls={class:"space-y-8"},ns={class:"border-b border-gray-200 dark:border-gray-700"},os={class:"-mb-px flex space-x-6","aria-label":"Main Tabs"},is={class:"border-b border-gray-200 dark:border-gray-700"},rs={class:"-mb-px flex space-x-6","aria-label":"Sub Tabs"},ds={key:0,class:"bg-white dark:bg-gray-800 shadow-md rounded-lg mb-8"},us={class:"px-4 py-5 sm:p-6"},cs={class:"text-xl font-bold capitalize"},ps={class:"border-t border-gray-200 dark:border-gray-700"},vs={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},ms={class:"mt-2 flex items-center gap-x-4"},fs={class:"h-16 w-16 rounded-md bg-gray-200 dark:bg-gray-700 flex items-center justify-center overflow-hidden"},gs=["src"],ys={class:"flex-grow space-y-2"},bs={class:"flex items-center gap-x-3"},hs={class:"flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-md"},_s={class:"space-y-4"},ks={key:0,class:"relative"},xs=["type"],ws={key:0,class:"p-4 space-y-4 border rounded-md dark:border-gray-600"},As=["readonly"],Cs={class:"mt-2 space-y-2"},Is=["id","value"],$s=["for"],Ss={class:"flex justify-end gap-3"},Ms=["disabled"],Rs={key:0},Ts={class:"flex justify-between items-center mb-4 flex-wrap gap-2"},Us={class:"text-xl font-semibold"},Ds={class:"flex items-center gap-2"},Ls=["disabled"],Ns={key:0,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm mb-6 overflow-hidden"},Vs={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Zs={class:"md:col-span-2"},Ps={class:"flex justify-end"},js=["disabled"],Es={key:0,class:"text-center p-4"},Fs={key:1,class:"empty-state-card"},Hs={key:2,class:"space-y-4"},Os={class:"flex-grow truncate"},Bs={class:"font-semibold"},zs={class:"text-sm text-gray-500 font-mono truncate"},qs={class:"text-xs text-gray-400 mt-1"},Ws={class:"flex items-center gap-x-2 flex-shrink-0"},Gs=["onClick","disabled"],Xs=["onClick","disabled"],Ks={key:1},Js={class:"flex justify-between items-center mb-4 flex-wrap gap-2"},Qs={class:"text-xl font-semibold"},Ys=["disabled"],ea={class:"space-y-4"},ta={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},sa={class:"relative lg:col-span-1"},aa=["placeholder"],la={class:"grid grid-cols-2 lg:col-span-2 gap-4"},na=["value"],oa={class:"flex items-center gap-2"},ia=["value"],ra={key:0,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6"},da={key:1,class:"empty-state-card"},ua={class:"text-sm"},ca={key:2,class:"empty-state-card"},pa={key:3},va={key:0,class:"space-y-8"},ma={class:"text-lg font-semibold mb-3 border-b pb-2"},fa={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6"},ga={key:1,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6"},ya={key:2},ba={class:"flex justify-between items-center mb-4"},ha=["disabled"],_a={key:0,class:"text-center p-10"},ka={key:1,class:"empty-state-card"},xa={key:2,class:"space-y-4"},wa={class:"flex items-center gap-4 flex-grow truncate"},Aa=["src"],Ca={class:"flex-grow truncate"},Ia={class:"flex items-center gap-2"},$a={class:"font-semibold truncate"},Sa={class:"text-xs text-gray-500 font-mono truncate"},Ma={class:"flex items-center gap-x-2 flex-shrink-0 flex-wrap justify-end"},Ra=["onClick"],Ta=["href"],Ua=["onClick"],Da=["onClick"],La=["onClick","disabled"],Na=["onClick","disabled"],Va=["onClick"],Za={key:3},Pa={key:0,class:"space-y-8"},ja={class:"flex justify-between items-center mb-4"},Ea={key:0,class:"empty-state-card"},Fa={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5"},Ha={key:1,class:"space-y-8"},Oa={class:"flex justify-between items-center mb-4 flex-wrap gap-2"},Ba={class:"flex items-center gap-2"},za=["disabled"],qa={class:"ml-2"},Wa={key:0,class:"empty-state-card"},Ga={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5"},Xa={__name:"AppsManagement",setup(v){const i=_t(),w=kt(),f=xt(),E=wt(),{zooRepositories:I,isLoadingZooRepositories:B,zooApps:ie,isLoadingZooApps:U,mcpZooRepositories:y,isLoadingMcpZooRepositories:N,zooMcps:ze,isLoadingZooMcps:qe,installedApps:be,isLoadingInstalledApps:re,mcps:he,apps:_e}=Ve(i),{tasks:Q}=Ve(w),d=g("apps"),h=g("repositories"),Y=g(!1),R=g(null),ee=g(!1),z=g(!1),ke=g(null),de=g(!1),xe=(a="apps",e="system")=>({name:"",client_id:"",url:"",icon:"",active:!0,type:e,authentication_type:"none",authentication_key:"",sso_redirect_uri:"",sso_user_infos_to_share:[]}),r=g(xe()),We=[{id:"email",label:"Email Address"},{id:"first_name",label:"First Name"},{id:"family_name",label:"Family Name"},{id:"birth_date",label:"Birth Date"}],q=g(!1),S=g({name:"",url:""}),W=g(!1),_=g(null),F=g(""),te=g("All"),G=g("All"),se=g(!1),H=g("last_update_date"),X=g("desc"),D=g(JSON.parse(localStorage.getItem("starredItems")||"[]")),Ge=[{value:"last_update_date",label:"Last Updated"},{value:"creation_date",label:"Creation Date"},{value:"name",label:"Name"},{value:"author",label:"Author"}];At(()=>{i.fetchZooRepositories(),i.fetchMcpZooRepositories(),i.fetchZooApps(),i.fetchZooMcps(),i.fetchInstalledApps(),i.fetchApps(),i.fetchMcps()}),ne(d,()=>{h.value!=="installed_apps"&&h.value!=="registered"&&(h.value="repositories")}),ne(h,a=>{a==="available_items"?(d.value==="apps"?i.fetchZooApps():i.fetchZooMcps(),i.fetchInstalledApps()):a==="installed_apps"?i.fetchInstalledApps():a==="registered"&&(i.fetchApps(),i.fetchMcps())}),ne(D,a=>{localStorage.setItem("starredItems",JSON.stringify(a))},{deep:!0}),ne(()=>r.value.icon,()=>{de.value=!1});const we=b(()=>d.value==="apps"?I.value:y.value),Xe=b(()=>d.value==="apps"?B.value:N.value),V=b(()=>d.value==="apps"?ie.value:ze.value),ue=b(()=>d.value==="apps"?U.value:qe.value),Ke=b(()=>{if(!Array.isArray(V.value))return[];const a=new Map,e="Installing app: ";return Array.isArray(Q.value)&&Q.value.forEach(t=>{var o;if((o=t==null?void 0:t.name)!=null&&o.startsWith(e)){const m=t.name.replace(e,"");(!a.has(m)||new Date(t.created_at)>new Date(a.get(m).created_at))&&a.set(m,t)}}),V.value.map(t=>({...t,task:a.get(t.folder_name)||null}))}),ce=b(()=>Array.isArray(we.value)?[...we.value].sort((a,e)=>(a.name||"").localeCompare(e.name||"")):[]),Je=b(()=>{if(!Array.isArray(V.value))return["All"];const a=new Set(V.value.map(e=>e.category||"Uncategorized"));return["All",...Array.from(a).sort()]}),pe=b(()=>{let a=Ke.value.filter(e=>{const t=G.value==="All"||G.value==="Installed"&&e.is_installed||G.value==="Uninstalled"&&!e.is_installed&&!e.task,o=te.value==="All"||e.category===te.value,m=!F.value||e.name.toLowerCase().includes(F.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(F.value.toLowerCase())||e.author&&e.author.toLowerCase().includes(F.value.toLowerCase());return t&&o&&m});return a.sort((e,t)=>{const o=D.value.includes(e.name),m=D.value.includes(t.name);if(o&&!m)return-1;if(!o&&m)return 1;if(e.is_installed&&!t.is_installed)return-1;if(!e.is_installed&&t.is_installed)return 1;let k=e[H.value]||"",T=t[H.value]||"";return H.value.includes("date")&&(k=k?new Date(k).getTime():0,T=T?new Date(T).getTime():0),typeof k=="string"&&typeof T=="string"?X.value==="asc"?k.localeCompare(T):T.localeCompare(k):X.value==="asc"?k-T:T-k}),a}),Ae=b(()=>H.value!=="author"?null:pe.value.reduce((a,e)=>{const t=e.author||"Unknown Author";return a[t]||(a[t]=[]),a[t].push(e),a},{})),ve=b(()=>{const a=Array.isArray(be.value)?[...be.value].sort((t,o)=>(t.name||"").localeCompare(o.name||"")):[],e=new Map;return Array.isArray(Q.value)&&Q.value.forEach(t=>{if(!(t!=null&&t.name))return;let o="";t.name.startsWith("Start app: ")?o=t.name.replace("Start app: ",""):t.name.startsWith("Stop app: ")?o=t.name.replace("Stop app: ",""):t.name.startsWith("Installing app: ")&&(o=t.name.replace("Installing app: ","")),o&&(t.status==="running"||t.status==="pending")&&(!e.has(o)||new Date(t.created_at)>new Date(e.get(o).created_at))&&e.set(o,t)}),a.map(t=>({...t,task:e.get(t.folder_name)||null}))});b(()=>_e.value.filter(a=>!a.is_installed&&a.type==="user").sort((a,e)=>a.name.localeCompare(e.name)));const Ce=b(()=>_e.value.filter(a=>!a.is_installed&&a.type==="system").sort((a,e)=>a.name.localeCompare(e.name)));b(()=>he.value.filter(a=>!a.is_installed&&a.type==="user").sort((a,e)=>a.name.localeCompare(e.name)));const Ie=b(()=>he.value.filter(a=>!a.is_installed&&a.type==="system").sort((a,e)=>a.name.localeCompare(e.name))),O=b(()=>R.value!==null),Qe=b(()=>r.value.authentication_type==="lollms_sso");function $e(a){const e=D.value.indexOf(a);e>-1?D.value.splice(e,1):D.value.push(a)}function Ye(a){return a?new Date(a).toLocaleString():"Never"}async function et(){if(!S.value.name||!S.value.url){f.addNotification("Repository name and URL are required.","warning");return}_.value="add";try{d.value==="apps"?await i.addZooRepository(S.value.name,S.value.url):await i.addMcpZooRepository(S.value.name,S.value.url),S.value={name:"",url:""},W.value=!1}finally{_.value=null}}async function tt(a){_.value=a.id;try{d.value==="apps"?await i.pullZooRepository(a.id):await i.pullMcpZooRepository(a.id)}finally{_.value=null}}async function st(){se.value=!0;try{d.value==="apps"?await i.pullAllZooRepositories():await i.pullAllMcpZooRepositories()}finally{se.value=!1}}async function at(a){if(await f.showConfirmation({title:`Delete Repository '${a.name}'?`,message:"This will remove the repository and its cached files. This action cannot be undone.",confirmText:"Delete"})){_.value=a.id;try{d.value==="apps"?await i.deleteZooRepository(a.id):await i.deleteMcpZooRepository(a.id)}finally{_.value=null}}}function me(a){const e={app:a,type:d.value};f.openModal("appInstall",e)}function Se(a){const e=V.value.find(t=>t.name===a.name);if(!e){f.addNotification(`Could not find details for '${a.name}' in the zoo. Try refreshing repositories.`,"error");return}f.showConfirmation({title:`Update '${a.name}'?`,message:"This will reinstall it with the latest version. It will be stopped. Are you sure?",confirmText:"Update"}).then(t=>{t&&me(e)})}async function Me(a,e){_.value=`${e}-${a}`;try{e==="start"&&await i.startApp(a),e==="stop"&&await i.stopApp(a)}finally{_.value=null}}async function lt(a){if(await f.showConfirmation({title:`Uninstall '${a.name}'?`,message:"This will permanently delete all files. This cannot be undone.",confirmText:"Uninstall"})){_.value=`uninstall-${a.id}`;try{await i.uninstallApp(a.id)}finally{_.value=null}}}function Re(a){f.openModal("appDetails",{app:a})}function nt(a){f.openModal("appConfig",{app:a})}async function ot(a){const e=await i.fetchAppLog(a.id);f.openModal("sourceViewer",{title:`Logs: ${a.name}`,content:e||"No log content found.",language:"log"})}async function Te(a){const e=d.value==="apps"?await i.fetchAppReadme(a.repository,a.folder_name):await i.fetchMcpReadme(a.repository,a.folder_name);f.openModal("sourceViewer",{title:`README: ${a.name}`,content:e,language:"markdown"})}async function fe(a){await w.cancelTask(a)}function ge(a){f.openModal("tasksManager",{initialTaskId:a})}function Ue(a){O.value&&ae(),r.value=xe(a,"system"),Y.value=!0,window.scrollTo({top:0,behavior:"smooth"})}function De(a,e){R.value={...a,_type:e},r.value.name=a.name,r.value.url=a.url,r.value.icon=a.icon||"",r.value.active=typeof a.active=="boolean"?a.active:!0,r.value.type=a.type,r.value.authentication_type=a.authentication_type||"none",r.value.authentication_key="",r.value.sso_redirect_uri=a.sso_redirect_uri||"",r.value.sso_user_infos_to_share=a.sso_user_infos_to_share||[],Y.value=!0,window.scrollTo({top:0,behavior:"smooth"})}function ae(){R.value=null,Y.value=!1,z.value=!1}function it(){de.value=!0}async function rt(){if(!r.value.name||!r.value.url){f.addNotification("Name and URL are required.","warning");return}ee.value=!0;try{const a={...r.value},e=O.value?R.value._type==="apps":d.value==="apps";O.value?await(e?i.updateApp(R.value.id,a):i.updateMcp(R.value.id,a)):await(e?i.addApp(a):i.addMcp(a)),ae()}finally{ee.value=!1}}async function Le(a,e){await f.showConfirmation({title:`Delete '${a.name}'?`,message:`This will permanently remove this registered ${e==="mcps"?"MCP server":"Application"}. This cannot be undone.`,confirmText:"Delete"})&&(R.value&&R.value.id===a.id&&ae(),await(e==="apps"?i.deleteApp(a.id):i.deleteMcp(a.id)))}function dt(){ke.value.click()}function ut(a){const e=a.target.files[0];if(!e)return;if(!["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"].includes(e.type)){f.addNotification("Invalid file type. Please select an image.","error");return}if(e.type==="image/svg+xml"){const o=new FileReader;o.onload=m=>{r.value.icon=m.target.result},o.readAsDataURL(e)}else{const o=new FileReader;o.onload=m=>{const k=new Image;k.onload=()=>{let{width:Z,height:P}=k;Z>P?Z>128&&(P*=128/Z,Z=128):P>128&&(Z*=128/P,P=128);const le=document.createElement("canvas");le.width=Z,le.height=P,le.getContext("2d").drawImage(k,0,0,Z,P),r.value.icon=le.toDataURL("image/png")},k.src=m.target.result},o.readAsDataURL(e)}a.target.value=""}async function ct(){q.value=!0;try{await E.triggerMcpReload()}finally{q.value=!1}}return(a,e)=>(l(),n("div",ls,[e[58]||(e[58]=s("div",null,[s("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Apps, MCPs & Services"),s("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"Manage all LOLLMS extensions: Install from Zoos or register external services.")],-1)),s("div",ns,[s("nav",os,[s("button",{onClick:e[0]||(e[0]=t=>d.value="apps"),class:x(["tab-button",d.value==="apps"?"active":"inactive"])},"Apps",2),s("button",{onClick:e[1]||(e[1]=t=>d.value="mcps"),class:x(["tab-button",d.value==="mcps"?"active":"inactive"])},"MCPs",2)])]),s("div",is,[s("nav",rs,[s("button",{onClick:e[2]||(e[2]=t=>h.value="repositories"),class:x(["tab-button",h.value==="repositories"?"active":"inactive"])},"Repositories",2),s("button",{onClick:e[3]||(e[3]=t=>h.value="available_items"),class:x(["tab-button",h.value==="available_items"?"active":"inactive"])},"Available",2),s("button",{onClick:e[4]||(e[4]=t=>h.value="installed_apps"),class:x(["tab-button",h.value==="installed_apps"?"active":"inactive"])},"Installed",2),s("button",{onClick:e[5]||(e[5]=t=>h.value="registered"),class:x(["tab-button",h.value==="registered"?"active":"inactive"])},"Registered",2)])]),p(Pe,{name:"form-fade"},{default:Ze(()=>[Y.value&&h.value==="registered"?(l(),n("div",ds,[s("div",us,[s("h2",cs,u(O.value?"Edit":"Add")+" Registered "+u(d.value==="apps"?"App":"MCP"),1)]),s("div",ps,[s("form",{onSubmit:J(rt,["prevent"]),class:"p-4 sm:p-6 space-y-6"},[s("div",vs,[s("div",null,[e[29]||(e[29]=s("label",{for:"formName",class:"label"},"Name",-1)),A(s("input",{type:"text",id:"formName","onUpdate:modelValue":e[6]||(e[6]=t=>r.value.name=t),class:"input-field mt-1",required:""},null,512),[[L,r.value.name]])]),s("div",null,[e[30]||(e[30]=s("label",{for:"formUrl",class:"label"},"URL",-1)),A(s("input",{type:"url",id:"formUrl","onUpdate:modelValue":e[7]||(e[7]=t=>r.value.url=t),class:"input-field mt-1",required:""},null,512),[[L,r.value.url]])])]),s("div",null,[e[31]||(e[31]=s("label",{class:"label"},"Icon (Optional)",-1)),s("div",ms,[s("div",fs,[r.value.icon&&!de.value?(l(),n("img",{key:0,src:r.value.icon,onError:it,alt:"Icon Preview",class:"h-full w-full object-cover"},null,40,gs)):(l(),C(Ct,{key:1,class:"w-8 h-8 text-gray-500 dark:text-gray-400"}))]),s("div",ys,[A(s("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>r.value.icon=t),class:"input-field",placeholder:"Paste image URL or upload"},null,512),[[L,r.value.icon]]),s("div",bs,[s("button",{onClick:dt,type:"button",class:"btn btn-secondary text-sm"},"Upload"),r.value.icon?(l(),n("button",{key:0,onClick:e[9]||(e[9]=t=>r.value.icon=""),type:"button",class:"text-sm font-medium text-red-600 hover:text-red-500"},"Remove")):c("",!0)])])]),s("input",{type:"file",ref_key:"fileInput",ref:ke,onChange:ut,class:"hidden",accept:"image/*"},null,544)]),s("div",hs,[e[32]||(e[32]=s("span",{class:"flex-grow flex flex-col"},[s("span",{class:"text-sm font-medium"},"Active"),s("span",{class:"text-sm text-gray-500"},"Inactive items cannot be used.")],-1)),s("button",{onClick:e[10]||(e[10]=t=>r.value.active=!r.value.active),type:"button",class:x([r.value.active?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors"])},[s("span",{class:x([r.value.active?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition"])},null,2)],2)]),s("fieldset",_s,[e[35]||(e[35]=s("legend",{class:"label"},"Authentication",-1)),A(s("select",{id:"formAuthType","onUpdate:modelValue":e[11]||(e[11]=t=>r.value.authentication_type=t),class:"input-field"},e[33]||(e[33]=[s("option",{value:"none"},"None",-1),s("option",{value:"lollms_sso"},"LoLLMs SSO",-1),s("option",{value:"bearer"},"Bearer Token",-1)]),512),[[oe,r.value.authentication_type]]),r.value.authentication_type==="bearer"?(l(),n("div",ks,[e[34]||(e[34]=s("label",{for:"formKey",class:"sr-only"},"Auth Key",-1)),A(s("input",{type:z.value?"text":"password",id:"formKey","onUpdate:modelValue":e[12]||(e[12]=t=>r.value.authentication_key=t),class:"input-field pr-10",placeholder:"Paste Bearer token"},null,8,xs),[[It,r.value.authentication_key]]),s("button",{type:"button",onClick:e[13]||(e[13]=t=>z.value=!z.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[z.value?(l(),C($t,{key:0,class:"w-5 h-5"})):(l(),C(St,{key:1,class:"w-5 h-5"}))])])):c("",!0)]),Qe.value?(l(),n("div",ws,[e[41]||(e[41]=s("h4",{class:"font-medium"},"SSO Configuration",-1)),s("div",null,[e[36]||(e[36]=s("label",{for:"ssoClientId",class:"label"},"Client ID",-1)),A(s("input",{type:"text",id:"ssoClientId","onUpdate:modelValue":e[14]||(e[14]=t=>r.value.client_id=t),class:x(["input-field mt-1",{"bg-gray-100 dark:bg-gray-700":O.value&&R.value.client_id}]),readonly:O.value&&R.value.client_id,placeholder:"Optional, will be generated"},null,10,As),[[L,r.value.client_id]]),e[37]||(e[37]=s("p",{class:"mt-1 text-xs text-gray-500"},"Unique ID. Cannot be changed after creation.",-1))]),s("div",null,[e[38]||(e[38]=s("label",{for:"ssoRedirectUri",class:"label"},"Redirect URI",-1)),A(s("input",{type:"url",id:"ssoRedirectUri","onUpdate:modelValue":e[15]||(e[15]=t=>r.value.sso_redirect_uri=t),class:"input-field mt-1",required:""},null,512),[[L,r.value.sso_redirect_uri]]),e[39]||(e[39]=s("p",{class:"mt-1 text-xs text-gray-500"},"URL to redirect to after authentication.",-1))]),s("div",null,[e[40]||(e[40]=s("label",{class:"label"},"User Info to Share",-1)),s("div",Cs,[(l(),n($,null,M(We,t=>s("div",{key:t.id,class:"flex items-center"},[A(s("input",{id:`sso-info-${t.id}`,type:"checkbox",value:t.id,"onUpdate:modelValue":e[16]||(e[16]=o=>r.value.sso_user_infos_to_share=o),class:"h-4 w-4 rounded border-gray-300 text-blue-600"},null,8,Is),[[Mt,r.value.sso_user_infos_to_share]]),s("label",{for:`sso-info-${t.id}`,class:"ml-2 text-sm"},u(t.label),9,$s)])),64))])])])):c("",!0),s("div",Ss,[s("button",{type:"button",onClick:ae,class:"btn btn-secondary"},"Cancel"),s("button",{type:"submit",class:"btn btn-primary",disabled:ee.value},u(ee.value?"Saving...":"Save"),9,Ms)])],32)])])):c("",!0)]),_:1}),h.value==="repositories"?(l(),n("section",Rs,[s("div",Ts,[s("h3",Us,u(d.value==="apps"?"App":"MCP")+" Zoo Repositories",1),s("div",Ds,[s("button",{onClick:st,class:"btn btn-secondary",disabled:se.value},[p(K,{class:x(["w-4 h-4",{"animate-spin":se.value}])},null,8,["class"]),e[42]||(e[42]=s("span",{class:"ml-2"},"Pull All",-1))],8,Ls),s("button",{onClick:e[17]||(e[17]=t=>W.value=!W.value),class:"btn btn-primary"},u(W.value?"Cancel":"Add Repository"),1)])]),p(Pe,{name:"form-fade"},{default:Ze(()=>[W.value?(l(),n("div",Ns,[s("form",{onSubmit:J(et,["prevent"]),class:"space-y-4"},[s("div",Vs,[s("div",null,[e[43]||(e[43]=s("label",{for:"repo-name",class:"block text-sm font-medium"},"Name",-1)),A(s("input",{id:"repo-name","onUpdate:modelValue":e[18]||(e[18]=t=>S.value.name=t),type:"text",class:"input-field mt-1",placeholder:"e.g., Official Zoo",required:""},null,512),[[L,S.value.name]])]),s("div",Zs,[e[44]||(e[44]=s("label",{for:"repo-url",class:"block text-sm font-medium"},"Git URL",-1)),A(s("input",{id:"repo-url","onUpdate:modelValue":e[19]||(e[19]=t=>S.value.url=t),type:"url",class:"input-field mt-1",placeholder:"https://github.com/ParisNeo/lollms_apps_zoo.git",required:""},null,512),[[L,S.value.url]])])]),s("div",Ps,[s("button",{type:"submit",class:"btn btn-primary",disabled:_.value==="add"},u(_.value==="add"?"Adding...":"Add Repository"),9,js)])],32)])):c("",!0)]),_:1}),Xe.value?(l(),n("div",Es,"Loading repositories...")):!ce.value||ce.value.length===0?(l(),n("div",Fs,[s("p",null,"No "+u(d.value)+" Zoo repositories added.",1)])):(l(),n("div",Hs,[(l(!0),n($,null,M(ce.value,t=>(l(),n("div",{key:t.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm flex flex-col md:flex-row md:items-center justify-between gap-4"},[s("div",Os,[s("p",Bs,u(t.name),1),s("p",zs,u(t.url),1),s("p",qs,"Last updated: "+u(Ye(t.last_pulled_at)),1)]),s("div",Ws,[s("button",{onClick:o=>tt(t),class:"btn btn-secondary btn-sm",disabled:_.value===t.id},[p(K,{class:x(["w-4 h-4",{"animate-spin":_.value===t.id}])},null,8,["class"]),e[45]||(e[45]=s("span",{class:"ml-1"},"Pull",-1))],8,Gs),t.is_deletable?(l(),n("button",{key:0,onClick:o=>at(t),class:"btn btn-danger btn-sm",disabled:_.value===t.id},[p(je,{class:"w-4 h-4"})],8,Xs)):c("",!0)])]))),128))]))])):c("",!0),h.value==="available_items"?(l(),n("section",Ks,[s("div",Js,[s("h3",Qs,"Available "+u(d.value==="apps"?"Apps":"MCPs"),1),s("button",{onClick:e[20]||(e[20]=t=>d.value==="apps"?j(i).fetchZooApps():j(i).fetchZooMcps()),class:"btn btn-secondary",disabled:ue.value},[p(K,{class:x(["w-4 h-4",{"animate-spin":ue.value}])},null,8,["class"]),e[46]||(e[46]=s("span",{class:"ml-2"},"Rescan",-1))],8,Ys)]),s("div",ea,[s("div",ta,[s("div",sa,[A(s("input",{type:"text","onUpdate:modelValue":e[21]||(e[21]=t=>F.value=t),placeholder:`Search ${d.value}...`,class:"input-field w-full pl-10"},null,8,aa),[[L,F.value]]),e[47]||(e[47]=s("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[s("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),s("div",la,[A(s("select",{"onUpdate:modelValue":e[22]||(e[22]=t=>G.value=t),class:"input-field"},e[48]||(e[48]=[s("option",{value:"All"},"All Statuses",-1),s("option",{value:"Installed"},"Installed",-1),s("option",{value:"Uninstalled"},"Uninstalled",-1)]),512),[[oe,G.value]]),A(s("select",{"onUpdate:modelValue":e[23]||(e[23]=t=>te.value=t),class:"input-field"},[(l(!0),n($,null,M(Je.value,t=>(l(),n("option",{key:t,value:t},u(t),9,na))),128))],512),[[oe,te.value]])])]),s("div",oa,[A(s("select",{"onUpdate:modelValue":e[24]||(e[24]=t=>H.value=t),class:"input-field w-48"},[(l(),n($,null,M(Ge,t=>s("option",{key:t.value,value:t.value},"Sort by "+u(t.label),9,ia)),64))],512),[[oe,H.value]]),s("button",{onClick:e[25]||(e[25]=t=>X.value=X.value==="asc"?"desc":"asc"),class:"btn btn-secondary p-2"},[X.value==="asc"?(l(),C(Lt,{key:0,class:"w-5 h-5"})):(l(),C(Nt,{key:1,class:"w-5 h-5"}))])]),ue.value?(l(),n("div",ra,[(l(),n($,null,M(8,t=>p(as,{key:t})),64))])):!V.value||V.value.length===0?(l(),n("div",da,[e[49]||(e[49]=s("h4",{class:"font-semibold"},"No Items Found",-1)),s("p",ua,"Add and pull a repository to see available "+u(d.value)+".",1)])):pe.value.length===0?(l(),n("div",ca,e[50]||(e[50]=[s("h4",{class:"font-semibold"},"No Matching Items",-1),s("p",{class:"text-sm"},"Try adjusting your search or filter.",-1)]))):(l(),n("div",pa,[Ae.value?(l(),n("div",va,[(l(!0),n($,null,M(Ae.value,(t,o)=>(l(),n("div",{key:o},[s("h3",ma,u(o),1),s("div",fa,[(l(!0),n($,null,M(t,m=>(l(),C(Fe,{key:`${m.repository}/${m.folder_name}`,app:m,task:m.task,"is-starred":D.value.includes(m.name),onStar:k=>$e(m.name),onInstall:k=>me(m),onDetails:k=>Re(m),onHelp:k=>Te(m),onViewTask:ge,onCancelInstall:fe},null,8,["app","task","is-starred","onStar","onInstall","onDetails","onHelp"]))),128))])]))),128))])):(l(),n("div",ga,[(l(!0),n($,null,M(pe.value,t=>(l(),C(Fe,{key:`${t.repository}/${t.folder_name}`,app:t,task:t.task,"is-starred":D.value.includes(t.name),onStar:o=>$e(t.name),onInstall:o=>me(t),onUpdate:o=>Se(t),onDetails:o=>Re(t),onHelp:o=>Te(t),onViewTask:ge,onCancelInstall:fe},null,8,["app","task","is-starred","onStar","onInstall","onUpdate","onDetails","onHelp"]))),128))]))]))])])):c("",!0),h.value==="installed_apps"?(l(),n("section",ya,[s("div",ba,[e[52]||(e[52]=s("h3",{class:"text-xl font-semibold"},"Installed Items",-1)),s("button",{onClick:e[26]||(e[26]=(...t)=>j(i).fetchInstalledApps&&j(i).fetchInstalledApps(...t)),class:"btn btn-secondary",disabled:j(re)},[p(K,{class:x(["w-4 h-4",{"animate-spin":j(re)}])},null,8,["class"]),e[51]||(e[51]=s("span",{class:"ml-2"},"Refresh",-1))],8,ha)]),j(re)?(l(),n("div",_a,"Loading...")):!ve.value||ve.value.length===0?(l(),n("div",ka,e[53]||(e[53]=[s("h4",{class:"font-semibold"},"No Items Installed",-1),s("p",{class:"text-sm"},'Go to "Available" to install an item.',-1)]))):(l(),n("div",xa,[(l(!0),n($,null,M(ve.value,t=>(l(),n("div",{key:t.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm flex flex-col md:flex-row md:items-center justify-between gap-4"},[s("div",wa,[t.icon?(l(),n("img",{key:0,src:t.icon,class:"h-10 w-10 rounded-md flex-shrink-0 object-cover",alt:"Icon"},null,8,Aa)):c("",!0),s("div",Ca,[s("div",Ia,[s("p",$a,u(t.name),1),s("span",{class:x(["text-xs font-semibold px-2 py-0.5 rounded-full",t.item_type==="mcp"?"bg-cyan-100 text-cyan-800":"bg-indigo-100 text-indigo-800"])},u(t.item_type==="mcp"?"MCP":"App"),3)]),s("p",Sa,"Port: "+u(t.port),1)])]),s("div",Ma,[t.task?(l(),C(Be,{key:0,task:t.task,onView:ge,onCancel:fe},null,8,["task"])):(l(),n($,{key:1},[t.update_available?(l(),n("button",{key:0,onClick:o=>Se(t),class:"btn btn-warning btn-sm p-2",title:"Update"},[p(Oe,{class:"w-5 h-5"})],8,Ra)):c("",!0),s("span",{class:x(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-green-100 text-green-800":t.status==="running","bg-gray-100 text-gray-800":t.status==="stopped","bg-red-100 text-red-800":t.status==="error"}])},u(t.status),3),t.status==="running"&&t.url?(l(),n("a",{key:1,href:t.url,target:"_blank",class:"btn btn-secondary btn-sm p-2",title:"Open"},[p(Ut,{class:"w-5 h-5"})],8,Ta)):c("",!0),t.has_config_schema?(l(),n("button",{key:2,onClick:o=>nt(t),class:"btn btn-secondary btn-sm p-2",title:"Configure"},[p(Rt,{class:"w-5 h-5"})],8,Ua)):c("",!0),s("button",{onClick:o=>ot(t),class:"btn btn-secondary btn-sm p-2",title:"Logs"},[p(Dt,{class:"w-5 h-5"})],8,Da),t.status!=="running"?(l(),n("button",{key:3,onClick:o=>Me(t.id,"start"),class:"btn btn-success btn-sm p-2",disabled:_.value===`start-${t.id}`,title:"Start"},[p(Tt,{class:"w-5 h-5"})],8,La)):c("",!0),t.status==="running"||t.status==="error"&&t.pid?(l(),n("button",{key:4,onClick:o=>Me(t.id,"stop"),class:"btn btn-warning btn-sm p-2",disabled:_.value===`stop-${t.id}`,title:"Stop"},[p(He,{class:"w-5 h-5"})],8,Na)):c("",!0),s("button",{onClick:o=>lt(t),class:"btn btn-danger btn-sm p-2",title:"Uninstall"},[p(je,{class:"w-5 h-5"})],8,Va)],64))])]))),128))]))])):c("",!0),h.value==="registered"?(l(),n("section",Za,[d.value==="apps"?(l(),n("div",Pa,[s("div",ja,[e[54]||(e[54]=s("h3",{class:"text-xl font-semibold"},"Registered System Apps",-1)),s("button",{onClick:e[27]||(e[27]=t=>Ue("apps")),class:"btn btn-primary text-sm"},"+ Add System App")]),Ce.value.length===0?(l(),n("div",Ea,e[55]||(e[55]=[s("p",null,"No system-wide Apps are registered.",-1)]))):(l(),n("div",Fa,[(l(!0),n($,null,M(Ce.value,t=>(l(),C(Ee,{key:t.id,mcp:t,"is-editable":"",onEdit:o=>De(t,"apps"),onDelete:o=>Le(t,"apps")},null,8,["mcp","onEdit","onDelete"]))),128))]))])):c("",!0),d.value==="mcps"?(l(),n("div",Ha,[s("div",Oa,[e[56]||(e[56]=s("h3",{class:"text-xl font-semibold"},"Registered System MCPs",-1)),s("div",Ba,[s("button",{onClick:ct,class:"btn btn-secondary text-sm",disabled:q.value},[p(K,{class:x(["w-4 h-4",{"animate-spin":q.value}])},null,8,["class"]),s("span",qa,u(q.value?"Reloading...":"Reload MCPs"),1)],8,za),s("button",{onClick:e[28]||(e[28]=t=>Ue("mcps")),class:"btn btn-primary text-sm"},"+ Add System MCP")])]),Ie.value.length===0?(l(),n("div",Wa,e[57]||(e[57]=[s("p",null,"No system-wide MCPs are registered.",-1)]))):(l(),n("div",Ga,[(l(!0),n($,null,M(Ie.value,t=>(l(),C(Ee,{key:t.id,mcp:t,"is-editable":"",onEdit:o=>De(t,"mcps"),onDelete:o=>Le(t,"mcps")},null,8,["mcp","onEdit","onDelete"]))),128))]))])):c("",!0)])):c("",!0)]))}},nl=ye(Xa,[["__scopeId","data-v-2e57bc5d"]]);export{nl as default};
