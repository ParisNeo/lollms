import{Q as L,b as s,d as a,g as o,h as i,e as u,t as g,n as r,P as y,q as M,cK as N,cL as p,cM as j,j as d,a6 as c,a4 as w,cN as A,cO as m,F as C,E as b,Z as I,cG as k,ci as D}from"./index-CSHNcS4T.js";import{_ as S,I as E}from"./AppCardSkeleton-CHSK7G4d.js";import{I as T}from"./IconGlobeAlt-KaX2Fbwc.js";import{I as x}from"./IconPlayCircle-Dfciw0sD.js";import{_ as f}from"./AdminView-BhxbcXTa.js";import{_ as U}from"./IconNoSymbol-CrHxLLR7.js";const v={key:0,class:"absolute inset-0 bg-gray-500/30 dark:bg-gray-900/50 flex items-center justify-center rounded-lg z-10",title:"This is a legacy scripted personality and is not compatible with this version of the application."},z={class:"card-header"},$=["src","alt"],h={class:"flex-grow min-w-0"},O={class:"flex justify-between items-start"},Q=["title"],Y={class:"card-tags"},Z={key:0,class:"tag installed-tag-broken"},B={key:2,class:"tag registered-tag"},R={key:3,class:"tag"},F={key:4,class:"tag"},G={key:5,class:"tag"},P={class:"card-body"},V=["title"],W={key:1,class:"px-4 pb-2 text-xs text-gray-400 dark:text-gray-500 flex items-center gap-1"},H=["title"],J={class:"card-footer"},X={class:"flex-1 min-w-0"},q={key:1,class:"flex gap-2 w-full"},K={key:0,class:"flex gap-2 w-full"},_=["disabled"],tt={key:4,class:"flex items-center gap-2"},et=["href"],at={class:"flex-shrink-0 flex gap-1"},st="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0idy02IGgtNiI+CiAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMy4zNzUgMS41YTguMjc1IDguMjc1IDAgMCAwLTguMjc1IDguMjc1YzAgNC4xMjIgMi41NjEgNy42MyA2LjA3NyA4LjgzNWEuNzUuNzUgMCAwIDAgLjc2NC0uMTExYy4xMjUtLjA3OC4yNTgtLjE5LjM5OS0uMzE0bC4wMDQtLjAwNSNhLjQ5OC40OTggMCAwIDEgLjYxMy0uMDIzbDIuNDQyIDEuMTM4YTEuNSAxLjUgMCAwIDAgMS42OTktLjkxM2w0LjQxMy05LjU3N2E4LjI1IDE4LjI1IDAgMCAwLTkuOTU0LTkuOTU0bC05LjU3NyA0LjQxM2ExLjUgMS41IDAgMCAwLS45MTMgMS42OTlsMS4xMzggMi40NDJhLjQ5OC40OTggMCAwIDEgLS4wMjMuNjEzbC0uMDA1LjAwNC0uMzE0LjM5OWEuNzUuNzUgMCAwIDAtLjExMS43NjRBMTEuMjIgMTEuMjIgMCAwIDEtMy4zNzUgMTguNWMtNS4wNzIgMC05LjE4OC00LjExNi05LjE4OC05LjE4OGE5LjE4OCA5LjE4OCAwIDAgMSAxLjYxNy01LjE2MmMuMjQ2LS40Mi4wMzgtLjkxOC0uMzY4LTEuMTU3bC0xLjQyNS0uODM4YTEuNSAxLjUgMCAwIDAtMi4wODYuNDlMMy4zNzUgMS41em00LjQ4OCAxMy4wMjNhLjUuNSAwIDAgMS0uMzU0LS4xNDdsLTEuNTQyLTEuNTQxYS41LjUgMCAxIDEgLjcwOC0uNzA4bDEuNTQxIDEuNTQyYS41LjUgMCAwIDEgLS4zNTQuODU0em0yLjk0LTIuOTRhLjUuNSAwIDAgMS0uMzU0LS4xNDZsLTEuNTQxLTEuNTQyYS41LjUgMCAwIDEgLjcwNy0uNzA4bDEuNTQyIDEuNTQxYS41LjUgMCAwIDEgLS4zNTQuODU0em0tMi45NC0yLjk0YS41LjUgMCAwIDEtLjM1My0uMTQ2bC0xLjU0Mi0xLjU0MmEuNS41IDAgMCAxIC43MDctLjcwN2wxLjU0MiAxLjU0MWEuNS41IDAgMCAxLS4zNTQuODUzem0yLjk0LTIuOTRhLjUuNSAwIDAgMS0uMzU0LS4xNDZsLTEuNTQxLTEuNTQyYS41LjUgMCAwIDEgLjcwNy0uNzA4bDEuNTQyIDEuNTQxYS41LjUgMCAwIDEgLS4zNTQuODU0em00LjQ4OC0uNzU3YS41LjUgMCAwIDEtLjM1NC0uMTQ3bC0xLjU0Mi0xLjU0MWEuNS41IDAgMCAxIC43MDgtLjcwOGwxLjU0MSAxLjU0MWEuNS41IDAgMCAxLS4zNTQuODU0em0yLjk0LTIuOTRhLjUuNSAwIDAgMS0uMzU0LS4xNDZsLTEuNTQxLTEuNTQyYS41LjUgMCAwIDEgLjcwNy0uNzA4bDEuNTQyIDEuNTQxYS41LjUgMCAwIDEgLS4zNTQuODU0em0tMS40NzEtNC40N2EuNS41IDAgMCAxLS4zNTQtLjE0N2wtMS41NDItMS41NDFhLjUuNSAwIDAgMSAuNzA4LS43MDhsMS41NDEgMS41NDFhLjUuNSAwIDAgMS0uMzU0Ljg1NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIgLz4KPC9zdmc+Cg==",it={__name:"AppCard",props:{app:{type:Object,required:!0},task:{type:Object,default:null},isStarred:{type:Boolean,default:!1},itemTypeName:{type:String,default:"App"}},emits:["star","install","update","uninstall","details","help","view-task","cancel-install","start","stop","fix","configure","purge","logs","delete","edit-env","restart"],setup(t,{emit:nt}){return(n,e)=>(a(),s("div",{class:r(["card",{"opacity-60 pointer-events-none":t.app.is_legacy_scripted}])},[t.app.is_legacy_scripted?(a(),s("div",v,[u(U,{class:"w-16 h-16 text-red-500"})])):o("",!0),i("div",z,[i("img",{src:t.app.icon||st,alt:t.app.name,class:"card-icon"},null,8,$),i("div",h,[i("div",O,[i("h3",{class:"card-title",title:t.app.name},g(t.app.name),9,Q),i("button",{onClick:e[0]||(e[0]=y(l=>n.$emit("star",t.app.name),["stop"])),class:r(["p-1.5 rounded-full transition-colors flex-shrink-0",t.isStarred?"bg-yellow-400/20 text-yellow-500":"text-gray-400 hover:text-yellow-500"])},[t.isStarred?(a(),M(N,{key:0,class:"w-5 h-5"})):(a(),M(p,{key:1,class:"w-5 h-5"}))],2)]),i("div",Y,[t.app.is_broken?(a(),s("span",Z,"Broken")):t.app.is_installed?(a(),s("span",{key:1,class:r(["tag",{"installed-tag-running":t.app.status==="running","installed-tag-stopped":t.app.status!=="running"}])},g(t.app.status||"Installed"),3)):t.app.repository==="Registered"?(a(),s("span",B,"Registered")):o("",!0),t.app.author?(a(),s("span",R,"by "+g(t.app.author),1)):o("",!0),t.app.category?(a(),s("span",F,g(t.app.category),1)):o("",!0),t.app.version?(a(),s("span",G,"v"+g(t.app.version),1)):o("",!0)])])]),i("div",P,[i("p",{class:"card-description",title:t.app.description},g(t.app.description),9,V)]),t.app.repository?(a(),s("div",W,[u(j,{class:"w-3 h-3"}),i("span",{class:"truncate",title:`From: ${t.app.repository}`},g(t.app.repository),9,H)])):o("",!0),i("div",J,[i("div",X,[t.task?(a(),M(S,{key:0,task:t.task,onView:e[1]||(e[1]=l=>n.$emit("view-task",t.task.id)),onCancel:e[2]||(e[2]=l=>n.$emit("cancel-install"))},null,8,["task"])):(a(),s("div",q,[t.app.is_broken?(a(),s("div",K,[i("button",{onClick:e[3]||(e[3]=l=>n.$emit("fix",t.app)),class:"btn btn-warning w-full",title:"Fix Installation"},[u(f,{class:"w-4 h-4 mr-2"}),e[17]||(e[17]=d("Fix"))]),i("button",{onClick:e[4]||(e[4]=l=>n.$emit("purge",t.app)),class:"btn btn-danger w-full",title:"Purge Installation"},[u(c,{class:"w-4 h-4 mr-2"}),e[18]||(e[18]=d("Purge"))])])):!t.app.is_installed&&t.app.repository!=="Registered"?(a(),s("button",{key:1,onClick:e[5]||(e[5]=l=>n.$emit("install",t.app)),class:"btn btn-primary w-full",disabled:t.app.is_legacy_scripted},[u(w,{class:"w-4 h-4 mr-2"}),e[19]||(e[19]=d("Install "))],8,_)):t.app.is_installed&&t.app.update_available?(a(),s("button",{key:2,onClick:e[6]||(e[6]=l=>n.$emit("update",t.app)),class:"btn btn-warning w-full"},[u(E,{class:"w-4 h-4 mr-2"}),d("Update to "+g(t.app.repo_version),1)])):t.app.is_installed&&t.app.status!=="running"?(a(),s("button",{key:3,onClick:e[7]||(e[7]=l=>n.$emit("start",t.app)),class:"btn btn-success p-2",title:"Start App"},[u(x,{class:"w-5 h-5"})])):t.app.is_installed&&t.app.status==="running"?(a(),s("div",tt,[t.app.url?(a(),s("a",{key:0,href:t.app.url,target:"_blank",class:"btn btn-primary p-2",title:"Open App"},[u(T,{class:"w-5 h-5"})],8,et)):o("",!0),i("button",{onClick:e[8]||(e[8]=l=>n.$emit("restart",t.app)),class:"btn btn-secondary p-2",title:"Restart App"},[u(A,{class:"w-5 h-5"})]),i("button",{onClick:e[9]||(e[9]=l=>n.$emit("stop",t.app)),class:"btn btn-warning p-2",title:"Stop App"},[u(m,{class:"w-5 h-5"})])])):o("",!0)]))]),i("div",at,[!t.task&&!t.app.is_broken?(a(),s(C,{key:0},[t.app.is_installed&&t.app.has_config_schema?(a(),s("button",{key:0,onClick:e[10]||(e[10]=l=>n.$emit("configure",t.app)),class:"btn btn-secondary p-2",title:"Configure"},[u(b,{class:"w-4 h-4"})])):o("",!0),t.app.is_installed&&t.app.has_dot_env_config?(a(),s("button",{key:1,onClick:e[11]||(e[11]=l=>n.$emit("edit-env",t.app)),class:"btn btn-secondary p-2",title:"Edit .env Configuration"},e[20]||(e[20]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-4 h-4"},[i("path",{d:"m2.695 14.762-1.262 3.155a.5.5 0 0 0 .65.65l3.155-1.262a.5.5 0 0 0 .134-.05l8.606-8.606-3.155-3.155-8.606 8.606a.5.5 0 0 0-.05.134Z"}),i("path",{d:"M13.44 3.19a.5.5 0 0 0 0 .707l2.845 2.845a.5.5 0 0 0 .707 0l1.262-1.262a.5.5 0 0 0 0-.707l-2.845-2.845a.5.5 0 0 0-.707 0l-1.262 1.262Z"})],-1)]))):o("",!0),t.app.is_installed?(a(),s("button",{key:2,onClick:e[12]||(e[12]=l=>n.$emit("logs",t.app)),class:"btn btn-secondary p-2",title:"View Logs"},[u(I,{class:"w-4 h-4"})])):o("",!0)],64)):o("",!0),i("button",{onClick:e[13]||(e[13]=l=>n.$emit("details",t.app)),class:"btn btn-secondary p-2",title:"Details"},[u(k,{class:"w-4 h-4"})]),t.app.has_readme?(a(),s("button",{key:1,onClick:e[14]||(e[14]=l=>n.$emit("help",t.app)),class:"btn btn-secondary p-2",title:"Help"},[u(D,{class:"w-4 h-4"})])):o("",!0),t.app.is_installed?(a(),s("button",{key:2,onClick:e[15]||(e[15]=l=>n.$emit("uninstall",t.app)),class:"btn btn-danger-outline p-2",title:"Uninstall"},[u(c,{class:"w-4 h-4"})])):o("",!0),t.app.repository==="Registered"?(a(),s("button",{key:3,onClick:e[16]||(e[16]=l=>n.$emit("delete",t.app)),class:"btn btn-danger-outline p-2",title:"Delete Registration"},[u(c,{class:"w-4 h-4"})])):o("",!0)])])],2))}},Mt=L(it,[["__scopeId","data-v-f94cdef5"]]);export{Mt as A};
