import{u as L,f as M,s as b,r as i,o as h,g as f,c as m,b as r,d as l,e as s,h as V,i as U,j as g,F as z,k as P,t as x,v as n,l as T,m as c,w}from"./index-D5hRrNn1.js";const N={key:0,disabled:"",value:""},C=["value"],D={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},B={for:"putThoughts",class:"flex items-center cursor-pointer"},F={class:"text-right pt-4"},K=["disabled"],A={__name:"LLMSettings",setup(R){const d=L(),y=M(),{user:o}=b(d),{availableLollmsModels:_}=b(y),t=i({lollms_model_name:"",llm_ctx_size:4096,llm_temperature:.7,llm_top_k:50,llm_top_p:.95,llm_repeat_penalty:1.1,llm_repeat_last_n:64,put_thoughts_in_context:!1}),u=i(!1),p=i(!1),v=()=>{o.value&&(t.value={lollms_model_name:o.value.lollms_model_name||"",llm_ctx_size:o.value.llm_ctx_size??4096,llm_temperature:o.value.llm_temperature??.7,llm_top_k:o.value.llm_top_k??50,llm_top_p:o.value.llm_top_p??.95,llm_repeat_penalty:o.value.llm_repeat_penalty??1.1,llm_repeat_last_n:o.value.llm_repeat_last_n??64,put_thoughts_in_context:o.value.put_thoughts_in_context||!1})};h(v),f(o,v,{deep:!0}),f(t,()=>{p.value=!0},{deep:!0});async function k(){u.value=!0;try{await d.updateUserPreferences(t.value),p.value=!1}catch{}finally{u.value=!1}}return(S,e)=>(r(),m("section",null,[e[16]||(e[16]=l("h4",{class:"text-lg font-semibold mb-4 border-b dark:border-gray-600 pb-2"},"LLM Configuration",-1)),l("form",{onSubmit:w(k,["prevent"]),class:"space-y-6 max-w-2xl"},[l("div",null,[e[8]||(e[8]=l("label",{for:"lollmsModelSelect",class:"block text-sm font-medium mb-1"},"Default LLM Model",-1)),s(l("select",{id:"lollmsModelSelect","onUpdate:modelValue":e[0]||(e[0]=a=>t.value.lollms_model_name=a),class:"input-field"},[g(_).length===0?(r(),m("option",N,"Loading models...")):U("",!0),(r(!0),m(z,null,P(g(_),a=>(r(),m("option",{key:a.name,value:a.name},x(a.name),9,C))),128))],512),[[V,t.value.lollms_model_name]])]),l("div",D,[l("div",null,[e[9]||(e[9]=l("label",{for:"contextSize",class:"block text-sm font-medium"},"Context Size (tokens)",-1)),s(l("input",{type:"number",id:"contextSize","onUpdate:modelValue":e[1]||(e[1]=a=>t.value.llm_ctx_size=a),class:"input-field mt-1",placeholder:"e.g., 4096"},null,512),[[n,t.value.llm_ctx_size,void 0,{number:!0}]])]),l("div",null,[e[10]||(e[10]=l("label",{for:"temperature",class:"block text-sm font-medium"},"Temperature",-1)),s(l("input",{type:"number",id:"temperature","onUpdate:modelValue":e[2]||(e[2]=a=>t.value.llm_temperature=a),class:"input-field mt-1",step:"0.01",min:"0",max:"2",placeholder:"e.g., 0.7"},null,512),[[n,t.value.llm_temperature,void 0,{number:!0}]])]),l("div",null,[e[11]||(e[11]=l("label",{for:"topK",class:"block text-sm font-medium"},"Top K",-1)),s(l("input",{type:"number",id:"topK","onUpdate:modelValue":e[3]||(e[3]=a=>t.value.llm_top_k=a),class:"input-field mt-1",step:"1",min:"1",placeholder:"e.g., 50"},null,512),[[n,t.value.llm_top_k,void 0,{number:!0}]])]),l("div",null,[e[12]||(e[12]=l("label",{for:"topP",class:"block text-sm font-medium"},"Top P",-1)),s(l("input",{type:"number",id:"topP","onUpdate:modelValue":e[4]||(e[4]=a=>t.value.llm_top_p=a),class:"input-field mt-1",step:"0.01",min:"0",max:"1",placeholder:"e.g., 0.95"},null,512),[[n,t.value.llm_top_p,void 0,{number:!0}]])]),l("div",null,[e[13]||(e[13]=l("label",{for:"repeatPenalty",class:"block text-sm font-medium"},"Repeat Penalty",-1)),s(l("input",{type:"number",id:"repeatPenalty","onUpdate:modelValue":e[5]||(e[5]=a=>t.value.llm_repeat_penalty=a),class:"input-field mt-1",step:"0.01",min:"0",placeholder:"e.g., 1.1"},null,512),[[n,t.value.llm_repeat_penalty,void 0,{number:!0}]])]),l("div",null,[e[14]||(e[14]=l("label",{for:"repeatLastN",class:"block text-sm font-medium"},"Repeat Last N",-1)),s(l("input",{type:"number",id:"repeatLastN","onUpdate:modelValue":e[6]||(e[6]=a=>t.value.llm_repeat_last_n=a),class:"input-field mt-1",step:"1",min:"0",placeholder:"e.g., 64"},null,512),[[n,t.value.llm_repeat_last_n,void 0,{number:!0}]])])]),l("div",null,[l("label",B,[s(l("input",{type:"checkbox",id:"putThoughts","onUpdate:modelValue":e[7]||(e[7]=a=>t.value.put_thoughts_in_context=a),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[T,t.value.put_thoughts_in_context]]),e[15]||(e[15]=l("span",{class:"ml-2 text-sm"},[c("Put thoughts in context ("),l("code",{class:"text-xs bg-gray-200 dark:bg-gray-700 p-1 rounded"},"think"),c(" blocks)")],-1))])]),l("div",F,[l("button",{type:"submit",class:"btn btn-primary",disabled:u.value||!p.value},x(u.value?"Saving...":"Save LLM Settings"),9,K)])],32)]))}};export{A as default};
