import{p as R,q,r as p,x as M,o as W,y as z,z as H,c as a,b as o,g as e,k as d,A as f,_ as O,e as I,F as E,i as N,d as g,t as v,n as J,I as Y,B as K,C as S,D as Q,E as X,m as D,f as Z,h as y,j as x,G as ee,H as te,J as ne}from"./index-C0EgH78e.js";const se={class:"space-y-6"},oe={class:"flex justify-between items-center"},ae={class:"flex items-center gap-2"},le={key:0,class:"text-center p-4"},re={key:1,class:"text-center p-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},ie={key:2,class:"space-y-3"},de=["onClick"],ce={class:"font-semibold"},ue={key:0,class:"border border-t-0 dark:border-gray-700/50 rounded-b-lg"},me={class:"flex items-center gap-3 flex-grow truncate"},pe=["src"],fe={class:"flex-grow truncate"},be={class:"font-medium truncate"},ge={class:"text-xs text-gray-500 truncate"},ve={class:"flex items-center gap-x-2 flex-shrink-0"},ye=["onClick"],xe=["onClick"],ke={class:"flex items-center gap-4"},he=["src"],_e={key:1,class:"h-16 w-16 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center border dark:border-gray-600"},we={class:"space-y-2"},Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Pe={class:"p-3 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 text-blue-800 dark:text-blue-200"},Me={class:"flex items-center"},Ne={__name:"PromptsSettings",setup(Ie){const u=R(),r=q(),{on:V,off:$}=z(),n=p(null),k=p(null),h=M(()=>n.value&&n.value.id),m=p({}),b=p(null);W(()=>{u.fetchPrompts(),V("task:completed",w)}),H(()=>{$("task:completed",w)});const _=M(()=>u.userPromptsByCategory);function T(s){m.value[s]=!m.value[s]}function U(){n.value={name:"",content:"",category:"",author:"",description:"",icon:null},r.openModal("promptEditor")}function j(){r.openModal("generatePrompt",{onTaskSubmitted:s=>{b.value=s}})}function w(s){s&&s.id===b.value&&(b.value=null,r.isModalOpen("tasksManager")&&r.closeModal("tasksManager"),s.status==="completed"&&s.result?C(s.result):r.addNotification("Prompt generation did not complete successfully.","warning"))}function C(s){n.value={...s},r.openModal("promptEditor")}async function B(s){await r.showConfirmation({title:`Delete Prompt '${s.name}'?`,message:"This action cannot be undone.",confirmText:"Delete"})&&await u.deletePrompt(s.id)}async function P(){if(!n.value.name||!n.value.content){r.addNotification("Name and Content are required.","warning");return}try{h.value?await u.updatePrompt(n.value.id,n.value):await u.createPrompt(n.value),r.closeModal("promptEditor")}catch{}}function A(){var s;(s=k.value)==null||s.click()}function F(s){const t=s.target.files[0];if(t&&t.type.startsWith("image/")){const l=new FileReader;l.onload=c=>{n.value&&(n.value.icon=c.target.result)},l.readAsDataURL(t)}}function G(){n.value&&(n.value.icon=null)}return(s,t)=>(o(),a("div",se,[e("div",oe,[t[6]||(t[6]=e("div",null,[e("h2",{class:"text-xl font-bold"},"My Prompts"),e("p",{class:"text-sm text-gray-500"},"Manage your personal library of reusable prompts.")],-1)),e("div",ae,[e("button",{onClick:j,class:"btn btn-secondary"},[d(O,{class:"w-4 h-4 mr-2"}),t[5]||(t[5]=f(" Generate with AI "))]),e("button",{onClick:U,class:"btn btn-primary"},"Add New Prompt")])]),I(u).isLoading?(o(),a("div",le,"Loading prompts...")):Object.keys(_.value).length===0?(o(),a("div",re,t[7]||(t[7]=[e("p",null,"You haven't created any prompts yet.",-1)]))):(o(),a("div",ie,[(o(!0),a(E,null,N(_.value,(l,c)=>(o(),a("div",{key:c},[e("button",{onClick:i=>T(c),class:"w-full flex justify-between items-center p-2 bg-gray-100 dark:bg-gray-700/50 rounded-t-lg"},[e("h3",ce,v(c),1),d(Y,{class:J(["w-5 h-5 transition-transform",{"rotate-90":m.value[c]}])},null,8,["class"])],8,de),m.value[c]?(o(),a("div",ue,[(o(!0),a(E,null,N(l,i=>(o(),a("div",{key:i.id,class:"p-3 flex items-center justify-between border-t dark:border-gray-700/50 first:border-t-0"},[e("div",me,[i.icon?(o(),a("img",{key:0,src:i.icon,class:"h-8 w-8 rounded-md flex-shrink-0 object-cover",alt:"Icon"},null,8,pe)):(o(),K(S,{key:1,class:"h-8 w-8 flex-shrink-0 text-gray-400 p-1"})),e("div",fe,[e("p",be,v(i.name),1),e("p",ge,v(i.description||"No description"),1)])]),e("div",ve,[e("button",{onClick:L=>C(i),class:"btn btn-secondary btn-sm p-2",title:"Edit"},[d(Q,{class:"w-4 h-4"})],8,ye),e("button",{onClick:L=>B(i),class:"btn btn-danger btn-sm p-2",title:"Delete"},[d(X,{class:"w-4 h-4"})],8,xe)])]))),128))])):g("",!0)]))),128))])),d(ne,{modalName:"promptEditor",title:h.value?"Edit Prompt":"Add New Prompt",maxWidthClass:"max-w-4xl"},{body:D(()=>[n.value?(o(),a("form",{key:0,onSubmit:Z(P,["prevent"]),class:"space-y-4"},[e("div",ke,[n.value.icon?(o(),a("img",{key:0,src:n.value.icon,class:"h-16 w-16 rounded-lg object-cover border dark:border-gray-600"},null,8,he)):(o(),a("div",_e,[d(S,{class:"h-10 w-10 text-gray-400"})])),e("div",we,[e("input",{type:"file",ref_key:"fileInput",ref:k,onChange:F,accept:"image/*",class:"hidden"},null,544),e("button",{type:"button",onClick:A,class:"btn btn-secondary text-sm"},"Upload Icon"),n.value.icon?(o(),a("button",{key:0,type:"button",onClick:G,class:"btn btn-danger-outline text-sm"},"Remove Icon")):g("",!0)])]),e("div",Ce,[e("div",null,[t[8]||(t[8]=e("label",{for:"prompt-name",class:"block text-sm font-medium"},[f("Name "),e("span",{class:"text-red-500"},"*")],-1)),y(e("input",{id:"prompt-name","onUpdate:modelValue":t[0]||(t[0]=l=>n.value.name=l),type:"text",class:"input-field mt-1",required:""},null,512),[[x,n.value.name]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"prompt-category",class:"block text-sm font-medium"},"Category",-1)),y(e("input",{id:"prompt-category","onUpdate:modelValue":t[1]||(t[1]=l=>n.value.category=l),type:"text",class:"input-field mt-1",placeholder:"e.g., Writing, Coding"},null,512),[[x,n.value.category]])])]),e("div",null,[t[10]||(t[10]=e("label",{for:"prompt-description",class:"block text-sm font-medium"},"Description",-1)),y(e("textarea",{id:"prompt-description","onUpdate:modelValue":t[2]||(t[2]=l=>n.value.description=l),rows:"2",class:"input-field mt-1"},null,512),[[x,n.value.description]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"prompt-content",class:"block text-sm font-medium"},[f("Content "),e("span",{class:"text-red-500"},"*")],-1)),d(ee,{modelValue:n.value.content,"onUpdate:modelValue":t[3]||(t[3]=l=>n.value.content=l),class:"mt-1"},null,8,["modelValue"])]),e("div",Pe,[e("div",Me,[d(te,{class:"h-5 w-5 mr-2"}),t[12]||(t[12]=e("h4",{class:"font-bold"},"Placeholder Help",-1))]),t[13]||(t[13]=e("div",{class:"mt-2 text-xs space-y-1"},[e("p",null,[e("code",{class:"font-mono bg-blue-200 dark:bg-blue-800/50 px-1 rounded"},"@<name>@"),f(": Simple text replacement.")]),e("p",null,"For advanced options with a user-friendly form:"),e("pre",{class:"whitespace-pre-wrap font-mono text-xs bg-blue-100 dark:bg-blue-900/40 p-2 rounded"},`@<name>@
title: Display Title
type: str | text | int | float | bool
options: comma, separated, list
default: default value used if the user doesn't set it
help: A helpful tip for the user.
@</name>@`)],-1))])],32)):g("",!0)]),footer:D(()=>[e("button",{onClick:t[4]||(t[4]=l=>I(r).closeModal("promptEditor")),class:"btn btn-secondary"},"Cancel"),e("button",{onClick:P,class:"btn btn-primary"},"Save Prompt")]),_:1},8,["title"])]))}};export{Ne as default};
