const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BzJSkIlv.js","assets/index-CFwJZMKx.css"])))=>i.map(i=>d[i]);
import{$ as h,r as u,z as y,c as r,b as o,g as t,h as g,j as x,d as w,t as v,F as b,i as k,k as m,U as S,Y as A,a0 as F}from"./index-BzJSkIlv.js";const T={class:"max-w-2xl mx-auto"},V={class:"relative"},z={class:"mt-4"},B={key:0,class:"text-center py-6 text-gray-500"},C={key:1,class:"space-y-3"},N={class:"flex items-center space-x-3"},U={class:"font-medium text-gray-800 dark:text-gray-100"},D=["onClick"],M={__name:"AddFriend",setup(E){const _=h(),n=u(""),s=u([]),i=u(!1);let c=null;const d=y(()=>i.value?"Searching...":n.value&&s.value.length===0?"No users found.":"");function p(){if(clearTimeout(c),!n.value||n.value.length<2){s.value=[];return}i.value=!0,c=setTimeout(async()=>{try{const l=await(await F(async()=>{const{default:e}=await import("./index-BzJSkIlv.js").then(a=>a.d_);return{default:e}},__vite__mapDeps([0,1]))).default.get("/api/users/search",{params:{q:n.value}});s.value=l.data}catch(l){console.error("User search failed:",l),s.value=[]}finally{i.value=!1}},500)}async function f(l){try{await _.sendFriendRequest(l),s.value=s.value.filter(e=>e.username!==l)}catch{}}return(l,e)=>(o(),r("div",T,[t("div",V,[g(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),onInput:p,placeholder:"Search by username...",class:"input-field w-full !pl-10"},null,544),[[x,n.value]]),e[1]||(e[1]=t("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[t("svg",{class:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))]),t("div",z,[d.value?(o(),r("div",B,v(d.value),1)):s.value.length>0?(o(),r("ul",C,[(o(!0),r(b,null,k(s.value,a=>(o(),r("li",{key:a.id,class:"bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm flex items-center justify-between"},[t("div",N,[m(S,{icon:a.icon,username:a.username,"size-class":"h-10 w-10"},null,8,["icon","username"]),t("span",U,v(a.username),1)]),t("button",{onClick:I=>f(a.username),class:"btn btn-secondary btn-sm flex items-center space-x-1"},[m(A,{class:"w-4 h-4"}),e[2]||(e[2]=t("span",null,"Add",-1))],8,D)]))),128))])):w("",!0)])]))}};export{M as default};
