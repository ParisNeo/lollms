import{c as y,b as n,d as m,e as l,h as c,f as s,ap as De,t as u,g as W,aq as Ve,ar as be,B as le,l as R,as as Ne,at as Pe,au as je,av as ze,E as ve,aw as Oe,ak as Be,al as Ee,ax as We,a as qe,s as ge,r as w,o as Fe,w as Y,A,ay as ee,C as He,i as V,v as te,T as Ge,F as C,z as M,H as me,x as se,y as ae,az as Je}from"./index-BCLlYokY.js";import Ke from"./IconPlayCircle-RhoPfFNU.js";import Qe from"./IconGlobeAlt-CkoGUJ2q.js";import ye from"./IconArrowUpCircle-isOTgXsh.js";import Xe from"./IconCode-B4EFptWj.js";import Ye from"./IconArrowUp-BUCCekzb.js";import et from"./IconArrowDown-DX0nOOSV.js";const tt={key:0,class:"flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400 w-full"},st={class:"flex-grow"},at={key:0,class:"font-semibold truncate"},lt={class:"text-xs truncate"},nt={class:"flex-shrink-0 flex items-center gap-1"},he={__name:"TaskProgressIndicator",props:{task:{type:Object,required:!0},showName:{type:Boolean,default:!1}},emits:["cancel","view"],setup(d,{emit:o}){const f=d,p=y(()=>f.task?f.task.name.startsWith("Installing app:")?`Installing... (${f.task.progress}%)`:f.task.name.startsWith("Start app:")?"Starting...":`${f.task.status.charAt(0).toUpperCase()+f.task.status.slice(1)} (${f.task.progress}%)`:"...");return(Z,h)=>d.task?(l(),n("div",tt,[c(De,{class:"w-4 h-4 flex-shrink-0"}),s("div",st,[d.showName?(l(),n("p",at,u(d.task.name),1)):m("",!0),s("p",lt,u(p.value),1)]),s("div",nt,[s("button",{onClick:h[0]||(h[0]=W(N=>Z.$emit("view",d.task.id),["stop"])),class:"btn btn-secondary btn-sm !p-1",title:"View Task Details"},[c(Ve,{class:"w-4 h-4"})]),s("button",{onClick:h[1]||(h[1]=W(N=>Z.$emit("cancel",d.task.id),["stop"])),class:"btn btn-warning btn-sm !p-1",title:"Cancel Task"},[c(be,{class:"w-4 h-4"})])])])):m("",!0)}},ot={class:"relative flex flex-col h-full bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg shadow transition-all hover:shadow-lg"},it={class:"flex-grow p-4"},rt={class:"flex items-start gap-4 mb-3 pr-8"},dt=["src"],ut=["title"],ct={"class-":"text-xs text-gray-500 dark:text-gray-400"},pt={class:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2 h-10"},vt={class:"px-4 py-3 bg-gray-50 dark:bg-gray-700/50 border-t dark:border-gray-700 rounded-b-lg"},gt={key:1,class:"flex items-center justify-between"},mt={class:"flex items-center gap-1"},ft={class:"flex items-center gap-2"},bt={key:0,class:"flex items-center text-sm text-green-600 dark:text-green-400"},yt={__name:"AppCard",props:{app:{type:Object,required:!0},task:{type:Object,default:null},isStarred:{type:Boolean,default:!1}},emits:["install","update","details","help","star","view-task","cancel-install"],setup(d,{emit:o}){const f=d,p=o,Z=y(()=>!f.app.is_installed&&!f.task);function h($){p($,f.app)}function N($){p("view-task",$)}function q($){p("cancel-install",$)}return($,v)=>(l(),n("div",ot,[s("div",it,[s("button",{onClick:v[0]||(v[0]=W(T=>p("star"),["stop"])),class:"absolute top-2 right-2 p-1 rounded-full text-gray-400 hover:text-yellow-400 z-10"},[d.isStarred?(l(),R(Ne,{key:0,class:"w-5 h-5 text-yellow-400"})):(l(),R(Pe,{key:1,class:"w-5 h-5"}))]),s("div",{onClick:v[1]||(v[1]=T=>h("details")),class:"cursor-pointer"},[s("div",rt,[d.app.icon?(l(),n("img",{key:0,src:d.app.icon,class:"h-12 w-12 rounded-md flex-shrink-0 object-cover",alt:"App Icon"},null,8,dt)):m("",!0),s("div",null,[s("h3",{class:"font-semibold text-gray-900 dark:text-white truncate",title:d.app.name},u(d.app.name),9,ut),s("p",ct,"by "+u(d.app.author||"Unknown"),1)])]),s("p",pt,u(d.app.description),1)])]),s("div",vt,[d.task?(l(),R(he,{key:0,task:d.task,onView:N,onCancel:q},null,8,["task"])):(l(),n("div",gt,[s("div",mt,[s("button",{onClick:v[2]||(v[2]=T=>h("details")),class:"btn btn-secondary btn-sm !p-1.5",title:"More Info"},[c(je,{class:"w-4 h-4"})]),d.app.has_readme?(l(),n("button",{key:0,onClick:v[3]||(v[3]=T=>h("help")),class:"btn btn-secondary btn-sm !p-1.5",title:"View README"},[c(ze,{class:"w-4 h-4"})])):m("",!0)]),s("div",ft,[d.app.is_installed?(l(),n("span",bt,[c(Oe,{class:"w-5 h-5 mr-1"}),v[6]||(v[6]=ve(" Installed "))])):m("",!0),d.app.update_available?(l(),n("button",{key:1,onClick:v[4]||(v[4]=T=>h("update")),class:"btn btn-warning btn-sm"},[c(ye,{class:"w-4 h-4 mr-1"}),v[7]||(v[7]=ve(" Update "))])):m("",!0),Z.value?(l(),n("button",{key:2,onClick:v[5]||(v[5]=T=>h("install")),class:"btn btn-primary btn-sm"},"Install")):m("",!0)])]))])]))}},fe=le(yt,[["__scopeId","data-v-38337946"]]),ht={},kt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 animate-pulse"};function wt(d,o){return l(),n("div",kt,o[0]||(o[0]=[Be('<div class="flex items-start gap-4 mb-3"><div class="h-16 w-16 rounded-md flex-shrink-0 bg-gray-300 dark:bg-gray-700"></div><div class="flex-grow min-w-0 mt-1"><div class="h-5 w-3/4 rounded bg-gray-300 dark:bg-gray-600"></div><div class="h-4 w-1/2 rounded bg-gray-200 dark:bg-gray-700 mt-2"></div></div></div><div class="space-y-2"><div class="h-4 rounded bg-gray-200 dark:bg-gray-700"></div><div class="h-4 rounded bg-gray-200 dark:bg-gray-700"></div><div class="h-4 w-5/6 rounded bg-gray-200 dark:bg-gray-700"></div></div><div class="mt-5"><div class="flex items-center justify-between text-xs mb-3"><div class="h-4 w-12 rounded-full bg-gray-200 dark:bg-gray-700"></div><div class="h-4 w-20 rounded-full bg-gray-200 dark:bg-gray-700"></div></div><div class="h-10 w-full rounded-md bg-gray-300 dark:bg-gray-600"></div></div>',3)]))}const xt=le(ht,[["render",wt]]),_t={class:"space-y-8"},At={class:"border-b border-gray-200 dark:border-gray-700"},Ct={class:"-mb-px flex space-x-6","aria-label":"Main Tabs"},$t={class:"border-b border-gray-200 dark:border-gray-700"},It={class:"-mb-px flex space-x-6","aria-label":"Sub Tabs"},St={key:0},Mt={class:"flex justify-between items-center mb-4 flex-wrap gap-2"},Rt={class:"text-xl font-semibold"},Tt={class:"flex items-center gap-2"},Ut=["disabled"],Zt={key:0,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm mb-6 overflow-hidden"},Lt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Dt={class:"md:col-span-2"},Vt={class:"flex justify-end"},Nt=["disabled"],Pt={key:0,class:"text-center p-4"},jt={key:1,class:"text-center p-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},zt={key:2,class:"space-y-4"},Ot={class:"flex-grow truncate"},Bt={class:"font-semibold text-gray-900 dark:text-white"},Et=["title"],Wt={class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},qt={class:"flex items-center gap-x-2 flex-shrink-0"},Ft=["onClick","disabled"],Ht=["onClick","disabled"],Gt={key:1},Jt={class:"flex justify-between items-center mb-4 flex-wrap gap-2"},Kt={class:"text-xl font-semibold"},Qt=["disabled"],Xt={class:"space-y-4"},Yt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},es={class:"relative lg:col-span-1"},ts=["placeholder"],ss={class:"grid grid-cols-2 lg:col-span-2 gap-4"},as=["value"],ls={class:"flex items-center gap-2"},ns=["value"],os={key:0,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6"},is={key:1,class:"text-center p-10 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},rs={class:"text-sm text-gray-500"},ds={key:2,class:"text-center p-10 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},us={key:3},cs={key:0,class:"space-y-8"},ps={class:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3 border-b pb-2 dark:border-gray-700"},vs={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6"},gs={key:1,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6"},ms={key:2},fs={key:0,class:"text-center p-10"},bs={key:1,class:"text-center p-10 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},ys={key:2,class:"space-y-4"},hs={class:"flex items-center gap-4 flex-grow truncate"},ks=["src"],ws={class:"flex-grow truncate"},xs=["title"],_s=["title"],As={class:"flex items-center gap-x-2 flex-shrink-0 flex-wrap justify-end"},Cs=["onClick"],$s=["href"],Is=["onClick"],Ss=["onClick"],Ms=["onClick","disabled"],Rs=["onClick","disabled"],Ts=["onClick"],Us={__name:"AppsManagement",setup(d){const o=Ee(),f=We(),p=qe(),{zooRepositories:Z,isLoadingZooRepositories:h,zooApps:N,isLoadingZooApps:q,mcpZooRepositories:$,isLoadingMcpZooRepositories:v,zooMcps:T,isLoadingZooMcps:ke,installedApps:ne,isLoadingInstalledApps:we}=ge(o),{tasks:O}=ge(f),r=w("apps"),x=w("repositories"),P=w(!1),_=w({name:"",url:""}),g=w(null),L=w(""),B=w("All"),j=w("All"),E=w(!1),D=w("last_update_date"),z=w("desc"),I=w(JSON.parse(localStorage.getItem("starredItems")||"[]")),xe=[{value:"last_update_date",label:"Last Updated"},{value:"creation_date",label:"Creation Date"},{value:"name",label:"Name"},{value:"author",label:"Author"}];Fe(()=>{o.fetchZooRepositories(),o.fetchMcpZooRepositories(),o.fetchZooApps(),o.fetchZooMcps(),o.fetchInstalledApps()}),Y(r,()=>{x.value="repositories"}),Y(x,a=>{a==="available_items"&&(r.value==="apps"?o.fetchZooApps():o.fetchZooMcps(),o.fetchInstalledApps()),a==="installed_apps"&&o.fetchInstalledApps()}),Y(I,a=>{localStorage.setItem("starredItems",JSON.stringify(a))},{deep:!0});const oe=y(()=>r.value==="apps"?Z.value:$.value),_e=y(()=>r.value==="apps"?h.value:v.value),U=y(()=>r.value==="apps"?N.value:T.value),F=y(()=>r.value==="apps"?q.value:ke.value),Ae=y(()=>{if(!Array.isArray(U.value))return[];const a=new Map,t="Installing app: ";return Array.isArray(O.value)&&O.value.forEach(e=>{if(e&&e.name&&e.name.startsWith(t)){const i=e.name.replace(t,"");(!a.has(i)||new Date(e.created_at)>new Date(a.get(i).created_at))&&a.set(i,e)}}),U.value.map(e=>{const i=a.get(e.folder_name);return{...e,task:i&&(i.status==="running"||i.status==="pending")?i:null}})}),H=y(()=>Array.isArray(oe.value)?[...oe.value].sort((a,t)=>(a.name||"").localeCompare(t.name||"")):[]),Ce=y(()=>{if(!Array.isArray(U.value))return["All"];const a=new Set(U.value.map(t=>t.category||"Uncategorized"));return["All",...Array.from(a).sort()]}),G=y(()=>{let a=Ae.value.filter(t=>{const e=j.value==="All"||j.value==="Installed"&&t.is_installed||j.value==="Uninstalled"&&!t.is_installed&&!t.task,i=B.value==="All"||t.category===B.value,b=!L.value||t.name.toLowerCase().includes(L.value.toLowerCase())||t.description&&t.description.toLowerCase().includes(L.value.toLowerCase())||t.author&&t.author.toLowerCase().includes(L.value.toLowerCase());return e&&i&&b});return a.sort((t,e)=>{const i=I.value.includes(t.name),b=I.value.includes(e.name);if(i&&!b)return-1;if(!i&&b)return 1;if(t.is_installed&&!e.is_installed)return-1;if(!t.is_installed&&e.is_installed)return 1;let k=t[D.value]||"",S=e[D.value]||"";return D.value.includes("date")&&(k=k?new Date(k).getTime():0,S=S?new Date(S).getTime():0),typeof k=="string"&&typeof S=="string"?z.value==="asc"?k.localeCompare(S):S.localeCompare(k):z.value==="asc"?k-S:S-k}),a}),ie=y(()=>D.value!=="author"?null:G.value.reduce((a,t)=>{const e=t.author||"Unknown Author";return a[e]||(a[e]=[]),a[e].push(t),a},{})),$e=y(()=>Array.isArray(ne.value)?[...ne.value].sort((a,t)=>(a.name||"").localeCompare(t.name||"")):[]),J=y(()=>{const a=new Map;return Array.isArray(O.value)&&O.value.forEach(t=>{if(!t||!t.name)return;let e="";t.name.startsWith("Start app: ")?e=t.name.replace("Start app: ",""):t.name.startsWith("Stop app: ")?e=t.name.replace("Stop app: ",""):t.name.startsWith("Installing app: ")&&(e=t.name.replace("Installing app: ","")),e&&(t.status==="running"||t.status==="pending")&&(!a.has(e)||new Date(t.created_at)>new Date(a.get(e).created_at))&&a.set(e,t)}),$e.value.map(t=>({...t,task:a.get(t.folder_name)||null}))});function re(a){const t=I.value.indexOf(a);t>-1?I.value.splice(t,1):I.value.push(a)}function Ie(a){return a?new Date(a).toLocaleString():"Never"}async function Se(){if(!_.value.name||!_.value.url){p.addNotification("Repository name and URL are required.","warning");return}g.value="add";try{r.value==="apps"?await o.addZooRepository(_.value.name,_.value.url):await o.addMcpZooRepository(_.value.name,_.value.url),_.value={name:"",url:""},P.value=!1}finally{g.value=null}}async function Me(a){g.value=a.id;try{r.value==="apps"?await o.pullZooRepository(a.id):await o.pullMcpZooRepository(a.id)}finally{g.value=null}}async function Re(){E.value=!0;try{r.value==="apps"?await o.pullAllZooRepositories():await o.pullAllMcpZooRepositories()}finally{E.value=!1}}async function Te(a){if(await p.showConfirmation({title:`Delete Repository '${a.name}'?`,message:"This will remove the repository and its cached files. This action cannot be undone.",confirmText:"Delete"})){g.value=a.id;try{r.value==="apps"?await o.deleteZooRepository(a.id):await o.deleteMcpZooRepository(a.id)}finally{g.value=null}}}function K(a){const t={app:a,type:r.value};p.openModal("appInstall",t)}function de(a){const t=U.value.find(e=>e.name===a.name);if(!t){p.addNotification(`Could not find details for '${a.name}' in the zoo. Try refreshing repositories.`,"error");return}p.showConfirmation({title:`Update '${a.name}'?`,message:"This will reinstall it with the latest version. It will be stopped. Are you sure?",confirmText:"Update"}).then(e=>{e&&K(t)})}async function ue(a,t){g.value=`${t}-${a}`;try{t==="start"&&await o.startApp(a),t==="stop"&&await o.stopApp(a)}finally{g.value=null}}async function Ue(a){if(await p.showConfirmation({title:`Uninstall '${a.name}'?`,message:"This will permanently delete all files. This cannot be undone.",confirmText:"Uninstall"})){g.value=`uninstall-${a.id}`;try{await o.uninstallApp(a.id)}finally{g.value=null}}}function ce(a){p.openModal("appDetails",{app:a})}function Ze(a){p.openModal("appConfig",{app:a})}async function Le(a){const t=await o.fetchAppLog(a.id);p.openModal("sourceViewer",{title:`Logs: ${a.name}`,content:t||"No log content found.",language:"log"})}async function pe(a){const t=r.value==="apps"?await o.fetchAppReadme(a.repository,a.folder_name):await o.fetchMcpReadme(a.repository,a.folder_name);p.openModal("sourceViewer",{title:`README: ${a.name}`,content:t,language:"markdown"})}async function Q(a){await f.cancelTask(a)}function X(a){p.openModal("tasksManager",{initialTaskId:a})}return(a,t)=>(l(),n("div",_t,[t[25]||(t[25]=s("div",null,[s("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Apps & MCPs Zoo"),s("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"Install and manage LOLLMS Applications and MCPs from various sources (Zoos).")],-1)),s("div",At,[s("nav",Ct,[s("button",{onClick:t[0]||(t[0]=e=>r.value="apps"),class:A(["tab-button",r.value==="apps"?"active":"inactive"])},"Apps Zoo",2),s("button",{onClick:t[1]||(t[1]=e=>r.value="mcps"),class:A(["tab-button",r.value==="mcps"?"active":"inactive"])},"MCPs Zoo",2)])]),s("div",$t,[s("nav",It,[s("button",{onClick:t[2]||(t[2]=e=>x.value="repositories"),class:A(["tab-button",x.value==="repositories"?"active":"inactive"])},"Repositories",2),s("button",{onClick:t[3]||(t[3]=e=>x.value="available_items"),class:A(["tab-button",x.value==="available_items"?"active":"inactive"])},"Available "+u(r.value==="apps"?"Apps":"MCPs"),3),s("button",{onClick:t[4]||(t[4]=e=>x.value="installed_apps"),class:A(["tab-button",x.value==="installed_apps"?"active":"inactive"])},"Installed",2)])]),x.value==="repositories"?(l(),n("section",St,[s("div",Mt,[s("h3",Rt,u(r.value==="apps"?"App":"MCP")+" Zoo Repositories",1),s("div",Tt,[s("button",{onClick:Re,class:"btn btn-secondary",disabled:E.value},[c(ee,{class:A(["w-4 h-4",{"animate-spin":E.value}])},null,8,["class"]),t[14]||(t[14]=s("span",{class:"ml-2"},"Pull All",-1))],8,Ut),s("button",{onClick:t[5]||(t[5]=e=>P.value=!P.value),class:"btn btn-primary"},u(P.value?"Cancel":"Add Repository"),1)])]),c(Ge,{name:"form-fade"},{default:He(()=>[P.value?(l(),n("div",Zt,[s("form",{onSubmit:W(Se,["prevent"]),class:"space-y-4"},[s("div",Lt,[s("div",null,[t[15]||(t[15]=s("label",{for:"repo-name",class:"block text-sm font-medium"},"Name",-1)),V(s("input",{id:"repo-name","onUpdate:modelValue":t[6]||(t[6]=e=>_.value.name=e),type:"text",class:"input-field mt-1",placeholder:"e.g., Official Zoo",required:""},null,512),[[te,_.value.name]])]),s("div",Dt,[t[16]||(t[16]=s("label",{for:"repo-url",class:"block text-sm font-medium"},"Git URL",-1)),V(s("input",{id:"repo-url","onUpdate:modelValue":t[7]||(t[7]=e=>_.value.url=e),type:"url",class:"input-field mt-1",placeholder:"https://github.com/ParisNeo/lollms_apps_zoo.git",required:""},null,512),[[te,_.value.url]])])]),s("div",Vt,[s("button",{type:"submit",class:"btn btn-primary",disabled:g.value==="add"},u(g.value==="add"?"Adding...":"Add Repository"),9,Nt)])],32)])):m("",!0)]),_:1}),_e.value?(l(),n("div",Pt,"Loading repositories...")):!H.value||H.value.length===0?(l(),n("div",jt,[s("p",null,"No "+u(r.value==="apps"?"App":"MCP")+" Zoo repositories have been added yet.",1)])):(l(),n("div",zt,[(l(!0),n(C,null,M(H.value,e=>(l(),n("div",{key:e.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm flex flex-col md:flex-row md:items-center justify-between gap-4"},[s("div",Ot,[s("p",Bt,u(e.name),1),s("p",{class:"text-sm text-gray-500 dark:text-gray-400 font-mono truncate",title:e.url},u(e.url),9,Et),s("p",Wt,"Last updated: "+u(Ie(e.last_pulled_at)),1)]),s("div",qt,[s("button",{onClick:i=>Me(e),class:"btn btn-secondary btn-sm",disabled:g.value===e.id,title:"Refresh (git pull)"},[c(ee,{class:A(["w-4 h-4",{"animate-spin":g.value===e.id}])},null,8,["class"]),t[17]||(t[17]=s("span",{class:"ml-1"},"Pull",-1))],8,Ft),e.is_deletable?(l(),n("button",{key:0,onClick:i=>Te(e),class:"btn btn-danger btn-sm",disabled:g.value===e.id,title:"Delete"},[c(me,{class:"w-4 h-4"})],8,Ht)):m("",!0)])]))),128))]))])):m("",!0),x.value==="available_items"?(l(),n("section",Gt,[s("div",Jt,[s("h3",Kt,"Available "+u(r.value==="apps"?"Apps":"MCPs"),1),s("button",{onClick:t[8]||(t[8]=e=>r.value==="apps"?se(o).fetchZooApps():se(o).fetchZooMcps()),class:"btn btn-secondary",disabled:F.value},[c(ee,{class:A(["w-4 h-4",{"animate-spin":F.value}])},null,8,["class"]),t[18]||(t[18]=s("span",{class:"ml-2"},"Rescan All Sources",-1))],8,Qt)]),s("div",Xt,[s("div",Yt,[s("div",es,[V(s("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>L.value=e),placeholder:`Search ${r.value}...`,class:"input-field w-full pl-10"},null,8,ts),[[te,L.value]]),t[19]||(t[19]=s("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[s("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),s("div",ss,[V(s("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>j.value=e),class:"input-field"},t[20]||(t[20]=[s("option",{value:"All"},"All Statuses",-1),s("option",{value:"Installed"},"Installed",-1),s("option",{value:"Uninstalled"},"Uninstalled",-1)]),512),[[ae,j.value]]),V(s("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>B.value=e),class:"input-field"},[(l(!0),n(C,null,M(Ce.value,e=>(l(),n("option",{key:e,value:e},u(e),9,as))),128))],512),[[ae,B.value]])])]),s("div",ls,[V(s("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>D.value=e),class:"input-field w-48"},[(l(),n(C,null,M(xe,e=>s("option",{key:e.value,value:e.value},"Sort by "+u(e.label),9,ns)),64))],512),[[ae,D.value]]),s("button",{onClick:t[13]||(t[13]=e=>z.value=z.value==="asc"?"desc":"asc"),class:"btn btn-secondary p-2"},[z.value==="asc"?(l(),R(Ye,{key:0,class:"w-5 h-5"})):(l(),R(et,{key:1,class:"w-5 h-5"}))])]),F.value?(l(),n("div",os,[(l(),n(C,null,M(8,e=>c(xt,{key:e})),64))])):!U.value||U.value.length===0?(l(),n("div",is,[t[21]||(t[21]=s("h4",{class:"font-semibold"},"No Items Found",-1)),s("p",rs,"Please add and pull a repository to see available "+u(r.value)+".",1)])):G.value.length===0?(l(),n("div",ds,t[22]||(t[22]=[s("h4",{class:"font-semibold"},"No Matching Items",-1),s("p",{class:"text-sm text-gray-500"},"Try adjusting your search or filter.",-1)]))):(l(),n("div",us,[ie.value?(l(),n("div",cs,[(l(!0),n(C,null,M(ie.value,(e,i)=>(l(),n("div",{key:i},[s("h3",ps,u(i),1),s("div",vs,[(l(!0),n(C,null,M(e,b=>(l(),R(fe,{key:`${b.repository}/${b.folder_name}`,app:b,task:b.task,"is-starred":I.value.includes(b.name),onStar:k=>re(b.name),onInstall:k=>K(b),onDetails:k=>ce(b),onHelp:k=>pe(b),onViewTask:X,onCancelInstall:Q},null,8,["app","task","is-starred","onStar","onInstall","onDetails","onHelp"]))),128))])]))),128))])):(l(),n("div",gs,[(l(!0),n(C,null,M(G.value,e=>(l(),R(fe,{key:`${e.repository}/${e.folder_name}`,app:e,task:e.task,"is-starred":I.value.includes(e.name),onStar:i=>re(e.name),onInstall:i=>K(e),onUpdate:i=>de(e),onDetails:i=>ce(e),onHelp:i=>pe(e),onViewTask:X,onCancelInstall:Q},null,8,["app","task","is-starred","onStar","onInstall","onUpdate","onDetails","onHelp"]))),128))]))]))])])):m("",!0),x.value==="installed_apps"?(l(),n("section",ms,[t[24]||(t[24]=s("h3",{class:"text-xl font-semibold mb-4"},"Installed Items",-1)),se(we)?(l(),n("div",fs,"Loading installed items...")):!J.value||J.value.length===0?(l(),n("div",bs,t[23]||(t[23]=[s("h4",{class:"font-semibold"},"No Items Installed",-1),s("p",{class:"text-sm text-gray-500"},'Go to the "Available" tab to install an application or MCP.',-1)]))):(l(),n("div",ys,[(l(!0),n(C,null,M(J.value,e=>(l(),n("div",{key:e.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm flex flex-col md:flex-row md:items-center justify-between gap-4"},[s("div",hs,[e.icon?(l(),n("img",{key:0,src:e.icon,class:"h-10 w-10 rounded-md flex-shrink-0 object-cover",alt:"App Icon"},null,8,ks)):m("",!0),s("div",ws,[s("p",{class:"font-semibold text-gray-900 dark:text-white truncate",title:e.name},u(e.name),9,xs),s("p",{class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate",title:`Port: ${e.port}`},"Port: "+u(e.port),9,_s)])]),s("div",As,[e.task?(l(),R(he,{key:0,task:e.task,onView:X,onCancel:Q},null,8,["task"])):(l(),n(C,{key:1},[e.update_available?(l(),n("button",{key:0,onClick:i=>de(e),class:"btn btn-warning btn-sm p-2",title:"Update App"},[c(ye,{class:"w-5 h-5"})],8,Cs)):m("",!0),s("span",{class:A(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":e.status==="running","bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300":e.status==="stopped","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300":e.status==="error"}])},u(e.status),3),e.status==="running"&&e.url?(l(),n("a",{key:1,href:e.url,target:"_blank",class:"btn btn-secondary btn-sm p-2",title:"Open App"},[c(Qe,{class:"w-5 h-5"})],8,$s)):m("",!0),s("button",{onClick:i=>Ze(e),class:"btn btn-secondary btn-sm p-2",title:"Edit App Settings"},[c(Je,{class:"w-5 h-5"})],8,Is),s("button",{onClick:i=>Le(e),class:"btn btn-secondary btn-sm p-2",title:"View App Logs"},[c(Xe,{class:"w-5 h-5"})],8,Ss),e.status!=="running"?(l(),n("button",{key:2,onClick:i=>ue(e.id,"start"),class:"btn btn-success btn-sm p-2",disabled:g.value===`start-${e.id}`,title:"Start App"},[c(Ke,{class:"w-5 h-5"})],8,Ms)):m("",!0),e.status==="running"||e.status==="error"&&e.pid?(l(),n("button",{key:3,onClick:i=>ue(e.id,"stop"),class:"btn btn-warning btn-sm p-2",disabled:g.value===`stop-${e.id}`,title:"Stop App"},[c(be,{class:"w-5 h-5"})],8,Rs)):m("",!0),s("button",{onClick:i=>Ue(e),class:"btn btn-danger btn-sm p-2",title:"Uninstall App"},[c(me,{class:"w-5 h-5"})],8,Ts)],64))])]))),128))]))])):m("",!0)]))}},zs=le(Us,[["__scopeId","data-v-8ed90f2c"]]);export{zs as default};
