import{l as G,m as J,s as H,r as y,c as M,w as K,o as R,a,b as i,k as u,d as e,t as d,p,g as f,v as N,q as L,F as b,i as w,e as B,x as P,y as F,_ as Q,z as W,n as _,A as X,f as Y,B as Z}from"./index-C8lUn4a8.js";const ee={class:"space-y-8"},te={key:0,class:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6"},se={class:"text-xl font-semibold mb-4"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},le=["disabled"],ie=["value"],ae={key:0,class:"space-y-6 border-t dark:border-gray-700 pt-6"},oe={class:"text-sm text-gray-600 dark:text-gray-400"},de=["for"],re={key:0,class:"text-red-500"},ue={key:0},ce={class:"relative"},me=["type","id","onUpdate:modelValue","required","placeholder"],fe=["onClick","title"],ge={key:1,class:"flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-md"},ve={class:"flex-grow flex flex-col pr-4"},ye={class:"text-sm text-gray-500 dark:text-gray-400"},pe=["onClick"],be={class:"flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-md"},_e={class:"flex justify-end gap-3"},xe=["disabled"],ke={class:"flex justify-between items-center mb-4 flex-wrap gap-4"},he={class:"flex items-center gap-4"},we={key:0,class:"text-center p-6"},Be={key:1,class:"text-center p-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},Ce={key:2,class:"space-y-4"},Me={class:"flex items-start gap-4"},Se=["title"],Ae={class:"flex-grow"},Te={class:"flex justify-between items-center"},De={class:"font-bold text-lg text-gray-900 dark:text-white"},Ve={class:"flex gap-3"},$e=["onClick"],Ne=["onClick"],Le={class:"text-sm text-gray-500 dark:text-gray-400"},Fe={class:"mt-2 text-xs space-y-1 text-gray-600 dark:text-gray-300"},Oe={key:0},Ue={class:"font-semibold capitalize"},je={key:0},qe={class:"border-t dark:border-gray-700 pt-3 flex justify-end"},Ee=["onClick"],Ge={__name:"LLMBindingsSettings",setup(ze){const r=G(),S=J(),{bindings:A,availableBindingTypes:x,isLoadingBindings:O,globalSettings:U}=H(r),m=y(!1),g=y(null),k=y(!1),c=y({}),T=()=>({id:null,alias:"",name:"",config:{},default_model_name:"",is_active:!0}),l=y(T()),v=M(()=>g.value!==null),C=M(()=>l.value.name?x.value.find(n=>n.binding_name===l.value.name):null);K(()=>l.value.name,n=>{if(!v.value){const s=x.value.find(o=>o.binding_name===n),t={};s&&s.input_parameters&&s.input_parameters.forEach(o=>{t[o.name]=o.default}),l.value.config=t}});const D=M({get(){const n=U.value.find(s=>s.key==="model_display_mode");return n?n.value:"mixed"},set(n){r.updateGlobalSettings({model_display_mode:n})}});R(()=>{r.fetchBindings(),r.fetchAvailableBindingTypes(),r.fetchGlobalSettings()});function V(){g.value=null,l.value=T(),c.value={},m.value=!0,window.scrollTo({top:0,behavior:"smooth"})}function j(n){g.value=n,l.value=JSON.parse(JSON.stringify(n)),c.value={},m.value=!0,window.scrollTo({top:0,behavior:"smooth"})}function $(){m.value=!1,g.value=null}async function q(){k.value=!0;try{const n={...l.value};if(delete n.id,v.value){if(n.config)for(const s in n.config)(s.includes("key")||s.includes("token"))&&n.config[s]==="********"&&delete n.config[s];await r.updateBinding(g.value.id,n)}else await r.addBinding(n);$()}catch{}finally{k.value=!1}}async function E(n){await S.showConfirmation({title:`Delete Binding '${n.alias}'?`,message:"Are you sure? This action cannot be undone.",confirmText:"Delete"})&&await r.deleteBinding(n.id)}function z(n){S.openModal("manageModels",{binding:n})}function I(n){const s=x.value.find(t=>t.binding_name===n);return s?s.title:n}return(n,s)=>(i(),a("div",ee,[m.value?(i(),a("div",te,[e("h3",se,d(v.value?"Edit Binding":"Add New Binding"),1),e("form",{onSubmit:X(q,["prevent"]),class:"space-y-6"},[e("div",ne,[e("div",null,[s[5]||(s[5]=e("label",{for:"alias",class:"block text-sm font-medium"},[f("Alias "),e("span",{class:"text-red-500"},"*")],-1)),p(e("input",{type:"text",id:"alias","onUpdate:modelValue":s[0]||(s[0]=t=>l.value.alias=t),class:"input-field mt-1",required:"",placeholder:"e.g., local_ollama"},null,512),[[N,l.value.alias]]),s[6]||(s[6]=e("p",{class:"text-xs text-gray-500 mt-1"},"A unique, short name for this configuration.",-1))]),e("div",null,[s[8]||(s[8]=e("label",{for:"name",class:"block text-sm font-medium"},[f("Binding Type "),e("span",{class:"text-red-500"},"*")],-1)),p(e("select",{id:"name","onUpdate:modelValue":s[1]||(s[1]=t=>l.value.name=t),class:"input-field mt-1",required:"",disabled:v.value},[s[7]||(s[7]=e("option",{disabled:"",value:""},"Select a type",-1)),(i(!0),a(b,null,w(B(x),t=>(i(),a("option",{key:t.binding_name,value:t.binding_name},d(t.title),9,ie))),128))],8,le),[[L,l.value.name]])])]),C.value?(i(),a("div",ae,[e("p",oe,d(C.value.description),1),(i(!0),a(b,null,w(C.value.input_parameters,t=>(i(),a("div",{key:t.name,class:"space-y-1"},[e("label",{for:`param-${t.name}`,class:"block text-sm font-medium capitalize"},[f(d(t.name.replace(/_/g," "))+" ",1),t.mandatory?(i(),a("span",re,"*")):u("",!0)],8,de),["str","int","float"].includes(t.type)?(i(),a("div",ue,[e("div",ce,[p(e("input",{type:(t.name.includes("key")||t.name.includes("token"))&&!c.value[t.name]?"password":"text",id:`param-${t.name}`,"onUpdate:modelValue":o=>l.value.config[t.name]=o,class:"input-field",required:t.mandatory,placeholder:t.description,autocomplete:"off"},null,8,me),[[P,l.value.config[t.name]]]),t.name.includes("key")||t.name.includes("token")?(i(),a("button",{key:0,type:"button",onClick:o=>c.value[t.name]=!c.value[t.name],class:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",title:c.value[t.name]?"Hide":"Show"},[c.value[t.name]?(i(),F(Q,{key:0,class:"w-5 h-5"})):(i(),F(W,{key:1,class:"w-5 h-5"}))],8,fe)):u("",!0)])])):t.type==="bool"?(i(),a("div",ge,[e("span",ve,[e("span",ye,d(t.description),1)]),e("button",{onClick:o=>l.value.config[t.name]=!l.value.config[t.name],type:"button",class:_([l.value.config[t.name]?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out"])},[e("span",{class:_([l.value.config[t.name]?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition-colors duration-200 ease-in-out"])},null,2)],10,pe)])):u("",!0)]))),128))])):u("",!0),e("div",null,[s[9]||(s[9]=e("label",{for:"default_model_name",class:"block text-sm font-medium"},"Default Model Name",-1)),p(e("input",{type:"text",id:"default_model_name","onUpdate:modelValue":s[2]||(s[2]=t=>l.value.default_model_name=t),class:"input-field mt-1",placeholder:"e.g., phi3:latest or gpt-4o-mini"},null,512),[[N,l.value.default_model_name]]),s[10]||(s[10]=e("p",{class:"text-xs text-gray-500 mt-1"},"Optional. The default model to use with this binding. Can be overridden.",-1))]),e("div",be,[s[11]||(s[11]=e("span",{class:"flex-grow flex flex-col"},[e("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Active"),e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"If disabled, users cannot see or use models from this binding.")],-1)),e("button",{onClick:s[3]||(s[3]=t=>l.value.is_active=!l.value.is_active),type:"button",class:_([l.value.is_active?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out"])},[e("span",{class:_([l.value.is_active?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition-colors duration-200 ease-in-out"])},null,2)],2)]),e("div",_e,[e("button",{type:"button",onClick:$,class:"btn btn-secondary"},"Cancel"),e("button",{type:"submit",class:"btn btn-primary",disabled:k.value},d(k.value?"Saving...":v.value?"Save Changes":"Add Binding"),9,xe)])],32)])):u("",!0),e("div",null,[e("div",ke,[s[14]||(s[14]=e("h2",{class:"text-2xl font-bold"},"LLM Bindings",-1)),e("div",he,[e("div",null,[s[13]||(s[13]=e("label",{for:"model-display-mode",class:"block text-xs font-medium text-gray-500 dark:text-gray-400"},"Model Display Mode",-1)),p(e("select",{id:"model-display-mode","onUpdate:modelValue":s[4]||(s[4]=t=>D.value=t),class:"input-field mt-1"},s[12]||(s[12]=[e("option",{value:"mixed"},"Mixed (Alias or Original)",-1),e("option",{value:"aliased"},"Aliased Only",-1),e("option",{value:"original"},"Original Names Only",-1)]),512),[[L,D.value]])]),m.value?u("",!0):(i(),a("button",{key:0,onClick:V,class:"btn btn-primary self-end"},"+ Add New Binding"))])]),B(O)?(i(),a("div",we,"Loading bindings...")):B(A).length===0&&!m.value?(i(),a("div",Be,[s[15]||(s[15]=e("p",null,"No LLM bindings configured yet.",-1)),e("button",{onClick:V,class:"mt-2 text-blue-600 hover:underline"},"Add your first one")])):(i(),a("div",Ce,[(i(!0),a(b,null,w(B(A),t=>(i(),a("div",{key:t.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md flex flex-col gap-4"},[e("div",Me,[e("span",{class:_(["mt-1 h-3 w-3 rounded-full flex-shrink-0",t.is_active?"bg-green-500":"bg-gray-400"]),title:t.is_active?"Active":"Inactive"},null,10,Se),e("div",Ae,[e("div",Te,[e("h4",De,d(t.alias),1),e("div",Ve,[e("button",{onClick:o=>j(t),class:"text-sm font-medium text-blue-600 hover:underline"},"Edit",8,$e),e("button",{onClick:o=>E(t),class:"text-sm font-medium text-red-600 hover:underline"},"Delete",8,Ne)])]),e("p",Le,d(I(t.name)),1),e("div",Fe,[(i(!0),a(b,null,w(t.config,(o,h)=>(i(),a(b,{key:h},[o&&!(h.includes("key")||h.includes("token"))?(i(),a("p",Oe,[e("span",Ue,d(h.replace(/_/g," "))+":",1),f(" "+d(o),1)])):u("",!0)],64))),128)),t.default_model_name?(i(),a("p",je,[s[16]||(s[16]=e("span",{class:"font-semibold"},"Default Model:",-1)),f(" "+d(t.default_model_name),1)])):u("",!0)])])]),e("div",qe,[e("button",{onClick:o=>z(t),class:"btn btn-secondary btn-sm flex items-center gap-2"},[Y(Z,{class:"w-4 h-4"}),s[17]||(s[17]=f(" Manage Models "))],8,Ee)])]))),128))]))])]))}};export{Ge as default};
