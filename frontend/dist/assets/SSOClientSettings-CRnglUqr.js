import{c1 as m,a as x,M as b,c as S,o as w,w as _,b as n,d as l,h as s,l as C,L as O,F as v,k as L,g as D,t as u,K as y,Q as j,Z as B}from"./index-BX8JWUVq.js";const M={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},N={key:0,class:"p-6 text-center"},V={key:0,class:"text-center text-gray-500"},F={key:1,class:"space-y-6"},U={key:0,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},A={class:"flex-grow flex flex-col pr-4"},E={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},G=["onClick"],I={key:0,class:"mt-4"},J={class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},$={class:"flex-grow flex flex-col pr-4"},z={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},K=["onClick"],Q={key:1,class:"mt-4"},T=["for"],Z=["type","id","onUpdate:modelValue","placeholder"],q={class:"mt-8 pt-5 border-t border-gray-200 dark:border-gray-700"},H={class:"flex justify-end"},P=["disabled"],X={__name:"SSOClientSettings",setup(R){const r=m();x();const a=b({}),c=b(!1),f=b(!1);let k="{}";const i=S(()=>r.globalSettings.filter(t=>t.category==="SSO Client").sort((t,o)=>t.key==="sso_client_enabled"?-1:o.key==="sso_client_enabled"?1:t.key.localeCompare(o.key)));function g(){if(i.value.length>0){const t={};i.value.forEach(o=>{o.type==="boolean"?t[o.key]=d(o.value):t[o.key]=o.value}),a.value=t,k=JSON.stringify(a.value),f.value=!1}}function d(t){return typeof t=="boolean"?t:typeof t=="string"?t.toLowerCase()==="true":!!t}w(()=>{r.globalSettings.length===0?r.fetchGlobalSettings():g()}),_(()=>r.globalSettings,g,{deep:!0}),_(a,t=>{f.value=JSON.stringify(t)!==k},{deep:!0});async function h(){c.value=!0;const t={};for(const o in a.value)i.value.some(e=>e.key===o)&&(t[o]=a.value[o]);try{await r.updateGlobalSettings(t)}finally{c.value=!1}}return(t,o)=>(l(),n("div",M,[o[0]||(o[0]=s("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[s("h3",{class:"text-xl font-semibold leading-6 text-gray-900 dark:text-white"}," SSO Client Settings (OIDC) "),s("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Configure lollms to use an external OpenID Connect provider for user authentication. ")],-1)),C(r).isLoadingSettings?(l(),n("div",N,"Loading settings...")):(l(),n("form",{key:1,onSubmit:O(h,["prevent"]),class:"p-6 space-y-6"},[i.value.length===0?(l(),n("div",V," Could not load SSO settings. ")):(l(),n("div",F,[(l(!0),n(v,null,L(i.value,e=>(l(),n("div",{key:e.key},[e.key==="sso_client_enabled"?(l(),n("div",U,[s("span",A,[s("span",E,u(e.description),1)]),s("button",{onClick:p=>a.value[e.key]=!a.value[e.key],type:"button",class:y([d(a.value[e.key])?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out"])},[s("span",{class:y([d(a.value[e.key])?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)],10,G)])):a.value.sso_client_enabled?(l(),n(v,{key:1},[e.type==="boolean"?(l(),n("div",I,[s("div",J,[s("span",$,[s("span",z,u(e.description),1)]),s("button",{onClick:p=>a.value[e.key]=!a.value[e.key],type:"button",class:y([d(a.value[e.key])?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out"])},[s("span",{class:y([d(a.value[e.key])?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)],10,K)])])):(l(),n("div",Q,[s("label",{for:e.key,class:"block text-sm font-medium"},u(e.description),9,T),j(s("input",{type:e.key.includes("secret")?"password":"text",id:e.key,"onUpdate:modelValue":p=>a.value[e.key]=p,class:"input-field mt-1 w-full",placeholder:e.key.includes("secret")?"********":"",autocomplete:"off"},null,8,Z),[[B,a.value[e.key]]])]))],64)):D("",!0)]))),128))])),s("div",q,[s("div",H,[s("button",{type:"submit",class:"btn btn-primary",disabled:c.value||!f.value},u(c.value?"Saving...":"Save Changes"),9,P)])])],32))]))}};export{X as default};
