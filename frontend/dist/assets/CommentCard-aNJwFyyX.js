import{u as w,X as _,j as r,bD as k,a0 as b,c as m,b as u,g as a,k as i,p as d,H as C,d as D,A as M,t as f}from"./index-Dgz_WaCM.js";const S={class:"flex space-x-3 py-2"},V={class:"flex-shrink-0"},$={class:"flex-1 min-w-0"},A={class:"bg-gray-100 dark:bg-gray-700 rounded-xl p-3"},H={class:"flex justify-between items-center"},z=["innerHTML"],B={class:"pl-3 mt-1 text-xs text-gray-500 dark:text-gray-400"},N={__name:"CommentCard",props:{comment:{type:Object,required:!0}},setup(n){const s=n,h=w();_();const c=r(()=>h.user),v=r(()=>{var e;return((e=c.value)==null?void 0:e.id)===s.comment.author.id}),g=r(()=>{var e,t;return v.value||((e=c.value)==null?void 0:e.is_admin)||((t=c.value)==null?void 0:t.is_moderator)}),x=r(()=>k.parse(s.comment.content,{gfm:!0,breaks:!0}));function y(e){const t=new Date(e),o=Math.round((new Date-t)/1e3);return o<60?`${o}s ago`:o<3600?`${Math.floor(o/60)}m ago`:o<86400?`${Math.floor(o/3600)}h ago`:o<2592e3?`${Math.floor(o/86400)}d ago`:t.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}async function p(){confirm("Are you sure you want to delete this comment?")&&console.log("Deleting comment:",s.comment.id)}return(e,t)=>{const l=b("router-link");return u(),m("div",S,[a("div",V,[i(l,{to:`/profile/${n.comment.author.username}`},{default:d(()=>[i(C,{icon:n.comment.author.icon,username:n.comment.author.username,"size-class":"h-8 w-8"},null,8,["icon","username"])]),_:1},8,["to"])]),a("div",$,[a("div",A,[a("div",H,[i(l,{to:`/profile/${n.comment.author.username}`,class:"font-bold text-sm text-gray-900 dark:text-gray-100 hover:underline"},{default:d(()=>[M(f(n.comment.author.username),1)]),_:1},8,["to"]),g.value?(u(),m("button",{key:0,onClick:p,class:"text-gray-400 hover:text-red-500",title:"Delete comment"},t[0]||(t[0]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]))):D("",!0)]),a("div",{class:"mt-1 prose prose-sm dark:prose-invert max-w-none",innerHTML:x.value},null,8,z)]),a("div",B,f(y(n.comment.created_at)),1)])])}}};export{N as default};
