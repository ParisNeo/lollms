import{bK as m,a as _,r as f,c as S,o as x,w as k,d as r,f as n,g as a,x as w,h as C,F as O,z as D,t as p,A as v,j as L,l as U}from"./index-Wcget9W9.js";const j={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},B={key:0,class:"p-6 text-center"},A={key:0,class:"text-center text-gray-500"},F={key:1,class:"space-y-6"},M={key:0,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},N={class:"flex-grow flex flex-col pr-4"},V={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},z=["onClick"],E={key:1},G=["for"],I=["type","id","onUpdate:modelValue","placeholder"],J={class:"mt-8 pt-5 border-t border-gray-200 dark:border-gray-700"},K={class:"flex justify-end"},T=["disabled"],H={__name:"SSOClientSettings",setup($){const l=m();_();const o=f({}),c=f(!1),u=f(!1);let g="{}";const d=S(()=>l.globalSettings.filter(e=>e.category==="SSO Client").sort((e,s)=>e.key.localeCompare(s.key)));function b(){if(d.value.length>0){const e={};d.value.forEach(s=>{s.type==="boolean"?e[s.key]=y(s.value):e[s.key]=s.value}),o.value=e,g=JSON.stringify(o.value),u.value=!1}}function y(e){return typeof e=="boolean"?e:typeof e=="string"?e.toLowerCase()==="true":!!e}x(()=>{l.globalSettings.length===0?l.fetchGlobalSettings():b()}),k(()=>l.globalSettings,b,{deep:!0}),k(o,e=>{u.value=JSON.stringify(e)!==g},{deep:!0});async function h(){c.value=!0;const e={};for(const s in o.value)d.value.some(t=>t.key===s)&&(e[s]=o.value[s]);try{await l.updateGlobalSettings(e)}finally{c.value=!1}}return(e,s)=>(n(),r("div",j,[s[0]||(s[0]=a("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[a("h3",{class:"text-xl font-semibold leading-6 text-gray-900 dark:text-white"}," SSO Client Settings (OIDC) "),a("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Configure lollms to use an external OpenID Connect provider for user authentication. ")],-1)),w(l).isLoadingSettings?(n(),r("div",B,"Loading settings...")):(n(),r("form",{key:1,onSubmit:C(h,["prevent"]),class:"p-6 space-y-6"},[d.value.length===0?(n(),r("div",A," Could not load SSO settings. ")):(n(),r("div",F,[(n(!0),r(O,null,D(d.value,t=>(n(),r("div",{key:t.key},[t.type==="boolean"?(n(),r("div",M,[a("span",N,[a("span",V,p(t.description||t.key.replace(/_/g," ").replace(/\b\w/g,i=>i.toUpperCase())),1)]),a("button",{onClick:i=>o.value[t.key]=!o.value[t.key],type:"button",class:v([y(o.value[t.key])?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"])},[a("span",{class:v([y(o.value[t.key])?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)],10,z)])):(n(),r("div",E,[a("label",{for:t.key,class:"block text-sm font-medium"},p(t.description||t.key.replace(/_/g," ").replace(/\b\w/g,i=>i.toUpperCase())),9,G),L(a("input",{type:t.key.includes("secret")?"password":"text",id:t.key,"onUpdate:modelValue":i=>o.value[t.key]=i,class:"input-field mt-1 w-full",placeholder:t.key.includes("secret")?"********":"",autocomplete:"off"},null,8,I),[[U,o.value[t.key]]])]))]))),128))])),a("div",J,[a("div",K,[a("button",{type:"submit",class:"btn btn-primary",disabled:c.value||!u.value},p(c.value?"Saving...":"Save Changes"),9,T)])])],32))]))}};export{H as default};
