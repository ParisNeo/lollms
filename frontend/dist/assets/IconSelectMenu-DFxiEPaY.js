import{S as E,r as p,j as x,w as O,bI as j,h as $,c as o,b as s,bJ as d,B as N,k as T,p as F,d as c,N as G,g as l,f as R,l as W,F as v,n as w,t as f,i as L,T as D,bK as q}from"./index-DaaxvRie.js";const A=["id"],J={class:"p-2 border-b border-gray-200 dark:border-gray-700"},K={class:"flex-grow overflow-y-auto p-1 max-h-80"},P={key:0,class:"text-center text-sm text-gray-500 py-4"},U={key:1,class:"px-3 py-2 text-sm text-gray-500 italic"},H={class:"flex items-center space-x-3"},Q={class:"h-8 w-8 rounded-md bg-gray-200 dark:bg-gray-600 flex-shrink-0 flex items-center justify-center"},X={class:"block truncate font-semibold"},Y={key:0,class:"check-mark"},Z={key:0,class:"pt-2"},I={class:"px-3 py-1 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400"},ee=["onClick"],te={class:"flex items-center space-x-3 flex-grow min-w-0"},se=["src"],le={key:1,class:"h-8 w-8 rounded-md bg-gray-200 dark:bg-gray-600 flex-shrink-0 flex items-center justify-center text-gray-400"},ne={class:"min-w-0"},oe=["title"],ie=["title"],ae={class:"flex-shrink-0 flex items-center pl-2"},re={key:0,class:"check-mark ml-2"},de=["onClick"],ce={class:"flex items-center space-x-3 flex-grow min-w-0"},ue=["src"],fe={key:1,class:"h-8 w-8 rounded-md bg-gray-200 dark:bg-gray-600 flex-shrink-0 flex items-center justify-center text-gray-400"},me={class:"min-w-0"},ge=["title"],pe=["title"],ve={class:"flex-shrink-0 flex items-center pl-2"},he={key:0,class:"check-mark ml-2"},ye={key:0,class:"border-t border-gray-200 dark:border-gray-700"},ke={__name:"IconSelectMenu",props:{items:{type:Array,default:()=>[]},modelValue:{type:[String,Number,null],default:null},placeholder:{type:String,default:"Select an option"},isLoading:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,{emit:V}){const m=a,S=V,u=p(!1),h=p(null),_=p({}),g=p(""),B=x(()=>m.items.flatMap(e=>e.isGroup?e.items:[e])),M=x(()=>m.modelValue&&B.value.find(e=>e.id===m.modelValue)||null),b=x(()=>{if(!g.value)return m.items;const e=g.value.toLowerCase(),n=[];return m.items.forEach(t=>{if(t.isGroup){const r=t.items.filter(i=>i.name.toLowerCase().includes(e)||i.description&&i.description.toLowerCase().includes(e));r.length>0&&n.push({...t,items:r})}else(t.name.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e))&&n.push(t)}),n});function y(){if(h.value){const e=h.value.getBoundingClientRect(),n=384;let t=e.left;e.left+n>window.innerWidth&&(t=e.right-n),_.value={position:"fixed",top:`${e.bottom+4}px`,left:`${t}px`,minWidth:`${e.width}px`}}}O(u,async e=>{e?(g.value="",await j(),y(),window.addEventListener("resize",y,{passive:!0})):window.removeEventListener("resize",y)});function k(e){S("update:modelValue",e),u.value=!1}const z={mounted:(e,n)=>{e.__vueClickOutside__=t=>{const r=document.getElementById(`menu-${e.id}`);!e.contains(t.target)&&(!r||!r.contains(t.target))&&n.value(t)},document.body.addEventListener("click",e.__vueClickOutside__)},unmounted:e=>{document.body.removeEventListener("click",e.__vueClickOutside__)}},C=`menu-trigger-${Math.random().toString(36).substr(2,9)}`;return(e,n)=>$((s(),o("div",{id:C,ref_key:"triggerRef",ref:h,class:"relative w-full"},[d(e.$slots,"button",{toggle:()=>u.value=!u.value,selectedItem:M.value},void 0,!0),(s(),N(q,{to:"body"},[T(D,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:F(()=>[u.value?(s(),o("div",{key:0,id:`menu-${C}`,style:G(_.value),class:"w-96 z-[9999] rounded-md bg-white dark:bg-gray-800 shadow-lg ring-1 ring-black ring-opacity-5 flex flex-col"},[l("div",J,[$(l("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=t=>g.value=t),placeholder:"Search...",onClick:n[1]||(n[1]=R(()=>{},["stop"])),class:"input-field w-full text-sm"},null,512),[[W,g.value]])]),l("ul",K,[a.isLoading?(s(),o("div",P,"Loading...")):b.value.length===0?(s(),o("li",U,"No matching items.")):(s(),o(v,{key:2},[l("li",{onClick:n[2]||(n[2]=t=>k(null)),class:w(["menu-item",{"is-selected":!a.modelValue}])},[l("div",H,[l("div",Q,[d(e.$slots,"placeholder-icon",{},void 0,!0)]),l("span",X,f(a.placeholder),1)]),a.modelValue?c("",!0):(s(),o("span",Y,n[3]||(n[3]=[l("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])))],2),(s(!0),o(v,null,L(b.value,(t,r)=>(s(),o(v,{key:r},[t.isGroup?(s(),o("div",Z,[l("div",I,f(t.label),1),(s(!0),o(v,null,L(t.items,i=>(s(),o("li",{key:i.id,onClick:xe=>k(i.id),class:w(["menu-item",{"is-selected":i.id===a.modelValue}])},[l("div",te,[i.icon_base64?(s(),o("img",{key:0,src:i.icon_base64,class:"h-8 w-8 rounded-md object-cover flex-shrink-0"},null,8,se)):(s(),o("div",le,[d(e.$slots,"item-icon-default",{},void 0,!0)])),l("div",ne,[l("span",{class:"font-semibold block truncate",title:i.name},f(i.name),9,oe),i.description?(s(),o("span",{key:0,class:"text-xs text-gray-500 dark:text-gray-400 block truncate",title:i.description},f(i.description),9,ie)):c("",!0)])]),l("div",ae,[d(e.$slots,"item-extra",{item:i},void 0,!0),i.id===a.modelValue?(s(),o("span",re,n[4]||(n[4]=[l("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):c("",!0)])],10,ee))),128))])):(s(),o("li",{key:1,onClick:i=>k(t.id),class:w(["menu-item",{"is-selected":t.id===a.modelValue}])},[l("div",ce,[t.icon_base64?(s(),o("img",{key:0,src:t.icon_base64,class:"h-8 w-8 rounded-md object-cover flex-shrink-0"},null,8,ue)):(s(),o("div",fe,[d(e.$slots,"item-icon-default",{},void 0,!0)])),l("div",me,[l("span",{class:"font-semibold block truncate",title:t.name},f(t.name),9,ge),t.description?(s(),o("span",{key:0,class:"text-xs text-gray-500 dark:text-gray-400 block truncate",title:t.description},f(t.description),9,pe)):c("",!0)])]),l("div",ve,[d(e.$slots,"item-extra",{item:t},void 0,!0),t.id===a.modelValue?(s(),o("span",he,n[5]||(n[5]=[l("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):c("",!0)])],10,de))],64))),128))],64))]),e.$slots.footer?(s(),o("div",ye,[d(e.$slots,"footer",{},void 0,!0)])):c("",!0)],12,A)):c("",!0)]),_:3})]))])),[[z,()=>u.value=!1]])}},_e=E(ke,[["__scopeId","data-v-30027964"]]);export{_e as I};
