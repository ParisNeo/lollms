import{f as E,a as A,u as L,s as h,r as v,o as F,n as f,c as l,b as n,d as e,t as o,w as T,e as _,v as k,i as p,F as M,k as C}from"./index-POejE1X7.js";const V={class:"space-y-8"},$={class:"text-lg font-semibold mb-4 border-b dark:border-gray-600 pb-2"},j={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},q={class:"text-right flex justify-end items-center space-x-2"},B=["disabled"],R={key:0},Y={key:1},z={class:"max-h-60 overflow-y-auto border dark:border-gray-600 rounded p-2 space-y-1"},G={key:0,class:"italic text-sm text-gray-500 p-2"},H={class:"font-medium text-gray-800 dark:text-gray-100"},I={class:"text-xs text-gray-500 dark:text-gray-400 font-mono"},J={class:"space-x-4 flex-shrink-0"},K=["onClick"],O=["onClick"],Q={class:"max-h-60 overflow-y-auto border dark:border-gray-600 rounded p-2 space-y-1"},W={key:0,class:"italic text-sm text-gray-500 p-2"},X={class:"font-medium text-gray-800 dark:text-gray-100"},Z={class:"text-xs text-gray-500 dark:text-gray-400 font-mono"},se={__name:"MCPSettings",setup(ee){const u=E(),y=A(),S=L(),{userMcps:x}=h(u),{user:w}=h(S),r=v({name:"",url:""}),i=v(null),c=v(!1);F(()=>{u.fetchMcps()});const d=f(()=>i.value!==null),g=f(()=>x.value.filter(s=>{var t;return s.owner_username===((t=w.value)==null?void 0:t.username)}).sort((s,t)=>s.name.localeCompare(t.name))),b=f(()=>x.value.filter(s=>s.owner_username===null).sort((s,t)=>s.name.localeCompare(t.name)));function P(s){i.value={...s},r.value.name=s.name,r.value.url=s.url}function m(){i.value=null,r.value={name:"",url:""}}async function N(){if(!r.value.name||!r.value.url){y.addNotification("Name and URL are required.","warning");return}c.value=!0;try{d.value?await u.updateMcp(i.value.id,{name:r.value.name,url:r.value.url}):await u.addMcp(r.value),m()}catch{}finally{c.value=!1}}async function D(s){await y.showConfirmation({title:`Delete '${s.name}'?`,message:`Are you sure you want to remove the MCP server at ${s.url}? This cannot be undone.`,confirmText:"Delete"})&&(i.value&&i.value.id===s.id&&m(),await u.deleteMcp(s.id))}return(s,t)=>(n(),l("div",V,[e("section",null,[e("h4",$,o(d.value?"Edit Personal MCP Server":"Add Personal MCP Server"),1),e("form",{onSubmit:T(N,["prevent"]),class:"space-y-4 max-w-xl"},[e("div",j,[e("div",null,[t[2]||(t[2]=e("label",{for:"mcpName",class:"block text-sm font-medium"},"Name",-1)),_(e("input",{type:"text",id:"mcpName","onUpdate:modelValue":t[0]||(t[0]=a=>r.value.name=a),class:"input-field mt-1",placeholder:"e.g., My Local Server",required:""},null,512),[[k,r.value.name]])]),e("div",null,[t[3]||(t[3]=e("label",{for:"mcpUrl",class:"block text-sm font-medium"},"URL",-1)),_(e("input",{type:"url",id:"mcpUrl","onUpdate:modelValue":t[1]||(t[1]=a=>r.value.url=a),class:"input-field mt-1",placeholder:"http://127.0.0.1:9602",required:""},null,512),[[k,r.value.url]])])]),e("div",q,[d.value?(n(),l("button",{key:0,onClick:m,type:"button",class:"btn btn-secondary"}," Cancel ")):p("",!0),e("button",{type:"submit",class:"btn btn-primary",disabled:c.value},[c.value?(n(),l("span",R,o(d.value?"Saving...":"Adding..."),1)):(n(),l("span",Y,o(d.value?"Save Changes":"Add MCP Server"),1))],8,B)])],32)]),e("section",null,[t[4]||(t[4]=e("h4",{class:"text-lg font-semibold mb-2"},"Your MCP Servers",-1)),e("div",z,[g.value.length===0?(n(),l("p",G," No personal MCP servers configured. ")):p("",!0),(n(!0),l(M,null,C(g.value,a=>(n(),l("div",{key:a.id,class:"flex justify-between items-center py-1.5 px-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded text-sm"},[e("div",null,[e("strong",H,o(a.name),1),e("p",I,o(a.url),1)]),e("div",J,[e("button",{onClick:U=>P(a),class:"font-medium text-blue-500 hover:text-blue-700",title:"Edit MCP Server"},"Edit",8,K),e("button",{onClick:U=>D(a),class:"font-medium text-red-500 hover:text-red-700",title:"Delete MCP Server"},"Delete",8,O)])]))),128))])]),e("section",null,[t[5]||(t[5]=e("h4",{class:"text-lg font-semibold mb-2"},"System MCP Servers",-1)),e("div",Q,[b.value.length===0?(n(),l("p",W," No system-wide MCP servers available. ")):p("",!0),(n(!0),l(M,null,C(b.value,a=>(n(),l("div",{key:a.id,class:"flex justify-between items-center py-1.5 px-2 text-sm"},[e("div",null,[e("strong",X,o(a.name),1),e("p",Z,o(a.url),1)])]))),128))])])]))}};export{se as default};
