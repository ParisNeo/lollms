import{bG as f,O as k,x as S,r as g,j as x,o as h,w as p,c as v,b as _,g as e,d as w,f as I,A as n,n as s,t as q}from"./index-DaajXeGR.js";const A={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},O={class:"space-y-6"},C={class:"p-4 border dark:border-gray-700 rounded-lg"},P={class:"space-y-4"},E={class:"toggle-container"},N=["disabled"],$={class:"p-4 border dark:border-gray-700 rounded-lg"},j={class:"space-y-4"},B={class:"toggle-container"},G=["disabled"],M={class:"mt-8 pt-5 border-t border-gray-200 dark:border-gray-700"},V={class:"flex justify-end"},F=["disabled"],J={__name:"ServicesSettings",setup(K){const i=k(),y=S(),a=g({openai_api_service_enabled:!1,openai_api_require_key:!0,ollama_service_enabled:!1,ollama_require_key:!0}),o=g(!1),r=g(!1);let u="{}";const c=x(()=>i.globalSettings.filter(l=>l.category==="Services"));h(()=>{i.globalSettings.length===0?i.fetchGlobalSettings():b()}),p(()=>i.globalSettings,b,{deep:!0}),p(a,l=>{r.value=JSON.stringify(l)!==u},{deep:!0});function b(){const l={};c.value.length>0&&(c.value.forEach(t=>{l[t.key]=t.value}),a.value={...a.value,...l},u=JSON.stringify(a.value),r.value=!1)}async function m(){o.value=!0;try{await i.updateGlobalSettings({...a.value}),y.addNotification("Service settings saved.","success")}catch{}finally{o.value=!1}}return(l,t)=>(_(),v("div",A,[t[10]||(t[10]=e("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"text-xl font-semibold leading-6 text-gray-900 dark:text-white"}," API Services "),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Manage built-in API services like the OpenAI-compatible endpoint. ")],-1)),Object.keys(a.value).length?(_(),v("form",{key:0,onSubmit:I(m,["prevent"]),class:"p-6"},[e("div",O,[e("div",C,[t[6]||(t[6]=e("h4",{class:"font-semibold text-lg mb-2"},"OpenAI-Compatible API",-1)),e("div",P,[e("div",E,[t[4]||(t[4]=e("span",{class:"toggle-label"},[n(" Enable OpenAI API Service "),e("span",{class:"toggle-description"},"Exposes `/v1/...` endpoints for compatibility with OpenAI clients.")],-1)),e("button",{onClick:t[0]||(t[0]=d=>a.value.openai_api_service_enabled=!a.value.openai_api_service_enabled),type:"button",class:s([a.value.openai_api_service_enabled?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","toggle-switch"])},[e("span",{class:s([a.value.openai_api_service_enabled?"translate-x-5":"translate-x-0","toggle-knob"])},null,2)],2)]),e("div",{class:s(["toggle-container",{"opacity-50 cursor-not-allowed":!a.value.openai_api_service_enabled}])},[t[5]||(t[5]=e("span",{class:"toggle-label"},[n(" Require API Key "),e("span",{class:"toggle-description"},"If disabled, unauthenticated requests are permitted and handled by the primary admin account.")],-1)),e("button",{onClick:t[1]||(t[1]=d=>a.value.openai_api_require_key=!a.value.openai_api_require_key),type:"button",disabled:!a.value.openai_api_service_enabled,class:s([a.value.openai_api_require_key?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","toggle-switch"])},[e("span",{class:s([a.value.openai_api_require_key?"translate-x-5":"translate-x-0","toggle-knob"])},null,2)],10,N)],2)])]),e("div",$,[t[9]||(t[9]=e("h4",{class:"font-semibold text-lg mb-2"},"Ollama-Compatible API",-1)),e("div",j,[e("div",B,[t[7]||(t[7]=e("span",{class:"toggle-label"},[n(" Enable Ollama API Service "),e("span",{class:"toggle-description"},"Exposes `/ollama/v1/...` endpoints for compatibility with Ollama clients.")],-1)),e("button",{onClick:t[2]||(t[2]=d=>a.value.ollama_service_enabled=!a.value.ollama_service_enabled),type:"button",class:s([a.value.ollama_service_enabled?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","toggle-switch"])},[e("span",{class:s([a.value.ollama_service_enabled?"translate-x-5":"translate-x-0","toggle-knob"])},null,2)],2)]),e("div",{class:s(["toggle-container",{"opacity-50 cursor-not-allowed":!a.value.ollama_service_enabled}])},[t[8]||(t[8]=e("span",{class:"toggle-label"},[n(" Require API Key "),e("span",{class:"toggle-description"},"If disabled, unauthenticated requests are permitted and handled by the primary admin account.")],-1)),e("button",{onClick:t[3]||(t[3]=d=>a.value.ollama_require_key=!a.value.ollama_require_key),type:"button",disabled:!a.value.ollama_service_enabled,class:s([a.value.ollama_require_key?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","toggle-switch"])},[e("span",{class:s([a.value.ollama_require_key?"translate-x-5":"translate-x-0","toggle-knob"])},null,2)],10,G)],2)])])]),e("div",M,[e("div",V,[e("button",{type:"submit",class:"btn btn-primary",disabled:o.value||!r.value},q(o.value?"Saving...":"Save Service Settings"),9,F)])])],32)):w("",!0)]))}},z=f(J,[["__scopeId","data-v-d343b2d7"]]);export{z as default};
