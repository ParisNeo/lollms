import{C as D,a as U,s as I,r as x,c as N,o as P,b as a,e as o,d as p,f as e,t as i,h as u,L as v,v as f,n as E,F as B,p as A,m as y,q as b,w as j}from"./index-BO8QOotf.js";const q={class:"space-y-8"},$={key:0,class:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6"},O={class:"text-xl font-semibold mb-4"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},R=["value"],z=["placeholder"],K={class:"flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-md"},G={class:"flex justify-end gap-3"},J=["disabled"],Q={class:"flex justify-between items-center mb-4"},W={key:0,class:"text-center p-6"},X={key:1,class:"text-center p-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},Y={key:2,class:"space-y-4"},Z=["title"],ee={class:"flex-grow"},te={class:"flex justify-between items-center"},se={class:"font-bold text-lg text-gray-900 dark:text-white"},le={class:"flex gap-3"},ae=["onClick"],oe=["onClick"],ne={class:"text-sm text-gray-500 dark:text-gray-400"},ie={class:"mt-2 text-xs space-y-1 text-gray-600 dark:text-gray-300"},de={key:0},re={key:1},ue={key:2},ve={__name:"BindingsSettings",setup(me){const d=D(),C=U(),{bindings:k,availableBindingTypes:S,isLoadingBindings:L}=I(d),r=x(!1),m=x(null),c=x(!1),_=()=>({id:null,alias:"",name:"",host_address:"",models_path:"",service_key:"",default_model_name:"",is_active:!0}),l=x(_()),g=N(()=>m.value!==null);P(()=>{d.fetchBindings(),d.fetchAvailableBindingTypes()});function h(){m.value=null,l.value=_(),r.value=!0,window.scrollTo({top:0,behavior:"smooth"})}function M(n){m.value=n,l.value={...n,service_key:""},r.value=!0,window.scrollTo({top:0,behavior:"smooth"})}function w(){r.value=!1,m.value=null}async function T(){c.value=!0;try{const n={...l.value};delete n.id,g.value?await d.updateBinding(m.value.id,n):await d.addBinding(n),w()}catch{}finally{c.value=!1}}async function V(n){await C.showConfirmation({title:`Delete Binding '${n.alias}'?`,message:"Are you sure? This action cannot be undone.",confirmText:"Delete"})&&await d.deleteBinding(n.id)}return(n,t)=>(o(),a("div",q,[r.value?(o(),a("div",$,[e("h3",O,i(g.value?"Edit Binding":"Add New Binding"),1),e("form",{onSubmit:j(T,["prevent"]),class:"space-y-6"},[e("div",H,[e("div",null,[t[7]||(t[7]=e("label",{for:"alias",class:"block text-sm font-medium"},[v("Alias "),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{type:"text",id:"alias","onUpdate:modelValue":t[0]||(t[0]=s=>l.value.alias=s),class:"input-field mt-1",required:"",placeholder:"e.g., local_ollama"},null,512),[[f,l.value.alias]]),t[8]||(t[8]=e("p",{class:"text-xs text-gray-500 mt-1"},"A unique, short name for this configuration.",-1))]),e("div",null,[t[10]||(t[10]=e("label",{for:"name",class:"block text-sm font-medium"},[v("Binding Type "),e("span",{class:"text-red-500"},"*")],-1)),u(e("select",{id:"name","onUpdate:modelValue":t[1]||(t[1]=s=>l.value.name=s),class:"input-field mt-1",required:""},[t[9]||(t[9]=e("option",{disabled:"",value:""},"Select a type",-1)),(o(!0),a(B,null,A(y(S),s=>(o(),a("option",{key:s,value:s},i(s),9,R))),128))],512),[[E,l.value.name]])])]),e("div",null,[t[11]||(t[11]=e("label",{for:"host_address",class:"block text-sm font-medium"},"Host Address",-1)),u(e("input",{type:"text",id:"host_address","onUpdate:modelValue":t[2]||(t[2]=s=>l.value.host_address=s),class:"input-field mt-1",placeholder:"e.g., http://localhost:11434"},null,512),[[f,l.value.host_address]]),t[12]||(t[12]=e("p",{class:"text-xs text-gray-500 mt-1"},"URL for remote bindings like Ollama or OpenAI-compatible servers.",-1))]),e("div",null,[t[13]||(t[13]=e("label",{for:"models_path",class:"block text-sm font-medium"},"Models Path",-1)),u(e("input",{type:"text",id:"models_path","onUpdate:modelValue":t[3]||(t[3]=s=>l.value.models_path=s),class:"input-field mt-1",placeholder:"e.g., /path/to/your/models"},null,512),[[f,l.value.models_path]]),t[14]||(t[14]=e("p",{class:"text-xs text-gray-500 mt-1"},"Local file path for bindings that load models from disk (e.g., LlamaCPP).",-1))]),e("div",null,[t[15]||(t[15]=e("label",{for:"service_key",class:"block text-sm font-medium"},"Service API Key",-1)),u(e("input",{type:"password",id:"service_key","onUpdate:modelValue":t[4]||(t[4]=s=>l.value.service_key=s),class:"input-field mt-1",placeholder:g.value?"Leave blank to keep existing key":"Paste API key here"},null,8,z),[[f,l.value.service_key]]),t[16]||(t[16]=e("p",{class:"text-xs text-gray-500 mt-1"},"For services like OpenAI. Can also be set as an environment variable.",-1))]),e("div",null,[t[17]||(t[17]=e("label",{for:"default_model_name",class:"block text-sm font-medium"},"Default Model Name",-1)),u(e("input",{type:"text",id:"default_model_name","onUpdate:modelValue":t[5]||(t[5]=s=>l.value.default_model_name=s),class:"input-field mt-1",placeholder:"e.g., phi3:latest or gpt-4o-mini"},null,512),[[f,l.value.default_model_name]])]),e("div",K,[t[18]||(t[18]=e("span",{class:"flex-grow flex flex-col"},[e("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Active"),e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"If disabled, users cannot see or use models from this binding.")],-1)),e("button",{onClick:t[6]||(t[6]=s=>l.value.is_active=!l.value.is_active),type:"button",class:b([l.value.is_active?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out"])},[e("span",{class:b([l.value.is_active?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition-colors duration-200 ease-in-out"])},null,2)],2)]),e("div",G,[e("button",{type:"button",onClick:w,class:"btn btn-secondary"},"Cancel"),e("button",{type:"submit",class:"btn btn-primary",disabled:c.value},i(c.value?"Saving...":g.value?"Save Changes":"Add Binding"),9,J)])],32)])):p("",!0),e("div",null,[e("div",Q,[t[19]||(t[19]=e("h2",{class:"text-2xl font-bold"},"LLM Bindings",-1)),r.value?p("",!0):(o(),a("button",{key:0,onClick:h,class:"btn btn-primary"},"+ Add New Binding"))]),y(L)?(o(),a("div",W,"Loading bindings...")):y(k).length===0&&!r.value?(o(),a("div",X,[t[20]||(t[20]=e("p",null,"No LLM bindings configured yet.",-1)),e("button",{onClick:h,class:"mt-2 text-blue-600 hover:underline"},"Add your first one")])):(o(),a("div",Y,[(o(!0),a(B,null,A(y(k),s=>(o(),a("div",{key:s.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md flex items-start gap-4"},[e("span",{class:b(["mt-1 h-3 w-3 rounded-full flex-shrink-0",s.is_active?"bg-green-500":"bg-gray-400"]),title:s.is_active?"Active":"Inactive"},null,10,Z),e("div",ee,[e("div",te,[e("h4",se,i(s.alias),1),e("div",le,[e("button",{onClick:F=>M(s),class:"text-sm font-medium text-blue-600 hover:underline"},"Edit",8,ae),e("button",{onClick:F=>V(s),class:"text-sm font-medium text-red-600 hover:underline"},"Delete",8,oe)])]),e("p",ne,i(s.name),1),e("div",ie,[s.host_address?(o(),a("p",de,[t[21]||(t[21]=e("span",{class:"font-semibold"},"Host:",-1)),v(" "+i(s.host_address),1)])):p("",!0),s.models_path?(o(),a("p",re,[t[22]||(t[22]=e("span",{class:"font-semibold"},"Path:",-1)),v(" "+i(s.models_path),1)])):p("",!0),s.default_model_name?(o(),a("p",ue,[t[23]||(t[23]=e("span",{class:"font-semibold"},"Default Model:",-1)),v(" "+i(s.default_model_name),1)])):p("",!0)])])]))),128))]))])]))}};export{ve as default};
