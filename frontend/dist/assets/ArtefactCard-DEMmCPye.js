import{S as V,bV as _,x as S,r as T,j as f,c as p,b as m,g as t,n as i,k as n,bS as U,t as D,D as Z,E as z,h as E,v as F,F as B,i as M,A as u,Y as w,bW as C}from"./index-Dd3XH_0e.js";const N={class:"artefact-header"},j={class:"artefact-info"},$={class:"artefact-details"},q=["title"],O={class:"artefact-actions"},W={class:"artefact-body"},Y={class:"w-full"},H=["value"],J={class:"grid grid-cols-2 gap-1 w-full mt-1.5"},K={__name:"ArtefactCard",props:{artefactGroup:{type:Object,required:!0},isLoadedToPrompt:{type:Boolean,default:!1}},emits:["load-to-prompt","unload-from-prompt"],setup(s,{emit:I}){var h;const e=s,v=I,o=_(),b=S(),l=T(((h=e.artefactGroup.versions[0])==null?void 0:h.version)||1);T(!1);const c=f(()=>e.artefactGroup.isAnyVersionLoaded),G=f(()=>c.value?e.artefactGroup.versions.find(r=>r.is_loaded):null),L=f(()=>c.value?"loaded-data-zone":e.isLoadedToPrompt?"loaded-prompt":"");async function P(){await o.loadArtefactToContext({discussionId:o.currentDiscussionId,artefactTitle:e.artefactGroup.title,version:l.value})}function k(){v("load-to-prompt",e.artefactGroup.title,l.value)}async function y(){await o.unloadArtefactFromContext({discussionId:o.currentDiscussionId,artefactTitle:e.artefactGroup.title,version:G.value.version})}function A(){v("unload-from-prompt",e.artefactGroup.title)}async function g(){const r=await o.fetchArtefactContent({discussionId:o.currentDiscussionId,artefactTitle:e.artefactGroup.title,version:l.value});r&&b.openModal("artefactEditor",{artefact:r,discussionId:o.currentDiscussionId})}async function x(){await b.showConfirmation({title:`Delete Artefact '${e.artefactGroup.title}'?`,message:"This will permanently delete the artefact and all its versions.",confirmText:"Delete"})&&await o.deleteArtefact({discussionId:o.currentDiscussionId,artefactTitle:e.artefactGroup.title})}return(r,a)=>(m(),p("div",{class:i(["artefact-card group",L.value])},[t("div",N,[t("div",j,[t("div",{class:i(["artefact-icon",{"loaded-data-zone":c.value,"loaded-prompt":s.isLoadedToPrompt}])},[n(U,{class:"w-4 h-4"})],2),t("div",$,[t("h5",{class:"artefact-title",title:s.artefactGroup.title},D(s.artefactGroup.title),9,q)])]),t("div",O,[t("button",{onClick:g,class:"artefact-action-btn",title:"Edit Content"},[n(Z,{class:"w-3 h-3"})]),t("button",{onClick:x,class:"artefact-action-btn artefact-action-btn-danger",title:"Delete Artefact"},[n(z,{class:"w-3 h-3"})])])]),t("div",W,[t("div",Y,[E(t("select",{"onUpdate:modelValue":a[0]||(a[0]=d=>l.value=d),class:"version-select"},[(m(!0),p(B,null,M(s.artefactGroup.versions,d=>(m(),p("option",{key:d.version,value:d.version}," Version "+D(d.version),9,H))),128))],512),[[F,l.value]])]),t("div",J,[t("button",{onClick:P,class:i(["load-btn",{"loaded-data-zone-btn":c.value}]),title:"Load to Data Zone"},[n(w,{class:"w-3 h-3"}),a[1]||(a[1]=u(" Load DZ "))],2),t("button",{onClick:y,class:i(["load-btn",{"loaded-data-zone-btn":c.value}]),title:"Unload from Data Zone"},[n(C,{class:"w-3 h-3"}),a[2]||(a[2]=u(" Unload DZ "))],2),t("button",{onClick:k,class:i(["load-btn",{"loaded-prompt-btn":s.isLoadedToPrompt}]),title:"Load to Prompt"},[n(w,{class:"w-3 h-3"}),a[3]||(a[3]=u(" Load PMPT "))],2),t("button",{onClick:A,class:i(["load-btn",{"loaded-prompt-btn":s.isLoadedToPrompt}]),title:"Unload from Prompt"},[n(C,{class:"w-3 h-3"}),a[4]||(a[4]=u(" Unload PMPT "))],2)])])],2))}},R=V(K,[["__scopeId","data-v-81fc828c"]]);export{R as default};
