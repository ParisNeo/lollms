import{S as P,bN as L,x as g,r as x,j as u,c as n,b as i,g as e,n as D,k as r,bO as U,t as T,D as V,E as Z,h as F,v as S,F as E,i as z,A as p,Z as M,bP as N,Y as $,bQ as B}from"./index-BJ6d4adw.js";const j={class:"artefact-header"},O={class:"artefact-info"},q={class:"artefact-details"},Q=["title"],R={class:"artefact-actions"},Y={class:"artefact-body"},H={class:"w-full"},J=["value"],K={class:"grid grid-cols-2 gap-1 w-full mt-1.5"},W=["disabled"],X=["disabled"],tt=["disabled"],et=["disabled"],at={__name:"AppCard",props:{artefactGroup:{type:Object,required:!0}},setup(f){var _;const a=f,t=L(),b=g(),c=x(((_=a.artefactGroup.versions[0])==null?void 0:_.version)||1),l=u(()=>a.artefactGroup.isAnyVersionLoaded),m=u(()=>t.promptLoadedArtefacts.has(a.artefactGroup.title)),v=u(()=>t.activeDiscussion?!!t.activeAiTasks[t.activeDiscussion.id]:!1),h=u(()=>l.value?a.artefactGroup.versions.find(o=>o.is_loaded):null),k=u(()=>({"loaded-data-zone":l.value,"loaded-prompt":m.value&&!l.value}));async function I(){await t.loadArtefactToContext({discussionId:t.currentDiscussionId,artefactTitle:a.artefactGroup.title,version:c.value})}function w(){t.loadArtefactToPrompt({discussionId:t.currentDiscussionId,artefactTitle:a.artefactGroup.title,version:c.value})}async function C(){h.value&&await t.unloadArtefactFromContext({discussionId:t.currentDiscussionId,artefactTitle:a.artefactGroup.title,version:h.value.version})}function A(){t.unloadArtefactFromPrompt(a.artefactGroup.title)}async function G(){const o=await t.fetchArtefactContent({discussionId:t.currentDiscussionId,artefactTitle:a.artefactGroup.title,version:c.value});o&&b.openModal("artefactEditor",{artefact:o,discussionId:t.currentDiscussionId})}async function y(){await b.showConfirmation({title:`Delete Artefact '${a.artefactGroup.title}'?`,message:"This will permanently delete the artefact and all its versions.",confirmText:"Delete"})&&await t.deleteArtefact({discussionId:t.currentDiscussionId,artefactTitle:a.artefactGroup.title})}return(o,s)=>(i(),n("div",{class:D(["artefact-card group",k.value])},[e("div",j,[e("div",O,[e("div",{class:D(["artefact-icon",{"loaded-data-zone":l.value,"loaded-prompt":m.value}])},[r(U,{class:"w-4 h-4"})],2),e("div",q,[e("h5",{class:"artefact-title",title:f.artefactGroup.title},T(f.artefactGroup.title),9,Q)])]),e("div",R,[e("button",{onClick:G,class:"artefact-action-btn",title:"Edit Content"},[r(V,{class:"w-3 h-3"})]),e("button",{onClick:y,class:"artefact-action-btn artefact-action-btn-danger",title:"Delete Artefact"},[r(Z,{class:"w-3 h-3"})])])]),e("div",Y,[e("div",H,[F(e("select",{"onUpdate:modelValue":s[0]||(s[0]=d=>c.value=d),class:"version-select"},[(i(!0),n(E,null,z(f.artefactGroup.versions,d=>(i(),n("option",{key:d.version,value:d.version}," Version "+T(d.version),9,J))),128))],512),[[S,c.value]])]),e("div",K,[l.value?(i(),n("button",{key:1,onClick:C,class:"load-btn loaded-data-zone-btn",title:"Unload from Data Zone",disabled:v.value},[r(N,{class:"w-3 h-3"}),s[2]||(s[2]=p(" Unload DZ "))],8,X)):(i(),n("button",{key:0,onClick:I,class:"load-btn",title:"Load to Data Zone",disabled:v.value},[r(M,{class:"w-3 h-3"}),s[1]||(s[1]=p(" Load DZ "))],8,W)),m.value?(i(),n("button",{key:3,onClick:A,class:"load-btn loaded-prompt-btn",title:"Unload from Prompt",disabled:v.value},[r(B,{class:"w-3 h-3"}),s[4]||(s[4]=p(" Unload PMPT "))],8,et)):(i(),n("button",{key:2,onClick:w,class:"load-btn",title:"Load to Prompt",disabled:v.value},[r($,{class:"w-3 h-3"}),s[3]||(s[3]=p(" Load PMPT "))],8,tt))])])],2))}},ot=P(at,[["__scopeId","data-v-4e9c3a4c"]]);export{ot as A};
