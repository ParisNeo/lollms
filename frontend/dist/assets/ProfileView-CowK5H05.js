import{s as U,u as S,c as l,x as B,o as N,w as L,b as o,h as a,e as v,f as _,y as R,U as A,t as c,g as D,F as E,m as V,i as q,z as M,d as n,j as T,q as j,A as z}from"./index-DnjdbnqE.js";const O={class:"flex-grow bg-gray-100 dark:bg-gray-900 overflow-y-auto"},G={class:"max-w-3xl mx-auto py-6 px-4"},I={key:0,class:"text-center py-20"},$={key:1},H={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6"},J={class:"flex flex-col sm:flex-row items-center sm:items-start space-y-4 sm:space-y-0 sm:space-x-6"},K={class:"flex-grow text-center sm:text-left"},Q={class:"text-3xl font-bold text-gray-900 dark:text-gray-100"},W={class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},X={key:0,class:"mt-4 flex items-center space-x-2 justify-center sm:justify-start"},Y={key:1,class:"btn btn-disabled",disabled:""},Z={key:1,class:"mt-4"},ee={key:0,class:"text-center py-10"},te={key:1,class:"space-y-4"},se={key:2,class:"text-center py-10 bg-white dark:bg-gray-800 rounded-lg shadow-md"},ae={class:"text-gray-500"},ne={key:2,class:"text-center py-20"},oe={class:"mt-2 text-gray-500"},ie={__name:"ProfileView",setup(re){const i=B(),p=M(),m=U(),r=S(),y=l(()=>{var e;const s=i.params.username==="me"?(e=m.user)==null?void 0:e.username:i.params.username;return r.profiles[s]||null}),t=l(()=>{var s;return((s=y.value)==null?void 0:s.user)||null}),d=l(()=>{var s;return((s=y.value)==null?void 0:s.relationship)||{}}),x=l(()=>r.isLoadingProfile),f=l(()=>t.value?r.getPostsByUsername(t.value.username):[]),b=l(()=>{var s,e;return((s=m.user)==null?void 0:s.username)===((e=t.value)==null?void 0:e.username)});async function h(s){var u;if(!s)return;const e=s==="me"?(u=m.user)==null?void 0:u.username:s;if(!e){p.push("/");return}await r.fetchUserProfile(e),await r.fetchUserPosts(e)}function k(){t.value&&r.followUser(t.value.id)}function w(){t.value&&r.unfollowUser(t.value.id)}function F(){t.value&&r.sendFriendRequest(t.value.username)}function C(){t.value&&r.removeFriend(t.value.id)}async function P(){t.value&&(await p.push("/"),r.openConversation(t.value))}return N(()=>{h(i.params.username)}),L(()=>i.params.username,s=>{s&&h(s)}),(s,e)=>{const u=R("router-link");return n(),o("div",O,[a("div",G,[v(u,{to:"/",class:"inline-flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white mb-4"},{default:_(()=>e[0]||(e[0]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),a("span",null,"Back to Feed",-1)])),_:1}),x.value&&!t.value?(n(),o("div",I,e[1]||(e[1]=[a("p",{class:"text-gray-500"},"Loading profile...",-1)]))):t.value?(n(),o("div",$,[a("header",H,[a("div",J,[v(A,{icon:t.value.icon,username:t.value.username,"size-class":"h-24 w-24 text-4xl"},null,8,["icon","username"]),a("div",K,[a("h1",Q,c(t.value.username),1),a("p",W,c(t.value.bio||"This user has not set a bio yet."),1),b.value?(n(),o("div",Z,[v(u,{to:"/settings",class:"btn btn-secondary"},{default:_(()=>e[2]||(e[2]=[T("Edit Profile")])),_:1})])):(n(),o("div",X,[d.value.friendship_status?d.value.friendship_status==="PENDING"?(n(),o("button",Y,"Request Sent")):d.value.friendship_status==="ACCEPTED"?(n(),o("button",{key:2,onClick:C,class:"btn btn-success-outline"},"Friends")):D("",!0):(n(),o("button",{key:0,onClick:F,class:"btn btn-secondary"},"Add Friend")),d.value.is_following?(n(),o("button",{key:4,onClick:w,class:"btn btn-primary-outline"},"Following")):(n(),o("button",{key:3,onClick:k,class:"btn btn-primary"},"Follow")),a("button",{onClick:P,class:"btn btn-secondary"},"Message")]))])])]),a("div",null,[e[4]||(e[4]=a("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4"},"Posts",-1)),x.value&&f.value.length===0?(n(),o("div",ee,e[3]||(e[3]=[a("p",{class:"text-gray-500"},"Loading posts...",-1)]))):f.value.length>0?(n(),o("div",te,[(n(!0),o(E,null,V(f.value,g=>(n(),j(z,{key:g.id,post:g},null,8,["post"]))),128))])):(n(),o("div",se,[a("p",ae,c(t.value.username)+" hasn't posted anything yet.",1)]))])])):(n(),o("div",ne,[e[5]||(e[5]=a("h2",{class:"text-2xl font-bold text-red-500"},"User Not Found",-1)),a("p",oe,'The profile for "'+c(q(i).params.username)+'" could not be found.',1)]))])])}}};export{ie as default};
