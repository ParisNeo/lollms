import{a5 as P,m as E,a6 as q,f as c,c as C,a7 as H,a as i,o,h as p,e,t as d,g as u,q as v,v as b,af as V,F as L,i as D,a8 as k,ag as G,b as T,ah as K,ai as R,a4 as g,ad as z,j as J,aa as Q}from"./index-BHhNIyWg.js";const W={class:"space-y-8"},X={key:0,class:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6"},Y={class:"text-xl font-semibold mb-4"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ee=["value"],te={class:"relative mt-1"},se=["type","placeholder"],le=["title"],ae={class:"flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-md"},oe={class:"flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-md"},ie={class:"flex justify-end gap-3"},ne=["disabled"],de={class:"flex justify-between items-center mb-4 flex-wrap gap-4"},re={class:"flex items-center gap-4"},ue={key:0,class:"text-center p-6"},me={key:1,class:"text-center p-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},ve={key:2,class:"space-y-4"},fe={class:"flex items-start gap-4"},ce=["title"],pe={class:"flex-grow"},ge={class:"flex justify-between items-center"},ye={class:"font-bold text-lg text-gray-900 dark:text-white"},xe={class:"flex gap-3"},be=["onClick"],ke=["onClick"],_e={class:"text-sm text-gray-500 dark:text-gray-400"},he={class:"mt-2 text-xs space-y-1 text-gray-600 dark:text-gray-300"},we={key:0},Se={key:1},Be={key:2},Me={class:"border-t dark:border-gray-700 pt-3 flex justify-end"},Ae=["onClick"],Le={__name:"BindingsSettings",setup(Ce){const n=P(),_=E(),{bindings:h,availableBindingTypes:$,isLoadingBindings:F,globalSettings:N}=q(n),m=c(!1),f=c(null),y=c(!1),r=c(!1),w=()=>({id:null,alias:"",name:"",host_address:"",models_path:"",service_key:"",default_model_name:"",verify_ssl_certificate:!0,is_active:!0}),l=c(w()),x=C(()=>f.value!==null),S=C({get(){const a=N.value.find(t=>t.key==="model_display_mode");return a?a.value:"mixed"},set(a){n.updateGlobalSettings({model_display_mode:a})}});H(()=>{n.fetchBindings(),n.fetchAvailableBindingTypes(),n.fetchGlobalSettings()});function B(){f.value=null,l.value=w(),r.value=!1,m.value=!0,window.scrollTo({top:0,behavior:"smooth"})}function U(a){f.value=a,l.value={...a},r.value=!1,m.value=!0,window.scrollTo({top:0,behavior:"smooth"})}function M(){m.value=!1,f.value=null}async function I(){y.value=!0;try{const a={...l.value};delete a.id,x.value?(l.value.service_key==="********"&&delete a.service_key,await n.updateBinding(f.value.id,a)):await n.addBinding(a),M()}catch{}finally{y.value=!1}}async function j(a){await _.showConfirmation({title:`Delete Binding '${a.alias}'?`,message:"Are you sure? This action cannot be undone.",confirmText:"Delete"})&&await n.deleteBinding(a.id)}function O(a){_.openModal("manageModels",{binding:a})}return(a,t)=>(o(),i("div",W,[m.value?(o(),i("div",X,[e("h3",Y,d(x.value?"Edit Binding":"Add New Binding"),1),e("form",{onSubmit:z(I,["prevent"]),class:"space-y-6"},[e("div",Z,[e("div",null,[t[10]||(t[10]=e("label",{for:"alias",class:"block text-sm font-medium"},[v("Alias "),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{type:"text",id:"alias","onUpdate:modelValue":t[0]||(t[0]=s=>l.value.alias=s),class:"input-field mt-1",required:"",placeholder:"e.g., local_ollama"},null,512),[[b,l.value.alias]]),t[11]||(t[11]=e("p",{class:"text-xs text-gray-500 mt-1"},"A unique, short name for this configuration.",-1))]),e("div",null,[t[13]||(t[13]=e("label",{for:"name",class:"block text-sm font-medium"},[v("Binding Type "),e("span",{class:"text-red-500"},"*")],-1)),u(e("select",{id:"name","onUpdate:modelValue":t[1]||(t[1]=s=>l.value.name=s),class:"input-field mt-1",required:""},[t[12]||(t[12]=e("option",{disabled:"",value:""},"Select a type",-1)),(o(!0),i(L,null,D(k($),s=>(o(),i("option",{key:s,value:s},d(s),9,ee))),128))],512),[[V,l.value.name]])])]),e("div",null,[t[14]||(t[14]=e("label",{for:"host_address",class:"block text-sm font-medium"},"Host Address",-1)),u(e("input",{type:"text",id:"host_address","onUpdate:modelValue":t[2]||(t[2]=s=>l.value.host_address=s),class:"input-field mt-1",placeholder:"e.g., http://localhost:11434"},null,512),[[b,l.value.host_address]]),t[15]||(t[15]=e("p",{class:"text-xs text-gray-500 mt-1"},"URL for remote bindings like Ollama or OpenAI-compatible servers.",-1))]),e("div",null,[t[16]||(t[16]=e("label",{for:"models_path",class:"block text-sm font-medium"},"Models Path",-1)),u(e("input",{type:"text",id:"models_path","onUpdate:modelValue":t[3]||(t[3]=s=>l.value.models_path=s),class:"input-field mt-1",placeholder:"e.g., /path/to/your/models",autocomplete:"off"},null,512),[[b,l.value.models_path]]),t[17]||(t[17]=e("p",{class:"text-xs text-gray-500 mt-1"},"Local file path for bindings that load models from disk (e.g., LlamaCPP).",-1))]),e("div",null,[t[18]||(t[18]=e("label",{for:"service_key",class:"block text-sm font-medium"},"Service API Key",-1)),e("div",te,[u(e("input",{type:r.value?"text":"password",id:"service_key","onUpdate:modelValue":t[4]||(t[4]=s=>l.value.service_key=s),class:"input-field pr-10",placeholder:x.value?"Leave blank to keep existing key":"Paste API key here",autocomplete:"new-password"},null,8,se),[[G,l.value.service_key]]),e("button",{type:"button",onClick:t[5]||(t[5]=s=>r.value=!r.value),class:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",title:r.value?"Hide key":"Show key"},[r.value?(o(),T(K,{key:0,class:"w-5 h-5"})):(o(),T(R,{key:1,class:"w-5 h-5"}))],8,le)]),t[19]||(t[19]=e("p",{class:"text-xs text-gray-500 mt-1"},"For services like OpenAI. Can also be set as an environment variable.",-1))]),e("div",null,[t[20]||(t[20]=e("label",{for:"default_model_name",class:"block text-sm font-medium"},"Default Model Name",-1)),u(e("input",{type:"text",id:"default_model_name","onUpdate:modelValue":t[6]||(t[6]=s=>l.value.default_model_name=s),class:"input-field mt-1",placeholder:"e.g., phi3:latest or gpt-4o-mini"},null,512),[[b,l.value.default_model_name]])]),e("div",ae,[t[21]||(t[21]=e("span",{class:"flex-grow flex flex-col"},[e("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Verify SSL certificate"),e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Verifies SSL certificates. This is advises to avoid man in the middle attacks. If your server has no certificate or there is no authority that can validate it, you can deactivate this setting. But stay caucious.")],-1)),e("button",{onClick:t[7]||(t[7]=s=>l.value.verify_ssl_certificate=!l.value.verify_ssl_certificate),type:"button",class:g([l.value.verify_ssl_certificate?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out"])},[e("span",{class:g([l.value.verify_ssl_certificate?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition-colors duration-200 ease-in-out"])},null,2)],2)]),e("div",oe,[t[22]||(t[22]=e("span",{class:"flex-grow flex flex-col"},[e("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Active"),e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"If disabled, users cannot see or use models from this binding.")],-1)),e("button",{onClick:t[8]||(t[8]=s=>l.value.is_active=!l.value.is_active),type:"button",class:g([l.value.is_active?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out"])},[e("span",{class:g([l.value.is_active?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition-colors duration-200 ease-in-out"])},null,2)],2)]),e("div",ie,[e("button",{type:"button",onClick:M,class:"btn btn-secondary"},"Cancel"),e("button",{type:"submit",class:"btn btn-primary",disabled:y.value},d(y.value?"Saving...":x.value?"Save Changes":"Add Binding"),9,ne)])],32)])):p("",!0),e("div",null,[e("div",de,[t[25]||(t[25]=e("h2",{class:"text-2xl font-bold"},"LLM Bindings",-1)),e("div",re,[e("div",null,[t[24]||(t[24]=e("label",{for:"model-display-mode",class:"block text-xs font-medium text-gray-500 dark:text-gray-400"},"Model Display Mode",-1)),u(e("select",{id:"model-display-mode","onUpdate:modelValue":t[9]||(t[9]=s=>S.value=s),class:"input-field mt-1"},t[23]||(t[23]=[e("option",{value:"mixed"},"Mixed (Alias or Original)",-1),e("option",{value:"aliased"},"Aliased Only",-1),e("option",{value:"original"},"Original Names Only",-1)]),512),[[V,S.value]])]),m.value?p("",!0):(o(),i("button",{key:0,onClick:B,class:"btn btn-primary self-end"},"+ Add New Binding"))])]),k(F)?(o(),i("div",ue,"Loading bindings...")):k(h).length===0&&!m.value?(o(),i("div",me,[t[26]||(t[26]=e("p",null,"No LLM bindings configured yet.",-1)),e("button",{onClick:B,class:"mt-2 text-blue-600 hover:underline"},"Add your first one")])):(o(),i("div",ve,[(o(!0),i(L,null,D(k(h),s=>(o(),i("div",{key:s.id,class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md flex flex-col gap-4"},[e("div",fe,[e("span",{class:g(["mt-1 h-3 w-3 rounded-full flex-shrink-0",s.is_active?"bg-green-500":"bg-gray-400"]),title:s.is_active?"Active":"Inactive"},null,10,ce),e("div",pe,[e("div",ge,[e("h4",ye,d(s.alias),1),e("div",xe,[e("button",{onClick:A=>U(s),class:"text-sm font-medium text-blue-600 hover:underline"},"Edit",8,be),e("button",{onClick:A=>j(s),class:"text-sm font-medium text-red-600 hover:underline"},"Delete",8,ke)])]),e("p",_e,d(s.name),1),e("div",he,[s.host_address?(o(),i("p",we,[t[27]||(t[27]=e("span",{class:"font-semibold"},"Host:",-1)),v(" "+d(s.host_address),1)])):p("",!0),s.models_path?(o(),i("p",Se,[t[28]||(t[28]=e("span",{class:"font-semibold"},"Path:",-1)),v(" "+d(s.models_path),1)])):p("",!0),s.default_model_name?(o(),i("p",Be,[t[29]||(t[29]=e("span",{class:"font-semibold"},"Default Model:",-1)),v(" "+d(s.default_model_name),1)])):p("",!0)])])]),e("div",Me,[e("button",{onClick:A=>O(s),class:"btn btn-secondary btn-sm flex items-center gap-2"},[J(Q,{class:"w-4 h-4"}),t[30]||(t[30]=v(" Manage Models "))],8,Ae)])]))),128))]))])]))}};export{Le as default};
