import{u as h,q as S,s as f,r as _,o as L,k as b,b as r,e as n,f as e,w as M,h as o,n as w,d as V,l as g,F as N,m as U,t as z,v as u,p as T}from"./index-Ds1RUQwJ.js";const P={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},C={class:"border-t border-gray-200 dark:border-gray-700"},A={key:0,disabled:"",value:""},D=["value"],J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},O={class:"relative flex items-start"},B={class:"flex h-6 items-center"},F={class:"flex justify-end pt-4"},K=["disabled"],R={key:0},j={key:1},E={__name:"LLMSettings",setup(I){const v=h(),k=S(),{user:s}=f(v),{availableLollmsModels:d}=f(k),l=_({lollms_model_name:"",llm_ctx_size:4096,llm_temperature:.7,llm_top_k:50,llm_top_p:.95,llm_repeat_penalty:1.1,llm_repeat_last_n:64,put_thoughts_in_context:!1}),i=_(!1),m=_(!1);let x={};const y=()=>{s.value&&(l.value={lollms_model_name:s.value.lollms_model_name||"",llm_ctx_size:s.value.llm_ctx_size??4096,llm_temperature:s.value.llm_temperature??.7,llm_top_k:s.value.llm_top_k??50,llm_top_p:s.value.llm_top_p??.95,llm_repeat_penalty:s.value.llm_repeat_penalty??1.1,llm_repeat_last_n:s.value.llm_repeat_last_n??64,put_thoughts_in_context:s.value.put_thoughts_in_context||!1},x=JSON.parse(JSON.stringify(l.value)),m.value=!1)};L(y),b(s,y,{deep:!0}),b(l,p=>{m.value=JSON.stringify(p)!==JSON.stringify(x)},{deep:!0});async function c(){i.value=!0;try{await v.updateUserPreferences(l.value)}catch{}finally{i.value=!1}}return(p,t)=>(n(),r("div",P,[t[16]||(t[16]=e("div",{class:"px-4 py-5 sm:p-6"},[e("h2",{class:"text-xl font-bold leading-6 text-gray-900 dark:text-white"},"LLM Configuration"),e("p",{class:"mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-400"}," Adjust the default parameters for the Large Language Model. These settings will apply to new discussions. ")],-1)),e("div",C,[e("form",{onSubmit:M(c,["prevent"]),class:"p-4 sm:p-6 space-y-6"},[e("div",null,[t[8]||(t[8]=e("label",{for:"lollmsModelSelect",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Default LLM Model",-1)),o(e("select",{id:"lollmsModelSelect","onUpdate:modelValue":t[0]||(t[0]=a=>l.value.lollms_model_name=a),class:"input-field mt-1"},[!g(d)||g(d).length===0?(n(),r("option",A,"Loading models...")):V("",!0),(n(!0),r(N,null,U(g(d),a=>(n(),r("option",{key:a.name,value:a.name},z(a.name),9,D))),128))],512),[[w,l.value.lollms_model_name]])]),e("div",J,[e("div",null,[t[9]||(t[9]=e("label",{for:"contextSize",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Context Size (tokens)",-1)),o(e("input",{type:"number",id:"contextSize","onUpdate:modelValue":t[1]||(t[1]=a=>l.value.llm_ctx_size=a),class:"input-field mt-1",placeholder:"e.g., 4096"},null,512),[[u,l.value.llm_ctx_size,void 0,{number:!0}]])]),e("div",null,[t[10]||(t[10]=e("label",{for:"temperature",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Temperature",-1)),o(e("input",{type:"number",id:"temperature","onUpdate:modelValue":t[2]||(t[2]=a=>l.value.llm_temperature=a),class:"input-field mt-1",step:"0.01",min:"0",max:"2",placeholder:"e.g., 0.7"},null,512),[[u,l.value.llm_temperature,void 0,{number:!0}]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"topK",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Top K",-1)),o(e("input",{type:"number",id:"topK","onUpdate:modelValue":t[3]||(t[3]=a=>l.value.llm_top_k=a),class:"input-field mt-1",step:"1",min:"1",placeholder:"e.g., 50"},null,512),[[u,l.value.llm_top_k,void 0,{number:!0}]])]),e("div",null,[t[12]||(t[12]=e("label",{for:"topP",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Top P",-1)),o(e("input",{type:"number",id:"topP","onUpdate:modelValue":t[4]||(t[4]=a=>l.value.llm_top_p=a),class:"input-field mt-1",step:"0.01",min:"0",max:"1",placeholder:"e.g., 0.95"},null,512),[[u,l.value.llm_top_p,void 0,{number:!0}]])]),e("div",null,[t[13]||(t[13]=e("label",{for:"repeatPenalty",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Repeat Penalty",-1)),o(e("input",{type:"number",id:"repeatPenalty","onUpdate:modelValue":t[5]||(t[5]=a=>l.value.llm_repeat_penalty=a),class:"input-field mt-1",step:"0.01",min:"0",placeholder:"e.g., 1.1"},null,512),[[u,l.value.llm_repeat_penalty,void 0,{number:!0}]])]),e("div",null,[t[14]||(t[14]=e("label",{for:"repeatLastN",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Repeat Last N",-1)),o(e("input",{type:"number",id:"repeatLastN","onUpdate:modelValue":t[6]||(t[6]=a=>l.value.llm_repeat_last_n=a),class:"input-field mt-1",step:"1",min:"0",placeholder:"e.g., 64"},null,512),[[u,l.value.llm_repeat_last_n,void 0,{number:!0}]])])]),e("div",O,[e("div",B,[o(e("input",{id:"putThoughts","onUpdate:modelValue":t[7]||(t[7]=a=>l.value.put_thoughts_in_context=a),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-blue-600 focus:ring-blue-600 dark:focus:ring-blue-600 dark:ring-offset-gray-800"},null,512),[[T,l.value.put_thoughts_in_context]])]),t[15]||(t[15]=e("div",{class:"ml-3 text-sm leading-6"},[e("label",{for:"putThoughts",class:"font-medium text-gray-900 dark:text-gray-300"},'Include "think" blocks in context'),e("p",{class:"text-gray-500 dark:text-gray-400"},"Allows the AI to see its previous reasoning steps.")],-1))]),e("div",F,[e("button",{type:"submit",class:"btn btn-primary",disabled:i.value||!m.value},[i.value?(n(),r("span",R,"Saving...")):(n(),r("span",j,"Save LLM Settings"))],8,K)])],32)])]))}};export{E as default};
