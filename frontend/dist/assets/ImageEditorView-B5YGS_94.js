import{Q as Fe,b as k,d as f,h as l,cJ as ft,ae as ht,a as bt,s as wt,r as s,c as Ee,o as yt,ad as xt,a1 as kt,X as Ct,z as Mt,e as v,a3 as _t,F as ue,m as Ve,g as ce,l as x,v as P,t as B,n as O,a6 as It,j as de,cO as Rt,ak as Te,W as Lt,cP as St,k as Pt,cN as Ut,ca as Ae,G as xe,c1 as Dt,cd as Bt,q as $t,O as zt,c4 as Et}from"./index-BDVSwLYe.js";import{I as Vt,a as Tt}from"./IconRedo-BS9KSyGM.js";const At={},Ft={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function Nt(ke,Q){return f(),k("svg",Ft,Q[0]||(Q[0]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"},null,-1)]))}const jt=Fe(At,[["render",Nt]]),Wt={class:"h-full flex flex-col bg-gray-100 dark:bg-gray-900 overflow-hidden relative select-none"},Xt={class:"h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between px-4 z-20 shadow-sm gap-4"},Yt={class:"flex items-center gap-2"},Gt={class:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1 gap-1"},Ot=["onClick","title"],Ht={class:"flex items-center gap-4 flex-grow justify-center"},Kt={class:"flex items-center gap-2",title:"Primary Color"},qt={key:0,class:"flex items-center gap-2"},Zt={class:"text-xs w-6 font-mono"},Jt={key:1,class:"flex items-center gap-2"},Qt={class:"text-xs w-8 font-mono"},ea={key:2,class:"flex items-center gap-2"},ta={class:"text-xs w-6 font-mono"},aa={class:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1 gap-1"},la={class:"flex items-center gap-2"},na=["disabled"],sa=["disabled"],oa=["title"],ia={class:"flex-grow flex min-h-0 relative"},ra={class:"absolute bottom-4 left-4 bg-white/90 dark:bg-gray-800/90 backdrop-blur rounded-lg shadow p-2 flex items-center gap-2 z-10 border border-gray-200 dark:border-gray-700"},ua={class:"text-xs font-mono w-12 text-center"},ca={class:"w-80 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 flex flex-col z-20 shadow-xl"},da={class:"p-4 border-b dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 flex justify-between items-center"},va={key:0,class:"flex items-center text-xs text-blue-500 animate-pulse"},ga={class:"flex-grow overflow-y-auto p-4 space-y-5 custom-scrollbar"},pa={class:"space-y-3"},ma={class:"flex justify-between items-center mb-1"},fa=["disabled"],ha={class:"flex justify-between items-center mb-1"},ba=["disabled"],wa={class:"space-y-4 pt-4 border-t dark:border-gray-700"},ya={class:"label flex justify-between"},xa={class:"text-gray-500"},ka={class:"label flex justify-between"},Ca={class:"text-gray-500"},Ma=["value"],_a={class:"flex gap-2"},Ia={class:"p-4 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},Ra=["disabled"],La={__name:"ImageEditorView",props:{id:{type:String,default:null}},setup(ke){const Q={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 19L19 5"/></svg>'},Ne={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="9"/></svg>'},je={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>'},We={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 11L12 17L5 11"/><path d="M12 17V3"/></svg>'},Xe={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 4V2"/><path d="M15 16V14"/><path d="M8 9h2"/><path d="M20 9h2"/><path d="M17.8 11.8L19 13"/><path d="M10.6 5.2L12 6.6"/><path d="M11.6 12.2l-8.4 8.6"/></svg>'},Ye={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 4l6 6-11 11-6 1L4 16 15 5z"/><path d="M14 4l-4 4"/></svg>'},Ge={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 20H7L3 16C2 15 2 13 3 12L13 2L22 11L20 20Z"/><path d="M11 11L20 20"/></svg>'},ve=ke,Ce=Mt(),ee=ft(),Oe=ht(),Me=bt(),te=wt(),{on:He,off:Ke}=xt(),ae=s(null),r=s(null),C=s(null),U=s(null),M=s(null),T=s(null),ge=s(null),g=s("image"),o=s("brush"),A=s("#000000"),F=s(40),$=s(1),H=s(10),R=s(1),pe=s(0),me=s(0),z=s(""),N=s(""),le=s(.75),ne=s(7.5),se=s(-1),K=s(""),q=s(!1),j=s(!1),E=s(!1),fe=s(0),he=s(0),_e=s(0),Ie=s(0),h=s(0),b=s(0),_=s([]),p=s(-1),qe=[{id:"pan",name:"Pan (Space)",icon:jt},{id:"brush",name:"Brush (B)",icon:Et},{id:"eraser",name:"Eraser (E)",icon:Ge},{id:"fill",name:"Fill (F)",icon:We},{id:"wand",name:"Magic Wand (W)",icon:Xe},{id:"line",name:"Line (L)",icon:Q},{id:"rect",name:"Rectangle (R)",icon:je},{id:"circle",name:"Circle (C)",icon:Ne},{id:"pipette",name:"Pipette (I)",icon:Ye}],Ze=Ee(()=>Oe.availableTtiModels),Je=Ee(()=>["brush","eraser","circle"].includes(o.value)&&o.value!=="pan");function Qe(a){o.value=a}function Re(a){a.prompt&&(z.value=a.prompt),a.negative_prompt&&(N.value=a.negative_prompt),j.value=!1}yt(async()=>{He("prompt:enhanced",Re),r.value&&(M.value=r.value.getContext("2d",{willReadFrequently:!0})),C.value&&(T.value=C.value.getContext("2d",{willReadFrequently:!0})),U.value&&(ge.value=U.value.getContext("2d")),ve.id==="new"?et():ve.id&&await tt(ve.id),te.user&&(K.value=te.user.iti_binding_model_name||te.user.tti_binding_model_name||""),window.addEventListener("keydown",ze),window.addEventListener("resize",Z)}),kt(()=>{Ke("prompt:enhanced",Re),window.removeEventListener("keydown",ze),window.removeEventListener("resize",Z)});function et(a=1024,e=1024){Le(a,e),M.value.fillStyle="#FFFFFF",M.value.fillRect(0,0,a,e),W(),Z()}async function tt(a){try{const e=await Ct.get(`/api/image-studio/${a}/file`,{responseType:"blob"}),t=URL.createObjectURL(e.data),n=new Image;await new Promise((d,i)=>{n.onload=d,n.onerror=i,n.src=t}),Le(n.naturalWidth,n.naturalHeight),M.value.drawImage(n,0,0);const u=ee.images.find(d=>d.id===a);u&&(z.value=u.prompt||"",N.value=u.negative_prompt||""),URL.revokeObjectURL(t),W(),Z()}catch(e){console.error("Load failed",e),Me.addNotification("Failed to load image.","error"),Ce.push("/image-studio")}}function Le(a,e){[r,C,U].forEach(t=>{t.value&&(t.value.width=a,t.value.height=e)})}function be(a){if(!r.value)return{x:0,y:0};const e=r.value.getBoundingClientRect(),t=r.value.width/e.width,n=r.value.height/e.height;return{x:(a.clientX-e.left)*t,y:(a.clientY-e.top)*n}}function at(a){if(a.button!==0)return;E.value=!0;const{x:e,y:t}=be(a);if(fe.value=a.clientX,he.value=a.clientY,h.value=e,b.value=t,o.value==="pipette"){ot(e,t),E.value=!1;return}if(o.value==="fill"){it(Math.floor(e),Math.floor(t)),W(),E.value=!1;return}if(o.value==="wand"){rt(Math.floor(e),Math.floor(t)),W(),E.value=!1;return}if(["brush","eraser"].includes(o.value)){const n=g.value==="image"?M.value:T.value;n.beginPath(),n.moveTo(e,t),Pe(e,t)}}function lt(a){const{x:e,y:t}=be(a);if(_e.value=e,Ie.value=t,!!E.value){if(o.value==="pan"){pe.value+=a.clientX-fe.value,me.value+=a.clientY-he.value,fe.value=a.clientX,he.value=a.clientY;return}["brush","eraser"].includes(o.value)?Pe(e,t):["line","rect","circle"].includes(o.value)&&nt(e,t)}}function Se(a){if(E.value){if(E.value=!1,["line","rect","circle"].includes(o.value)){const{x:e,y:t}=be(a);st(e,t)}o.value!=="pan"&&o.value!=="pipette"&&W()}}function oe(){return g.value==="image"?M.value:T.value}function we(a){a.lineCap="round",a.lineJoin="round",a.lineWidth=F.value,o.value==="eraser"?a.globalCompositeOperation="destination-out":(a.globalCompositeOperation="source-over",a.globalAlpha=$.value,a.fillStyle=g.value==="mask"?`rgba(255,255,255,${$.value})`:A.value,a.strokeStyle=g.value==="mask"?`rgba(255,255,255,${$.value})`:A.value)}function Pe(a,e){const t=oe();we(t),t.lineTo(a,e),t.stroke(),t.beginPath(),t.moveTo(a,e)}function nt(a,e){const t=ge.value,n=U.value.width,u=U.value.height;if(t.clearRect(0,0,n,u),we(t),t.beginPath(),o.value==="line")t.moveTo(h.value,b.value),t.lineTo(a,e);else if(o.value==="rect")t.rect(h.value,b.value,a-h.value,e-b.value);else if(o.value==="circle"){const d=Math.sqrt(Math.pow(a-h.value,2)+Math.pow(e-b.value,2));t.arc(h.value,b.value,d,0,2*Math.PI)}t.stroke(),o.value!=="line"&&t.fill()}function st(a,e){ge.value.clearRect(0,0,U.value.width,U.value.height);const t=oe();if(we(t),t.beginPath(),o.value==="line")t.moveTo(h.value,b.value),t.lineTo(a,e),t.stroke();else if(o.value==="rect")t.rect(h.value,b.value,a-h.value,e-b.value),t.fill(),t.stroke();else if(o.value==="circle"){const n=Math.sqrt(Math.pow(a-h.value,2)+Math.pow(e-b.value,2));t.arc(h.value,b.value,n,0,2*Math.PI),t.fill(),t.stroke()}t.globalAlpha=1,t.globalCompositeOperation="source-over"}function ot(a,e){const t=M.value.getImageData(a,e,1,1).data,n="#"+("000000"+(t[0]<<16|t[1]<<8|t[2]).toString(16)).slice(-6);A.value=n}function it(a,e){const t=oe(),n=t.canvas.width,u=t.canvas.height;if(a<0||e<0||a>=n||e>=u)return;const d=t.getImageData(0,0,n,u),i=d.data,L=(e*n+a)*4,m=i[L],V=i[L+1],ie=i[L+2],re=i[L+3];let X,Y,G;const I=A.value.replace("#","");X=parseInt(I.substring(0,2),16),Y=parseInt(I.substring(2,4),16),G=parseInt(I.substring(4,6),16);const J=Math.round($.value*255);if(g.value==="mask"&&(X=255,Y=255,G=255),ye(m,V,ie,re,X,Y,G,J,0))return;const w=[[a,e]],S=H.value;for(;w.length;){const[y,c]=w.pop(),D=(c*n+y)*4;y<0||c<0||y>=n||c>=u||ye(i[D],i[D+1],i[D+2],i[D+3],m,V,ie,re,S)&&(i[D]=X,i[D+1]=Y,i[D+2]=G,i[D+3]=J,w.push([y+1,c],[y-1,c],[y,c+1],[y,c-1]))}t.putImageData(d,0,0)}function rt(a,e){const t=M.value,n=T.value,u=t.canvas.width,d=t.canvas.height,i=t.getImageData(0,0,u,d).data,L=n.getImageData(0,0,u,d),m=L.data,V=(e*u+a)*4,ie=i[V],re=i[V+1],X=i[V+2],Y=i[V+3],G=H.value,I=[[a,e]],J=new Uint8Array(u*d);for(;I.length;){const[w,S]=I.pop(),y=S*u+w;if(J[y])continue;J[y]=1;const c=y*4;ye(i[c],i[c+1],i[c+2],i[c+3],ie,re,X,Y,G)&&(m[c]=255,m[c+1]=255,m[c+2]=255,m[c+3]=255,w+1<u&&I.push([w+1,S]),w-1>=0&&I.push([w-1,S]),S+1<d&&I.push([w,S+1]),S-1>=0&&I.push([w,S-1]))}n.putImageData(L,0,0)}function ye(a,e,t,n,u,d,i,L,m){return Math.abs(a-u)<=m&&Math.abs(e-d)<=m&&Math.abs(t-i)<=m&&Math.abs(n-L)<=m}function W(){p.value<_.value.length-1&&(_.value=_.value.slice(0,p.value+1)),_.value.push({image:r.value.toDataURL(),mask:C.value.toDataURL()}),p.value++,_.value.length>20&&(_.value.shift(),p.value--)}function Ue(a){const e=new Image;e.onload=()=>{M.value.clearRect(0,0,r.value.width,r.value.height),M.value.drawImage(e,0,0)},e.src=a.image;const t=new Image;t.onload=()=>{T.value.clearRect(0,0,C.value.width,C.value.height),T.value.drawImage(t,0,0)},t.src=a.mask}function De(){p.value>0&&(p.value--,Ue(_.value[p.value]))}function Be(){p.value<_.value.length-1&&(p.value++,Ue(_.value[p.value]))}function ut(){const a=oe();a.clearRect(0,0,a.canvas.width,a.canvas.height),W()}async function ct(){q.value=!0;try{const a=r.value.toDataURL("image/png").split(",")[1],e=document.createElement("canvas");e.width=C.value.width,e.height=C.value.height;const t=e.getContext("2d");t.fillStyle="#000000",t.fillRect(0,0,e.width,e.height),t.drawImage(C.value,0,0);const n=e.toDataURL("image/png").split(",")[1];await ee.editImage({base_image_b64:a,mask:n,prompt:z.value,negative_prompt:N.value,strength:le.value,cfg_scale:ne.value,seed:se.value,model:K.value,width:r.value.width,height:r.value.height})}catch{Me.addNotification("Generation failed","error")}finally{q.value=!1}}async function $e(a){var e;j.value=!0,await ee.enhanceImagePrompt({prompt:z.value,negative_prompt:N.value,target:a,model:(e=te.user)==null?void 0:e.lollms_model_name})}function dt(){Ce.push("/image-studio")}function vt(){const a=r.value.toDataURL("image/png").split(",")[1];ee.saveCanvasAsNewImage({base_image_b64:a,prompt:z.value||"Edited",width:r.value.width,height:r.value.height,model:K.value})}function Z(){if(!ae.value||!r.value)return;const a=ae.value.clientWidth,e=ae.value.clientHeight,t=r.value.width,n=r.value.height;if(t===0)return;const u=Math.min((a-40)/t,(e-40)/n,1);R.value=u,pe.value=0,me.value=0}function gt(a){(a.ctrlKey||o.value==="pan")&&(a.preventDefault(),R.value=Math.min(Math.max(.1,R.value-Math.sign(a.deltaY)*.1),5))}function pt(){R.value=Math.min(5,R.value+.1)}function mt(){R.value=Math.max(.1,R.value-.1)}function ze(a){if(a.target.tagName==="INPUT"||a.target.tagName==="TEXTAREA")return;const e={" ":"pan",b:"brush",e:"eraser",f:"fill",w:"wand",l:"line",r:"rect",c:"circle",i:"pipette"};e[a.key.toLowerCase()]&&(o.value=e[a.key.toLowerCase()]),(a.ctrlKey||a.metaKey)&&a.key.toLowerCase()==="z"&&De(),(a.ctrlKey||a.metaKey)&&a.key.toLowerCase()==="y"&&Be()}return(a,e)=>(f(),k("div",Wt,[l("div",Xt,[l("div",Yt,[l("button",{onClick:dt,class:"btn-icon",title:"Back to Gallery"},[v(_t,{class:"w-5 h-5"})]),e[15]||(e[15]=l("div",{class:"h-6 w-px bg-gray-300 dark:bg-gray-600 mx-2"},null,-1)),l("div",Gt,[(f(),k(ue,null,Ve(qe,t=>l("button",{key:t.id,onClick:n=>Qe(t.id),class:O(["p-2 rounded-md transition-colors relative group",o.value===t.id?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"]),title:t.name},[(f(),$t(zt(t.icon),{class:"w-5 h-5"}))],10,Ot)),64))])]),l("div",Ht,[l("div",Kt,[x(l("input",{type:"color","onUpdate:modelValue":e[0]||(e[0]=t=>A.value=t),class:"w-8 h-8 rounded cursor-pointer border-0 p-0 bg-transparent"},null,512),[[P,A.value]])]),["brush","eraser","line","rect","circle"].includes(o.value)?(f(),k("div",qt,[e[16]||(e[16]=l("span",{class:"text-xs font-medium uppercase text-gray-500"},"Size",-1)),x(l("input",{type:"range","onUpdate:modelValue":e[1]||(e[1]=t=>F.value=t),min:"1",max:"200",class:"w-24 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-600"},null,512),[[P,F.value,void 0,{number:!0}]]),l("span",Zt,B(F.value),1)])):ce("",!0),o.value!=="eraser"&&o.value!=="wand"&&o.value!=="pan"&&o.value!=="pipette"?(f(),k("div",Jt,[e[17]||(e[17]=l("span",{class:"text-xs font-medium uppercase text-gray-500"},"Opacity",-1)),x(l("input",{type:"range","onUpdate:modelValue":e[2]||(e[2]=t=>$.value=t),min:"0",max:"1",step:"0.05",class:"w-24 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-600"},null,512),[[P,$.value,void 0,{number:!0}]]),l("span",Qt,B(Math.round($.value*100))+"%",1)])):ce("",!0),["fill","wand"].includes(o.value)?(f(),k("div",ea,[e[18]||(e[18]=l("span",{class:"text-xs font-medium uppercase text-gray-500"},"Tolerance",-1)),x(l("input",{type:"range","onUpdate:modelValue":e[3]||(e[3]=t=>H.value=t),min:"0",max:"100",class:"w-24 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-600"},null,512),[[P,H.value,void 0,{number:!0}]]),l("span",ta,B(H.value),1)])):ce("",!0),e[19]||(e[19]=l("div",{class:"h-6 w-px bg-gray-300 dark:bg-gray-600 mx-2"},null,-1)),l("div",aa,[l("button",{onClick:e[4]||(e[4]=t=>g.value="image"),class:O(["px-3 py-1.5 text-xs font-medium rounded transition-colors",g.value==="image"?"bg-white dark:bg-gray-600 shadow-sm":"text-gray-500"])},"Image",2),l("button",{onClick:e[5]||(e[5]=t=>g.value="mask"),class:O(["px-3 py-1.5 text-xs font-medium rounded transition-colors",g.value==="mask"?"bg-white dark:bg-gray-600 shadow-sm":"text-gray-500"])},"Mask",2)])]),l("div",la,[l("button",{onClick:De,disabled:p.value<=0,class:"btn-icon",title:"Undo (Ctrl+Z)"},[v(Vt,{class:"w-5 h-5"})],8,na),l("button",{onClick:Be,disabled:p.value>=_.value.length-1,class:"btn-icon",title:"Redo (Ctrl+Y)"},[v(Tt,{class:"w-5 h-5"})],8,sa),l("button",{onClick:ut,class:"btn-icon text-red-500 hover:text-red-600",title:`Clear ${g.value==="mask"?"Mask":"Image"}`},[v(It,{class:"w-5 h-5"})],8,oa),l("button",{onClick:vt,class:"btn btn-secondary btn-sm gap-2"},[v(Rt,{class:"w-4 h-4"}),e[20]||(e[20]=de(" Save"))])])]),l("div",ia,[l("div",{ref_key:"containerRef",ref:ae,class:"flex-grow bg-gray-200 dark:bg-gray-900 relative overflow-hidden flex items-center justify-center cursor-crosshair pattern-grid",onWheel:gt,onMousedown:at,onMousemove:lt,onMouseup:Se,onMouseleave:Se},[l("div",{style:Te({transform:`translate(${pe.value}px, ${me.value}px) scale(${R.value})`}),class:"relative shadow-2xl origin-center transition-transform duration-75 canvas-stack"},[l("canvas",{ref_key:"imageCanvasRef",ref:r,class:"block bg-white layer-canvas"},null,512),l("canvas",{ref_key:"maskCanvasRef",ref:C,class:O(["absolute inset-0 opacity-60 layer-canvas",{"pointer-events-none":g.value!=="mask"}])},null,2),l("canvas",{ref_key:"previewCanvasRef",ref:U,class:"absolute inset-0 pointer-events-none layer-canvas"},null,512),x(l("div",{class:"absolute pointer-events-none rounded-full border border-black/50 bg-white/20 z-50 transform -translate-x-1/2 -translate-y-1/2",style:Te({width:`${F.value}px`,height:`${F.value}px`,left:`${_e.value}px`,top:`${Ie.value}px`})},null,4),[[Lt,Je.value]])],4),l("div",ra,[l("button",{onClick:mt,class:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"},[v(St,{class:"w-4 h-4"})]),l("span",ua,B(Math.round(R.value*100))+"%",1),l("button",{onClick:pt,class:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"},[v(Pt,{class:"w-4 h-4"})]),l("button",{onClick:Z,class:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded ml-1",title:"Fit"},[v(Ut,{class:"w-4 h-4"})])])],544),l("div",ca,[l("div",da,[e[22]||(e[22]=l("h3",{class:"font-semibold text-sm"},"Generation Settings",-1)),q.value?(f(),k("div",va,[v(Ae,{class:"w-3 h-3 mr-1"}),e[21]||(e[21]=de(" Busy... "))])):ce("",!0)]),l("div",ga,[l("div",pa,[l("div",null,[l("div",ma,[e[23]||(e[23]=l("label",{class:"text-xs font-bold text-gray-500 uppercase"},"Prompt",-1)),l("button",{onClick:e[6]||(e[6]=t=>$e("prompt")),class:"text-blue-500 hover:text-blue-600 p-1",title:"Enhance Prompt",disabled:j.value},[v(xe,{class:O(["w-4 h-4",{"animate-pulse":j.value}])},null,8,["class"])],8,fa)]),x(l("textarea",{"onUpdate:modelValue":e[7]||(e[7]=t=>z.value=t),rows:"4",class:"input-field w-full text-sm resize-none",placeholder:"Describe the result..."},null,512),[[P,z.value]])]),l("div",null,[l("div",ha,[e[24]||(e[24]=l("label",{class:"text-xs font-bold text-gray-500 uppercase"},"Negative Prompt",-1)),l("button",{onClick:e[8]||(e[8]=t=>$e("negative_prompt")),class:"text-red-500 hover:text-red-600 p-1",title:"Enhance Negative",disabled:j.value},[v(xe,{class:O(["w-4 h-4",{"animate-pulse":j.value}])},null,8,["class"])],8,ba)]),x(l("textarea",{"onUpdate:modelValue":e[9]||(e[9]=t=>N.value=t),rows:"3",class:"input-field w-full text-sm resize-none",placeholder:"What to avoid..."},null,512),[[P,N.value]])])]),l("div",wa,[l("div",null,[l("label",ya,[e[25]||(e[25]=l("span",null,"Denoising Strength",-1)),l("span",xa,B(le.value),1)]),x(l("input",{type:"range","onUpdate:modelValue":e[10]||(e[10]=t=>le.value=t),min:"0.05",max:"1.0",step:"0.05",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"},null,512),[[P,le.value,void 0,{number:!0}]])]),l("div",null,[l("label",ka,[e[26]||(e[26]=l("span",null,"Guidance Scale",-1)),l("span",Ca,B(ne.value),1)]),x(l("input",{type:"range","onUpdate:modelValue":e[11]||(e[11]=t=>ne.value=t),min:"1",max:"20",step:"0.5",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"},null,512),[[P,ne.value,void 0,{number:!0}]])]),l("div",null,[e[28]||(e[28]=l("label",{class:"label"},"Model",-1)),x(l("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>K.value=t),class:"input-field w-full text-sm mt-1"},[e[27]||(e[27]=l("option",{disabled:"",value:""},"Select Model",-1)),(f(!0),k(ue,null,Ve(Ze.value,t=>(f(),k("option",{key:t.id,value:t.id},B(t.name),9,Ma))),128))],512),[[Dt,K.value]])]),l("div",null,[e[29]||(e[29]=l("label",{class:"label"},"Seed",-1)),l("div",_a,[x(l("input",{"onUpdate:modelValue":e[13]||(e[13]=t=>se.value=t),type:"number",class:"input-field flex-grow text-sm",placeholder:"-1"},null,512),[[P,se.value,void 0,{number:!0}]]),l("button",{onClick:e[14]||(e[14]=t=>se.value=-1),class:"btn btn-secondary px-2"},[v(Bt,{class:"w-4 h-4"})])])])])]),l("div",Ia,[l("button",{onClick:ct,class:"btn btn-primary w-full py-3",disabled:q.value},[q.value?(f(),k(ue,{key:0},[v(Ae,{class:"w-5 h-5 mr-2 animate-spin"}),e[30]||(e[30]=de(" Processing..."))],64)):(f(),k(ue,{key:1},[v(xe,{class:"w-5 h-5 mr-2"}),de(" "+B(g.value==="mask"?"Inpaint Masked":"Generate from Img"),1)],64))],8,Ra)])])])]))}},Ua=Fe(La,[["__scopeId","data-v-118ca5d3"]]);export{Ua as default};
