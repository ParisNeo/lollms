import{u as c,a as g,r as n,o as P,c as x,b as N,d as s,w,e as o,v as i,t as v}from"./index-CFtac4AF.js";const _={class:"space-y-8"},k={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},S={class:"text-right"},U=["disabled"],V={class:"text-right"},h=["disabled"],B={__name:"AccountSettings",setup(C){const r=c(),p=g(),a=n({first_name:"",family_name:"",email:"",birth_date:""}),d=n(!1),l=n({current_password:"",new_password:""}),u=n(""),m=n(!1);P(()=>{r.user&&(a.value.first_name=r.user.first_name||"",a.value.family_name=r.user.family_name||"",a.value.email=r.user.email||"",a.value.birth_date=r.user.birth_date||"")});async function b(){d.value=!0;try{await r.updateUserProfile(a.value)}catch{}finally{d.value=!1}}async function y(){if(l.value.new_password!==u.value){p.addNotification("New passwords do not match.","error");return}if(l.value.new_password.length<8){p.addNotification("New password must be at least 8 characters long.","error");return}m.value=!0;try{await r.changePassword(l.value),l.value.current_password="",l.value.new_password="",u.value=""}catch{}finally{m.value=!1}}return(f,e)=>(N(),x("div",_,[s("section",null,[e[11]||(e[11]=s("h4",{class:"text-lg font-semibold mb-4 border-b dark:border-gray-600 pb-2"},"User Profile",-1)),s("form",{onSubmit:w(b,["prevent"]),class:"space-y-4 max-w-md"},[s("div",k,[s("div",null,[e[7]||(e[7]=s("label",{for:"firstName",class:"block text-sm font-medium"},"First Name",-1)),o(s("input",{type:"text",id:"firstName","onUpdate:modelValue":e[0]||(e[0]=t=>a.value.first_name=t),class:"input-field mt-1",placeholder:"Optional"},null,512),[[i,a.value.first_name]])]),s("div",null,[e[8]||(e[8]=s("label",{for:"familyName",class:"block text-sm font-medium"},"Family Name",-1)),o(s("input",{type:"text",id:"familyName","onUpdate:modelValue":e[1]||(e[1]=t=>a.value.family_name=t),class:"input-field mt-1",placeholder:"Optional"},null,512),[[i,a.value.family_name]])])]),s("div",null,[e[9]||(e[9]=s("label",{for:"email",class:"block text-sm font-medium"},"Email Address",-1)),o(s("input",{type:"email",id:"email","onUpdate:modelValue":e[2]||(e[2]=t=>a.value.email=t),class:"input-field mt-1",placeholder:"Optional"},null,512),[[i,a.value.email]])]),s("div",null,[e[10]||(e[10]=s("label",{for:"birthDate",class:"block text-sm font-medium"},"Birth Date",-1)),o(s("input",{type:"date",id:"birthDate","onUpdate:modelValue":e[3]||(e[3]=t=>a.value.birth_date=t),class:"input-field mt-1"},null,512),[[i,a.value.birth_date]])]),s("div",S,[s("button",{type:"submit",class:"btn btn-primary",disabled:d.value},v(d.value?"Saving...":"Save Profile"),9,U)])],32)]),s("section",null,[e[15]||(e[15]=s("h4",{class:"text-lg font-semibold mb-4 border-b dark:border-gray-600 pb-2"},"Change Password",-1)),s("form",{onSubmit:w(y,["prevent"]),class:"space-y-4 max-w-md"},[s("div",null,[e[12]||(e[12]=s("label",{for:"currentPassword",class:"block text-sm font-medium"},"Current Password",-1)),o(s("input",{type:"password",id:"currentPassword","onUpdate:modelValue":e[4]||(e[4]=t=>l.value.current_password=t),required:"",class:"input-field mt-1",autocomplete:"current-password"},null,512),[[i,l.value.current_password]])]),s("div",null,[e[13]||(e[13]=s("label",{for:"newPassword",class:"block text-sm font-medium"},"New Password",-1)),o(s("input",{type:"password",id:"newPassword","onUpdate:modelValue":e[5]||(e[5]=t=>l.value.new_password=t),required:"",minlength:"8",class:"input-field mt-1",autocomplete:"new-password"},null,512),[[i,l.value.new_password]])]),s("div",null,[e[14]||(e[14]=s("label",{for:"confirmPassword",class:"block text-sm font-medium"},"Confirm New Password",-1)),o(s("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[6]||(e[6]=t=>u.value=t),required:"",class:"input-field mt-1",autocomplete:"new-password"},null,512),[[i,u.value]])]),s("div",V,[s("button",{type:"submit",class:"btn btn-primary",disabled:m.value},v(m.value?"Changing...":"Change Password"),9,h)])],32)])]))}};export{B as default};
