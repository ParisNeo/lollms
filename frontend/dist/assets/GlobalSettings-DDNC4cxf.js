import{C,r as p,c as G,o as O,k,b as r,e as n,f as a,w as V,F as h,m as _,t as b,h as x,d as f,i as M,y as S,v as N,l as j}from"./index-CJMgpJWs.js";const B={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},F={class:"space-y-10"},L={class:"text-lg font-medium text-gray-800 dark:text-gray-200 border-b border-gray-200 dark:border-gray-600 pb-2 mb-4"},T={class:"space-y-6"},U=["for"],D=["type","id","onUpdate:modelValue"],E={key:1,class:"mt-2"},J=["onClick"],R=["id","onUpdate:modelValue"],q={class:"mt-8 pt-5 border-t border-gray-200 dark:border-gray-700"},z={class:"flex justify-end"},A=["disabled"],I={key:1,class:"p-6 text-center"},P={key:2,class:"p-6 text-center"},K={__name:"GlobalSettings",setup($){const i=C(),o=p({}),u=p(!1),y=p(!1);let m="{}";const g=G(()=>i.globalSettings.filter(t=>t.category!=="Email Settings"&&t.key!=="password_recovery_mode").reduce((t,d)=>{const e=d.category||"General";return t[e]||(t[e]=[]),t[e].push(d),t},{}));O(()=>{i.globalSettings.length===0?i.fetchGlobalSettings():v()}),k(()=>i.globalSettings,v,{deep:!0}),k(o,l=>{y.value=JSON.stringify(l)!==m},{deep:!0});function v(){const l={};i.globalSettings.length>0&&(i.globalSettings.forEach(s=>{l[s.key]=s.value}),o.value=l,m=JSON.parse(JSON.stringify(l)),y.value=!1)}async function w(){u.value=!0;try{const l=Object.values(g.value).flat().map(t=>t.key),s={};for(const t of l)o.value.hasOwnProperty(t)&&(s[t]=o.value[t]);await i.updateGlobalSettings(s)}catch{}finally{u.value=!1}}return(l,s)=>(n(),r("div",B,[s[2]||(s[2]=a("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[a("h3",{class:"text-xl font-semibold leading-6 text-gray-900 dark:text-white"}," Global System Settings "),a("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Manage application-wide settings. Changes may require users to log out and back in. ")],-1)),Object.keys(g.value).length?(n(),r("form",{key:0,onSubmit:V(w,["prevent"]),class:"p-6"},[a("div",F,[(n(!0),r(h,null,_(g.value,(t,d)=>(n(),r("div",{key:d},[a("h4",L,b(d),1),a("div",T,[(n(!0),r(h,null,_(t,e=>(n(),r("div",{key:e.key},[a("label",{for:e.key,class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},b(e.description),9,U),["string","integer"].includes(e.type)?x((n(),r("input",{key:0,type:e.type==="integer"?"number":"text",id:e.key,"onUpdate:modelValue":c=>o.value[e.key]=c,class:"input-field mt-1"},null,8,D)),[[M,o.value[e.key]]]):f("",!0),e.type==="boolean"?(n(),r("div",E,[a("button",{onClick:c=>o.value[e.key]=!o.value[e.key],type:"button",class:S([o.value[e.key]?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"])},[a("span",{class:S([o.value[e.key]?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)],10,J)])):f("",!0),e.type==="json"?x((n(),r("textarea",{key:2,id:e.key,"onUpdate:modelValue":c=>o.value[e.key]=c,rows:"4",class:"input-field mt-1 font-mono text-xs"},null,8,R)),[[N,o.value[e.key]]]):f("",!0)]))),128))])]))),128))]),a("div",q,[a("div",z,[a("button",{type:"submit",class:"btn btn-primary",disabled:u.value||!y.value},b(u.value?"Saving...":"Save Global Settings"),9,A)])])],32)):j(i).isLoadingSettings?(n(),r("div",I,s[0]||(s[0]=[a("p",{class:"text-gray-500"},"Loading settings...",-1)]))):(n(),r("div",P,s[1]||(s[1]=[a("p",{class:"text-gray-500"},"Could not load global settings.",-1)])))]))}};export{K as default};
