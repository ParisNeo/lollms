import{x as ie,C as ne,b as a,e as o,f as e,d as m,F as D,m as P,t as h,u as le,a as de,q as ue,s as ce,r as v,c as B,o as me,y as z,h as k,v as I,p as G,w as W,n as R,l as T,g as fe,i as pe,D as Y,E as be,j as _}from"./index-BmebD7ru.js";function ye(p){if(!p)return"Never";const i=new Date,g=new Date(p),w=Math.floor((i-g)/1e3);if(w<2)return"Just now";if(w<60)return`${w}s ago`;const $=Math.floor(w/60);if($<60)return`${$}m ago`;const b=Math.floor($/60);if(b<24)return`${b}h ago`;const n=Math.floor(b/24);return n<7?`${n}d ago`:g.toLocaleDateString()}const ve={name:"UserTable",props:{users:{type:Array,required:!0},isLoading:{type:Boolean,default:!1},activeSessions:{type:Array,default:()=>[]}},emits:["delete-user","reset-password","activate-user","deactivate-user","edit-user"],computed:{...ne(le,{currentUser:p=>p.user})},methods:{formatTimeAgo:ye,canPerformAction(p){return this.currentUser?p.id!==this.currentUser.id:!1}}},ge={class:"overflow-x-auto"},xe={class:"min-w-full divide-y dark:divide-gray-600"},ke={class:"bg-white dark:bg-gray-800 divide-y dark:divide-gray-700"},_e={key:0},he={key:1},we={class:"px-4 py-2 text-xs font-mono text-gray-500 dark:text-gray-400"},Ue={class:"px-4 py-2 text-sm font-medium text-gray-900 dark:text-gray-100"},$e={class:"px-4 py-2 text-sm"},Se={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"},Ce={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},Ae={class:"px-4 py-2 text-sm text-gray-500 dark:text-gray-400"},Ne={class:"flex items-center space-x-2"},De={key:0,class:"h-2 w-2 rounded-full bg-green-500 animate-pulse",title:"Online now"},Me=["title"],Le={class:"px-4 py-2 text-sm"},Fe={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},Ie={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-200"},Te=["title"],Pe={class:"px-4 py-2 text-sm space-x-2 whitespace-nowrap"},Ve=["onClick"],Ee=["onClick"],Oe=["onClick"],ze=["onClick"],Re=["onClick"];function qe(p,i,g,w,$,b){return o(),a("div",ge,[e("table",xe,[i[2]||(i[2]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"ID"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Username"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Last Seen"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Admin"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"LLM Model"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Actions")])],-1)),e("tbody",ke,[g.isLoading?(o(),a("tr",_e,i[0]||(i[0]=[e("td",{colspan:"7",class:"px-4 py-4 text-center text-sm italic text-gray-500"},"Loading users...",-1)]))):!g.users||g.users.length===0?(o(),a("tr",he,i[1]||(i[1]=[e("td",{colspan:"7",class:"px-4 py-4 text-center text-sm italic text-gray-500"},"No users found.",-1)]))):m("",!0),(o(!0),a(D,null,P(g.users,n=>(o(),a("tr",{key:n.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150"},[e("td",we,h(n.id),1),e("td",Ue,h(n.username),1),e("td",$e,[n.is_active?(o(),a("span",Se,"Active")):(o(),a("span",Ce,"Inactive"))]),e("td",Ae,[e("div",Ne,[g.activeSessions.includes(n.username)?(o(),a("span",De)):m("",!0),e("span",{title:n.last_activity_at?new Date(n.last_activity_at).toLocaleString():"Never"},h(b.formatTimeAgo(n.last_activity_at)),9,Me)])]),e("td",Le,[n.is_admin?(o(),a("span",Fe,"Yes")):(o(),a("span",Ie,"No"))]),e("td",{class:"px-4 py-2 text-xs truncate text-gray-500 dark:text-gray-400",title:n.lollms_model_name},h(n.lollms_model_name||"-"),9,Te),e("td",Pe,[e("button",{onClick:u=>p.$emit("edit-user",n),class:"btn btn-primary !py-1 !px-2 text-xs",title:"Edit User"},"Edit",8,Ve),n.is_active?m("",!0):(o(),a("button",{key:0,onClick:u=>p.$emit("activate-user",n.id),class:"btn btn-success !py-1 !px-2 text-xs",title:"Activate User"},"Activate",8,Ee)),n.is_active&&b.canPerformAction(n)?(o(),a("button",{key:1,onClick:u=>p.$emit("deactivate-user",n.id),class:"btn btn-warning !py-1 !px-2 text-xs",title:"Deactivate User"},"Deactivate",8,Oe)):m("",!0),b.canPerformAction(n)?(o(),a("button",{key:2,onClick:u=>p.$emit("reset-password",n.id),class:"btn btn-secondary !py-1 !px-2 text-xs",title:"Reset Password"},"Reset Pass",8,ze)):m("",!0),b.canPerformAction(n)?(o(),a("button",{key:3,onClick:u=>p.$emit("delete-user",n.id),class:"btn btn-danger !py-1 !px-2 text-xs",title:"Delete User"},"Delete",8,Re)):m("",!0)])]))),128))])])])}const je=ie(ve,[["render",qe]]),Be={class:"border-b border-gray-200 dark:border-gray-700 mb-6"},Ge={class:"-mb-px flex space-x-6","aria-label":"Tabs"},We={key:0},Ye={key:0,class:"flex justify-end mb-6"},Ke={key:1,class:"bg-gray-100 dark:bg-gray-700/50 p-4 rounded-lg shadow-sm mb-6"},Je={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},He={class:"flex items-center"},Qe={class:"text-right space-x-2"},Xe=["disabled"],Ze={class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm mb-6"},et={class:"space-y-4"},tt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},st=["disabled"],at={key:0,disabled:"",value:""},ot={key:1,disabled:"",value:""},rt=["value"],it=["disabled"],nt={class:"flex justify-end items-center space-x-4"},lt=["disabled"],dt=["disabled"],ut={class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm"},ct={class:"flex justify-between items-center mb-3 border-b dark:border-gray-600 pb-2"},mt={class:"flex items-center space-x-2"},ft=["disabled"],pt={key:0},bt={key:1},yt={key:1},vt={class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm"},gt={class:"flex justify-between items-center mb-4 border-b dark:border-gray-600 pb-3"},xt={class:"space-x-2"},kt=["disabled"],_t=["disabled"],ht={key:0},wt={key:1},Ut={key:0,class:"text-center p-8 text-gray-500"},$t={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},St={class:"space-y-6 bg-gray-50 dark:bg-gray-700/50 p-4 rounded-md"},Ct=["for"],At={class:"mt-2"},Nt=["for"],Dt=["onUpdate:modelValue","id"],Mt={class:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-200"},Lt=["onUpdate:modelValue","id"],Ft=["type","step","onUpdate:modelValue","id"],It={class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},Tt={class:"bg-gray-200 dark:bg-gray-600 px-1 rounded"},Pt={key:2},Vt={class:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm"},Et={class:"mt-6 border-t border-gray-200 dark:border-gray-700 pt-6"},Ot={class:"mt-6"},zt={class:"mt-2 flex items-center"},Rt={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},qt={class:"mt-6 flex justify-end"},jt=["disabled"],Bt={key:0},Gt={key:1},Yt={__name:"AdminPanel",setup(p){const i=de(),g=ue(),{availableLollmsModels:w,isLoadingLollmsModels:$}=ce(g),b=v([]),n=v([]),u=v(!1),M=v(!1),f=v({username:"",password:"",email:"",lollms_model_name:"",safe_store_vectorizer:"",is_admin:!1}),d=v({}),S=v({}),y=v(!1),U=v(null),L=v(!1),x=v("users"),V=v(null),A=B(()=>{var s;if(y.value)return!1;for(const t in d.value)if(d.value[t]!==((s=S.value[t])==null?void 0:s.value))return!0;return!1}),K=B(()=>{const s={};if(!S.value)return{};const t=Object.keys(S.value).sort((r,c)=>r.localeCompare(c));for(const r of t){const c=S.value[r];c&&(s[c.category]||(s[c.category]=[]),s[c.category].push(c))}return s});async function E(s){x.value!==s&&(x.value=s,await q())}async function q(){x.value==="users"?(await C(),await O(),w.value.length===0&&g.fetchAdminAvailableLollmsModels()):x.value==="settings"&&await O()}async function C(){u.value=!0;try{const[s,t]=await Promise.all([_.get("/api/admin/users"),_.get("/api/admin/active-sessions")]);b.value=s.data,n.value=t.data}catch{i.addNotification("Failed to load user data.","error")}finally{u.value=!1}}async function O(){y.value=!0;try{const t=(await _.get("/api/admin/settings")).data,r={},c={};t.forEach(l=>{r[l.key]=l.value,c[l.key]={...l}}),d.value=r,S.value=c}catch{i.addNotification("Failed to load global settings.","error")}finally{y.value=!1}}function J(){const s={};for(const t in S.value)s[t]=S.value[t].value;d.value=s,i.addNotification("Changes have been discarded.","info")}async function F(){if(!A.value)return i.addNotification("No changes to save.","info"),!1;y.value=!0;try{return await _.put("/api/admin/settings",{configs:d.value}),i.addNotification("Global settings updated successfully.","success"),await O(),!0}catch{return!1}finally{y.value=!1}}async function H(){if(!f.value.username||!f.value.password||!f.value.email){i.addNotification("Username, email, and password are required.","warning");return}u.value=!0;try{await _.post("/api/admin/users",f.value),i.addNotification(`User '${f.value.username}' created successfully.`,"success"),j(),await C()}catch{}finally{u.value=!1}}function Q(s){i.openModal("adminUserEdit",{user:s,onUserUpdated:()=>{C()}})}async function X(s){if(await i.showConfirmation({title:"Delete User",message:"Are you sure you want to delete this user? This will also remove all their data and cannot be undone.",confirmText:"Delete",confirmClass:"btn-danger"})){u.value=!0;try{await _.delete(`/api/admin/users/${s}`),i.addNotification("User deleted successfully.","success"),await C()}catch{}finally{u.value=!1}}}function Z(s){const t=b.value.find(r=>r.id===s);t?i.openModal("resetPassword",{user:t}):i.addNotification("Could not find the specified user to reset password.","error")}async function ee(s){u.value=!0;try{await _.post(`/api/admin/users/${s}/activate`),i.addNotification("User has been activated successfully.","success"),await C()}catch{}finally{u.value=!1}}async function te(s){u.value=!0;try{await _.post(`/api/admin/users/${s}/deactivate`),i.addNotification("User has been deactivated successfully.","success"),await C()}catch{}finally{u.value=!1}}function j(){f.value={username:"",password:"",email:"",lollms_model_name:"",safe_store_vectorizer:"",is_admin:!1},M.value=!1}function se(s){U.value=s.target.files[0]||null}async function ae(){if(!U.value){i.addNotification("Please select a file to import.","warning");return}if(U.value.name!=="webui.db"){i.addNotification("Invalid file name. Please select the 'webui.db' file.","error");return}L.value=!0;const s=new FormData;s.append("file",U.value);try{const t=await _.post("/api/admin/import-openwebui",s,{headers:{"Content-Type":"multipart/form-data"}});i.addNotification(t.data.message,"success",8e3),U.value=null,V.value&&(V.value.value="")}catch{}finally{L.value=!1}}function oe(){const s=b.value.map(t=>t.email).filter(Boolean).join(",");s?window.location.href=`mailto:${s}`:i.addNotification("No users with email addresses found.","warning")}async function re(){const s=d.value.force_model_name;if(!s){i.addNotification("Please select a model to force first in the settings below.","warning");return}if(A.value&&(i.addNotification("You have unsaved changes. Saving settings before applying...","info"),!await F())){i.addNotification("Could not save settings. Aborting force apply.","error");return}if(await i.showConfirmation({title:"Force Settings on All Users?",message:`This will overwrite the current model and context size for ALL users with the values you've configured (${s}). This action cannot be undone. Are you sure?`,confirmText:"Yes, Force Settings",confirmClass:"btn-warning"})){y.value=!0;const r={model_name:s,context_size:d.value.force_context_size};try{await _.post("/api/admin/force-settings-once",r),i.addNotification("Settings have been applied to all users.","success")}catch{}finally{y.value=!1}}}return me(()=>{q()}),(s,t)=>(o(),a("div",null,[t[31]||(t[31]=e("h4",{class:"text-lg font-semibold mb-4"},"Administration",-1)),e("div",Be,[e("nav",Ge,[e("button",{onClick:t[0]||(t[0]=r=>E("users")),class:z([[x.value==="users"?"border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-300":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:border-gray-500"],"whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors duration-200"])}," User Management ",2),e("button",{onClick:t[1]||(t[1]=r=>E("settings")),class:z([[x.value==="settings"?"border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-300":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:border-gray-500"],"whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors duration-200"])}," Global Settings ",2),e("button",{onClick:t[2]||(t[2]=r=>E("import")),class:z([[x.value==="import"?"border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-300":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:border-gray-500"],"whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors duration-200"])}," Data Import ",2)])]),x.value==="users"?(o(),a("div",We,[M.value?m("",!0):(o(),a("div",Ye,[e("button",{onClick:t[3]||(t[3]=r=>M.value=!0),class:"btn btn-primary"},"Add New User")])),M.value?(o(),a("section",Ke,[t[15]||(t[15]=e("h2",{class:"text-md font-semibold mb-3 border-b dark:border-gray-600 pb-2"},"Add New User",-1)),e("form",{onSubmit:W(H,["prevent"]),class:"space-y-4"},[e("div",Je,[e("div",null,[t[11]||(t[11]=e("label",{for:"newUsername",class:"block text-sm font-medium"},"Username",-1)),k(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=r=>f.value.username=r),id:"newUsername",required:"",minlength:"3",class:"input-field mt-1"},null,512),[[I,f.value.username]])]),e("div",null,[t[12]||(t[12]=e("label",{for:"newEmail",class:"block text-sm font-medium"},"Email",-1)),k(e("input",{type:"email","onUpdate:modelValue":t[5]||(t[5]=r=>f.value.email=r),id:"newEmail",required:"",class:"input-field mt-1"},null,512),[[I,f.value.email]])]),e("div",null,[t[13]||(t[13]=e("label",{for:"newPassword",class:"block text-sm font-medium"},"Password (min 8 chars)",-1)),k(e("input",{type:"password","onUpdate:modelValue":t[6]||(t[6]=r=>f.value.password=r),id:"newPassword",required:"",minlength:"8",class:"input-field mt-1"},null,512),[[I,f.value.password]])])]),e("div",He,[k(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=r=>f.value.is_admin=r),id:"newUserIsAdmin",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[G,f.value.is_admin]]),t[14]||(t[14]=e("label",{for:"newUserIsAdmin",class:"ml-2 block text-sm"},"Grant Administrator Privileges",-1))]),e("div",Qe,[e("button",{type:"button",onClick:j,class:"btn btn-secondary"},"Cancel"),e("button",{type:"submit",class:"btn btn-primary",disabled:u.value},"Add User",8,Xe)])],32)])):m("",!0),e("section",Ze,[t[20]||(t[20]=e("h2",{class:"text-md font-semibold mb-3 border-b dark:border-gray-600 pb-2"},"Global User Overrides",-1)),e("div",et,[e("div",null,[t[17]||(t[17]=e("label",{for:"forceMode",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Force Model Mode",-1)),k(e("select",{id:"forceMode","onUpdate:modelValue":t[8]||(t[8]=r=>d.value.force_model_mode=r),class:"input-field mt-1 max-w-md"},t[16]||(t[16]=[e("option",{value:"disabled"},"Disabled",-1),e("option",{value:"force_once"},"Force Once (Set User Preference)",-1),e("option",{value:"force_always"},"Force Always (Session Override)",-1)]),512),[[R,d.value.force_model_mode]])]),e("div",tt,[e("div",null,[t[18]||(t[18]=e("label",{for:"forceModelName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Model to Force",-1)),k(e("select",{id:"forceModelName","onUpdate:modelValue":t[9]||(t[9]=r=>d.value.force_model_name=r),class:"input-field mt-1",disabled:T($)||d.value.force_model_mode==="disabled"},[T($)?(o(),a("option",at,"Loading models...")):T(w).length===0?(o(),a("option",ot,"No models available")):m("",!0),(o(!0),a(D,null,P(T(w),r=>(o(),a("option",{key:r.id,value:r.id},h(r.name),9,rt))),128))],8,st),[[R,d.value.force_model_name]])]),e("div",null,[t[19]||(t[19]=e("label",{for:"forceCtxSize",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Context Size to Force",-1)),k(e("input",{type:"number",id:"forceCtxSize","onUpdate:modelValue":t[10]||(t[10]=r=>d.value.force_context_size=r),class:"input-field mt-1",disabled:d.value.force_model_mode==="disabled"},null,8,it),[[I,d.value.force_context_size,void 0,{number:!0}]])])]),e("div",nt,[d.value.force_model_mode==="force_once"?(o(),a("button",{key:0,type:"button",onClick:re,class:"btn btn-warning",disabled:y.value}," Apply to All Users Now ",8,lt)):m("",!0),e("button",{onClick:F,class:"btn btn-primary",disabled:!A.value||y.value},"Save Overrides",8,dt)])])]),e("section",ut,[e("div",ct,[t[21]||(t[21]=e("h2",{class:"text-md font-semibold"},"Manage Existing Users",-1)),e("div",mt,[e("button",{onClick:oe,class:"btn btn-secondary !py-1 !px-2 text-xs"},"Email All Users"),e("button",{onClick:C,class:"btn btn-secondary !py-1 !px-2 text-xs",disabled:u.value},[u.value?(o(),a("span",pt,"Refreshing...")):(o(),a("span",bt,"Refresh List"))],8,ft)])]),fe(je,{users:b.value,"active-sessions":n.value,isLoading:u.value,onEditUser:Q,onDeleteUser:X,onResetPassword:Z,onActivateUser:ee,onDeactivateUser:te},null,8,["users","active-sessions","isLoading"])])])):m("",!0),x.value==="settings"?(o(),a("div",yt,[e("section",vt,[e("div",gt,[t[22]||(t[22]=e("h2",{class:"text-md font-semibold"},"Application Settings",-1)),e("div",xt,[e("button",{onClick:J,class:"btn btn-secondary",disabled:!A.value||y.value},"Reset",8,kt),e("button",{onClick:F,class:"btn btn-primary",disabled:!A.value||y.value},[y.value?(o(),a("span",ht,"Saving...")):(o(),a("span",wt,"Save Changes"))],8,_t)])]),y.value?(o(),a("div",Ut," Loading settings... ")):(o(),a("form",{key:1,onSubmit:W(F,["prevent"]),class:"space-y-8"},[(o(!0),a(D,null,P(K.value,(r,c)=>(o(),a("div",{key:c},[c!=="Global LLM Overrides"?(o(),a(D,{key:0},[e("h3",$t,h(c),1),e("div",St,[(o(!0),a(D,null,P(r,l=>(o(),a("div",{key:l.key},[e("label",{for:`setting-${l.key}`,class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},h(l.description),9,Ct),e("div",At,[l.type==="boolean"?(o(),a("label",{key:0,for:`setting-${l.key}`,class:"relative inline-flex items-center cursor-pointer"},[k(e("input",{type:"checkbox","onUpdate:modelValue":N=>d.value[l.key]=N,class:"sr-only peer",id:`setting-${l.key}`},null,8,Dt),[[G,d.value[l.key]]]),t[23]||(t[23]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-500 peer-checked:bg-blue-600"},null,-1)),e("span",Mt,h(d.value[l.key]?"Enabled":"Disabled"),1)],8,Nt)):l.key==="registration_mode"?k((o(),a("select",{key:1,"onUpdate:modelValue":N=>d.value[l.key]=N,id:`setting-${l.key}`,class:"input-field max-w-sm"},t[24]||(t[24]=[e("option",{value:"direct"},"Direct (instantly active)",-1),e("option",{value:"admin_approval"},"Admin Approval",-1)]),8,Lt)),[[R,d.value[l.key]]]):k((o(),a("input",{key:2,type:l.type==="string"?"text":"number",step:l.type==="float"?"0.1":"1","onUpdate:modelValue":N=>d.value[l.key]=N,id:`setting-${l.key}`,class:"input-field max-w-sm"},null,8,Ft)),[[pe,d.value[l.key],void 0,{number:!0}]])]),e("p",It,[t[25]||(t[25]=Y("Key: ")),e("code",Tt,h(l.key),1)])]))),128))])],64)):m("",!0)]))),128))],32))])])):m("",!0),x.value==="import"?(o(),a("div",Pt,[e("section",Vt,[t[29]||(t[29]=e("h2",{class:"text-xl font-bold leading-6 text-gray-900 dark:text-white"},"Import from OpenWebUI",-1)),t[30]||(t[30]=e("p",{class:"mt-2 max-w-2xl text-sm text-gray-500 dark:text-gray-400"}," Migrate users and their discussion histories from an OpenWebUI instance. ",-1)),e("div",Et,[t[28]||(t[28]=be('<div class="prose dark:prose-invert text-sm max-w-none"><p><strong>Instructions:</strong></p><ol><li>Locate your OpenWebUI data directory (e.g., inside the Docker container at <code>/app/backend/data</code>).</li><li>Find the main database file named <strong><code>webui.db</code></strong>.</li><li>Click &quot;Select File&quot; and upload that single <code>webui.db</code> file.</li><li>Click &quot;Start Import&quot;. The process runs in the background and may take several minutes. Check the server logs for detailed progress.</li></ol><p class="font-semibold text-yellow-600 dark:text-yellow-400"> Important: This tool migrates users based on their email. If a user with the same email already exists, their core data will be skipped, but their discussions will still be imported. Passwords will be migrated seamlessly. </p></div>',1)),e("div",Ot,[t[27]||(t[27]=e("label",{for:"file-upload",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," OpenWebUI Database File ",-1)),e("div",zt,[e("input",{ref_key:"fileInputRef",ref:V,onChange:se,type:"file",accept:".db",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/50 dark:file:text-blue-300 dark:hover:file:bg-blue-900"},null,544)]),U.value?(o(),a("div",Rt,[t[26]||(t[26]=Y(" Selected: ")),e("strong",null,h(U.value.name),1)])):m("",!0)]),e("div",qt,[e("button",{onClick:ae,disabled:L.value||!U.value,class:"btn btn-primary"},[L.value?(o(),a("span",Bt,"Importing...")):(o(),a("span",Gt,"Start Import"))],8,jt)])])])])):m("",!0)]))}};export{Yt as default};
