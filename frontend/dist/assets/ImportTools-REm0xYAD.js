import{c7 as h,a as k,r as n,b as i,d,h as e,n as w,P as u,t as g,i as p}from"./index-DnjdbnqE.js";const I={class:"space-y-8"},_={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},D={class:"p-6"},P={class:"space-y-6"},S={class:"text-center"},U={key:0,class:"mt-4 text-sm text-gray-600 dark:text-gray-300"},T={class:"font-semibold"},C={class:"text-xs text-gray-500"},M={key:1,class:"mt-4 flex text-sm leading-6 text-gray-600 dark:text-gray-400"},B={class:"flex justify-end"},F=["disabled"],O={__name:"ImportTools",setup(j){const s=h(),o=k(),c=n(null),a=n(null),l=n(!1);function m(r){const t=r.target.files;t.length>0&&(t[0].name==="webui.db"?a.value=t[0]:(o.addNotification("Invalid file. Please select 'webui.db'.","error"),a.value=null))}function f(){var r;(r=c.value)==null||r.click()}function b(r){l.value=!1;const t=r.dataTransfer.files;t.length>0&&(t[0].name==="webui.db"?a.value=t[0]:(o.addNotification("Invalid file. Please select 'webui.db'.","error"),a.value=null))}async function x(){if(!a.value){o.addNotification("Please select a file to import.","warning");return}try{await s.importOpenWebUIData(a.value),a.value=null}catch{}}async function y(){if(await o.showConfirmation({title:"Purge Temporary Files?",message:"This will delete all temporary uploaded files older than 24 hours. This action cannot be undone.",confirmText:"Yes, Purge"}))try{await s.purgeUnusedUploads()}catch{}}return(r,t)=>(d(),i("div",I,[e("div",_,[t[6]||(t[6]=e("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"text-xl font-semibold leading-6 text-gray-900 dark:text-white"}," Data Import "),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Import data from other compatible applications. ")],-1)),e("div",D,[e("div",P,[t[5]||(t[5]=e("div",null,[e("h4",{class:"text-base font-medium text-gray-800 dark:text-gray-200"},"Import from Open-WebUI"),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Migrate users and discussions from an Open-WebUI instance by uploading its `webui.db` database file. The migration will run in the background. ")],-1)),e("div",null,[e("input",{type:"file",ref_key:"fileInput",ref:c,onChange:m,accept:".db",class:"hidden"},null,544),e("div",{onClick:f,onDragover:t[0]||(t[0]=u(v=>l.value=!0,["prevent"])),onDragleave:t[1]||(t[1]=u(v=>l.value=!1,["prevent"])),onDrop:u(b,["prevent"]),class:w(["mt-2 flex justify-center rounded-lg border-2 border-dashed px-6 py-10 transition-colors",l.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"])},[e("div",S,[t[3]||(t[3]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),a.value?(d(),i("div",U,[e("p",T,g(a.value.name),1),e("p",C,g((a.value.size/1024/1024).toFixed(2))+" MB",1)])):(d(),i("p",M,t[2]||(t[2]=[e("span",{class:"font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-500"},"Upload a file",-1),e("span",{class:"pl-1"},"or drag and drop",-1)]))),t[4]||(t[4]=e("p",{class:"text-xs leading-5 text-gray-600 dark:text-gray-400"},"webui.db file only",-1))])],34)]),e("div",B,[e("button",{onClick:x,disabled:!a.value||p(s).isImporting,class:"btn btn-primary"},g(p(s).isImporting?"Importing...":"Start Import"),9,F)])])])]),e("div",{class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},[t[8]||(t[8]=e("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"text-xl font-semibold leading-6 text-gray-900 dark:text-white"}," Data Maintenance "),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Perform cleanup and maintenance tasks. ")],-1)),e("div",{class:"p-6 flex items-center justify-between"},[t[7]||(t[7]=e("div",null,[e("h4",{class:"font-medium text-gray-800 dark:text-gray-200"},"Purge Unused Uploads"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Deletes temporary files uploaded more than 24 hours ago that are not part of a discussion. ")],-1)),e("button",{onClick:y,class:"btn btn-danger"}," Start Purge Task ")])])]))}};export{O as default};
