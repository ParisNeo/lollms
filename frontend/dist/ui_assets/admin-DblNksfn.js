const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["ui_assets/index-BkSnPnj7.js","ui_assets/index-B4w5r_c-.css"])))=>i.map(i=>d[i]);
import{a9 as Ti,u as $i,aa as Bi,N as s,ab as xa,m as Ma,ac as Si,O as e,H as Ia}from"./index-BkSnPnj7.js";function Ca(o,d){try{const y=localStorage.getItem(o);if(y){const B=JSON.parse(y);return{...d,...B}}}catch{localStorage.removeItem(o)}return d}const zi=(o,d)=>{if(d==="boolean")return typeof o=="string"?o.toLowerCase()==="true":!!o;if(d==="integer"){const y=parseInt(o,10);return isNaN(y)?null:y}if(d==="float"){const y=parseFloat(o);return isNaN(y)?null:y}return o},Ri=Ti("admin",()=>{const o=$i(),d=Bi(),{on:y}=Si(),B=s(null),P=s(!1),S=s([]),z=s(!1),Ua=s(null),Z=s(!1),x=s([]),M=s(!1),F=s(null),I=s(!1),r=s([]),C=s(!1),U=s([]),l=s([]),O=s(!1),D=s([]),u=s([]),E=s(!1),q=s([]),p=s([]),G=s(!1),V=s([]),f=s([]),j=s(!1),J=s([]),g=s([]),Q=s(!1),K=s([]),m=s([]),W=s(!1),H=s([]),X=s([]),w=s([]),Y=s(!1),h=s([]),aa=s(!1),b=s([]),ta=s(!1),$=s([]),ea=s(!1),na=s({items:[],total:0,pages:1,categories:[]}),ia=s(!1),sa=s({items:[],total:0,pages:1,categories:[]}),oa=s(!1),ca=s({items:[],total:0,pages:1,categories:[]}),da=s(!1),ra=s({items:[],total:0,pages:1,categories:[]}),la=s(!1),A=s([]),ua=s(!1),Oa=s(null),pa=s(!1),fa=s([]),ga=s(!1),ma=s(null),ya=s(!1),k=s(null),va=s(!1),wa=s([]),ha=s(!1),R=s([]),ba=s(!1),_a=s([]),Ta=s(!1),$a=s([]),Ba=s(!1),Sa=s(!1),za=s(!1),Aa=s([]),Ra=s(!1),Na=s([]),La=s(!1),Da=s([]),Fa=s(!1),Ea=xa(Ca("lollms-app-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"last_update_date",sortOrder:"desc",currentPage:1,pageSize:24})),qa=xa(Ca("lollms-mcp-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"last_update_date",sortOrder:"desc",currentPage:1,pageSize:24})),Ga=xa(Ca("lollms-prompt-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"name",sortOrder:"asc",currentPage:1,pageSize:24}));Ma(Ea,a=>{localStorage.setItem("lollms-app-filters",JSON.stringify(a))},{deep:!0}),Ma(qa,a=>{localStorage.setItem("lollms-mcp-filters",JSON.stringify(a))},{deep:!0}),Ma(Ga,a=>{localStorage.setItem("lollms-prompt-filters",JSON.stringify(a))},{deep:!0});async function Ya(a){var n,i;if(!a||!["completed","failed","cancelled"].includes(a.status))return;const t=(a.name||"").toLowerCase();if((t.includes("app")||t.includes("mcp"))&&(N(!0),L(!0)),t.includes("prompt")&&ka({},!0),t.includes("personality")&&Wa({},!0),t.includes("purge unused temporary files")&&a.status==="completed"){const c=((n=a.result)==null?void 0:n.message)||"Purge completed successfully.";o.addNotification(c,"success",6e3)}t.includes("generate self-signed certificate")&&a.status==="completed"&&(v(!0),o.addNotification("Certificate generated successfully. Reloading settings...","success",6e3)),t.includes("content")&&a.status==="completed"&&o.addNotification("Moderation task completed.","success",6e3),t.includes("generate fun facts")&&a.status==="completed"&&(o.addNotification("Fun Facts Generated!","success"),_(!0),T(!0)),t.includes("install requirement")&&a.status==="completed"&&(Xa(),o.addNotification("Requirement installed successfully.","success")),t.includes("sanitization")&&a.status==="completed"&&o.addNotification(((i=a.result)==null?void 0:i.message)||"Sanitization completed.","success",8e3)}y("task:completed",Ya);async function at(a){try{const t=await e.post("/api/admin/system/force-all-users-config",a);return o.addNotification(t.data.message,"success"),!0}catch(t){return console.error(t),!1}}async function Va(){Z.value=!0;try{const a=await e.get("/api/admin/services/dashboard");Ua.value=a.data}finally{Z.value=!1}}async function tt(){await e.post("/api/admin/services/reset-usage"),await Va(),o.addNotification("Usage statistics reset.","success")}async function et(a){const t=await e.post("/api/admin/backup/create",{password:a});return d.addTask(t.data),t.data}async function nt(){try{const a=await e.post("/api/admin/system/analyze-logs");return d.addTask(a.data),a.data}catch(a){throw o.addNotification("Failed to start log analysis.","error"),a}}async function it(){const a=await e.post("/api/admin/purge-unused-uploads");d.addTask(a.data)}async function st(){const a=await e.post("/api/admin/trigger-moderation");d.addTask(a.data)}async function ot(){const a=await e.post("/api/admin/trigger-full-remoderation");d.addTask(a.data)}async function ct(){const a=await e.post("/api/admin/security/sanitize-content");d.addTask(a.data)}async function dt(a){await e.post("/api/admin/broadcast",{message:a})}async function rt(a){await e.post("/api/admin/system/kill-process",{pid:a}),o.addNotification(`Process ${a} killed.`,"success"),ja()}async function lt(){P.value=!0;try{const a=await e.get("/api/admin/stats");B.value=a.data}catch{B.value=null}finally{P.value=!1}}async function ut(){ga.value=!0;try{const a=await e.get("/api/admin/ws-connections");fa.value=a.data}catch{fa.value=[]}finally{ga.value=!1}}async function pt(){if(!k.value){va.value=!0;try{const a=await e.get("/api/admin/global-generation-stats");k.value=a.data}catch{k.value=null}finally{va.value=!1}}}async function ja(){pa.value=!0;try{const a=await e.get("/api/admin/system-status");Oa.value=a.data}finally{pa.value=!1}}async function ft(a=!1){if(!(!a&&Na.value.length>0)){La.value=!0;try{const t=await e.get("/api/admin/system/logs");Na.value=t.data}catch{o.addNotification("Failed to fetch system logs.","error")}finally{La.value=!1}}}async function gt(){if(!ma.value){ya.value=!0;try{const a=await e.get("/api/admin/server-info");ma.value=a.data}finally{ya.value=!1}}}async function mt(){ha.value=!0;try{const a=await e.get("/api/admin/model-usage-stats");wa.value=a.data||[]}catch(a){console.error("Failed to fetch model usage stats:",a),wa.value=[]}finally{ha.value=!1}}async function v(a=!1){if(!(!a&&x.value.length>0)){M.value=!0;try{const t=await e.get("/api/admin/settings");x.value=t.data.map(n=>({...n,value:zi(n.value,n.type)}))}finally{M.value=!1}}}async function yt(a){await e.put("/api/admin/settings",{configs:a}),await v(!0),o.addNotification("Settings updated.","success")}async function vt(a=!1){if(!(!a&&F.value)){I.value=!0;try{const t=await e.get("/api/admin/ai-bot-settings");F.value=t.data}finally{I.value=!1}}}async function wt(a){const t=await e.put("/api/admin/ai-bot-settings",a);F.value=t.data,o.addNotification("AI Bot user settings updated.","success")}async function ht(a=!1){if(!(!a&&r.value.length>0)){C.value=!0;try{const t=await e.get("/api/admin/bindings");r.value=t.data}finally{C.value=!1}}}async function bt(a=!1){if(!a&&U.value.length>0)return;const t=await e.get("/api/admin/bindings/available_types");U.value=t.data}async function _t(a){const t=await e.post("/api/admin/bindings",a);r.value.push(t.data),o.addNotification(`Binding '${t.data.alias}' created.`,"success")}async function Tt(a,t){const n=await e.put(`/api/admin/bindings/${a}`,t),i=r.value.findIndex(c=>c.id===a);i!==-1&&(r.value[i]=n.data),o.addNotification(`Binding '${n.data.alias}' updated.`,"success")}async function $t(a){await e.delete(`/api/admin/bindings/${a}`),r.value=r.value.filter(t=>t.id!==a),o.addNotification("Binding deleted.","success")}async function Bt(a=!1){if(!(!a&&l.value.length>0)){O.value=!0;try{const t=await e.get("/api/admin/tti-bindings");l.value=t.data}finally{O.value=!1}}}async function St(a=!1){if(!a&&D.value.length>0)return;const t=await e.get("/api/admin/tti-bindings/available_types");D.value=t.data}async function zt(a){const t=await e.post("/api/admin/tti-bindings",a);l.value.push(t.data),o.addNotification(`TTI Binding '${t.data.alias}' created.`,"success")}async function At(a,t){const n=await e.put(`/api/admin/tti-bindings/${a}`,t),i=l.value.findIndex(c=>c.id===a);i!==-1&&(l.value[i]=n.data),o.addNotification(`TTI Binding '${n.data.alias}' updated.`,"success")}async function Rt(a){await e.delete(`/api/admin/tti-bindings/${a}`),l.value=l.value.filter(t=>t.id!==a),o.addNotification("TTI Binding deleted.","success")}async function Nt(a=!1){if(!(!a&&u.value.length>0)){E.value=!0;try{const t=await e.get("/api/admin/tts-bindings");u.value=t.data}finally{E.value=!1}}}async function Lt(a=!1){if(!a&&q.value.length>0)return;const t=await e.get("/api/admin/tts-bindings/available_types");q.value=t.data}async function Ft(a){const t=await e.post("/api/admin/tts-bindings",a);u.value.push(t.data),o.addNotification(`TTS Binding '${t.data.alias}' created.`,"success")}async function kt(a,t){const n=await e.put(`/api/admin/tts-bindings/${a}`,t),i=u.value.findIndex(c=>c.id===a);i!==-1&&(u.value[i]=n.data),o.addNotification(`TTS Binding '${n.data.alias}' updated.`,"success")}async function Pt(a){await e.delete(`/api/admin/tts-bindings/${a}`),u.value=u.value.filter(t=>t.id!==a),o.addNotification("TTS Binding deleted.","success")}async function Zt(a=!1){if(!(!a&&p.value.length>0)){G.value=!0;try{const t=await e.get("/api/admin/stt-bindings");p.value=t.data}finally{G.value=!1}}}async function xt(a=!1){if(!a&&V.value.length>0)return;const t=await e.get("/api/admin/stt-bindings/available_types");V.value=t.data}async function Mt(a){const t=await e.post("/api/admin/stt-bindings",a);p.value.push(t.data),o.addNotification(`STT Binding '${t.data.alias}' created.`,"success")}async function It(a,t){const n=await e.put(`/api/admin/stt-bindings/${a}`,t),i=p.value.findIndex(c=>c.id===a);i!==-1&&(p.value[i]=n.data),o.addNotification(`STT Binding '${n.data.alias}' updated.`,"success")}async function Ct(a){await e.delete(`/api/admin/stt-bindings/${a}`),p.value=p.value.filter(t=>t.id!==a),o.addNotification("STT Binding deleted.","success")}async function Ut(a=!1){if(!(!a&&f.value.length>0)){j.value=!0;try{const t=await e.get("/api/admin/ttv-bindings");f.value=t.data}finally{j.value=!1}}}async function Ot(a=!1){if(!a&&J.value.length>0)return;const t=await e.get("/api/admin/ttv-bindings/available_types");J.value=t.data}async function Dt(a){const t=await e.post("/api/admin/ttv-bindings",a);f.value.push(t.data),o.addNotification(`TTV Binding '${t.data.alias}' created.`,"success")}async function Et(a,t){const n=await e.put(`/api/admin/ttv-bindings/${a}`,t),i=f.value.findIndex(c=>c.id===a);i!==-1&&(f.value[i]=n.data),o.addNotification(`TTV Binding '${n.data.alias}' updated.`,"success")}async function qt(a){await e.delete(`/api/admin/ttv-bindings/${a}`),f.value=f.value.filter(t=>t.id!==a),o.addNotification("TTV Binding deleted.","success")}async function Gt(a=!1){if(!(!a&&g.value.length>0)){Q.value=!0;try{const t=await e.get("/api/admin/ttm-bindings");g.value=t.data}finally{Q.value=!1}}}async function Vt(a=!1){if(!a&&K.value.length>0)return;const t=await e.get("/api/admin/ttm-bindings/available_types");K.value=t.data}async function jt(a){const t=await e.post("/api/admin/ttm-bindings",a);g.value.push(t.data),o.addNotification(`TTM Binding '${t.data.alias}' created.`,"success")}async function Jt(a,t){const n=await e.put(`/api/admin/ttm-bindings/${a}`,t),i=g.value.findIndex(c=>c.id===a);i!==-1&&(g.value[i]=n.data),o.addNotification(`TTM Binding '${n.data.alias}' updated.`,"success")}async function Qt(a){await e.delete(`/api/admin/ttm-bindings/${a}`),g.value=g.value.filter(t=>t.id!==a),o.addNotification("TTM Binding deleted.","success")}async function Kt(a=!1){if(!(!a&&m.value.length>0)){W.value=!0;try{const t=await e.get("/api/admin/rag-bindings");m.value=t.data}catch(t){console.error(t)}finally{W.value=!1}}}async function Wt(a=!1){if(!(!a&&H.value.length>0))try{const t=await e.get("/api/admin/rag-bindings/available_types");H.value=t.data}catch(t){console.error(t)}}async function Ht(a){const t=await e.post("/api/admin/rag-bindings",a);m.value.push(t.data),o.addNotification(`RAG Binding '${t.data.alias}' created.`,"success")}async function Xt(a,t){const n=await e.put(`/api/admin/rag-bindings/${a}`,t),i=m.value.findIndex(c=>c.id===a);i!==-1&&(m.value[i]=n.data),o.addNotification(`RAG Binding '${n.data.alias}' updated.`,"success")}async function Yt(a){await e.delete(`/api/admin/rag-bindings/${a}`),m.value=m.value.filter(t=>t.id!==a),o.addNotification("RAG Binding deleted.","success")}async function ae(a){return(await e.get(`/api/admin/bindings/${a}/models`)).data}async function te(a,t){return(await e.post(`/api/admin/bindings/${a}/context-size`,{model_name:t})).data.ctx_size}async function ee(a,t){const n=await e.put(`/api/admin/bindings/${a}/alias`,t),i=r.value.findIndex(c=>c.id===a);i!==-1&&(r.value[i]=n.data)}async function ne(a,t){const n=await e.delete(`/api/admin/bindings/${a}/alias`,{data:{original_model_name:t}}),i=r.value.findIndex(c=>c.id===a);i!==-1&&(r.value[i]=n.data)}async function ie(a,t,n={}){return(await e.post(`/api/admin/bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function se(a){return(await e.get(`/api/admin/tti-bindings/${a}/models`)).data}async function oe(a,t){const n=await e.put(`/api/admin/tti-bindings/${a}/alias`,t),i=l.value.findIndex(c=>c.id===a);i!==-1&&(l.value[i]=n.data)}async function ce(a,t){const n=await e.delete(`/api/admin/tti-bindings/${a}/alias`,{data:{original_model_name:t}}),i=l.value.findIndex(c=>c.id===a);i!==-1&&(l.value[i]=n.data)}async function de(a,t,n={}){return(await e.post(`/api/admin/tti-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function re(a){return(await e.get(`/api/admin/tts-bindings/${a}/models`)).data}async function le(a,t){const n=await e.put(`/api/admin/tts-bindings/${a}/alias`,t),i=u.value.findIndex(c=>c.id===a);i!==-1&&(u.value[i]=n.data)}async function ue(a,t){const n=await e.delete(`/api/admin/tts-bindings/${a}/alias`,{data:{original_model_name:t}}),i=u.value.findIndex(c=>c.id===a);i!==-1&&(u.value[i]=n.data)}async function pe(a,t,n={}){return(await e.post(`/api/admin/tts-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function fe(a){return(await e.get(`/api/admin/stt-bindings/${a}/models`)).data}async function ge(a,t){const n=await e.put(`/api/admin/stt-bindings/${a}/alias`,t),i=p.value.findIndex(c=>c.id===a);i!==-1&&(p.value[i]=n.data)}async function me(a,t){const n=await e.delete(`/api/admin/stt-bindings/${a}/alias`,{data:{original_model_name:t}}),i=p.value.findIndex(c=>c.id===a);i!==-1&&(p.value[i]=n.data)}async function ye(a,t,n={}){return(await e.post(`/api/admin/stt-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function ve(a){return(await e.get(`/api/admin/ttv-bindings/${a}/models`)).data}async function we(a,t){const n=await e.put(`/api/admin/ttv-bindings/${a}/alias`,t),i=f.value.findIndex(c=>c.id===a);i!==-1&&(f.value[i]=n.data)}async function he(a,t){const n=await e.delete(`/api/admin/ttv-bindings/${a}/alias`,{data:{original_model_name:t}}),i=f.value.findIndex(c=>c.id===a);i!==-1&&(f.value[i]=n.data)}async function be(a,t,n={}){return(await e.post(`/api/admin/ttv-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function _e(a){return(await e.get(`/api/admin/ttm-bindings/${a}/models`)).data}async function Te(a,t){const n=await e.put(`/api/admin/ttm-bindings/${a}/alias`,t),i=g.value.findIndex(c=>c.id===a);i!==-1&&(g.value[i]=n.data)}async function $e(a,t){const n=await e.delete(`/api/admin/ttm-bindings/${a}/alias`,{data:{original_model_name:t}}),i=g.value.findIndex(c=>c.id===a);i!==-1&&(g.value[i]=n.data)}async function Be(a,t,n={}){return(await e.post(`/api/admin/ttm-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function Se(a){return(await e.get(`/api/admin/rag-bindings/${a}/models`)).data}async function ze(a,t){const n=await e.put(`/api/admin/rag-bindings/${a}/alias`,t),i=m.value.findIndex(c=>c.id===a);i!==-1&&(m.value[i]=n.data)}async function Ae(a,t){const n=await e.delete(`/api/admin/rag-bindings/${a}/alias`,{data:{original_model_name:t}}),i=m.value.findIndex(c=>c.id===a);i!==-1&&(m.value[i]=n.data)}async function Re(a){return(await e.get(`/api/admin/rag-bindings/models-for-type/${a}`)).data}async function Ne(a){await e.post("/api/admin/rag/aliases",a),await v(!0),o.addNotification(`Alias '${a.alias_name}' saved.`,"success")}async function Le(a){await e.delete("/api/admin/rag/aliases",{data:{alias_name:a}}),await v(!0),o.addNotification(`Alias '${a}' deleted.`,"success")}async function Fe(a=!1){if(!(!a&&X.value.length>0))try{const t=await e.get("/api/admin/rag/available-vectorizers");X.value=t.data}catch(t){console.error(t)}}async function ke(a=!1){if(!(!a&&w.value.length>0)){Y.value=!0;try{const t=await e.get("/api/apps_zoo/repositories");w.value=t.data}finally{Y.value=!1}}}async function Pe(a){const t=await e.post("/api/apps_zoo/repositories",a);w.value.push(t.data)}async function Ze(a){await e.delete(`/api/apps_zoo/repositories/${a}`),w.value=w.value.filter(t=>t.id!==a)}async function Ja(a){const t=await e.post(`/api/apps_zoo/repositories/${a}/pull`);d.addTask(t.data)}async function xe(){for(const a of w.value)await Ja(a.id)}async function Me(a=!1){if(!(!a&&h.value.length>0)){aa.value=!0;try{const t=await e.get("/api/mcps_zoo/repositories");h.value=t.data}finally{aa.value=!1}}}async function Ie(a){const t=await e.post("/api/mcps_zoo/repositories",a);h.value.push(t.data)}async function Ce(a){await e.delete(`/api/mcps_zoo/repositories/${a}`),h.value=h.value.filter(t=>t.id!==a)}async function Qa(a){const t=await e.post(`/api/mcps_zoo/repositories/${a}/pull`);d.addTask(t.data)}async function Ue(){for(const a of h.value)await Qa(a.id)}async function Oe(a=!1){if(!(!a&&b.value.length>0)){ta.value=!0;try{const t=await e.get("/api/prompts_zoo/repositories");b.value=t.data}finally{ta.value=!1}}}async function De(a){const t=await e.post("/api/prompts_zoo/repositories",a);b.value.push(t.data)}async function Ee(a){await e.delete(`/api/prompts_zoo/repositories/${a}`),b.value=b.value.filter(t=>t.id!==a)}async function Ka(a){const t=await e.post(`/api/prompts_zoo/repositories/${a}/pull`);d.addTask(t.data)}async function qe(){for(const a of b.value)await Ka(a.id)}async function Ge(a=!1){if(!(!a&&$.value.length>0)){ea.value=!0;try{const t=await e.get("/api/personalities_zoo/repositories");$.value=t.data}catch(t){console.error(t)}finally{ea.value=!1}}}async function Ve(a){const t=await e.post("/api/personalities_zoo/repositories",a);$.value.push(t.data)}async function je(a){await e.delete(`/api/personalities_zoo/repositories/${a}`),$.value=$.value.filter(t=>t.id!==a)}async function Je(a){const t=await e.post(`/api/personalities_zoo/repositories/${a}/pull`);d.addTask(t.data)}async function N(a=!1){if(!(!a&&na.value.items.length>0)){ia.value=!0;try{const[t,n]=await Promise.all([e.get("/api/apps_zoo/categories"),e.get("/api/apps_zoo/available")]);na.value={...n.data,categories:t.data}}finally{ia.value=!1}}}async function Qe(a){const t=await e.post("/api/apps_zoo/install",a);d.addTask(t.data)}async function Ke(a,t){return(await e.get("/api/apps_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function L(a=!1){if(!(!a&&sa.value.items.length>0)){oa.value=!0;try{const[t,n]=await Promise.all([e.get("/api/mcps_zoo/categories"),e.get("/api/mcps_zoo/available")]);sa.value={...n.data,categories:t.data}}finally{oa.value=!1}}}async function We(a){const t=await e.post("/api/mcps_zoo/install",a);d.addTask(t.data)}async function He(a,t){return(await e.get("/api/mcps_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function ka(a={},t=!1){if(!(!t&&ca.value.items.length>0)){da.value=!0;try{const[n,i]=await Promise.all([e.get("/api/prompts_zoo/categories"),e.get("/api/prompts_zoo/available",{params:a})]);ca.value={...i.data,categories:n.data}}finally{da.value=!1}}}async function Xe(a){const t=await e.post("/api/prompts_zoo/install",a);d.addTask(t.data)}async function Ye(a,t){return(await e.get("/api/prompts_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function Wa(a={},t=!1){if(!(!t&&ra.value.items.length>0)){la.value=!0;try{const[n,i]=await Promise.all([e.get("/api/personalities_zoo/categories"),e.get("/api/personalities_zoo/available",{params:a})]);ra.value={...i.data,categories:n.data}}catch(n){console.error(n)}finally{la.value=!1}}}async function an(a){const t=await e.post("/api/personalities_zoo/install",a);d.addTask(t.data)}async function tn(a,t){return(await e.get("/api/personalities_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function en(a){return(await e.get(`/api/admin/bindings/${a}/zoo`)).data}async function nn(a,t){const n=await e.post(`/api/admin/bindings/${a}/zoo/install`,{index:t});return d.addTask(n.data),n.data}async function sn(a){return(await e.get(`/api/admin/tti-bindings/${a}/zoo`)).data}async function on(a,t){const n=await e.post(`/api/admin/tti-bindings/${a}/zoo/install`,{index:t});return d.addTask(n.data),n.data}async function cn(a){return(await e.get(`/api/admin/tts-bindings/${a}/zoo`)).data}async function dn(a,t){const n=await e.post(`/api/admin/tts-bindings/${a}/zoo/install`,{index:t});return d.addTask(n.data),n.data}async function rn(a){return(await e.get(`/api/admin/stt-bindings/${a}/zoo`)).data}async function ln(a,t){const n=await e.post(`/api/admin/stt-bindings/${a}/zoo/install`,{index:t});return d.addTask(n.data),n.data}async function un(a){return(await e.get(`/api/admin/ttv-bindings/${a}/zoo`)).data}async function pn(a,t){const n=await e.post(`/api/admin/ttv-bindings/${a}/zoo/install`,{index:t});return d.addTask(n.data),n.data}async function fn(a){return(await e.get(`/api/admin/ttm-bindings/${a}/zoo`)).data}async function gn(a,t){const n=await e.post(`/api/admin/ttm-bindings/${a}/zoo/install`,{index:t});return d.addTask(n.data),n.data}async function mn(a){const{usePromptsStore:t}=await Ia(async()=>{const{usePromptsStore:i}=await import("./index-BkSnPnj7.js").then(c=>c.eL);return{usePromptsStore:i}},__vite__mapDeps([0,1])),n=await e.post("/api/prompts_zoo/installed",a);return await t().fetchPrompts(),n.data}async function yn(a,t){const{usePromptsStore:n}=await Ia(async()=>{const{usePromptsStore:i}=await import("./index-BkSnPnj7.js").then(c=>c.eL);return{usePromptsStore:i}},__vite__mapDeps([0,1]));await e.put(`/api/prompts_zoo/installed/${a}`,t),await n().fetchPrompts()}async function vn(a){const{usePromptsStore:t}=await Ia(async()=>{const{usePromptsStore:n}=await import("./index-BkSnPnj7.js").then(i=>i.eL);return{usePromptsStore:n}},__vite__mapDeps([0,1]));await e.delete(`/api/prompts_zoo/installed/${a}`),await t().fetchPrompts(),await ka({},!0)}async function wn(a){const t=await e.post(`/api/prompts_zoo/installed/${a}/update`);d.addTask(t.data)}async function hn(a){const t=await e.post("/api/prompts_zoo/generate_from_prompt",{prompt:a});return d.addTask(t.data),t.data}async function Ha(a=!1){if(!(!a&&A.value.length>0)){ua.value=!0;try{const t=await e.get("/api/apps_zoo/installed");A.value=t.data}finally{ua.value=!1}}}async function bn(a=null){const t=a?{port:a}:{};return(await e.get("/api/apps_zoo/get-next-available-port",{params:t})).data.port}async function _n(a){const t=await e.post(`/api/apps_zoo/installed/${a}/start`);d.addTask(t.data)}async function Tn(a){const t=await e.post(`/api/apps_zoo/installed/${a}/stop`);d.addTask(t.data)}async function $n(a){const t=await e.post(`/api/apps_zoo/installed/${a}/restart`);d.addTask(t.data)}async function Bn(a){const t=await e.post(`/api/apps_zoo/installed/${a}/update`);d.addTask(t.data)}async function Sn(a){await e.delete(`/api/apps_zoo/installed/${a}`),await N(!0),await L(!0),o.addNotification("Item uninstalled.","success")}async function zn(a,t){await e.put(`/api/apps_zoo/installed/${a}`,t),await N(!0),await L(!0)}async function An(a){return(await e.get(`/api/apps_zoo/installed/${a}/logs`)).data.log_content}async function Rn(a){return(await e.get(`/api/apps_zoo/installed/${a}/config-schema`)).data}async function Nn(a){return(await e.get(`/api/apps_zoo/installed/${a}/config`)).data}async function Ln(a,t){await e.put(`/api/apps_zoo/installed/${a}/config`,t)}async function Fn(a){return(await e.get(`/api/apps_zoo/installed/${a}/env`)).data}async function kn(a,t){await e.put(`/api/apps_zoo/installed/${a}/env`,{content:t}),o.addNotification(".env file saved.","success")}async function Pn(a){await e.delete(`/api/apps/${a}`),await N(!0),o.addNotification("App registration removed.","success")}async function Zn(a){await e.delete(`/api/mcps/${a}`),await L(!0),o.addNotification("MCP registration removed.","success")}async function xn(){const a=await e.post("/api/apps_zoo/sync-installs");d.addTask(a.data)}async function Mn(a){const t=await e.post("/api/apps_zoo/purge-broken",{item_type:a.item_type||"app",folder_name:a.folder_name});d.addTask(t.data)}async function In(a){const t=await e.post("/api/apps_zoo/fix-broken",{item_type:a.item_type||"app",folder_name:a.folder_name});d.addTask(t.data)}function Cn(a){if(!A.value)return;const t=A.value.find(n=>n.id===a.id);t?(a.status&&(t.status=a.status),a.is_installed!==void 0&&(t.is_installed=a.is_installed)):Ha(!0)}async function _(a=!1){if(!(!a&&R.value.length>0)){ba.value=!0;try{const t=await e.get("/api/admin/fun-facts");R.value=t.data}finally{ba.value=!1}}}async function T(a=!1){if(!(!a&&_a.value.length>0)){Ta.value=!0;try{const t=await e.get("/api/admin/fun-facts/categories");_a.value=t.data}finally{Ta.value=!1}}}async function Un(a){await e.post("/api/admin/fun-facts",a),await _(!0)}async function On(a,t){await e.put(`/api/admin/fun-facts/${a}`,t),await _(!0)}async function Dn(a){await e.delete(`/api/admin/fun-facts/${a}`),R.value=R.value.filter(t=>t.id!==a)}async function En(a){await e.post("/api/admin/fun-facts/categories",a),await T(!0)}async function qn(a,t){await e.put(`/api/admin/fun-facts/categories/${a}`,t),await T(!0)}async function Gn(a){await e.delete(`/api/admin/fun-facts/categories/${a}`),await Promise.all([T(!0),_(!0)])}async function Vn(){const a=await e.get("/api/admin/fun-facts/export",{responseType:"blob"}),t=URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=t,n.download="fun_facts_export.json",n.click(),URL.revokeObjectURL(t)}async function jn(a,t){const n=await e.get(`/api/admin/fun-facts/categories/${a}/export`,{responseType:"blob"}),i=URL.createObjectURL(new Blob([n.data])),c=document.createElement("a");c.href=i,c.download=`fun_facts_${t}.json`,c.click(),URL.revokeObjectURL(i)}async function Jn(a){const t={fun_facts:a},n=await e.post("/api/admin/fun-facts/import",t);await Promise.all([_(!0),T(!0)]),o.addNotification(`Imported ${n.data.facts_created} facts and ${n.data.categories_created} new categories.`,"success")}async function Qn(a){const t=new FormData;t.append("file",a);const n=await e.post("/api/admin/fun-facts/categories/import",t);await Promise.all([_(!0),T(!0)]),o.addNotification(`Imported ${n.data.facts_created} facts for category.`,"success")}async function Kn(a,t){let n;typeof a=="object"?n=a:n={content:a,category:t,source_type:"topic"};const i=await e.post("/api/admin/fun-facts/generate-from-prompt",n);return d.addTask(i.data),i.data}async function Pa(a=!1){if(!(!a&&$a.value.length>0)){Ba.value=!0;try{const t=await e.get("/api/admin/news-articles");$a.value=t.data}finally{Ba.value=!1}}}async function Wn(a,t){await e.put(`/api/admin/news-articles/${a}`,t),await Pa(!0),o.addNotification("Article updated.","success")}async function Hn(a){await e.post("/api/admin/news-articles/batch-delete",{article_ids:a}),await Pa(!0),o.addNotification(`${a.length} article(s) deleted.`,"success")}async function Za(a={}){z.value=!0;try{const t=await e.get("/api/admin/users",{params:a});S.value=t.data}finally{z.value=!1}}async function Xn(a){await e.post(`/api/admin/users/${a}/activate`),o.addNotification("User activated.","success"),Za()}async function Yn(a){try{return(await e.get(`/api/admin/users/${a}/stats`)).data}catch{return null}}async function ai(a){await e.post("/api/admin/users/batch-update-settings",a),await Za()}async function ti(a,t,n,i,c){const _i=await e.post("/api/admin/email-users",{subject:a,body:t,user_ids:n,background_color:i,send_as_text:c});return d.addTask(_i.data),!0}async function ei(a,t,n,i){za.value=!0;try{return(await e.post("/api/admin/enhance-email",{subject:a,body:t,background_color:n,prompt:i})).data}finally{za.value=!1}}async function ni(a){const t=new FormData;t.append("file",a);const n=await e.post("/api/admin/upload-logo",t);await v(!0),o.addNotification(n.data.message,"success")}async function ii(){await e.delete("/api/admin/remove-logo"),await v(!0),o.addNotification("Custom logo removed.","success")}async function si(a,t){const n=new FormData;n.append("file",a),n.append("file_type",t);const i=await e.post("/api/admin/upload-ssl-file",n,{headers:{"Content-Type":"multipart/form-data"}});return await v(!0),i.data.path}async function oi(){var a,t;try{const n=await e.post("/api/admin/generate-cert");return d.addTask(n.data),o.addNotification("Certificate generation task started. Check tasks for progress.","info"),n.data}catch(n){const i=((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.detail)||"Failed to start certificate task.";throw o.addNotification(i,"error"),n}}async function ci(){try{const a=await e.get("/api/admin/download-cert",{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","lollms_cert.pem"),document.body.appendChild(n),n.click(),n.remove()}catch{o.addNotification("Failed to download certificate.","error")}}async function di(a){try{const t=await e.get("/api/admin/download-trust-script",{params:{script_type:a},responseType:"blob"}),n=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=n;const c=a==="windows"?"bat":"sh";i.setAttribute("download",`install_lollms_cert.${c}`),document.body.appendChild(i),i.click(),i.remove()}catch(t){console.error(t),o.addNotification("Failed to download trust script.","error")}}async function ri(a){Sa.value=!0;const t=new FormData;t.append("file",a);try{await e.post("/api/admin/import-openwebui",t)}finally{Sa.value=!1}}async function li(a=!1){if(!(!a&&Aa.value.length>0)){Ra.value=!0;try{const t=await e.get("/api/admin/available-models");Aa.value=t.data}finally{Ra.value=!1}}}async function ui(a){const t=await e.post("/api/admin/bindings/generate_icon",{prompt:a});return d.addTask(t.data),t.data}async function pi(){const a=await e.post("/api/admin/rss-feeds/scrape");return d.addTask(a.data),a.data}async function fi(){const a=await e.post("/api/admin/refresh-zoo-cache");return d.addTask(a.data),a.data}async function gi(a=null){const t={};return a&&(t.status_filter=a),(await e.get("/api/admin/moderation/queue",{params:t})).data}async function mi(a,t){await e.post(`/api/admin/moderation/${a}/${t}/approve`)}async function yi(a,t){await e.delete(`/api/admin/moderation/${a}/${t}`)}async function Xa(){Fa.value=!0;try{const a=await e.get("/api/admin/system/requirements");Da.value=a.data}finally{Fa.value=!1}}async function vi(a,t){const n=await e.post("/api/admin/system/requirements/install",{name:a,version:t});d.addTask(n.data)}async function wi(){const a=await e.post("/api/admin/system/requirements/fix-all");d.addTask(a.data)}async function hi(a){z.value=!0;try{const t=await e.post("/api/admin/users",a);return S.value.push(t.data),o.addNotification("User created successfully.","success"),t.data}finally{z.value=!1}}async function bi(a){try{return await e.delete(`/api/admin/users/${a}`),S.value=S.value.filter(t=>t.id!==a),o.addNotification("User deleted successfully.","success"),!0}catch(t){return console.error("Delete user failed:",t),!1}}return{dashboardStats:B,isLoadingDashboardStats:P,allUsers:S,isLoadingUsers:z,serviceStats:Ua,isLoadingServiceStats:Z,globalSettings:x,isLoadingSettings:M,aiBotSettings:F,isLoadingAiBotSettings:I,bindings:r,isLoadingBindings:C,availableBindingTypes:U,ttiBindings:l,isLoadingTtiBindings:O,availableTtiBindingTypes:D,ttsBindings:u,isLoadingTtsBindings:E,availableTtsBindingTypes:q,sttBindings:p,isLoadingSttBindings:G,availableSttBindingTypes:V,ttvBindings:f,isLoadingTtvBindings:j,availableTtvBindingTypes:J,ttmBindings:g,isLoadingTtmBindings:Q,availableTtmBindingTypes:K,ragBindings:m,isLoadingRagBindings:W,availableRagBindingTypes:H,availableRagVectorizers:X,zooRepositories:w,isLoadingZooRepositories:Y,mcpZooRepositories:h,isLoadingMcpZooRepositories:aa,promptZooRepositories:b,isLoadingPromptZooRepositories:ta,personalityZooRepositories:$,isLoadingPersonalityZooRepositories:ea,zooApps:na,isLoadingZooApps:ia,zooMcps:sa,isLoadingZooMcps:oa,zooPrompts:ca,isLoadingZooPrompts:da,zooPersonalities:ra,isLoadingZooPersonalities:la,installedApps:A,isLoadingInstalledApps:ua,systemStatus:Oa,isLoadingSystemStatus:pa,connectedUsers:fa,isLoadingConnectedUsers:ga,serverInfo:ma,isLoadingServerInfo:ya,globalGenerationStats:k,isLoadingGlobalGenerationStats:va,modelUsageStats:wa,isLoadingModelUsageStats:ha,funFacts:R,isLoadingFunFacts:ba,funFactCategories:_a,isLoadingFunFactCategories:Ta,newsArticles:$a,isLoadingNewsArticles:Ba,isImporting:Sa,isEnhancingEmail:za,adminAvailableLollmsModels:Aa,isLoadingLollmsModels:Ra,appFilters:Ea,mcpFilters:qa,promptFilters:Ga,systemLogs:Na,isLoadingSystemLogs:La,systemRequirements:Da,isLoadingRequirements:Fa,forceAllUsersConfig:at,fetchDashboardStats:lt,fetchConnectedUsers:ut,broadcastMessage:dt,createBackup:et,analyzeSystemLogs:nt,fetchServiceDashboard:Va,resetServiceUsage:tt,fetchSystemStatus:ja,killProcess:rt,fetchModelUsageStats:mt,fetchServerInfo:gt,purgeUnusedUploads:it,fetchAllUsers:Za,activateUser:Xn,fetchUserStats:Yn,batchUpdateUsers:ai,fetchGlobalGenerationStats:pt,fetchGlobalSettings:v,updateGlobalSettings:yt,fetchAiBotSettings:vt,updateAiBotSettings:wt,triggerBatchModeration:st,triggerFullRemoderation:ot,uploadWelcomeLogo:ni,removeWelcomeLogo:ii,uploadSslFile:si,importOpenWebUIData:ri,fetchAdminAvailableLollmsModels:li,generateIconForModel:ui,fetchBindings:ht,fetchAvailableBindingTypes:bt,addBinding:_t,updateBinding:Tt,deleteBinding:$t,fetchBindingModels:ae,getModelCtxSize:te,saveModelAlias:ee,deleteModelAlias:ne,executeBindingCommand:ie,fetchTtiBindings:Bt,fetchAvailableTtiBindingTypes:St,addTtiBinding:zt,updateTtiBinding:At,deleteTtiBinding:Rt,fetchTtiBindingModels:se,saveTtiModelAlias:oe,deleteTtiModelAlias:ce,executeTtiBindingCommand:de,fetchTtsBindings:Nt,fetchAvailableTtsBindingTypes:Lt,addTtsBinding:Ft,updateTtsBinding:kt,deleteTtsBinding:Pt,fetchTtsBindingModels:re,saveTtsModelAlias:le,deleteTtsModelAlias:ue,executeTtsBindingCommand:pe,fetchSttBindings:Zt,fetchAvailableSttBindingTypes:xt,addSttBinding:Mt,updateSttBinding:It,deleteSttBinding:Ct,fetchSttBindingModels:fe,saveSttModelAlias:ge,deleteSttModelAlias:me,executeSttBindingCommand:ye,fetchTtvBindings:Ut,fetchAvailableTtvBindingTypes:Ot,addTtvBinding:Dt,updateTtvBinding:Et,deleteTtvBinding:qt,fetchTtvBindingModels:ve,saveTtvModelAlias:we,deleteTtvModelAlias:he,executeTtvBindingCommand:be,fetchTtmBindings:Gt,fetchAvailableTtmBindingTypes:Vt,addTtmBinding:jt,updateTtmBinding:Jt,deleteTtmBinding:Qt,fetchTtmBindingModels:_e,saveTtmModelAlias:Te,deleteTtmModelAlias:$e,executeTtmBindingCommand:Be,fetchRagBindings:Kt,fetchAvailableRagBindingTypes:Wt,addRagBinding:Ht,updateRagBinding:Xt,deleteRagBinding:Yt,fetchRagBindingModels:Se,saveRagModelAlias:ze,deleteRagModelAlias:Ae,fetchRagModelsForType:Re,addOrUpdateRagAlias:Ne,deleteRagAlias:Le,fetchAvailableRagVectorizers:Fe,fetchZooRepositories:ke,addZooRepository:Pe,deleteZooRepository:Ze,pullZooRepository:Ja,pullAllZooRepositories:xe,fetchMcpZooRepositories:Me,addMcpZooRepository:Ie,deleteMcpZooRepository:Ce,pullMcpZooRepository:Qa,pullAllMcpZooRepositories:Ue,fetchPromptZooRepositories:Oe,addPromptZooRepository:De,deletePromptZooRepository:Ee,pullPromptZooRepository:Ka,pullAllPromptZooRepositories:qe,fetchPersonalityZooRepositories:Ge,addPersonalityZooRepository:Ve,deletePersonalityZooRepository:je,pullPersonalityZooRepository:Je,fetchZooApps:N,installZooApp:Qe,fetchAppReadme:Ke,fetchZooMcps:L,installZooMcp:We,fetchMcpReadme:He,fetchZooPrompts:ka,installZooPrompt:Xe,fetchPromptReadme:Ye,fetchZooPersonalities:Wa,installZooPersonality:an,fetchPersonalityReadme:tn,createSystemPrompt:mn,updateSystemPrompt:yn,deleteSystemPrompt:vn,updateSystemPromptFromZoo:wn,generateSystemPrompt:hn,fetchInstalledApps:Ha,fetchNextAvailablePort:bn,startApp:_n,stopApp:Tn,restartApp:$n,updateApp:Bn,uninstallApp:Sn,updateInstalledApp:zn,fetchAppLog:An,fetchAppConfigSchema:Rn,fetchAppConfig:Nn,updateAppConfig:Ln,fetchAppEnv:Fn,updateAppEnv:kn,deleteRegisteredApp:Pn,deleteRegisteredMcp:Zn,syncInstallations:xn,purgeBrokenInstallation:Mn,fixBrokenInstallation:In,handleAppStatusUpdate:Cn,fetchFunFacts:_,fetchFunFactCategories:T,createFunFact:Un,updateFunFact:On,deleteFunFact:Dn,createFunFactCategory:En,updateFunFactCategory:qn,deleteFunFactCategory:Gn,exportFunFacts:Vn,exportCategory:jn,importFunFacts:Jn,importCategoryFromFile:Qn,generateFunFacts:Kn,fetchNewsArticles:Pa,updateNewsArticle:Wn,deleteBatchNewsArticles:Hn,fetchSystemLogs:ft,sendEmailToUsers:ti,enhanceEmail:ei,triggerRssScraping:pi,refreshZooCache:fi,generateSelfSignedCert:oi,downloadCertificate:ci,downloadTrustScript:di,fetchBindingZoo:en,installLlmFromZoo:nn,fetchTtiBindingZoo:sn,installTtiFromZoo:on,fetchTtsBindingZoo:cn,installTtsFromZoo:dn,fetchSttBindingZoo:rn,installSttFromZoo:ln,fetchTtvBindingZoo:un,installTtvFromZoo:pn,fetchTtmBindingZoo:fn,installTtmFromZoo:gn,fetchModerationQueue:gi,approveContent:mi,deleteContent:yi,fetchRequirements:Xa,installRequirement:vi,fixAllRequirements:wi,sanitizeDatabase:ct,createUser:hi,deleteUser:bi}});export{Ri as u};
