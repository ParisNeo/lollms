const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["ui_assets/index-GJY6etPD.js","ui_assets/index-Bqe9chmy.css"])))=>i.map(i=>d[i]);
import{a7 as In,a as xn,a8 as Mn,r as s,a9 as Aa,w as za,aa as Cn,q as e,Y as Ra}from"./index-GJY6etPD.js";function Fa(o,r){try{const g=localStorage.getItem(o);if(g){const T=JSON.parse(g);return{...r,...T}}}catch{localStorage.removeItem(o)}return r}const Un=(o,r)=>{if(r==="boolean")return typeof o=="string"?o.toLowerCase()==="true":!!o;if(r==="integer"){const g=parseInt(o,10);return isNaN(g)?null:g}if(r==="float"){const g=parseFloat(o);return isNaN(g)?null:g}return o},En=In("admin",()=>{const o=xn(),r=Mn(),{on:g}=Cn(),T=s(null),L=s(!1),La=s([]),k=s(!1),N=s([]),P=s(!1),A=s(null),Z=s(!1),l=s([]),I=s(!1),x=s([]),d=s([]),M=s(!1),C=s([]),u=s([]),U=s(!1),O=s([]),p=s([]),E=s(!1),D=s([]),f=s([]),G=s(!1),j=s([]),V=s([]),y=s([]),J=s(!1),v=s([]),Q=s(!1),w=s([]),K=s(!1),h=s([]),W=s(!1),z=s({items:[],total:0,pages:1,categories:[]}),q=s(!1),R=s({items:[],total:0,pages:1,categories:[]}),Y=s(!1),H=s({items:[],total:0,pages:1,categories:[]}),X=s(!1),aa=s({items:[],total:0,pages:1,categories:[]}),ta=s(!1),ea=s([]),na=s(!1),ka=s(null),ia=s(!1),sa=s([]),oa=s(!1),ca=s(null),ra=s(!1),F=s(null),la=s(!1),da=s([]),ua=s(!1),$=s([]),pa=s(!1),fa=s([]),ga=s(!1),ma=s([]),ya=s(!1),va=s(!1),wa=s(!1),ha=s([]),_a=s(!1),ba=s([]),Ta=s(!1),Na=Aa(Fa("lollms-app-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"last_update_date",sortOrder:"desc",currentPage:1,pageSize:24})),Pa=Aa(Fa("lollms-mcp-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"last_update_date",sortOrder:"desc",currentPage:1,pageSize:24})),Za=Aa(Fa("lollms-prompt-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"name",sortOrder:"asc",currentPage:1,pageSize:24}));za(Na,a=>{localStorage.setItem("lollms-app-filters",JSON.stringify(a))},{deep:!0}),za(Pa,a=>{localStorage.setItem("lollms-mcp-filters",JSON.stringify(a))},{deep:!0}),za(Za,a=>{localStorage.setItem("lollms-prompt-filters",JSON.stringify(a))},{deep:!0});async function Oa(a){var n;if(!a||!["completed","failed","cancelled"].includes(a.status))return;const t=(a.name||"").toLowerCase();if((t.includes("app")||t.includes("mcp"))&&(S(!0),B(!0)),t.includes("prompt")&&$a({},!0),t.includes("personality")&&Ua({},!0),t.includes("purge unused temporary files")&&a.status==="completed"){const i=((n=a.result)==null?void 0:n.message)||"Purge completed successfully.";o.addNotification(i,"success",6e3)}t.includes("generate self-signed certificate")&&a.status==="completed"&&(m(!0),o.addNotification("Certificate generated successfully. Reloading settings...","success",6e3)),t.includes("content")&&a.status==="completed"&&o.addNotification("Moderation task completed.","success",6e3)}g("task:completed",Oa);function Ea(a){const t=n=>{if(Array.isArray(n)){const i=n.findIndex(c=>c.id===a.id);i!==-1&&Object.assign(n[i],a)}};a.item_type==="app"?t(z.value.items):a.item_type==="mcp"&&t(R.value.items)}async function Da(a){const t=await e.post("/api/admin/backup/create",{password:a});return r.addTask(t.data),t.data}async function Ga(){try{const a=await e.post("/api/admin/system/analyze-logs");return r.addTask(a.data),a.data}catch(a){throw o.addNotification("Failed to start log analysis.","error"),a}}async function ja(){const a=await e.post("/api/admin/purge-unused-uploads");r.addTask(a.data)}async function Va(){const a=await e.post("/api/admin/trigger-moderation");r.addTask(a.data)}async function Ja(){const a=await e.post("/api/admin/trigger-full-remoderation");r.addTask(a.data)}async function Qa(a){await e.post("/api/admin/broadcast",{message:a})}async function Ka(a){await e.post("/api/admin/system/kill-process",{pid:a}),o.addNotification(`Process ${a} killed.`,"success"),Ia()}async function Wa(){L.value=!0;try{const a=await e.get("/api/admin/stats");T.value=a.data}catch{T.value=null}finally{L.value=!1}}async function qa(){oa.value=!0;try{const a=await e.get("/api/admin/ws-connections");sa.value=a.data}catch{sa.value=[]}finally{oa.value=!1}}async function Ya(){if(!F.value){la.value=!0;try{const a=await e.get("/api/admin/global-generation-stats");F.value=a.data}catch{F.value=null}finally{la.value=!1}}}async function Ia(){ia.value=!0;try{const a=await e.get("/api/admin/system-status");ka.value=a.data}finally{ia.value=!1}}async function Ha(a=!1){if(!(!a&&ba.value.length>0)){Ta.value=!0;try{const t=await e.get("/api/admin/system/logs");ba.value=t.data}catch{o.addNotification("Failed to fetch system logs.","error")}finally{Ta.value=!1}}}async function Xa(){if(!ca.value){ra.value=!0;try{const a=await e.get("/api/admin/server-info");ca.value=a.data}finally{ra.value=!1}}}async function at(){ua.value=!0;try{const a=await e.get("/api/admin/model-usage-stats");da.value=a.data||[]}catch(a){console.error("Failed to fetch model usage stats:",a),da.value=[]}finally{ua.value=!1}}async function m(a=!1){if(!(!a&&N.value.length>0)){P.value=!0;try{const t=await e.get("/api/admin/settings");N.value=t.data.map(n=>({...n,value:Un(n.value,n.type)}))}finally{P.value=!1}}}async function tt(a){await e.put("/api/admin/settings",{configs:a}),await m(!0),o.addNotification("Settings updated.","success")}async function et(a=!1){if(!(!a&&A.value)){Z.value=!0;try{const t=await e.get("/api/admin/ai-bot-settings");A.value=t.data}finally{Z.value=!1}}}async function nt(a){const t=await e.put("/api/admin/ai-bot-settings",a);A.value=t.data,o.addNotification("AI Bot user settings updated.","success")}async function it(a=!1){if(!(!a&&l.value.length>0)){I.value=!0;try{const t=await e.get("/api/admin/bindings");l.value=t.data}finally{I.value=!1}}}async function st(a=!1){if(!a&&x.value.length>0)return;const t=await e.get("/api/admin/bindings/available_types");x.value=t.data}async function ot(a){const t=await e.post("/api/admin/bindings",a);l.value.push(t.data),o.addNotification(`Binding '${t.data.alias}' created.`,"success")}async function ct(a,t){const n=await e.put(`/api/admin/bindings/${a}`,t),i=l.value.findIndex(c=>c.id===a);i!==-1&&(l.value[i]=n.data),o.addNotification(`Binding '${n.data.alias}' updated.`,"success")}async function rt(a){await e.delete(`/api/admin/bindings/${a}`),l.value=l.value.filter(t=>t.id!==a),o.addNotification("Binding deleted.","success")}async function lt(a=!1){if(!(!a&&d.value.length>0)){M.value=!0;try{const t=await e.get("/api/admin/tti-bindings");d.value=t.data}finally{M.value=!1}}}async function dt(a=!1){if(!a&&C.value.length>0)return;const t=await e.get("/api/admin/tti-bindings/available_types");C.value=t.data}async function ut(a){const t=await e.post("/api/admin/tti-bindings",a);d.value.push(t.data),o.addNotification(`TTI Binding '${t.data.alias}' created.`,"success")}async function pt(a,t){const n=await e.put(`/api/admin/tti-bindings/${a}`,t),i=d.value.findIndex(c=>c.id===a);i!==-1&&(d.value[i]=n.data),o.addNotification(`TTI Binding '${n.data.alias}' updated.`,"success")}async function ft(a){await e.delete(`/api/admin/tti-bindings/${a}`),d.value=d.value.filter(t=>t.id!==a),o.addNotification("TTI Binding deleted.","success")}async function gt(a=!1){if(!(!a&&u.value.length>0)){U.value=!0;try{const t=await e.get("/api/admin/tts-bindings");u.value=t.data}finally{U.value=!1}}}async function mt(a=!1){if(!a&&O.value.length>0)return;const t=await e.get("/api/admin/tts-bindings/available_types");O.value=t.data}async function yt(a){const t=await e.post("/api/admin/tts-bindings",a);u.value.push(t.data),o.addNotification(`TTS Binding '${t.data.alias}' created.`,"success")}async function vt(a,t){const n=await e.put(`/api/admin/tts-bindings/${a}`,t),i=u.value.findIndex(c=>c.id===a);i!==-1&&(u.value[i]=n.data),o.addNotification(`TTS Binding '${n.data.alias}' updated.`,"success")}async function wt(a){await e.delete(`/api/admin/tts-bindings/${a}`),u.value=u.value.filter(t=>t.id!==a),o.addNotification("TTS Binding deleted.","success")}async function ht(a=!1){if(!(!a&&p.value.length>0)){E.value=!0;try{const t=await e.get("/api/admin/stt-bindings");p.value=t.data}finally{E.value=!1}}}async function _t(a=!1){if(!a&&D.value.length>0)return;const t=await e.get("/api/admin/stt-bindings/available_types");D.value=t.data}async function bt(a){const t=await e.post("/api/admin/stt-bindings",a);p.value.push(t.data),o.addNotification(`STT Binding '${t.data.alias}' created.`,"success")}async function Tt(a,t){const n=await e.put(`/api/admin/stt-bindings/${a}`,t),i=p.value.findIndex(c=>c.id===a);i!==-1&&(p.value[i]=n.data),o.addNotification(`STT Binding '${n.data.alias}' updated.`,"success")}async function $t(a){await e.delete(`/api/admin/stt-bindings/${a}`),p.value=p.value.filter(t=>t.id!==a),o.addNotification("STT Binding deleted.","success")}async function St(a=!1){if(!(!a&&f.value.length>0)){G.value=!0;try{const t=await e.get("/api/admin/rag-bindings");f.value=t.data}catch(t){console.error(t)}finally{G.value=!1}}}async function Bt(a=!1){if(!(!a&&j.value.length>0))try{const t=await e.get("/api/admin/rag-bindings/available_types");j.value=t.data}catch(t){console.error(t)}}async function At(a){const t=await e.post("/api/admin/rag-bindings",a);f.value.push(t.data),o.addNotification(`RAG Binding '${t.data.alias}' created.`,"success")}async function zt(a,t){const n=await e.put(`/api/admin/rag-bindings/${a}`,t),i=f.value.findIndex(c=>c.id===a);i!==-1&&(f.value[i]=n.data),o.addNotification(`RAG Binding '${n.data.alias}' updated.`,"success")}async function Rt(a){await e.delete(`/api/admin/rag-bindings/${a}`),f.value=f.value.filter(t=>t.id!==a),o.addNotification("RAG Binding deleted.","success")}async function Ft(a){return(await e.get(`/api/admin/bindings/${a}/models`)).data}async function Lt(a,t){return(await e.post(`/api/admin/bindings/${a}/context-size`,{model_name:t})).data.ctx_size}async function kt(a,t){const n=await e.put(`/api/admin/bindings/${a}/alias`,t),i=l.value.findIndex(c=>c.id===a);i!==-1&&(l.value[i]=n.data)}async function Nt(a,t){const n=await e.delete(`/api/admin/bindings/${a}/alias`,{data:{original_model_name:t}}),i=l.value.findIndex(c=>c.id===a);i!==-1&&(l.value[i]=n.data)}async function Pt(a,t,n={}){return(await e.post(`/api/admin/bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function Zt(a){return(await e.get(`/api/admin/tti-bindings/${a}/models`)).data}async function It(a,t){const n=await e.put(`/api/admin/tti-bindings/${a}/alias`,t),i=d.value.findIndex(c=>c.id===a);i!==-1&&(d.value[i]=n.data)}async function xt(a,t){const n=await e.delete(`/api/admin/tti-bindings/${a}/alias`,{data:{original_model_name:t}}),i=d.value.findIndex(c=>c.id===a);i!==-1&&(d.value[i]=n.data)}async function Mt(a,t,n={}){return(await e.post(`/api/admin/tti-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function Ct(a){return(await e.get(`/api/admin/tts-bindings/${a}/models`)).data}async function Ut(a,t){const n=await e.put(`/api/admin/tts-bindings/${a}/alias`,t),i=u.value.findIndex(c=>c.id===a);i!==-1&&(u.value[i]=n.data)}async function Ot(a,t){const n=await e.delete(`/api/admin/tts-bindings/${a}/alias`,{data:{original_model_name:t}}),i=u.value.findIndex(c=>c.id===a);i!==-1&&(u.value[i]=n.data)}async function Et(a,t,n={}){return(await e.post(`/api/admin/tts-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function Dt(a){return(await e.get(`/api/admin/stt-bindings/${a}/models`)).data}async function Gt(a,t){const n=await e.put(`/api/admin/stt-bindings/${a}/alias`,t),i=p.value.findIndex(c=>c.id===a);i!==-1&&(p.value[i]=n.data)}async function jt(a,t){const n=await e.delete(`/api/admin/stt-bindings/${a}/alias`,{data:{original_model_name:t}}),i=p.value.findIndex(c=>c.id===a);i!==-1&&(p.value[i]=n.data)}async function Vt(a,t,n={}){return(await e.post(`/api/admin/stt-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function Jt(a){return(await e.get(`/api/admin/rag-bindings/${a}/models`)).data}async function Qt(a,t){const n=await e.put(`/api/admin/rag-bindings/${a}/alias`,t),i=f.value.findIndex(c=>c.id===a);i!==-1&&(f.value[i]=n.data)}async function Kt(a,t){const n=await e.delete(`/api/admin/rag-bindings/${a}/alias`,{data:{original_model_name:t}}),i=f.value.findIndex(c=>c.id===a);i!==-1&&(f.value[i]=n.data)}async function Wt(a){return(await e.get(`/api/admin/rag-bindings/models-for-type/${a}`)).data}async function qt(a){await e.post("/api/admin/rag/aliases",a),await m(!0),o.addNotification(`Alias '${a.alias_name}' saved.`,"success")}async function Yt(a){await e.delete("/api/admin/rag/aliases",{data:{alias_name:a}}),await m(!0),o.addNotification(`Alias '${a}' deleted.`,"success")}async function Ht(a=!1){if(!(!a&&V.value.length>0))try{const t=await e.get("/api/admin/rag/available-vectorizers");V.value=t.data}catch(t){console.error(t)}}async function Xt(a=!1){if(!(!a&&y.value.length>0)){J.value=!0;try{const t=await e.get("/api/apps_zoo/repositories");y.value=t.data}finally{J.value=!1}}}async function ae(a){const t=await e.post("/api/apps_zoo/repositories",a);y.value.push(t.data)}async function te(a){await e.delete(`/api/apps_zoo/repositories/${a}`),y.value=y.value.filter(t=>t.id!==a)}async function xa(a){const t=await e.post(`/api/apps_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function ee(){for(const a of y.value)await xa(a.id)}async function ne(a=!1){if(!(!a&&v.value.length>0)){Q.value=!0;try{const t=await e.get("/api/mcps_zoo/repositories");v.value=t.data}finally{Q.value=!1}}}async function ie(a){const t=await e.post("/api/mcps_zoo/repositories",a);v.value.push(t.data)}async function se(a){await e.delete(`/api/mcps_zoo/repositories/${a}`),v.value=v.value.filter(t=>t.id!==a)}async function Ma(a){const t=await e.post(`/api/mcps_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function oe(){for(const a of v.value)await Ma(a.id)}async function ce(a=!1){if(!(!a&&w.value.length>0)){K.value=!0;try{const t=await e.get("/api/prompts_zoo/repositories");w.value=t.data}finally{K.value=!1}}}async function re(a){const t=await e.post("/api/prompts_zoo/repositories",a);w.value.push(t.data)}async function le(a){await e.delete(`/api/prompts_zoo/repositories/${a}`),w.value=w.value.filter(t=>t.id!==a)}async function Ca(a){const t=await e.post(`/api/prompts_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function de(){for(const a of w.value)await Ca(a.id)}async function ue(a=!1){if(!(!a&&h.value.length>0)){W.value=!0;try{const t=await e.get("/api/personalities_zoo/repositories");h.value=t.data}catch(t){console.error(t)}finally{W.value=!1}}}async function pe(a){const t=await e.post("/api/personalities_zoo/repositories",a);h.value.push(t.data)}async function fe(a){await e.delete(`/api/personalities_zoo/repositories/${a}`),h.value=h.value.filter(t=>t.id!==a)}async function ge(a){const t=await e.post(`/api/personalities_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function S(a=!1){if(!(!a&&z.value.items.length>0)){q.value=!0;try{const[t,n]=await Promise.all([e.get("/api/apps_zoo/categories"),e.get("/api/apps_zoo/available")]);z.value={...n.data,categories:t.data}}finally{q.value=!1}}}async function me(a){const t=await e.post("/api/apps_zoo/install",a);r.addTask(t.data)}async function ye(a,t){return(await e.get("/api/apps_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function B(a=!1){if(!(!a&&R.value.items.length>0)){Y.value=!0;try{const[t,n]=await Promise.all([e.get("/api/mcps_zoo/categories"),e.get("/api/mcps_zoo/available")]);R.value={...n.data,categories:t.data}}finally{Y.value=!1}}}async function ve(a){const t=await e.post("/api/mcps_zoo/install",a);r.addTask(t.data)}async function we(a,t){return(await e.get("/api/mcps_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function $a(a={},t=!1){if(!(!t&&H.value.items.length>0)){X.value=!0;try{const[n,i]=await Promise.all([e.get("/api/prompts_zoo/categories"),e.get("/api/prompts_zoo/available",{params:a})]);H.value={...i.data,categories:n.data}}finally{X.value=!1}}}async function he(a){const t=await e.post("/api/prompts_zoo/install",a);r.addTask(t.data)}async function _e(a,t){return(await e.get("/api/prompts_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function Ua(a={},t=!1){if(!(!t&&aa.value.items.length>0)){ta.value=!0;try{const[n,i]=await Promise.all([e.get("/api/personalities_zoo/categories"),e.get("/api/personalities_zoo/available",{params:a})]);aa.value={...i.data,categories:n.data}}catch(n){console.error(n)}finally{ta.value=!1}}}async function be(a){const t=await e.post("/api/personalities_zoo/install",a);r.addTask(t.data)}async function Te(a,t){return(await e.get("/api/personalities_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function $e(a){return(await e.get(`/api/admin/bindings/${a}/zoo`)).data}async function Se(a,t){const n=await e.post(`/api/admin/bindings/${a}/zoo/install`,{index:t});return r.addTask(n.data),n.data}async function Be(a){return(await e.get(`/api/admin/tti-bindings/${a}/zoo`)).data}async function Ae(a,t){const n=await e.post(`/api/admin/tti-bindings/${a}/zoo/install`,{index:t});return r.addTask(n.data),n.data}async function ze(a){return(await e.get(`/api/admin/tts-bindings/${a}/zoo`)).data}async function Re(a,t){const n=await e.post(`/api/admin/tts-bindings/${a}/zoo/install`,{index:t});return r.addTask(n.data),n.data}async function Fe(a){return(await e.get(`/api/admin/stt-bindings/${a}/zoo`)).data}async function Le(a,t){const n=await e.post(`/api/admin/stt-bindings/${a}/zoo/install`,{index:t});return r.addTask(n.data),n.data}async function ke(a){const{usePromptsStore:t}=await Ra(async()=>{const{usePromptsStore:i}=await import("./index-GJY6etPD.js").then(c=>c.ev);return{usePromptsStore:i}},__vite__mapDeps([0,1])),n=await e.post("/api/prompts_zoo/installed",a);return await t().fetchPrompts(),n.data}async function Ne(a,t){const{usePromptsStore:n}=await Ra(async()=>{const{usePromptsStore:i}=await import("./index-GJY6etPD.js").then(c=>c.ev);return{usePromptsStore:i}},__vite__mapDeps([0,1]));await e.put(`/api/prompts_zoo/installed/${a}`,t),await n().fetchPrompts()}async function Pe(a){const{usePromptsStore:t}=await Ra(async()=>{const{usePromptsStore:n}=await import("./index-GJY6etPD.js").then(i=>i.ev);return{usePromptsStore:n}},__vite__mapDeps([0,1]));await e.delete(`/api/prompts_zoo/installed/${a}`),await t().fetchPrompts(),await $a({},!0)}async function Ze(a){const t=await e.post(`/api/prompts_zoo/installed/${a}/update`);r.addTask(t.data)}async function Ie(a){const t=await e.post("/api/prompts_zoo/generate_from_prompt",{prompt:a});return r.addTask(t.data),t.data}async function xe(a=!1){if(!(!a&&ea.value.length>0)){na.value=!0;try{const t=await e.get("/api/apps_zoo/installed");ea.value=t.data}finally{na.value=!1}}}async function Me(a=null){const t=a?{port:a}:{};return(await e.get("/api/apps_zoo/get-next-available-port",{params:t})).data.port}async function Ce(a){const t=await e.post(`/api/apps_zoo/installed/${a}/start`);r.addTask(t.data)}async function Ue(a){const t=await e.post(`/api/apps_zoo/installed/${a}/stop`);r.addTask(t.data)}async function Oe(a){const t=await e.post(`/api/apps_zoo/installed/${a}/restart`);r.addTask(t.data)}async function Ee(a){const t=await e.post(`/api/apps_zoo/installed/${a}/update`);r.addTask(t.data)}async function De(a){await e.delete(`/api/apps_zoo/installed/${a}`),await S(!0),await B(!0),o.addNotification("Item uninstalled.","success")}async function Ge(a,t){await e.put(`/api/apps_zoo/installed/${a}`,t),await S(!0),await B(!0)}async function je(a){return(await e.get(`/api/apps_zoo/installed/${a}/logs`)).data.log_content}async function Ve(a){return(await e.get(`/api/apps_zoo/installed/${a}/config-schema`)).data}async function Je(a){return(await e.get(`/api/apps_zoo/installed/${a}/config`)).data}async function Qe(a,t){await e.put(`/api/apps_zoo/installed/${a}/config`,t)}async function Ke(a){return(await e.get(`/api/apps_zoo/installed/${a}/env`)).data}async function We(a,t){await e.put(`/api/apps_zoo/installed/${a}/env`,{content:t}),o.addNotification(".env file saved.","success")}async function qe(a){await e.delete(`/api/apps/${a}`),await S(!0),o.addNotification("App registration removed.","success")}async function Ye(a){await e.delete(`/api/mcps/${a}`),await B(!0),o.addNotification("MCP registration removed.","success")}async function He(){const a=await e.post("/api/apps_zoo/sync-installs");r.addTask(a.data)}async function Xe(a){const t=await e.post("/api/apps_zoo/purge-broken",{item_type:a.item_type||"app",folder_name:a.folder_name});r.addTask(t.data)}async function an(a){const t=await e.post("/api/apps_zoo/fix-broken",{item_type:a.item_type||"app",folder_name:a.folder_name});r.addTask(t.data)}async function _(a=!1){if(!(!a&&$.value.length>0)){pa.value=!0;try{const t=await e.get("/api/admin/fun-facts");$.value=t.data}finally{pa.value=!1}}}async function b(a=!1){if(!(!a&&fa.value.length>0)){ga.value=!0;try{const t=await e.get("/api/admin/fun-facts/categories");fa.value=t.data}finally{ga.value=!1}}}async function tn(a){await e.post("/api/admin/fun-facts",a),await _(!0)}async function en(a,t){await e.put(`/api/admin/fun-facts/${a}`,t),await _(!0)}async function nn(a){await e.delete(`/api/admin/fun-facts/${a}`),$.value=$.value.filter(t=>t.id!==a)}async function sn(a){await e.post("/api/admin/fun-facts/categories",a),await b(!0)}async function on(a,t){await e.put(`/api/admin/fun-facts/categories/${a}`,t),await b(!0)}async function cn(a){await e.delete(`/api/admin/fun-facts/categories/${a}`),await Promise.all([b(!0),_(!0)])}async function rn(){const a=await e.get("/api/admin/fun-facts/export",{responseType:"blob"}),t=URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=t,n.download="fun_facts_export.json",n.click(),URL.revokeObjectURL(t)}async function ln(a,t){const n=await e.get(`/api/admin/fun-facts/categories/${a}/export`,{responseType:"blob"}),i=URL.createObjectURL(new Blob([n.data])),c=document.createElement("a");c.href=i,c.download=`fun_facts_${t}.json`,c.click(),URL.revokeObjectURL(i)}async function dn(a){const t={fun_facts:a},n=await e.post("/api/admin/fun-facts/import",t);await Promise.all([_(!0),b(!0)]),o.addNotification(`Imported ${n.data.facts_created} facts and ${n.data.categories_created} new categories.`,"success")}async function un(a){const t=new FormData;t.append("file",a);const n=await e.post("/api/admin/fun-facts/categories/import",t);await Promise.all([_(!0),b(!0)]),o.addNotification(`Imported ${n.data.facts_created} facts for category.`,"success")}async function pn(a,t){const n=await e.post("/api/admin/fun-facts/generate-from-prompt",{prompt:a,category:t});return r.addTask(n.data),n.data}async function Sa(a=!1){if(!(!a&&ma.value.length>0)){ya.value=!0;try{const t=await e.get("/api/admin/news-articles");ma.value=t.data}finally{ya.value=!1}}}async function fn(a,t){await e.put(`/api/admin/news-articles/${a}`,t),await Sa(!0),o.addNotification("Article updated.","success")}async function gn(a){await e.post("/api/admin/news-articles/batch-delete",{article_ids:a}),await Sa(!0),o.addNotification(`${a.length} article(s) deleted.`,"success")}async function Ba(a={}){k.value=!0;try{const t=await e.get("/api/admin/users",{params:a});La.value=t.data}finally{k.value=!1}}async function mn(a){await e.post(`/api/admin/users/${a}/activate`),o.addNotification("User activated.","success"),Ba()}async function yn(a){try{return(await e.get(`/api/admin/users/${a}/stats`)).data}catch{return null}}async function vn(a){await e.post("/api/admin/users/batch-update-settings",a),await Ba()}async function wn(a,t,n,i,c){const Zn=await e.post("/api/admin/email-users",{subject:a,body:t,user_ids:n,background_color:i,send_as_text:c});return r.addTask(Zn.data),!0}async function hn(a,t,n,i){wa.value=!0;try{return(await e.post("/api/admin/enhance-email",{subject:a,body:t,background_color:n,prompt:i})).data}finally{wa.value=!1}}async function _n(a){const t=new FormData;t.append("file",a);const n=await e.post("/api/admin/upload-logo",t);await m(!0),o.addNotification(n.data.message,"success")}async function bn(){await e.delete("/api/admin/remove-logo"),await m(!0),o.addNotification("Custom logo removed.","success")}async function Tn(a,t){const n=new FormData;n.append("file",a),n.append("file_type",t);const i=await e.post("/api/admin/upload-ssl-file",n,{headers:{"Content-Type":"multipart/form-data"}});return await m(!0),i.data.path}async function $n(){var a,t;try{const n=await e.post("/api/admin/generate-cert");return r.addTask(n.data),o.addNotification("Certificate generation task started. Check tasks for progress.","info"),n.data}catch(n){const i=((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.detail)||"Failed to start certificate task.";throw o.addNotification(i,"error"),n}}async function Sn(){try{const a=await e.get("/api/admin/download-cert",{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","lollms_cert.pem"),document.body.appendChild(n),n.click(),n.remove()}catch{o.addNotification("Failed to download certificate.","error")}}async function Bn(a){try{const t=await e.get("/api/admin/download-trust-script",{params:{script_type:a},responseType:"blob"}),n=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=n;const c=a==="windows"?"bat":"sh";i.setAttribute("download",`install_lollms_cert.${c}`),document.body.appendChild(i),i.click(),i.remove()}catch(t){console.error(t),o.addNotification("Failed to download trust script.","error")}}async function An(a){va.value=!0;const t=new FormData;t.append("file",a);try{await e.post("/api/admin/import-openwebui",t)}finally{va.value=!1}}async function zn(a=!1){if(!(!a&&ha.value.length>0)){_a.value=!0;try{const t=await e.get("/api/admin/available-models");ha.value=t.data}finally{_a.value=!1}}}async function Rn(a){const t=await e.post("/api/admin/bindings/generate_icon",{prompt:a});return r.addTask(t.data),t.data}async function Fn(){const a=await e.post("/api/admin/rss-feeds/scrape");return r.addTask(a.data),a.data}async function Ln(){const a=await e.post("/api/admin/refresh-zoo-cache");return r.addTask(a.data),a.data}async function kn(a=null){const t={};return a&&(t.status_filter=a),(await e.get("/api/admin/moderation/queue",{params:t})).data}async function Nn(a,t){await e.post(`/api/admin/moderation/${a}/${t}/approve`)}async function Pn(a,t){await e.delete(`/api/admin/moderation/${a}/${t}`)}return{dashboardStats:T,isLoadingDashboardStats:L,allUsers:La,isLoadingUsers:k,globalSettings:N,isLoadingSettings:P,aiBotSettings:A,isLoadingAiBotSettings:Z,bindings:l,isLoadingBindings:I,availableBindingTypes:x,ttiBindings:d,isLoadingTtiBindings:M,availableTtiBindingTypes:C,ttsBindings:u,isLoadingTtsBindings:U,availableTtsBindingTypes:O,sttBindings:p,isLoadingSttBindings:E,availableSttBindingTypes:D,ragBindings:f,isLoadingRagBindings:G,availableRagBindingTypes:j,availableRagVectorizers:V,zooRepositories:y,isLoadingZooRepositories:J,mcpZooRepositories:v,isLoadingMcpZooRepositories:Q,promptZooRepositories:w,isLoadingPromptZooRepositories:K,personalityZooRepositories:h,isLoadingPersonalityZooRepositories:W,zooApps:z,isLoadingZooApps:q,zooMcps:R,isLoadingZooMcps:Y,zooPrompts:H,isLoadingZooPrompts:X,zooPersonalities:aa,isLoadingZooPersonalities:ta,installedApps:ea,isLoadingInstalledApps:na,systemStatus:ka,isLoadingSystemStatus:ia,connectedUsers:sa,isLoadingConnectedUsers:oa,serverInfo:ca,isLoadingServerInfo:ra,globalGenerationStats:F,isLoadingGlobalGenerationStats:la,modelUsageStats:da,isLoadingModelUsageStats:ua,funFacts:$,isLoadingFunFacts:pa,funFactCategories:fa,isLoadingFunFactCategories:ga,newsArticles:ma,isLoadingNewsArticles:ya,isImporting:va,isEnhancingEmail:wa,adminAvailableLollmsModels:ha,isLoadingLollmsModels:_a,appFilters:Na,mcpFilters:Pa,promptFilters:Za,systemLogs:ba,isLoadingSystemLogs:Ta,fetchDashboardStats:Wa,fetchConnectedUsers:qa,broadcastMessage:Qa,createBackup:Da,analyzeSystemLogs:Ga,fetchSystemStatus:Ia,killProcess:Ka,fetchModelUsageStats:at,fetchServerInfo:Xa,purgeUnusedUploads:ja,fetchAllUsers:Ba,activateUser:mn,fetchUserStats:yn,batchUpdateUsers:vn,fetchGlobalGenerationStats:Ya,fetchGlobalSettings:m,updateGlobalSettings:tt,fetchAiBotSettings:et,updateAiBotSettings:nt,triggerBatchModeration:Va,triggerFullRemoderation:Ja,uploadWelcomeLogo:_n,removeWelcomeLogo:bn,uploadSslFile:Tn,importOpenWebUIData:An,fetchAdminAvailableLollmsModels:zn,generateIconForModel:Rn,fetchBindings:it,fetchAvailableBindingTypes:st,addBinding:ot,updateBinding:ct,deleteBinding:rt,fetchBindingModels:Ft,getModelCtxSize:Lt,saveModelAlias:kt,deleteModelAlias:Nt,executeBindingCommand:Pt,fetchTtiBindings:lt,fetchAvailableTtiBindingTypes:dt,addTtiBinding:ut,updateTtiBinding:pt,deleteTtiBinding:ft,fetchTtiBindingModels:Zt,saveTtiModelAlias:It,deleteTtiModelAlias:xt,executeTtiBindingCommand:Mt,fetchTtsBindings:gt,fetchAvailableTtsBindingTypes:mt,addTtsBinding:yt,updateTtsBinding:vt,deleteTtsBinding:wt,fetchTtsBindingModels:Ct,saveTtsModelAlias:Ut,deleteTtsModelAlias:Ot,executeTtsBindingCommand:Et,fetchSttBindings:ht,fetchAvailableSttBindingTypes:_t,addSttBinding:bt,updateSttBinding:Tt,deleteSttBinding:$t,fetchSttBindingModels:Dt,saveSttModelAlias:Gt,deleteSttModelAlias:jt,executeSttBindingCommand:Vt,fetchRagBindings:St,fetchAvailableRagBindingTypes:Bt,addRagBinding:At,updateRagBinding:zt,deleteRagBinding:Rt,fetchRagBindingModels:Jt,saveRagModelAlias:Qt,deleteRagModelAlias:Kt,fetchRagModelsForType:Wt,addOrUpdateRagAlias:qt,deleteRagAlias:Yt,fetchAvailableRagVectorizers:Ht,fetchZooRepositories:Xt,addZooRepository:ae,deleteZooRepository:te,pullZooRepository:xa,pullAllZooRepositories:ee,fetchMcpZooRepositories:ne,addMcpZooRepository:ie,deleteMcpZooRepository:se,pullMcpZooRepository:Ma,pullAllMcpZooRepositories:oe,fetchPromptZooRepositories:ce,addPromptZooRepository:re,deletePromptZooRepository:le,pullPromptZooRepository:Ca,pullAllPromptZooRepositories:de,fetchPersonalityZooRepositories:ue,addPersonalityZooRepository:pe,deletePersonalityZooRepository:fe,pullPersonalityZooRepository:ge,fetchZooApps:S,installZooApp:me,fetchAppReadme:ye,fetchZooMcps:B,installZooMcp:ve,fetchMcpReadme:we,fetchZooPrompts:$a,installZooPrompt:he,fetchPromptReadme:_e,fetchZooPersonalities:Ua,installZooPersonality:be,fetchPersonalityReadme:Te,createSystemPrompt:ke,updateSystemPrompt:Ne,deleteSystemPrompt:Pe,updateSystemPromptFromZoo:Ze,generateSystemPrompt:Ie,fetchInstalledApps:xe,fetchNextAvailablePort:Me,startApp:Ce,stopApp:Ue,restartApp:Oe,updateApp:Ee,uninstallApp:De,updateInstalledApp:Ge,fetchAppLog:je,fetchAppConfigSchema:Ve,fetchAppConfig:Je,updateAppConfig:Qe,fetchAppEnv:Ke,updateAppEnv:We,deleteRegisteredApp:qe,deleteRegisteredMcp:Ye,syncInstallations:He,purgeBrokenInstallation:Xe,fixBrokenInstallation:an,handleAppStatusUpdate:Ea,fetchFunFacts:_,fetchFunFactCategories:b,createFunFact:tn,updateFunFact:en,deleteFunFact:nn,createFunFactCategory:sn,updateFunFactCategory:on,deleteFunFactCategory:cn,exportFunFacts:rn,exportCategory:ln,importFunFacts:dn,importCategoryFromFile:un,generateFunFacts:pn,fetchNewsArticles:Sa,updateNewsArticle:fn,deleteBatchNewsArticles:gn,fetchSystemLogs:Ha,sendEmailToUsers:wn,enhanceEmail:hn,triggerRssScraping:Fn,refreshZooCache:Ln,generateSelfSignedCert:$n,downloadCertificate:Sn,downloadTrustScript:Bn,fetchBindingZoo:$e,installLlmFromZoo:Se,fetchTtiBindingZoo:Be,installTtiFromZoo:Ae,fetchTtsBindingZoo:ze,installTtsFromZoo:Re,fetchSttBindingZoo:Fe,installSttFromZoo:Le,fetchModerationQueue:kn,approveContent:Nn,deleteContent:Pn}});export{En as useAdminStore};
