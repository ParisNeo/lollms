import{u as R,an as S,L as f,j as C,c as L,e as n,o as r,b as e,T as N,a7 as I,d as l,f as x,m as k,J as b,at as M,F as V,n as $,t as c,l as h,O as B,a as T,aB as A,ao as U}from"./index-DsFmVrVf.js";import{u as j}from"./admin-k6sJF1Lm.js";const F={class:"space-y-6"},D={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},O={class:"flex items-center gap-2"},P=["disabled"],z={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden border dark:border-gray-700"},E={class:"overflow-x-auto"},J={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Q={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},G={key:0},H={key:1},K={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},W={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 font-mono"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 font-mono"},Y={class:"px-6 py-4 whitespace-nowrap"},Z={key:0,class:"text-[10px] text-orange-500 mt-1 flex items-center"},q={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ee={class:"flex justify-end gap-2"},te=["onClick","disabled"],ae={key:1},se=["onClick","disabled"],ie={__name:"RequirementsManagement",setup(re){const i=j(),g=R(),{systemRequirements:m,isLoadingRequirements:u}=S(i),d=f(""),o=f(null);C(()=>{i.fetchRequirements()});const p=L(()=>{if(!d.value)return m.value;const s=d.value.toLowerCase();return m.value.filter(t=>t.name.toLowerCase().includes(s))});async function y(s,t){o.value=s.name;try{await i.installRequirement(s.name,t),g.addNotification(`Installation task started for ${s.name}`,"info")}catch(a){console.error(a),g.addNotification("Installation failed to start","error")}finally{o.value=null}}function v(s){switch(s){case"ok":return"text-green-600 bg-green-100 dark:bg-green-900/30 dark:text-green-400";case"newer":return"text-orange-600 bg-orange-100 dark:bg-orange-900/30 dark:text-orange-400";case"older":return"text-red-600 bg-red-100 dark:bg-red-900/30 dark:text-red-400";case"missing":return"text-red-600 bg-red-100 dark:bg-red-900/30 dark:text-red-400";default:return"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-400"}}function w(s){switch(s){case"ok":return"Match";case"newer":return"Newer";case"older":return"Outdated";case"missing":return"Missing";default:return"Unknown"}}return(s,t)=>(r(),n("div",F,[e("div",D,[t[3]||(t[3]=e("div",null,[e("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"},"System Requirements"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Monitor and manage python dependencies.")],-1)),e("div",O,[N(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>d.value=a),placeholder:"Search libraries...",class:"input-field-sm w-48"},null,512),[[I,d.value]]),e("button",{onClick:t[1]||(t[1]=a=>l(i).fetchRequirements()),class:"btn btn-secondary btn-sm",disabled:l(u)},[x(M,{class:b(["w-4 h-4 mr-2",{"animate-spin":l(u)}])},null,8,["class"]),t[2]||(t[2]=k(" Refresh "))],8,P)])]),e("div",z,[e("div",E,[e("table",J,[t[7]||(t[7]=e("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Library"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Required"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Installed"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Q,[l(u)?(r(),n("tr",G,t[4]||(t[4]=[e("td",{colspan:"5",class:"px-6 py-10 text-center text-gray-500"},"Loading requirements...",-1)]))):p.value.length===0?(r(),n("tr",H,t[5]||(t[5]=[e("td",{colspan:"5",class:"px-6 py-10 text-center text-gray-500"},"No libraries found.",-1)]))):(r(!0),n(V,{key:2},$(p.value,a=>(r(),n("tr",{key:a.name,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("td",K,c(a.name),1),e("td",W,c(a.required_version),1),e("td",X,c(a.installed_version),1),e("td",Y,[e("span",{class:b(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",v(a.status)])},c(w(a.status)),3),a.status==="newer"?(r(),n("div",Z,[x(B,{class:"w-3 h-3 mr-1"}),t[6]||(t[6]=k(" Potential incompatibility "))])):h("",!0)]),e("td",q,[e("div",ee,[a.status!=="ok"&&a.required_version!=="Any"?(r(),n("button",{key:0,onClick:_=>y(a,a.required_version),disabled:o.value===a.name,class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 disabled:opacity-50",title:"Install Required Version"},[o.value===a.name?(r(),T(A,{key:0,class:"w-5 h-5 animate-spin"})):(r(),n("span",ae,"Fix Version"))],8,te)):h("",!0),e("button",{onClick:_=>y(a,null),disabled:o.value===a.name,class:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300 disabled:opacity-50 ml-2",title:"Update to Latest (May be incompatible)"},[x(U,{class:"w-5 h-5"})],8,se)])])]))),128))])])])])]))}};export{ie as default};
