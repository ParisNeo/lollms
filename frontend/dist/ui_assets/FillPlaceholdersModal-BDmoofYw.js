import{u as C,c as V,L as _,k as S,a as x,o as s,w as h,b as p,e as u,K as U,F as g,n as k,l as $,T as b,t as v,ap as D,ar as P,aq as M,Y as E}from"./index-DsFmVrVf.js";import{_ as B}from"./GenericModal-DXyTN2Tt.js";function T(d){if(!d)return[];const c=new Map,m=/@<([^>]+?)>@([\s\S]*?)@<\/\1>@|@<([^>]+?)>@/g;let n;for(;(n=m.exec(d))!==null;){const a=n[1]||n[3],o=n[2];if(!c.has(a)){const r={name:a,title:a.replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase()),type:"str",options:[],default:"",help:""};o&&o.trim()&&o.trim().split(`
`).forEach(i=>{const e=i.indexOf(":");if(e===-1)return;const t=i.substring(0,e).trim().toLowerCase(),f=i.substring(e+1).trim();t&&f!==""&&Object.prototype.hasOwnProperty.call(r,t)&&(t==="options"?r.options=f.split(",").map(y=>y.trim()).filter(Boolean):r[t]=f)}),["str","text","int","float","bool"].includes(r.type)||(r.type="str"),c.set(a,r)}}return Array.from(c.values())}function F(d){if(!d)return"";const c=/@<([^>]+?)>@[\s\S]*?@<\/\1>@/g,n=d.replace(c,"").split(`
`);let a=-1;for(let o=0;o<n.length;o++)if(n[o].trim()!==""){a=o;break}return a!==-1?n.slice(a).join(`
`):""}const w={parse:T,clean:F},L=["for"],N={key:0,class:"text-xs text-gray-500 mb-1"},O=["id","onUpdate:modelValue"],j=["value"],I={key:2,class:"mt-2 flex items-center"},R=["id","onUpdate:modelValue"],q=["for"],A=["type","id","onUpdate:modelValue"],K={key:1,class:"text-center text-gray-500"},z={__name:"FillPlaceholdersModal",setup(d){const c=C(),m=V(()=>c.modalData("fillPlaceholders")),n=_([]),a=_({});S(()=>{var l;return(l=m.value)==null?void 0:l.promptTemplate},l=>{if(l){const i=w.parse(l);n.value=i;const e={};i.forEach(t=>{t.type==="bool"?e[t.name]=t.default==="true":e[t.name]=t.default||""}),a.value=e}else n.value=[],a.value={}},{immediate:!0});function o(){var e;const l=m.value.promptTemplate;let i=w.clean(l);n.value.forEach(t=>{const f=a.value[t.name],y=new RegExp(`@<${t.name}>@`,"g");i=i.replace(y,String(f))}),(e=m.value)!=null&&e.onConfirm&&m.value.onConfirm(i),r()}function r(){c.closeModal("fillPlaceholders")}return(l,i)=>(s(),x(B,{modalName:"fillPlaceholders",title:"Fill in Prompt Details",maxWidthClass:"max-w-2xl",onClose:r},{body:h(()=>[n.value.length>0?(s(),u("form",{key:0,onSubmit:U(o,["prevent"]),class:"space-y-4"},[(s(!0),u(g,null,k(n.value,e=>(s(),u("div",{key:e.name},[p("label",{for:`placeholder-${e.name}`,class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},v(e.title),9,L),e.help?(s(),u("p",N,v(e.help),1)):$("",!0),e.options&&e.options.length>0?b((s(),u("select",{key:1,id:`placeholder-${e.name}`,"onUpdate:modelValue":t=>a.value[e.name]=t,class:"input-field mt-1"},[(s(!0),u(g,null,k(e.options,t=>(s(),u("option",{key:t,value:t},v(t),9,j))),128))],8,O)),[[D,a.value[e.name]]]):e.type==="bool"?(s(),u("div",I,[b(p("input",{id:`placeholder-${e.name}`,type:"checkbox","onUpdate:modelValue":t=>a.value[e.name]=t,class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,R),[[P,a.value[e.name]]]),p("label",{for:`placeholder-${e.name}`,class:"ml-2 block text-sm text-gray-900 dark:text-gray-100"}," Enable ",8,q)])):e.type==="text"?(s(),x(M,{key:3,id:`placeholder-${e.name}`,modelValue:a.value[e.name],"onUpdate:modelValue":t=>a.value[e.name]=t,class:"mt-1 h-40"},null,8,["id","modelValue","onUpdate:modelValue"])):b((s(),u("input",{key:4,type:e.type==="int"||e.type==="float"?"number":"text",id:`placeholder-${e.name}`,"onUpdate:modelValue":t=>a.value[e.name]=t,class:"input-field mt-1"},null,8,A)),[[E,a.value[e.name]]])]))),128))],32)):(s(),u("div",K," No placeholders were found in this prompt. "))]),footer:h(()=>[p("button",{onClick:r,type:"button",class:"btn btn-secondary"}," Cancel "),p("button",{onClick:o,type:"button",class:"btn btn-primary"}," Confirm ")]),_:1}))}};export{z as default};
