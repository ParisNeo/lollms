const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["ui_assets/index-Mk1j_DM9.js","ui_assets/index-DLzFjZf8.css"])))=>i.map(i=>d[i]);
import{a9 as $i,u as Si,aa as Bi,N as s,ab as M,m as I,ac as Ai,O as e,H as Ia}from"./index-Mk1j_DM9.js";function U(o,r){try{const h=localStorage.getItem(o);if(h){const R=JSON.parse(h);return{...r,...R}}}catch{localStorage.removeItem(o)}return r}const zi=(o,r)=>{if(r==="boolean")return typeof o=="string"?o.toLowerCase()==="true":!!o;if(r==="integer"){const h=parseInt(o,10);return isNaN(h)?null:h}if(r==="float"){const h=parseFloat(o);return isNaN(h)?null:h}return o},Fi=$i("admin",()=>{const o=Si(),r=Bi(),{on:h}=Ai(),R=s(null),O=s(!1),F=s([]),N=s(!1),Ua=s(null),D=s(!1),E=s([]),q=s(!1),x=s(null),G=s(!1),f=s([]),V=s(!1),j=s([]),g=s([]),Q=s(!1),K=s([]),m=s([]),J=s(!1),W=s([]),y=s([]),H=s(!1),X=s([]),v=s([]),Y=s(!1),aa=s([]),w=s([]),ta=s(!1),ea=s([]),_=s([]),na=s(!1),ia=s([]),sa=s([]),T=s([]),oa=s(!1),$=s([]),ca=s(!1),S=s([]),ra=s(!1),z=s([]),la=s(!1),Oa=s({items:[],total:0,pages:1,categories:[]}),da=s(!1),Da=s({items:[],total:0,pages:1,categories:[]}),ua=s(!1),Ea=s({items:[],total:0,pages:1,categories:[]}),pa=s(!1),qa=s({items:[],total:0,pages:1,categories:[]}),fa=s(!1),L=s([]),ga=s(!1),Ga=s(null),ma=s(!1),ya=s([]),va=s(!1),wa=s(null),_a=s(!1),C=s(null),ha=s(!1),ba=s([]),Ta=s(!1),P=s([]),$a=s(!1),Sa=s([]),Ba=s(!1),Aa=s([]),za=s(!1),Ra=s(!1),Fa=s(!1),Na=s([]),La=s(!1),Pa=s([]),ka=s(!1),Va=s([]),Za=s(!1),d=M(U("lollms-app-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"last_update_date",sortOrder:"desc",currentPage:1,pageSize:24})),u=M(U("lollms-mcp-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"last_update_date",sortOrder:"desc",currentPage:1,pageSize:24})),p=M(U("lollms-prompt-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"name",sortOrder:"asc",currentPage:1,pageSize:24})),l=M(U("lollms-personality-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"name",sortOrder:"asc",currentPage:1,pageSize:24}));I(d,a=>{localStorage.setItem("lollms-app-filters",JSON.stringify(a))},{deep:!0}),I(u,a=>{localStorage.setItem("lollms-mcp-filters",JSON.stringify(a))},{deep:!0}),I(p,a=>{localStorage.setItem("lollms-prompt-filters",JSON.stringify(a))},{deep:!0}),I(l,a=>{localStorage.setItem("lollms-personality-filters",JSON.stringify(a))},{deep:!0});async function at(a){var n,i;if(!a||!["completed","failed","cancelled"].includes(a.status))return;const t=(a.name||"").toLowerCase();if((t.includes("app")||t.includes("mcp"))&&(k(!0),Z(!0)),t.includes("prompt")&&xa(!0),t.includes("personality")&&Ha(!0),t.includes("purge unused temporary files")&&a.status==="completed"){const c=((n=a.result)==null?void 0:n.message)||"Purge completed successfully.";o.addNotification(c,"success",6e3)}t.includes("generate self-signed certificate")&&a.status==="completed"&&(b(!0),o.addNotification("Certificate generated successfully. Reloading settings...","success",6e3)),t.includes("content")&&a.status==="completed"&&o.addNotification("Moderation task completed.","success",6e3),t.includes("generate fun facts")&&a.status==="completed"&&(o.addNotification("Fun Facts Generated!","success"),B(!0),A(!0)),t.includes("install requirement")&&a.status==="completed"&&(Ya(),o.addNotification("Requirement installed successfully.","success")),t.includes("sanitization")&&a.status==="completed"&&o.addNotification(((i=a.result)==null?void 0:i.message)||"Sanitization completed.","success",8e3)}h("task:completed",at);async function tt(a){try{const t=await e.post("/api/admin/system/force-all-users-config",a);return o.addNotification(t.data.message,"success"),!0}catch(t){return console.error(t),!1}}async function ja(){D.value=!0;try{const a=await e.get("/api/admin/services/dashboard");Ua.value=a.data}finally{D.value=!1}}async function et(){await e.post("/api/admin/services/reset-usage"),await ja(),o.addNotification("Usage statistics reset.","success")}async function nt(a){const t=await e.post("/api/admin/backup/create",{password:a});return r.addTask(t.data),t.data}async function it(){try{const a=await e.post("/api/admin/system/analyze-logs");return r.addTask(a.data),a.data}catch(a){throw o.addNotification("Failed to start log analysis.","error"),a}}async function st(){const a=await e.post("/api/admin/purge-unused-uploads");r.addTask(a.data)}async function ot(){const a=await e.post("/api/admin/trigger-moderation");r.addTask(a.data)}async function ct(){const a=await e.post("/api/admin/trigger-full-remoderation");r.addTask(a.data)}async function rt(){const a=await e.post("/api/admin/security/sanitize-content");r.addTask(a.data)}async function lt(a){await e.post("/api/admin/broadcast",{message:a})}async function dt(a){await e.post("/api/admin/system/kill-process",{pid:a}),o.addNotification(`Process ${a} killed.`,"success"),Qa()}async function ut(){O.value=!0;try{const a=await e.get("/api/admin/stats");R.value=a.data}catch{R.value=null}finally{O.value=!1}}async function pt(){va.value=!0;try{const a=await e.get("/api/admin/ws-connections");ya.value=a.data}catch{ya.value=[]}finally{va.value=!1}}async function ft(){if(!C.value){ha.value=!0;try{const a=await e.get("/api/admin/global-generation-stats");C.value=a.data}catch{C.value=null}finally{ha.value=!1}}}async function Qa(){ma.value=!0;try{const a=await e.get("/api/admin/system-status");Ga.value=a.data}finally{ma.value=!1}}async function gt(a=!1){if(!(!a&&Pa.value.length>0)){ka.value=!0;try{const t=await e.get("/api/admin/system/logs");Pa.value=t.data}catch{o.addNotification("Failed to fetch system logs.","error")}finally{ka.value=!1}}}async function mt(){if(!wa.value){_a.value=!0;try{const a=await e.get("/api/admin/server-info");wa.value=a.data}finally{_a.value=!1}}}async function yt(){Ta.value=!0;try{const a=await e.get("/api/admin/model-usage-stats");ba.value=a.data||[]}catch(a){console.error("Failed to fetch model usage stats:",a),ba.value=[]}finally{Ta.value=!1}}async function b(a=!1){if(!(!a&&E.value.length>0)){q.value=!0;try{const t=await e.get("/api/admin/settings");E.value=t.data.map(n=>({...n,value:zi(n.value,n.type)}))}finally{q.value=!1}}}async function vt(a){await e.put("/api/admin/settings",{configs:a}),await b(!0),o.addNotification("Settings updated.","success")}async function wt(a=!1){if(!(!a&&x.value)){G.value=!0;try{const t=await e.get("/api/admin/ai-bot-settings");x.value=t.data}finally{G.value=!1}}}async function _t(a){const t=await e.put("/api/admin/ai-bot-settings",a);x.value=t.data,o.addNotification("AI Bot user settings updated.","success")}async function ht(a=!1){if(!(!a&&f.value.length>0)){V.value=!0;try{const t=await e.get("/api/admin/bindings");f.value=t.data}finally{V.value=!1}}}async function bt(a=!1){if(!a&&j.value.length>0)return;const t=await e.get("/api/admin/bindings/available_types");j.value=t.data}async function Tt(a){const t=await e.post("/api/admin/bindings",a);f.value.push(t.data),o.addNotification(`Binding '${t.data.alias}' created.`,"success")}async function $t(a,t){const n=await e.put(`/api/admin/bindings/${a}`,t),i=f.value.findIndex(c=>c.id===a);i!==-1&&(f.value[i]=n.data),o.addNotification(`Binding '${n.data.alias}' updated.`,"success")}async function St(a){await e.delete(`/api/admin/bindings/${a}`),f.value=f.value.filter(t=>t.id!==a),o.addNotification("Binding deleted.","success")}async function Bt(a=!1){if(!(!a&&g.value.length>0)){Q.value=!0;try{const t=await e.get("/api/admin/tti-bindings");g.value=t.data}finally{Q.value=!1}}}async function At(a=!1){if(!a&&K.value.length>0)return;const t=await e.get("/api/admin/tti-bindings/available_types");K.value=t.data}async function zt(a){const t=await e.post("/api/admin/tti-bindings",a);g.value.push(t.data),o.addNotification(`TTI Binding '${t.data.alias}' created.`,"success")}async function Rt(a,t){const n=await e.put(`/api/admin/tti-bindings/${a}`,t),i=g.value.findIndex(c=>c.id===a);i!==-1&&(g.value[i]=n.data),o.addNotification(`TTI Binding '${n.data.alias}' updated.`,"success")}async function Ft(a){await e.delete(`/api/admin/tti-bindings/${a}`),g.value=g.value.filter(t=>t.id!==a),o.addNotification("TTI Binding deleted.","success")}async function Nt(a=!1){if(!(!a&&m.value.length>0)){J.value=!0;try{const t=await e.get("/api/admin/tts-bindings");m.value=t.data}finally{J.value=!1}}}async function Lt(a=!1){if(!a&&W.value.length>0)return;const t=await e.get("/api/admin/tts-bindings/available_types");W.value=t.data}async function Pt(a){const t=await e.post("/api/admin/tts-bindings",a);m.value.push(t.data),o.addNotification(`TTS Binding '${t.data.alias}' created.`,"success")}async function kt(a,t){const n=await e.put(`/api/admin/tts-bindings/${a}`,t),i=m.value.findIndex(c=>c.id===a);i!==-1&&(m.value[i]=n.data),o.addNotification(`TTS Binding '${n.data.alias}' updated.`,"success")}async function Zt(a){await e.delete(`/api/admin/tts-bindings/${a}`),m.value=m.value.filter(t=>t.id!==a),o.addNotification("TTS Binding deleted.","success")}async function xt(a=!1){if(!(!a&&y.value.length>0)){H.value=!0;try{const t=await e.get("/api/admin/stt-bindings");y.value=t.data}finally{H.value=!1}}}async function Ct(a=!1){if(!a&&X.value.length>0)return;const t=await e.get("/api/admin/stt-bindings/available_types");X.value=t.data}async function Mt(a){const t=await e.post("/api/admin/stt-bindings",a);y.value.push(t.data),o.addNotification(`STT Binding '${t.data.alias}' created.`,"success")}async function It(a,t){const n=await e.put(`/api/admin/stt-bindings/${a}`,t),i=y.value.findIndex(c=>c.id===a);i!==-1&&(y.value[i]=n.data),o.addNotification(`STT Binding '${n.data.alias}' updated.`,"success")}async function Ut(a){await e.delete(`/api/admin/stt-bindings/${a}`),y.value=y.value.filter(t=>t.id!==a),o.addNotification("STT Binding deleted.","success")}async function Ot(a=!1){if(!(!a&&v.value.length>0)){Y.value=!0;try{const t=await e.get("/api/admin/ttv-bindings");v.value=t.data}finally{Y.value=!1}}}async function Dt(a=!1){if(!a&&aa.value.length>0)return;const t=await e.get("/api/admin/ttv-bindings/available_types");aa.value=t.data}async function Et(a){const t=await e.post("/api/admin/ttv-bindings",a);v.value.push(t.data),o.addNotification(`TTV Binding '${t.data.alias}' created.`,"success")}async function qt(a,t){const n=await e.put(`/api/admin/ttv-bindings/${a}`,t),i=v.value.findIndex(c=>c.id===a);i!==-1&&(v.value[i]=n.data),o.addNotification(`TTV Binding '${n.data.alias}' updated.`,"success")}async function Gt(a){await e.delete(`/api/admin/ttv-bindings/${a}`),v.value=v.value.filter(t=>t.id!==a),o.addNotification("TTV Binding deleted.","success")}async function Vt(a=!1){if(!(!a&&w.value.length>0)){ta.value=!0;try{const t=await e.get("/api/admin/ttm-bindings");w.value=t.data}finally{ta.value=!1}}}async function jt(a=!1){if(!a&&ea.value.length>0)return;const t=await e.get("/api/admin/ttm-bindings/available_types");ea.value=t.data}async function Qt(a){const t=await e.post("/api/admin/ttm-bindings",a);w.value.push(t.data),o.addNotification(`TTM Binding '${t.data.alias}' created.`,"success")}async function Kt(a,t){const n=await e.put(`/api/admin/ttm-bindings/${a}`,t),i=w.value.findIndex(c=>c.id===a);i!==-1&&(w.value[i]=n.data),o.addNotification(`TTM Binding '${n.data.alias}' updated.`,"success")}async function Jt(a){await e.delete(`/api/admin/ttm-bindings/${a}`),w.value=w.value.filter(t=>t.id!==a),o.addNotification("TTM Binding deleted.","success")}async function Wt(a=!1){if(!(!a&&_.value.length>0)){na.value=!0;try{const t=await e.get("/api/admin/rag-bindings");_.value=t.data}catch(t){console.error(t)}finally{na.value=!1}}}async function Ht(a=!1){if(!(!a&&ia.value.length>0))try{const t=await e.get("/api/admin/rag-bindings/available_types");ia.value=t.data}catch(t){console.error(t)}}async function Xt(a){const t=await e.post("/api/admin/rag-bindings",a);_.value.push(t.data),o.addNotification(`RAG Binding '${t.data.alias}' created.`,"success")}async function Yt(a,t){const n=await e.put(`/api/admin/rag-bindings/${a}`,t),i=_.value.findIndex(c=>c.id===a);i!==-1&&(_.value[i]=n.data),o.addNotification(`RAG Binding '${n.data.alias}' updated.`,"success")}async function ae(a){await e.delete(`/api/admin/rag-bindings/${a}`),_.value=_.value.filter(t=>t.id!==a),o.addNotification("RAG Binding deleted.","success")}async function te(a){return(await e.get(`/api/admin/bindings/${a}/models`)).data}async function ee(a,t){return(await e.post(`/api/admin/bindings/${a}/context-size`,{model_name:t})).data.ctx_size}async function ne(a,t){const n=await e.put(`/api/admin/bindings/${a}/alias`,t),i=f.value.findIndex(c=>c.id===a);i!==-1&&(f.value[i]=n.data)}async function ie(a,t){const n=await e.delete(`/api/admin/bindings/${a}/alias`,{data:{original_model_name:t}}),i=f.value.findIndex(c=>c.id===a);i!==-1&&(f.value[i]=n.data)}async function se(a,t,n={}){return(await e.post(`/api/admin/bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function oe(a){return(await e.get(`/api/admin/tti-bindings/${a}/models`)).data}async function ce(a,t){const n=await e.put(`/api/admin/tti-bindings/${a}/alias`,t),i=g.value.findIndex(c=>c.id===a);i!==-1&&(g.value[i]=n.data)}async function re(a,t){const n=await e.delete(`/api/admin/tti-bindings/${a}/alias`,{data:{original_model_name:t}}),i=g.value.findIndex(c=>c.id===a);i!==-1&&(g.value[i]=n.data)}async function le(a,t,n={}){return(await e.post(`/api/admin/tti-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function de(a){return(await e.get(`/api/admin/tts-bindings/${a}/models`)).data}async function ue(a,t){const n=await e.put(`/api/admin/tts-bindings/${a}/alias`,t),i=m.value.findIndex(c=>c.id===a);i!==-1&&(m.value[i]=n.data)}async function pe(a,t){const n=await e.delete(`/api/admin/tts-bindings/${a}/alias`,{data:{original_model_name:t}}),i=m.value.findIndex(c=>c.id===a);i!==-1&&(m.value[i]=n.data)}async function fe(a,t,n={}){return(await e.post(`/api/admin/tts-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function ge(a){return(await e.get(`/api/admin/stt-bindings/${a}/models`)).data}async function me(a,t){const n=await e.put(`/api/admin/stt-bindings/${a}/alias`,t),i=y.value.findIndex(c=>c.id===a);i!==-1&&(y.value[i]=n.data)}async function ye(a,t){const n=await e.delete(`/api/admin/stt-bindings/${a}/alias`,{data:{original_model_name:t}}),i=y.value.findIndex(c=>c.id===a);i!==-1&&(y.value[i]=n.data)}async function ve(a,t,n={}){return(await e.post(`/api/admin/stt-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function we(a){return(await e.get(`/api/admin/ttv-bindings/${a}/models`)).data}async function _e(a,t){const n=await e.put(`/api/admin/ttv-bindings/${a}/alias`,t),i=v.value.findIndex(c=>c.id===a);i!==-1&&(v.value[i]=n.data)}async function he(a,t){const n=await e.delete(`/api/admin/ttv-bindings/${a}/alias`,{data:{original_model_name:t}}),i=v.value.findIndex(c=>c.id===a);i!==-1&&(v.value[i]=n.data)}async function be(a,t,n={}){return(await e.post(`/api/admin/ttv-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function Te(a){return(await e.get(`/api/admin/ttm-bindings/${a}/models`)).data}async function $e(a,t){const n=await e.put(`/api/admin/ttm-bindings/${a}/alias`,t),i=w.value.findIndex(c=>c.id===a);i!==-1&&(w.value[i]=n.data)}async function Se(a,t){const n=await e.delete(`/api/admin/ttm-bindings/${a}/alias`,{data:{original_model_name:t}}),i=w.value.findIndex(c=>c.id===a);i!==-1&&(w.value[i]=n.data)}async function Be(a,t,n={}){return(await e.post(`/api/admin/ttm-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function Ae(a){return(await e.get(`/api/admin/rag-bindings/${a}/models`)).data}async function ze(a,t){const n=await e.put(`/api/admin/rag-bindings/${a}/alias`,t),i=_.value.findIndex(c=>c.id===a);i!==-1&&(_.value[i]=n.data)}async function Re(a,t){const n=await e.delete(`/api/admin/rag-bindings/${a}/alias`,{data:{original_model_name:t}}),i=_.value.findIndex(c=>c.id===a);i!==-1&&(_.value[i]=n.data)}async function Fe(a){return(await e.get(`/api/admin/rag-bindings/models-for-type/${a}`)).data}async function Ne(a){await e.post("/api/admin/rag/aliases",a),await b(!0),o.addNotification(`Alias '${a.alias_name}' saved.`,"success")}async function Le(a){await e.delete("/api/admin/rag/aliases",{data:{alias_name:a}}),await b(!0),o.addNotification(`Alias '${a}' deleted.`,"success")}async function Pe(a=!1){if(!(!a&&sa.value.length>0))try{const t=await e.get("/api/admin/rag/available-vectorizers");sa.value=t.data}catch(t){console.error(t)}}async function ke(a=!1){if(!(!a&&T.value.length>0)){oa.value=!0;try{const t=await e.get("/api/apps_zoo/repositories");T.value=t.data}finally{oa.value=!1}}}async function Ze(a){const t=await e.post("/api/apps_zoo/repositories",a);T.value.push(t.data)}async function xe(a){await e.delete(`/api/apps_zoo/repositories/${a}`),T.value=T.value.filter(t=>t.id!==a)}async function Ka(a){const t=await e.post(`/api/apps_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function Ce(){for(const a of T.value)await Ka(a.id)}async function Me(a=!1){if(!(!a&&$.value.length>0)){ca.value=!0;try{const t=await e.get("/api/mcps_zoo/repositories");$.value=t.data}finally{ca.value=!1}}}async function Ie(a){const t=await e.post("/api/mcps_zoo/repositories",a);$.value.push(t.data)}async function Ue(a){await e.delete(`/api/mcps_zoo/repositories/${a}`),$.value=$.value.filter(t=>t.id!==a)}async function Ja(a){const t=await e.post(`/api/mcps_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function Oe(){for(const a of $.value)await Ja(a.id)}async function De(a=!1){if(!(!a&&S.value.length>0)){ra.value=!0;try{const t=await e.get("/api/prompts_zoo/repositories");S.value=t.data}finally{ra.value=!1}}}async function Ee(a){const t=await e.post("/api/prompts_zoo/repositories",a);S.value.push(t.data)}async function qe(a){await e.delete(`/api/prompts_zoo/repositories/${a}`),S.value=S.value.filter(t=>t.id!==a)}async function Wa(a){const t=await e.post(`/api/prompts_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function Ge(){for(const a of S.value)await Wa(a.id)}async function Ve(a=!1){if(!(!a&&z.value.length>0)){la.value=!0;try{const t=await e.get("/api/personalities_zoo/repositories");z.value=t.data}catch(t){console.error(t)}finally{la.value=!1}}}async function je(a){const t=await e.post("/api/personalities_zoo/repositories",a);z.value.push(t.data)}async function Qe(a){await e.delete(`/api/personalities_zoo/repositories/${a}`),z.value=z.value.filter(t=>t.id!==a)}async function Ke(a){const t=await e.post(`/api/personalities_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function k(a=!1){da.value=!0;try{const t={page:d.currentPage,page_size:d.pageSize,sort_by:d.sortKey,sort_order:d.sortOrder,category:d.selectedCategory!=="All"?d.selectedCategory:void 0,repository:d.selectedRepository!=="All"?d.selectedRepository:void 0,search_query:d.searchQuery||void 0,installation_status:d.installationStatusFilter!=="All"?d.installationStatusFilter:void 0},[n,i]=await Promise.all([e.get("/api/apps_zoo/categories"),e.get("/api/apps_zoo/available",{params:t})]);Oa.value={...i.data,categories:n.data}}finally{da.value=!1}}async function Je(a){const t=await e.post("/api/apps_zoo/install",a);r.addTask(t.data)}async function We(a,t){return(await e.get("/api/apps_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function Z(a=!1){ua.value=!0;try{const t={page:u.currentPage,page_size:u.pageSize,sort_by:u.sortKey,sort_order:u.sortOrder,category:u.selectedCategory!=="All"?u.selectedCategory:void 0,repository:u.selectedRepository!=="All"?u.selectedRepository:void 0,search_query:u.searchQuery||void 0,installation_status:u.installationStatusFilter!=="All"?u.installationStatusFilter:void 0},[n,i]=await Promise.all([e.get("/api/mcps_zoo/categories"),e.get("/api/mcps_zoo/available",{params:t})]);Da.value={...i.data,categories:n.data}}finally{ua.value=!1}}async function He(a){const t=await e.post("/api/mcps_zoo/install",a);r.addTask(t.data)}async function Xe(a,t){return(await e.get("/api/mcps_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function xa(a=!1){pa.value=!0;try{const t={page:p.currentPage,page_size:p.pageSize,sort_by:p.sortKey,sort_order:p.sortOrder,category:p.selectedCategory!=="All"?p.selectedCategory:void 0,repository:p.selectedRepository!=="All"?p.selectedRepository:void 0,search_query:p.searchQuery||void 0,installation_status:p.installationStatusFilter!=="All"?p.installationStatusFilter:void 0},[n,i]=await Promise.all([e.get("/api/prompts_zoo/categories"),e.get("/api/prompts_zoo/available",{params:t})]);Ea.value={...i.data,categories:n.data}}finally{pa.value=!1}}async function Ye(a){const t=await e.post("/api/prompts_zoo/install",a);r.addTask(t.data)}async function an(a,t){return(await e.get("/api/prompts_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function Ha(a=!1){fa.value=!0;try{const t={page:l.currentPage,page_size:l.pageSize,sort_by:l.sortKey,sort_order:l.sortOrder,category:l.selectedCategory!=="All"?l.selectedCategory:void 0,repository:l.selectedRepository!=="All"?l.selectedRepository:void 0,search_query:l.searchQuery||void 0,installation_status:l.installationStatusFilter!=="All"?l.installationStatusFilter:void 0};l.selectedCategory==="Starred"&&(t.starred_names=JSON.parse(localStorage.getItem("starredPersonalities")||"[]"));const[n,i]=await Promise.all([e.get("/api/personalities_zoo/categories"),e.get("/api/personalities_zoo/available",{params:t})]);qa.value={...i.data,categories:n.data}}catch(t){console.error(t)}finally{fa.value=!1}}async function tn(a){const t=await e.post("/api/personalities_zoo/install",a);r.addTask(t.data)}async function en(a,t){return(await e.get("/api/personalities_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function nn(a){return(await e.get(`/api/admin/bindings/${a}/zoo`)).data}async function sn(a,t){const n=await e.post(`/api/admin/bindings/${a}/zoo/install`,{index:t});return r.addTask(n.data),n.data}async function on(a){return(await e.get(`/api/admin/tti-bindings/${a}/zoo`)).data}async function cn(a,t){const n=await e.post(`/api/admin/tti-bindings/${a}/zoo/install`,{index:t});return r.addTask(n.data),n.data}async function rn(a){return(await e.get(`/api/admin/tts-bindings/${a}/zoo`)).data}async function ln(a,t){const n=await e.post(`/api/admin/tts-bindings/${a}/zoo/install`,{index:t});return r.addTask(n.data),n.data}async function dn(a){return(await e.get(`/api/admin/stt-bindings/${a}/zoo`)).data}async function un(a,t){const n=await e.post(`/api/admin/stt-bindings/${a}/zoo/install`,{index:t});return r.addTask(n.data),n.data}async function pn(a){return(await e.get(`/api/admin/ttv-bindings/${a}/zoo`)).data}async function fn(a,t){const n=await e.post(`/api/admin/ttv-bindings/${a}/zoo/install`,{index:t});return r.addTask(n.data),n.data}async function gn(a){return(await e.get(`/api/admin/ttm-bindings/${a}/zoo`)).data}async function mn(a,t){const n=await e.post(`/api/admin/ttm-bindings/${a}/zoo/install`,{index:t});return r.addTask(n.data),n.data}async function yn(a){const{usePromptsStore:t}=await Ia(async()=>{const{usePromptsStore:i}=await import("./index-Mk1j_DM9.js").then(c=>c.eL);return{usePromptsStore:i}},__vite__mapDeps([0,1])),n=await e.post("/api/prompts_zoo/installed",a);return await t().fetchPrompts(),n.data}async function vn(a,t){const{usePromptsStore:n}=await Ia(async()=>{const{usePromptsStore:i}=await import("./index-Mk1j_DM9.js").then(c=>c.eL);return{usePromptsStore:i}},__vite__mapDeps([0,1]));await e.put(`/api/prompts_zoo/installed/${a}`,t),await n().fetchPrompts()}async function wn(a){const{usePromptsStore:t}=await Ia(async()=>{const{usePromptsStore:n}=await import("./index-Mk1j_DM9.js").then(i=>i.eL);return{usePromptsStore:n}},__vite__mapDeps([0,1]));await e.delete(`/api/prompts_zoo/installed/${a}`),await t().fetchPrompts(),await xa({})}async function _n(a){const t=await e.post(`/api/prompts_zoo/installed/${a}/update`);r.addTask(t.data)}async function hn(a){const t=await e.post("/api/prompts_zoo/generate_from_prompt",{prompt:a});return r.addTask(t.data),t.data}async function Xa(a=!1){if(!(!a&&L.value.length>0)){ga.value=!0;try{const t=await e.get("/api/apps_zoo/installed");L.value=t.data}finally{ga.value=!1}}}async function bn(a=null){const t=a?{port:a}:{};return(await e.get("/api/apps_zoo/get-next-available-port",{params:t})).data.port}async function Tn(a){const t=await e.post(`/api/apps_zoo/installed/${a}/start`);r.addTask(t.data)}async function $n(a){const t=await e.post(`/api/apps_zoo/installed/${a}/stop`);r.addTask(t.data)}async function Sn(a){const t=await e.post(`/api/apps_zoo/installed/${a}/restart`);r.addTask(t.data)}async function Bn(a){const t=await e.post(`/api/apps_zoo/installed/${a}/update`);r.addTask(t.data)}async function An(a){await e.delete(`/api/apps_zoo/installed/${a}`),await k(!0),await Z(!0),o.addNotification("Item uninstalled.","success")}async function zn(a,t){await e.put(`/api/apps_zoo/installed/${a}`,t),await k(!0),await Z(!0)}async function Rn(a){return(await e.get(`/api/apps_zoo/installed/${a}/logs`)).data.log_content}async function Fn(a){return(await e.get(`/api/apps_zoo/installed/${a}/config-schema`)).data}async function Nn(a){return(await e.get(`/api/apps_zoo/installed/${a}/config`)).data}async function Ln(a,t){await e.put(`/api/apps_zoo/installed/${a}/config`,t)}async function Pn(a){return(await e.get(`/api/apps_zoo/installed/${a}/env`)).data}async function kn(a,t){await e.put(`/api/apps_zoo/installed/${a}/env`,{content:t}),o.addNotification(".env file saved.","success")}async function Zn(a){await e.delete(`/api/apps/${a}`),await k(!0),o.addNotification("App registration removed.","success")}async function xn(a){await e.delete(`/api/mcps/${a}`),await Z(!0),o.addNotification("MCP registration removed.","success")}async function Cn(){const a=await e.post("/api/apps_zoo/sync-installs");r.addTask(a.data)}async function Mn(a){const t=await e.post("/api/apps_zoo/purge-broken",{item_type:a.item_type||"app",folder_name:a.folder_name});r.addTask(t.data)}async function In(a){const t=await e.post("/api/apps_zoo/fix-broken",{item_type:a.item_type||"app",folder_name:a.folder_name});r.addTask(t.data)}function Un(a){if(!L.value)return;const t=L.value.find(n=>n.id===a.id);t?(a.status&&(t.status=a.status),a.is_installed!==void 0&&(t.is_installed=a.is_installed)):Xa(!0)}async function B(a=!1){if(!(!a&&P.value.length>0)){$a.value=!0;try{const t=await e.get("/api/admin/fun-facts");P.value=t.data}finally{$a.value=!1}}}async function A(a=!1){if(!(!a&&Sa.value.length>0)){Ba.value=!0;try{const t=await e.get("/api/admin/fun-facts/categories");Sa.value=t.data}finally{Ba.value=!1}}}async function On(a){await e.post("/api/admin/fun-facts",a),await B(!0)}async function Dn(a,t){await e.put(`/api/admin/fun-facts/${a}`,t),await B(!0)}async function En(a){await e.delete(`/api/admin/fun-facts/${a}`),P.value=P.value.filter(t=>t.id!==a)}async function qn(a){await e.post("/api/admin/fun-facts/categories",a),await A(!0)}async function Gn(a,t){await e.put(`/api/admin/fun-facts/categories/${a}`,t),await A(!0)}async function Vn(a){await e.delete(`/api/admin/fun-facts/categories/${a}`),await Promise.all([A(!0),B(!0)])}async function jn(){const a=await e.get("/api/admin/fun-facts/export",{responseType:"blob"}),t=URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=t,n.download="fun_facts_export.json",n.click(),URL.revokeObjectURL(t)}async function Qn(a,t){const n=await e.get(`/api/admin/fun-facts/categories/${a}/export`,{responseType:"blob"}),i=URL.createObjectURL(new Blob([n.data])),c=document.createElement("a");c.href=i,c.download=`fun_facts_${t}.json`,c.click(),URL.revokeObjectURL(i)}async function Kn(a){const t={fun_facts:a},n=await e.post("/api/admin/fun-facts/import",t);await Promise.all([B(!0),A(!0)]),o.addNotification(`Imported ${n.data.facts_created} facts and ${n.data.categories_created} new categories.`,"success")}async function Jn(a){const t=new FormData;t.append("file",a);const n=await e.post("/api/admin/fun-facts/categories/import",t);await Promise.all([B(!0),A(!0)]),o.addNotification(`Imported ${n.data.facts_created} facts for category.`,"success")}async function Wn(a,t){let n;typeof a=="object"?n=a:n={content:a,category:t,source_type:"topic"};const i=await e.post("/api/admin/fun-facts/generate-from-prompt",n);return r.addTask(i.data),i.data}async function Ca(a=!1){if(!(!a&&Aa.value.length>0)){za.value=!0;try{const t=await e.get("/api/admin/news-articles");Aa.value=t.data}finally{za.value=!1}}}async function Hn(a,t){await e.put(`/api/admin/news-articles/${a}`,t),await Ca(!0),o.addNotification("Article updated.","success")}async function Xn(a){await e.post("/api/admin/news-articles/batch-delete",{article_ids:a}),await Ca(!0),o.addNotification(`${a.length} article(s) deleted.`,"success")}async function Ma(a={}){N.value=!0;try{const t=await e.get("/api/admin/users",{params:a});F.value=t.data}finally{N.value=!1}}async function Yn(a){await e.post(`/api/admin/users/${a}/activate`),o.addNotification("User activated.","success"),Ma()}async function ai(a){try{return(await e.get(`/api/admin/users/${a}/stats`)).data}catch{return null}}async function ti(a){await e.post("/api/admin/users/batch-update-settings",a),await Ma()}async function ei(a,t,n,i,c){const Ti=await e.post("/api/admin/email-users",{subject:a,body:t,user_ids:n,background_color:i,send_as_text:c});return r.addTask(Ti.data),!0}async function ni(a,t,n,i){Fa.value=!0;try{return(await e.post("/api/admin/enhance-email",{subject:a,body:t,background_color:n,prompt:i})).data}finally{Fa.value=!1}}async function ii(a){const t=new FormData;t.append("file",a);const n=await e.post("/api/admin/upload-logo",t);await b(!0),o.addNotification(n.data.message,"success")}async function si(){await e.delete("/api/admin/remove-logo"),await b(!0),o.addNotification("Custom logo removed.","success")}async function oi(a,t){const n=new FormData;n.append("file",a),n.append("file_type",t);const i=await e.post("/api/admin/upload-ssl-file",n,{headers:{"Content-Type":"multipart/form-data"}});return await b(!0),i.data.path}async function ci(){var a,t;try{const n=await e.post("/api/admin/generate-cert");return r.addTask(n.data),o.addNotification("Certificate generation task started. Check tasks for progress.","info"),n.data}catch(n){const i=((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.detail)||"Failed to start certificate task.";throw o.addNotification(i,"error"),n}}async function ri(){try{const a=await e.get("/api/admin/download-cert",{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","lollms_cert.pem"),document.body.appendChild(n),n.click(),n.remove()}catch{o.addNotification("Failed to download certificate.","error")}}async function li(a){try{const t=await e.get("/api/admin/download-trust-script",{params:{script_type:a},responseType:"blob"}),n=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=n;const c=a==="windows"?"bat":"sh";i.setAttribute("download",`install_lollms_cert.${c}`),document.body.appendChild(i),i.click(),i.remove()}catch(t){console.error(t),o.addNotification("Failed to download trust script.","error")}}async function di(a){Ra.value=!0;const t=new FormData;t.append("file",a);try{await e.post("/api/admin/import-openwebui",t)}finally{Ra.value=!1}}async function ui(a=!1){if(!(!a&&Na.value.length>0)){La.value=!0;try{const t=await e.get("/api/admin/available-models");Na.value=t.data}finally{La.value=!1}}}async function pi(a){const t=await e.post("/api/admin/bindings/generate_icon",{prompt:a});return r.addTask(t.data),t.data}async function fi(){const a=await e.post("/api/admin/rss-feeds/scrape");return r.addTask(a.data),a.data}async function gi(){const a=await e.post("/api/admin/refresh-zoo-cache");return r.addTask(a.data),a.data}async function mi(a=null){const t={};return a&&(t.status_filter=a),(await e.get("/api/admin/moderation/queue",{params:t})).data}async function yi(a,t){await e.post(`/api/admin/moderation/${a}/${t}/approve`)}async function vi(a,t){await e.delete(`/api/admin/moderation/${a}/${t}`)}async function Ya(){Za.value=!0;try{const a=await e.get("/api/admin/system/requirements");Va.value=a.data}finally{Za.value=!1}}async function wi(a,t){const n=await e.post("/api/admin/system/requirements/install",{name:a,version:t});r.addTask(n.data)}async function _i(){const a=await e.post("/api/admin/system/requirements/fix-all");r.addTask(a.data)}async function hi(a){N.value=!0;try{const t=await e.post("/api/admin/users",a);return F.value.push(t.data),o.addNotification("User created successfully.","success"),t.data}finally{N.value=!1}}async function bi(a){try{return await e.delete(`/api/admin/users/${a}`),F.value=F.value.filter(t=>t.id!==a),o.addNotification("User deleted successfully.","success"),!0}catch(t){return console.error("Delete user failed:",t),!1}}return{dashboardStats:R,isLoadingDashboardStats:O,allUsers:F,isLoadingUsers:N,serviceStats:Ua,isLoadingServiceStats:D,globalSettings:E,isLoadingSettings:q,aiBotSettings:x,isLoadingAiBotSettings:G,bindings:f,isLoadingBindings:V,availableBindingTypes:j,ttiBindings:g,isLoadingTtiBindings:Q,availableTtiBindingTypes:K,ttsBindings:m,isLoadingTtsBindings:J,availableTtsBindingTypes:W,sttBindings:y,isLoadingSttBindings:H,availableSttBindingTypes:X,ttvBindings:v,isLoadingTtvBindings:Y,availableTtvBindingTypes:aa,ttmBindings:w,isLoadingTtmBindings:ta,availableTtmBindingTypes:ea,ragBindings:_,isLoadingRagBindings:na,availableRagBindingTypes:ia,availableRagVectorizers:sa,zooRepositories:T,isLoadingZooRepositories:oa,mcpZooRepositories:$,isLoadingMcpZooRepositories:ca,promptZooRepositories:S,isLoadingPromptZooRepositories:ra,personalityZooRepositories:z,isLoadingPersonalityZooRepositories:la,zooApps:Oa,isLoadingZooApps:da,zooMcps:Da,isLoadingZooMcps:ua,zooPrompts:Ea,isLoadingZooPrompts:pa,zooPersonalities:qa,isLoadingZooPersonalities:fa,installedApps:L,isLoadingInstalledApps:ga,systemStatus:Ga,isLoadingSystemStatus:ma,connectedUsers:ya,isLoadingConnectedUsers:va,serverInfo:wa,isLoadingServerInfo:_a,globalGenerationStats:C,isLoadingGlobalGenerationStats:ha,modelUsageStats:ba,isLoadingModelUsageStats:Ta,funFacts:P,isLoadingFunFacts:$a,funFactCategories:Sa,isLoadingFunFactCategories:Ba,newsArticles:Aa,isLoadingNewsArticles:za,isImporting:Ra,isEnhancingEmail:Fa,adminAvailableLollmsModels:Na,isLoadingLollmsModels:La,appFilters:d,mcpFilters:u,promptFilters:p,personalityFilters:l,systemLogs:Pa,isLoadingSystemLogs:ka,systemRequirements:Va,isLoadingRequirements:Za,forceAllUsersConfig:tt,fetchDashboardStats:ut,fetchConnectedUsers:pt,broadcastMessage:lt,createBackup:nt,analyzeSystemLogs:it,fetchServiceDashboard:ja,resetServiceUsage:et,fetchSystemStatus:Qa,killProcess:dt,fetchModelUsageStats:yt,fetchServerInfo:mt,purgeUnusedUploads:st,fetchAllUsers:Ma,activateUser:Yn,fetchUserStats:ai,batchUpdateUsers:ti,fetchGlobalGenerationStats:ft,fetchGlobalSettings:b,updateGlobalSettings:vt,fetchAiBotSettings:wt,updateAiBotSettings:_t,triggerBatchModeration:ot,triggerFullRemoderation:ct,uploadWelcomeLogo:ii,removeWelcomeLogo:si,uploadSslFile:oi,importOpenWebUIData:di,fetchAdminAvailableLollmsModels:ui,generateIconForModel:pi,fetchBindings:ht,fetchAvailableBindingTypes:bt,addBinding:Tt,updateBinding:$t,deleteBinding:St,fetchBindingModels:te,getModelCtxSize:ee,saveModelAlias:ne,deleteModelAlias:ie,executeBindingCommand:se,fetchTtiBindings:Bt,fetchAvailableTtiBindingTypes:At,addTtiBinding:zt,updateTtiBinding:Rt,deleteTtiBinding:Ft,fetchTtiBindingModels:oe,saveTtiModelAlias:ce,deleteTtiModelAlias:re,executeTtiBindingCommand:le,fetchTtsBindings:Nt,fetchAvailableTtsBindingTypes:Lt,addTtsBinding:Pt,updateTtsBinding:kt,deleteTtsBinding:Zt,fetchTtsBindingModels:de,saveTtsModelAlias:ue,deleteTtsModelAlias:pe,executeTtsBindingCommand:fe,fetchSttBindings:xt,fetchAvailableSttBindingTypes:Ct,addSttBinding:Mt,updateSttBinding:It,deleteSttBinding:Ut,fetchSttBindingModels:ge,saveSttModelAlias:me,deleteSttModelAlias:ye,executeSttBindingCommand:ve,fetchTtvBindings:Ot,fetchAvailableTtvBindingTypes:Dt,addTtvBinding:Et,updateTtvBinding:qt,deleteTtvBinding:Gt,fetchTtvBindingModels:we,saveTtvModelAlias:_e,deleteTtvModelAlias:he,executeTtvBindingCommand:be,fetchTtmBindings:Vt,fetchAvailableTtmBindingTypes:jt,addTtmBinding:Qt,updateTtmBinding:Kt,deleteTtmBinding:Jt,fetchTtmBindingModels:Te,saveTtmModelAlias:$e,deleteTtmModelAlias:Se,executeTtmBindingCommand:Be,fetchRagBindings:Wt,fetchAvailableRagBindingTypes:Ht,addRagBinding:Xt,updateRagBinding:Yt,deleteRagBinding:ae,fetchRagBindingModels:Ae,saveRagModelAlias:ze,deleteRagModelAlias:Re,fetchRagModelsForType:Fe,addOrUpdateRagAlias:Ne,deleteRagAlias:Le,fetchAvailableRagVectorizers:Pe,fetchZooRepositories:ke,addZooRepository:Ze,deleteZooRepository:xe,pullZooRepository:Ka,pullAllZooRepositories:Ce,fetchMcpZooRepositories:Me,addMcpZooRepository:Ie,deleteMcpZooRepository:Ue,pullMcpZooRepository:Ja,pullAllMcpZooRepositories:Oe,fetchPromptZooRepositories:De,addPromptZooRepository:Ee,deletePromptZooRepository:qe,pullPromptZooRepository:Wa,pullAllPromptZooRepositories:Ge,fetchPersonalityZooRepositories:Ve,addPersonalityZooRepository:je,deletePersonalityZooRepository:Qe,pullPersonalityZooRepository:Ke,fetchZooApps:k,installZooApp:Je,fetchAppReadme:We,fetchZooMcps:Z,installZooMcp:He,fetchMcpReadme:Xe,fetchZooPrompts:xa,installZooPrompt:Ye,fetchPromptReadme:an,fetchZooPersonalities:Ha,installZooPersonality:tn,fetchPersonalityReadme:en,createSystemPrompt:yn,updateSystemPrompt:vn,deleteSystemPrompt:wn,updateSystemPromptFromZoo:_n,generateSystemPrompt:hn,fetchInstalledApps:Xa,fetchNextAvailablePort:bn,startApp:Tn,stopApp:$n,restartApp:Sn,updateApp:Bn,uninstallApp:An,updateInstalledApp:zn,fetchAppLog:Rn,fetchAppConfigSchema:Fn,fetchAppConfig:Nn,updateAppConfig:Ln,fetchAppEnv:Pn,updateAppEnv:kn,deleteRegisteredApp:Zn,deleteRegisteredMcp:xn,syncInstallations:Cn,purgeBrokenInstallation:Mn,fixBrokenInstallation:In,handleAppStatusUpdate:Un,fetchFunFacts:B,fetchFunFactCategories:A,createFunFact:On,updateFunFact:Dn,deleteFunFact:En,createFunFactCategory:qn,updateFunFactCategory:Gn,deleteFunFactCategory:Vn,exportFunFacts:jn,exportCategory:Qn,importFunFacts:Kn,importCategoryFromFile:Jn,generateFunFacts:Wn,fetchNewsArticles:Ca,updateNewsArticle:Hn,deleteBatchNewsArticles:Xn,fetchSystemLogs:gt,sendEmailToUsers:ei,enhanceEmail:ni,triggerRssScraping:fi,refreshZooCache:gi,generateSelfSignedCert:ci,downloadCertificate:ri,downloadTrustScript:li,fetchBindingZoo:nn,installLlmFromZoo:sn,fetchTtiBindingZoo:on,installTtiFromZoo:cn,fetchTtsBindingZoo:rn,installTtsFromZoo:ln,fetchSttBindingZoo:dn,installSttFromZoo:un,fetchTtvBindingZoo:pn,installTtvFromZoo:fn,fetchTtmBindingZoo:gn,installTtmFromZoo:mn,fetchModerationQueue:mi,approveContent:yi,deleteContent:vi,fetchRequirements:Ya,installRequirement:wi,fixAllRequirements:_i,sanitizeDatabase:rt,createUser:hi,deleteUser:bi}});export{Fi as u};
