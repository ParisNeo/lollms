import{K as V,W as U,c as g,s as y,n as $,l as c,g as M,e as t,j as a,d as x,p as u,t as L,h as _,H as A,z as k,al as w,Q as h,f as z}from"./index-DfxtQ8tA.js";import{_ as N}from"./GenericModal-DVtH5-xu.js";import{u as P}from"./admin-4S-7YKFv.js";import{_ as T}from"./WysiwygEditor-y6JeoXr0.js";/* empty css                    */import"./InsertImageModal-CvSovMjj.js";const D={class:"flex items-center gap-4"},R={class:"flex-grow"},q=["disabled"],I={class:"space-y-4"},W={class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},G={class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},H={class:"flex justify-between items-center w-full"},K=["disabled"],Q={class:"flex justify-end space-x-3"},F=["disabled"],ae={__name:"EmailUserModal",setup(J){const i=V(),C=P(),{isEnhancingEmail:f}=U(C),{emailModalSubject:o,emailModalBody:n,emailModalBackgroundColor:d,emailModalSendAsText:r}=U(i),E=g(()=>i.modalData("adminUserEmail")),p=g(()=>{var l;return(l=E.value)==null?void 0:l.user}),S=g(()=>{var l;return(l=E.value)==null?void 0:l.onSend}),v=y(""),m=y(!1),b=y(!1);async function B(){if(!o.value&&!n.value){i.addNotification("Please provide a subject or body to enhance.","warning");return}try{const l=await C.enhanceEmail(o.value,n.value,d.value,v.value);l&&(o.value=l.subject,n.value=l.body,d.value=l.background_color||d.value)}catch{}}async function j(){if(!o.value||!n.value){i.addNotification("Subject and body are required.","error");return}b.value=!0;try{S.value&&await S.value({subject:o.value,body:n.value,backgroundColor:d.value,sendAsText:r.value}),i.closeModal("adminUserEmail")}catch{}finally{b.value=!1}}return(l,e)=>(c(),$(N,{"modal-name":"adminUserEmail",title:p.value?`Email User: ${p.value.username}`:"Email User",onClose:e[7]||(e[7]=s=>a(i).closeModal("adminUserEmail")),maxWidthClass:"max-w-4xl"},{body:M(()=>[p.value?(c(),x("form",{key:0,onSubmit:A(j,["prevent"]),class:"p-6 space-y-6"},[t("div",D,[t("div",R,[e[8]||(e[8]=t("label",{for:"user-email-subject",class:"block text-sm font-medium"},"Subject",-1)),k(t("input",{id:"user-email-subject","onUpdate:modelValue":e[0]||(e[0]=s=>w(o)?o.value=s:null),type:"text",class:"input-field mt-1",required:""},null,512),[[h,a(o)]])]),t("div",null,[t("label",{for:"user-email-bg-color",class:u(["block text-sm font-medium",{"text-gray-400 dark:text-gray-500":a(r)}])},"BG Color",2),k(t("input",{id:"user-email-bg-color","onUpdate:modelValue":e[1]||(e[1]=s=>w(d)?d.value=s:null),type:"color",class:"w-20 h-10 mt-1 p-1 border border-gray-300 dark:border-gray-600 rounded-md",disabled:a(r)},null,8,q),[[h,a(d)]])])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium mb-1"},"Body",-1)),z(T,{modelValue:a(n),"onUpdate:modelValue":e[2]||(e[2]=s=>w(n)?n.value=s:null)},null,8,["modelValue"])]),t("div",I,[t("div",W,[e[10]||(e[10]=t("label",{for:"user-send-as-text",class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Send as plain text",-1)),t("button",{onClick:e[3]||(e[3]=s=>r.value=!a(r)),type:"button",class:u(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out",a(r)?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"])},[t("span",{class:u(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition",a(r)?"translate-x-5":"translate-x-0"])},null,2)],2)]),t("div",G,[e[11]||(e[11]=t("label",{for:"user-show-custom-prompt",class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Use Custom AI Prompt",-1)),t("button",{onClick:e[4]||(e[4]=s=>m.value=!m.value),type:"button",class:u(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out",m.value?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"])},[t("span",{class:u(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition",m.value?"translate-x-5":"translate-x-0"])},null,2)],2)])]),m.value?k((c(),x("textarea",{key:0,"onUpdate:modelValue":e[5]||(e[5]=s=>v.value=s),rows:"3",class:"input-field mt-2",placeholder:"e.g., Rewrite this to be more professional..."},null,512)),[[h,v.value]]):_("",!0)],32)):_("",!0)]),footer:M(()=>[t("div",H,[t("button",{type:"button",onClick:B,class:"btn btn-secondary flex items-center gap-2",disabled:a(f)||a(r)},[(c(),x("svg",{xmlns:"http://www.w3.org/2000/svg",class:u(["h-5 w-5",{"animate-spin":a(f)}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e[12]||(e[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.572L16.5 21.75l-.398-1.178a3.375 3.375 0 00-2.3-2.3L12.75 18l1.178-.398a3.375 3.375 0 002.3-2.3L16.5 14.25l.398 1.178a3.375 3.375 0 002.3 2.3l1.178.398-1.178.398a3.375 3.375 0 00-2.3 2.3z"},null,-1)]),2)),t("span",null,L(a(f)?"Enhancing...":"Enhance with AI"),1)],8,K),t("div",Q,[t("button",{type:"button",class:"btn btn-secondary",onClick:e[6]||(e[6]=s=>a(i).closeModal("adminUserEmail"))},"Cancel"),t("button",{type:"button",onClick:j,class:"btn btn-primary",disabled:b.value},L(b.value?"Sending...":"Send Email"),9,F)])])]),_:1},8,["title"]))}};export{ae as default};
