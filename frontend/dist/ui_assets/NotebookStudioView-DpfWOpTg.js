import{a9 as we,s as h,K as te,aa as ae,E as _,q as _e,R as Ce,u as Se,W as E,c as M,w as O,o as Te,n as G,g as K,l as r,d as c,j as b,H as L,h as V,e as a,z as D,f as p,ao as J,t as x,Q as F,ar as Q,p as w,a0 as Ne,m as A,cH as $e,cO as Ie,F as T,i as N,aq as X,y as Y,c9 as Z,a1 as Ae,M as ee,Y as Ue,a4 as Re,$ as Ve,X as De,au as Fe,ax as je,I as Be,ap as Pe,cP as Me,ai as Oe,T as Ge,cQ as Le}from"./index-jm3TVsJn.js";import{_ as We}from"./PageViewLayout-DRScwKfn.js";import{I as qe}from"./IconArchiveBox-BldDlub1.js";const Ee=we("notebooks",()=>{const k=h([]),s=h(null),n=h(!1),f=te(),j=ae();async function U(){n.value=!0;try{const i=await _.get("/api/notebooks");k.value=i.data}finally{n.value=!1}}async function W(i){const d=k.value.find(S=>S.id===i);d&&(s.value=d,s.value.tabs||(s.value.tabs=[])),await U();const u=k.value.find(S=>S.id===i);u?(s.value=u,s.value.tabs||(s.value.tabs=[])):s.value=null}async function l(){if(s.value)try{const i=await _.put(`/api/notebooks/${s.value.id}`,{title:s.value.title,content:s.value.content,artefacts:s.value.artefacts,tabs:s.value.tabs});s.value=i.data;const d=k.value.findIndex(u=>u.id===i.data.id);d!==-1&&(k.value[d]=i.data)}catch{f.addNotification("Failed to save notebook.","error")}}async function B(i){if(!s.value)return;const d=new FormData;d.append("file",i);try{await _.post(`/api/notebooks/${s.value.id}/upload`,d),await U(),s.value=k.value.find(u=>u.id===s.value.id),f.addNotification(`Uploaded ${i.name}`,"success")}catch(u){f.addNotification(`Upload failed: ${i.name}. ${u.message}`,"error"),console.error(u)}}async function q(i,d){if(s.value)try{await _.post(`/api/notebooks/${s.value.id}/artefact`,{title:i,content:d}),await U(),s.value=k.value.find(u=>u.id===s.value.id),f.addNotification(`Saved "${i}" as source.`,"success")}catch(u){f.addNotification(`Failed to save source: ${u.message}`,"error")}}async function $(i){if(s.value)try{const d=await _.post(`/api/notebooks/${s.value.id}/scrape`,{url:i});j.addTask(d.data),f.addNotification(`Scraping task started for ${i}`,"info")}catch(d){f.addNotification(`Scrape request failed: ${d.message}`,"error")}}async function R(i,d,u){if(s.value)try{const S=await _.post(`/api/notebooks/${s.value.id}/process`,{prompt:i,input_tab_ids:d,output_type:u});j.addTask(S.data),f.addNotification(`AI processing (${u}) started.`,"info")}catch{f.addNotification("Failed to start AI processing.","error")}}async function P(){if(s.value)try{f.addNotification("Generating title...","info");const i=await _.post(`/api/notebooks/${s.value.id}/generate_title`);s.value.title=i.data.title,f.addNotification("Title updated.","success");const d=k.value.findIndex(u=>u.id===s.value.id);d!==-1&&(k.value[d].title=i.data.title)}catch{f.addNotification("Failed to generate title.","error")}}function I(i="markdown"){if(!s.value)return;const d={id:crypto.randomUUID(),title:"New Tab",type:i,content:"",images:[]};s.value.tabs.push(d),l()}function g(i){if(!s.value)return;const d=s.value.tabs.findIndex(u=>u.id===i);d!==-1&&(s.value.tabs.splice(d,1),l())}function C(){k.value=[],s.value=null}return{notebooks:k,activeNotebook:s,isLoading:n,fetchNotebooks:U,selectNotebook:W,saveActive:l,uploadSource:B,createTextArtefact:q,scrapeUrl:$,processWithAi:R,generateTitle:P,addTab:I,removeTab:g,$reset:C}}),ze={class:"p-2 space-y-4"},He={class:"space-y-1"},Ke=["onClick"],Je={class:"truncate font-semibold text-sm"},Qe={class:"flex items-center"},Xe=["onClick"],Ye={key:0,class:"absolute inset-0 bg-blue-500/10 border-4 border-dashed border-blue-500 rounded-lg z-50 flex items-center justify-center m-4 pointer-events-none"},Ze={class:"bg-gray-100 dark:bg-gray-800 border-b dark:border-gray-700 pt-2 px-2 flex flex-col gap-2"},et={class:"flex items-center justify-between px-2 pb-2"},tt={class:"flex items-center gap-2 flex-grow"},at={key:0,class:"flex items-center gap-2 mr-4 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-3 py-1 rounded-full animate-pulse"},ot={class:"text-xs font-bold uppercase tracking-wide"},st={class:"bg-white dark:bg-gray-700 rounded-lg p-0.5 flex text-xs font-bold border dark:border-gray-600 flex-shrink-0"},lt={class:"flex items-center gap-2"},nt={class:"flex items-center gap-1 overflow-x-auto custom-scrollbar pb-0"},rt=["onClick"],it=["onClick"],dt={class:"flex-grow flex min-h-0 relative"},ct={class:"flex-grow flex flex-col min-w-0 border-r dark:border-gray-700 relative"},ut={key:0,class:"absolute inset-0 z-30 bg-white/95 dark:bg-gray-900/95 flex flex-col backdrop-blur-sm"},vt={class:"p-4 border-b dark:border-gray-700 flex items-center justify-between shadow-sm bg-white dark:bg-gray-800"},pt={class:"flex items-center gap-3"},bt={class:"font-bold text-sm text-gray-900 dark:text-gray-100"},ft={class:"text-xs text-gray-500 dark:text-gray-400"},gt={class:"text-xs font-mono text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded"},yt={class:"flex-grow overflow-hidden relative"},xt={class:"text-gray-400 shrink-0"},kt={key:1,class:"flex-grow overflow-hidden flex flex-col relative h-full"},ht={key:0,class:"h-full flex flex-col"},mt={class:"p-2 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50"},wt={class:"flex gap-1 bg-white dark:bg-gray-700 rounded p-0.5 border dark:border-gray-600"},_t={class:"flex-grow overflow-hidden relative"},Ct={key:0,class:"absolute inset-0 overflow-y-auto p-8 custom-scrollbar"},St={key:1,class:"h-full overflow-y-auto p-4 custom-scrollbar"},Tt={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Nt=["onClick"],$t={class:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2"},It={class:"text-white text-xs truncate"},At={key:1,class:"text-center text-gray-500 py-10"},Ut={key:2,class:"h-full overflow-hidden flex flex-col"},Rt={class:"flex-grow overflow-y-auto p-8 custom-scrollbar bg-gray-100 dark:bg-gray-900"},Vt={key:2,class:"flex-grow flex items-center justify-center text-gray-400"},Dt={class:"p-4 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},Ft={class:"flex items-center gap-2 mb-2 overflow-x-auto pb-1"},jt=["onClick"],Bt={class:"flex gap-2"},Pt={class:"relative flex-grow"},Mt=["placeholder"],Ot=["value","disabled"],Gt=["disabled"],Lt={key:0,class:"text-[10px] text-gray-400 mt-1"},Wt={class:"w-72 flex-shrink-0 flex flex-col bg-gray-50/50 dark:bg-gray-900/30 border-l dark:border-gray-700"},qt={class:"p-3 border-b dark:border-gray-700 flex justify-between items-center"},Et={class:"flex gap-1"},zt={class:"flex-grow overflow-y-auto p-2 space-y-2 custom-scrollbar"},Ht={class:"flex items-center justify-between mb-2"},Kt={class:"flex items-center gap-2 min-w-0"},Jt=["title"],Qt={class:"flex items-center"},Xt=["onClick"],Yt=["onClick"],Zt=["onClick"],ea={key:0,class:"text-center py-10 text-[10px] uppercase font-bold text-gray-400 opacity-50 italic px-4"},ta={key:1,class:"h-full flex items-center justify-center text-gray-500 italic text-sm"},aa={__name:"NotebookStudioView",setup(k){const s=te(),n=Ee(),f=Ce(),j=ae(),U=Se(),{notebooks:W,activeNotebook:l}=E(n),{tasks:B}=E(j),{user:q}=E(U),$=h(""),R=h(!1),P=h(null),I=h(!0),g=h(null),C=h(new Set),i=h("text"),d=h("general"),u=h(null),S=M(()=>{var o;return!!((o=q.value)!=null&&o.tti_binding_model_name)}),oe=M(()=>d.value==="story"?[{value:"story_structure",label:"Update Structure"},{value:"story_chapter",label:"Write Chapter"},{value:"text",label:"Free Text"}]:[{value:"text",label:"Text"},{value:"images",label:"Images"},{value:"presentation",label:"Slides"}]),m=M(()=>l.value?B.value.find(o=>o.name.includes(l.value.id)&&(o.status==="running"||o.status==="pending")):null),v=M(()=>!l.value||!l.value.tabs?null:l.value.tabs.find(o=>o.id===g.value)||l.value.tabs[0]);O(l,o=>{o&&o.tabs&&o.tabs.length>0?(!g.value||!o.tabs.find(t=>t.id===g.value))&&(g.value=o.tabs[o.tabs.length-1].id):o&&(!o.tabs||o.tabs.length===0)&&n.addTab()},{immediate:!0}),O(()=>{var o,t;return(t=(o=l.value)==null?void 0:o.tabs)==null?void 0:t.length},(o,t)=>{o>t&&m.value&&(g.value=l.value.tabs[o-1].id)}),O(()=>{var o,t;return(t=(o=m.value)==null?void 0:o.logs)==null?void 0:t.length},()=>{Ge(()=>{u.value&&(u.value.scrollTop=u.value.scrollHeight)})},{deep:!0}),O(B,o=>{l.value&&o.find(e=>e.status==="completed"&&e.result&&e.result.notebook_id===l.value.id)&&n.fetchNotebooks().then(()=>{n.selectNotebook(l.value.id),l.value.tabs.length>0&&!l.value.tabs.find(e=>e.id===g.value)&&(g.value=l.value.tabs[l.value.tabs.length-1].id)})},{deep:!0});async function se(){try{const o=await _.post("/api/notebooks",{title:"New Research",content:""});await n.fetchNotebooks(),await n.selectNotebook(o.data.id)}catch{s.addNotification("Failed to create notebook.","error")}}async function le(o){await s.showConfirmation({title:"Delete Notebook?"})&&(await n.selectNotebook(o),await _.delete(`/api/notebooks/${o}`),await n.fetchNotebooks(),n.activeNotebook=null)}async function ne(o){o.is_loaded=!o.is_loaded,await n.saveActive()}async function re(o){await s.showConfirmation({title:"Remove Source?"})&&(l.value.artefacts=l.value.artefacts.filter(t=>t.filename!==o),await n.saveActive())}async function ie(o){s.openModal("sourceViewer",{title:o.filename,content:o.content,language:"markdown"})}async function de(){if(!v.value)return;const{confirmed:o,value:t}=await s.showConfirmation({title:"Send to Chat",message:"Append current tab content to discussion context:",inputType:"select",inputOptions:Object.values(f.discussions).map(e=>({text:e.title,value:e.id})),confirmText:"Send"});if(o&&t){const e=v.value.content||(v.value.type==="gallery"?JSON.stringify(v.value.images):"");await f.appendToDataZone({discussionId:t,content:e}),s.addNotification("Content sent to chat.","success")}}async function ce(o){R.value=!1;const t=Array.from(o.dataTransfer.files);!l.value||t.length===0||(s.addNotification(`Uploading ${t.length} source(s)...`,"info"),await Promise.all(t.map(e=>n.uploadSource(e))))}function ue(){P.value.click()}async function ve(o){const t=Array.from(o.target.files);!l.value||t.length===0||(s.addNotification(`Uploading ${t.length} source(s)...`,"info"),await Promise.all(t.map(e=>n.uploadSource(e))),o.target.value="")}async function pe(){if(!l.value)return;const{confirmed:o,value:t}=await s.showConfirmation({title:"Scrape URL",message:"Enter URL to scrape content from:",inputType:"text",inputPlaceholder:"https://example.com",confirmText:"Scrape"});o&&t&&await n.scrapeUrl(t)}async function be(){l.value&&(await n.selectNotebook(l.value.id),s.addNotification("Notebook refreshed.","success"))}async function fe(){if(!v.value)return;const{confirmed:o,value:t}=await s.showConfirmation({title:"Convert to Source",message:"Enter a title for the new source artefact:",inputType:"text",inputPlaceholder:"My Tab Notes",confirmText:"Convert"});if(o&&t){const e=v.value.content||(v.value.type==="gallery"?JSON.stringify(v.value.images):"");await n.createTextArtefact(t,e)}}function ge(o){g.value=o}async function ye(){n.addTab(),setTimeout(()=>{l.value.tabs.length>0&&(g.value=l.value.tabs[l.value.tabs.length-1].id)},100)}function xe(o){confirm("Delete this tab?")&&(n.removeTab(o),g.value===o&&(g.value=l.value.tabs.length>0?l.value.tabs[0].id:null))}function ke(o){C.value.has(o)?C.value.delete(o):C.value.add(o)}function z(){if(!$.value.trim())return;const o=Array.from(C.value);n.processWithAi($.value,o,i.value),$.value="",C.value.clear()}function he(){n.generateTitle()}function me(o){s.openImageViewer({imageList:[{src:o,prompt:"Notebook Image"}],startIndex:0})}return Te(n.fetchNotebooks),(o,t)=>(r(),G(We,{title:"Notebook Studio","title-icon":Le},{sidebar:K(()=>[a("div",ze,[a("button",{onClick:se,class:"btn btn-primary w-full flex items-center justify-center gap-2 py-3"},[p(Y,{class:"w-5 h-5"}),t[18]||(t[18]=A(" New Notebook "))]),a("div",He,[(r(!0),c(T,null,N(b(W),e=>{var y;return r(),c("div",{key:e.id,onClick:H=>b(n).selectNotebook(e.id),class:w(["p-3 rounded-xl cursor-pointer flex justify-between items-center group transition-all",((y=b(l))==null?void 0:y.id)===e.id?"bg-blue-600 text-white":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"])},[a("span",Je,x(e.title),1),a("div",Qe,[a("button",{onClick:L(H=>le(e.id),["stop"]),class:"opacity-0 group-hover:opacity-100 p-1 hover:text-red-400"},[p(Oe,{class:"w-4 h-4"})],8,Xe)])],10,Ke)}),128))])])]),main:K(()=>[b(l)?(r(),c("div",{key:0,class:"h-full flex flex-col bg-white dark:bg-gray-900 relative",onDragover:t[16]||(t[16]=L(e=>R.value=!0,["prevent"])),onDragleave:t[17]||(t[17]=e=>R.value=!1),onDrop:L(ce,["prevent"])},[R.value?(r(),c("div",Ye,t[19]||(t[19]=[a("p",{class:"text-2xl font-black text-blue-600 uppercase"},"Drop Research Sources Here",-1)]))):V("",!0),a("div",Ze,[a("div",et,[a("div",tt,[m.value?(r(),c("div",at,[p(J,{class:"w-4 h-4 animate-spin"}),a("span",ot,"Processing... "+x(m.value.progress)+"%",1)])):V("",!0),D(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>b(l).title=e),onBlur:t[1]||(t[1]=(...e)=>b(n).saveActive&&b(n).saveActive(...e)),class:"text-lg font-black bg-transparent border-none focus:ring-0 w-full"},null,544),[[F,b(l).title]]),a("button",{onClick:he,class:"p-1 rounded hover:bg-purple-100 dark:hover:bg-purple-900/50 text-purple-500",title:"Auto-rename with AI"},[p(Q,{class:"w-4 h-4"})]),a("div",st,[a("button",{onClick:t[2]||(t[2]=e=>d.value="general"),class:w(["px-2 py-1 rounded-md transition-colors",d.value==="general"?"bg-blue-100 text-blue-700":"text-gray-500"])},"General",2),a("button",{onClick:t[3]||(t[3]=e=>d.value="story"),class:w(["px-2 py-1 rounded-md transition-colors",d.value==="story"?"bg-purple-100 text-purple-700":"text-gray-500"])},"Story",2)])]),a("div",lt,[a("button",{onClick:be,class:"btn btn-secondary btn-sm",title:"Refresh"},[p(Ne,{class:"w-4 h-4"})]),a("button",{onClick:fe,class:"btn btn-secondary btn-sm gap-2",title:"Save content as a new source"},[p(qe,{class:"w-4 h-4"}),t[20]||(t[20]=A(" Src "))]),a("button",{onClick:de,class:"btn btn-secondary btn-sm gap-2"},[p($e,{class:"w-4 h-4"}),t[21]||(t[21]=A(" To Chat"))]),a("button",{onClick:t[4]||(t[4]=(...e)=>b(n).saveActive&&b(n).saveActive(...e)),class:"btn btn-primary btn-sm gap-2"},[p(Ie,{class:"w-4 h-4"}),t[22]||(t[22]=A(" Save"))])])]),a("div",nt,[(r(!0),c(T,null,N(b(l).tabs,e=>(r(),c("div",{key:e.id,class:w(["group relative flex items-center gap-2 px-4 py-2 rounded-t-lg cursor-pointer transition-colors border-t border-x border-transparent hover:bg-gray-200 dark:hover:bg-gray-700",g.value===e.id?"bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 text-blue-600 dark:text-blue-400 font-bold":"text-gray-500 bg-gray-100 dark:bg-gray-800 border-b border-gray-300 dark:border-gray-600"])},[a("span",{onClick:y=>ge(e.id),class:"text-xs uppercase tracking-wide truncate max-w-[150px]"},x(e.title),9,rt),a("button",{onClick:L(y=>xe(e.id),["stop"]),class:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500"},[p(X,{class:"w-3 h-3"})],8,it)],2))),128)),a("button",{onClick:ye,class:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 mb-1"},[p(Y,{class:"w-4 h-4"})])])]),a("div",dt,[a("div",ct,[m.value?(r(),c("div",ut,[a("div",vt,[a("div",pt,[p(J,{class:"w-5 h-5 text-blue-600 animate-spin"}),a("div",null,[a("h3",bt,x(m.value.name),1),a("p",ft,x(m.value.description),1)])]),a("div",gt,x(m.value.progress)+"% ",1)]),a("div",yt,[a("div",{ref_key:"logsContainer",ref:u,class:"absolute inset-0 overflow-y-auto p-4 font-mono text-xs text-gray-600 dark:text-gray-300 space-y-1"},[(r(!0),c(T,null,N(m.value.logs,(e,y)=>(r(),c("div",{key:y,class:"flex gap-2"},[a("span",xt,"["+x(new Date(e.timestamp).toLocaleTimeString())+"]",1),a("span",{class:w({"text-red-500":e.level==="ERROR","text-yellow-500":e.level==="WARNING"})},x(e.message),3)]))),128))],512)])])):V("",!0),v.value?(r(),c("div",kt,[v.value.type==="markdown"?(r(),c("div",ht,[a("div",mt,[D(a("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>v.value.title=e),onBlur:t[6]||(t[6]=(...e)=>b(n).saveActive&&b(n).saveActive(...e)),class:"bg-transparent border-none text-sm font-bold text-gray-700 dark:text-gray-300 focus:ring-0",placeholder:"Tab Title"},null,544),[[F,v.value.title]]),a("div",wt,[a("button",{onClick:t[7]||(t[7]=e=>I.value=!0),class:w(["p-1 rounded",I.value?"bg-blue-100 text-blue-600":"text-gray-500"])},[p(Z,{class:"w-4 h-4"})],2),a("button",{onClick:t[8]||(t[8]=e=>I.value=!1),class:w(["p-1 rounded",I.value?"text-gray-500":"bg-blue-100 text-blue-600"])},[p(Ae,{class:"w-4 h-4"})],2)])]),a("div",_t,[I.value?(r(),c("div",Ct,[p(ee,{content:v.value.content,class:"prose dark:prose-invert max-w-none"},null,8,["content"])])):(r(),G(Ue,{key:1,modelValue:v.value.content,"onUpdate:modelValue":t[9]||(t[9]=e=>v.value.content=e),onBlur:b(n).saveActive,class:"h-full"},null,8,["modelValue","onBlur"]))])])):v.value.type==="gallery"?(r(),c("div",St,[D(a("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>v.value.title=e),onBlur:t[11]||(t[11]=(...e)=>b(n).saveActive&&b(n).saveActive(...e)),class:"w-full mb-4 bg-transparent border-b border-gray-300 dark:border-gray-700 text-lg font-bold p-2",placeholder:"Gallery Title"},null,544),[[F,v.value.title]]),v.value.images&&v.value.images.length>0?(r(),c("div",Tt,[(r(!0),c(T,null,N(v.value.images,(e,y)=>(r(),c("div",{key:y,class:"relative group aspect-square rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 border dark:border-gray-700 cursor-pointer",onClick:H=>me(e.path)},[p(Re,{src:e.path,class:"w-full h-full object-cover"},null,8,["src"]),a("div",$t,[a("p",It,x(e.prompt),1)])],8,Nt))),128))])):(r(),c("div",At,"No images generated."))])):v.value.type==="slides"?(r(),c("div",Ut,[D(a("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>v.value.title=e),onBlur:t[13]||(t[13]=(...e)=>b(n).saveActive&&b(n).saveActive(...e)),class:"w-full p-2 bg-transparent border-b text-lg font-bold",placeholder:"Presentation Title"},null,544),[[F,v.value.title]]),a("div",Rt,[(r(!0),c(T,null,N(v.value.content.split("---"),(e,y)=>(r(),c("div",{key:y,class:"bg-white dark:bg-gray-800 p-8 shadow-lg rounded-xl mb-8 min-h-[400px] prose dark:prose-invert max-w-none border dark:border-gray-700"},[p(ee,{content:e.trim()},null,8,["content"])]))),128))])])):V("",!0)])):(r(),c("div",Vt,"No tab selected.")),a("div",Dt,[a("div",Ft,[t[23]||(t[23]=a("span",{class:"text-xs font-bold text-gray-500 uppercase"},"Input Context:",-1)),(r(!0),c(T,null,N(b(l).tabs,e=>(r(),c("div",{key:"ctx-"+e.id,onClick:y=>ke(e.id),class:w(["px-2 py-1 rounded text-xs cursor-pointer border transition-colors select-none whitespace-nowrap",C.value.has(e.id)?"bg-blue-100 border-blue-300 text-blue-700":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-500"])},x(e.title),11,jt))),128))]),a("div",Bt,[a("div",Pt,[D(a("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>$.value=e),placeholder:d.value==="story"?"Describe the chapter or structural change...":"Ask AI to process selected tabs...",class:"input-field w-full pr-32",onKeyup:Ve(z,["enter"])},null,40,Mt),[[F,$.value]]),D(a("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>i.value=e),class:"absolute right-1 top-1 bottom-1 bg-gray-100 dark:bg-gray-700 border-none text-xs rounded px-2 outline-none cursor-pointer text-gray-600 dark:text-gray-300 font-bold uppercase"},[(r(!0),c(T,null,N(oe.value,e=>(r(),c("option",{key:e.value,value:e.value,disabled:e.value==="images"&&!S.value},x(e.label),9,Ot))),128))],512),[[De,i.value]])]),a("button",{onClick:z,disabled:!!m.value,class:"btn btn-primary gap-2 w-24"},[p(Q,{class:"w-4 h-4"}),t[24]||(t[24]=A(" Go "))],8,Gt)]),d.value==="story"?(r(),c("p",Lt,t[25]||(t[25]=[A(" Tip: Use "),a("code",null,"<ScanForInfos>query</ScanForInfos>",-1),A(" in prompt or context to trigger agentic lookup. ")]))):V("",!0)])]),a("div",Wt,[a("div",qt,[t[26]||(t[26]=a("span",{class:"font-black text-[10px] uppercase text-gray-500 tracking-widest"},"Research Sources",-1)),a("div",Et,[a("button",{onClick:ue,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-500",title:"Upload File"},[p(Fe,{class:"w-4 h-4"})]),a("input",{type:"file",ref_key:"fileInput",ref:P,onChange:ve,multiple:"",class:"hidden"},null,544),a("button",{onClick:pe,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-500",title:"Scrape URL"},[p(je,{class:"w-4 h-4"})])])]),a("div",zt,[(r(!0),c(T,null,N(b(l).artefacts,e=>(r(),c("div",{key:e.filename,class:"p-3 bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-700 shadow-sm group hover:shadow-md transition-shadow"},[a("div",Ht,[a("div",Kt,[p(Be,{class:"w-4 h-4 text-blue-400 shrink-0"}),a("span",{class:"text-xs truncate font-bold",title:e.filename},x(e.filename),9,Jt)]),a("div",Qt,[a("button",{onClick:y=>ie(e),class:"text-gray-400 hover:text-blue-500 mr-1 opacity-0 group-hover:opacity-100 transition-opacity",title:"View Content"},[p(Z,{class:"w-3.5 h-3.5"})],8,Xt),a("button",{onClick:y=>re(e.filename),class:"text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity"},[p(X,{class:"w-3.5 h-3.5"})],8,Yt)])]),a("button",{onClick:y=>ne(e),class:w(["w-full flex items-center justify-between text-[10px] font-bold uppercase tracking-tighter px-2 py-1.5 rounded transition-colors",e.is_loaded?"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700 text-gray-500"])},[a("span",null,x(e.is_loaded?"Active":"Inactive"),1),e.is_loaded?(r(),G(Pe,{key:0,class:"w-3 h-3"})):(r(),G(Me,{key:1,class:"w-3 h-3"}))],10,Zt)]))),128)),b(l).artefacts.length===0?(r(),c("div",ea," Drop files here or use buttons above to add sources. ")):V("",!0)])])])],32)):(r(),c("div",ta,"Select or create a notebook to begin."))]),_:1}))}},na=_e(aa,[["__scopeId","data-v-b7248f3e"]]);export{na as default};
