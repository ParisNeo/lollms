import{_ as $,u as N,b,f as M,o as r,w as _,a as e,c as a,g as d,aw as S,F as h,j as x,V as B,t as p,I as w,ar as D,P as F}from"./index-D2Id9a0s.js";import{_ as T}from"./GenericModal-_6JiAudK.js";const U={class:"p-6 space-y-8 bg-gray-50 dark:bg-gray-900/50 min-h-[400px]"},V={key:0,class:"flex flex-col items-center justify-center py-20 text-gray-400"},z={key:1,class:"space-y-6"},E={class:"px-4 py-3 bg-white dark:bg-gray-800 border-b dark:border-gray-700 flex items-center justify-between"},W={class:"flex items-center gap-2"},H={class:"font-bold text-sm text-gray-700 dark:text-gray-200 uppercase tracking-wider"},P={class:"text-[10px] font-mono text-gray-400"},J={class:"p-4 space-y-4"},q={class:"flex items-center gap-2"},A={class:"text-[10px] font-black uppercase text-blue-500 tracking-widest"},G={key:0,class:"image-result-container group"},K={class:"relative rounded-lg overflow-hidden border dark:border-gray-700 bg-gray-200 dark:bg-black"},Q=["src"],X={class:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3"},Y=["onClick"],Z=["onClick"],tt={key:1,class:"html-result-container w-full h-[600px] border dark:border-gray-700 rounded-lg overflow-hidden bg-white shadow-sm relative"},et=["srcdoc"],st={class:"absolute top-2 right-2 flex gap-2 z-10"},ot=["onClick"],nt={key:2,class:"text-result-container prose dark:prose-invert max-w-none bg-white dark:bg-gray-800 p-6 rounded-xl shadow-inner border dark:border-gray-700"},rt={class:"mt-4 flex justify-end"},at=["onClick"],it={key:3,class:"p-3 bg-gray-100 dark:bg-gray-950 rounded font-mono text-xs overflow-x-auto border dark:border-gray-800"},lt={class:"text-gray-600 dark:text-gray-400"},ct={__name:"InteractiveOutputModal",setup(dt){const u=N(),l=b(()=>u.modalData("interactiveOutput")),y=b(()=>{var t;return((t=l.value)==null?void 0:t.title)||"Execution Results"}),f=b(()=>{var s,o,i;const t=(s=l.value)==null?void 0:s.results;return t&&Object.keys(t).length>0?t:(o=l.value)!=null&&o.content?{Info:{content:l.value.content}}:(i=l.value)!=null&&i.htmlContent?{Preview:{html_output:l.value.htmlContent}}:{}});function k(t,s){return typeof s!="string"?!1:t.toLowerCase().includes("image")||t.toLowerCase().includes("_b64")||s.startsWith("data:image/")}function v(t,s){if(typeof s!="string")return!1;const o=t.toLowerCase();if(o.includes("html")||o.includes("visualization")||o.includes("interactive")||o.includes("animation")||o.includes("plot"))return!0;const i=s.trim();return/^\s*<!doctype html>|^\s*<html/i.test(i)}function C(t,s){return typeof s!="string"?!1:t.toLowerCase().includes("text")||t.toLowerCase().includes("content")||t.toLowerCase().includes("summary")||t.toLowerCase().includes("markdown")}function g(t){return t.startsWith("data:image/")?t:`data:image/png;base64,${t}`}function L(t){const s=new Blob([t],{type:"text/html"}),o=URL.createObjectURL(s);window.open(o,"_blank"),setTimeout(()=>URL.revokeObjectURL(o),6e4)}function I(t,s){const o=document.createElement("a");o.href=g(t),o.download=`${s||"generated_image"}.png`,o.click()}function O(t){u.openImageViewer({imageList:[{src:t}],startIndex:0})}function j(t){u.copyToClipboard(t,"Result copied to clipboard!")}function R(){u.closeModal("interactiveOutput")}return(t,s)=>(r(),M(T,{modalName:"interactiveOutput",title:y.value,maxWidthClass:"max-w-6xl"},{body:_(()=>[e("div",U,[Object.keys(f.value).length===0?(r(),a("div",V,[d(S,{class:"w-12 h-12 mb-4 opacity-20"}),s[0]||(s[0]=e("p",{class:"text-lg font-medium"},"No results generated yet.",-1))])):(r(),a("div",z,[(r(!0),a(h,null,x(f.value,(o,i)=>(r(),a("div",{key:i,class:"result-panel"},[e("div",E,[e("div",W,[d(B,{class:"w-5 h-5 text-green-500"}),e("span",H,p(i),1)]),e("span",P,"Node ID: "+p(i),1)]),e("div",J,[(r(!0),a(h,null,x(o,(n,c)=>(r(),a("div",{key:c,class:"space-y-2"},[e("div",q,[e("span",A,p(c),1),s[1]||(s[1]=e("div",{class:"h-px flex-grow bg-gray-100 dark:bg-gray-700"},null,-1))]),k(c,n)?(r(),a("div",G,[e("div",K,[e("img",{src:g(n),class:"max-w-full h-auto mx-auto shadow-2xl"},null,8,Q),e("div",X,[e("button",{onClick:m=>O(g(n)),class:"btn-img-action",title:"Full Screen"},[d(w,{class:"w-5 h-5"})],8,Y),e("button",{onClick:m=>I(n,c),class:"btn-img-action",title:"Download"},[d(D,{class:"w-5 h-5"})],8,Z)])])])):v(c,n)?(r(),a("div",tt,[e("iframe",{srcdoc:n,class:"w-full h-full",sandbox:"allow-scripts allow-same-origin allow-popups allow-forms allow-modals",referrerpolicy:"no-referrer"},null,8,et),e("div",st,[e("button",{onClick:m=>L(n),class:"p-2 bg-white/80 dark:bg-black/50 hover:bg-white dark:hover:bg-black text-gray-700 dark:text-gray-200 rounded-full shadow-sm backdrop-blur-sm transition-all border dark:border-gray-600",title:"Open in New Tab"},[d(w,{class:"w-4 h-4"})],8,ot)])])):C(c,n)?(r(),a("div",nt,[d(F,{content:n},null,8,["content"]),e("div",rt,[e("button",{onClick:m=>j(n),class:"text-[10px] font-bold text-gray-400 hover:text-blue-500 uppercase tracking-widest transition-colors"},"Copy Raw Text",8,at)])])):(r(),a("div",it,[e("pre",lt,p(JSON.stringify(n,null,2)),1)]))]))),128))])]))),128))]))])]),footer:_(()=>[e("div",{class:"flex justify-between w-full px-4"},[s[2]||(s[2]=e("p",{class:"text-xs text-gray-500 self-center"},"Results are updated in real-time during flow execution.",-1)),e("button",{onClick:R,class:"btn btn-primary px-8"},"Done")])]),_:1},8,["title"]))}},gt=$(ct,[["__scopeId","data-v-264e975d"]]);export{gt as default};
