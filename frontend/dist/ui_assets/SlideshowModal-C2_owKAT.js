import{Z as P,u as $,a8 as B,c as a,L,j as T,$ as A,a as g,o,f as n,w as z,e as i,l as m,as as N,b as e,t as b,F as K,n as U,J as V,cp as O,cv as R,aD as W,a1 as X,aw as q,aa as E,cw as J,X as Y,a4 as Z}from"./index-CYIRZvEj.js";const G={class:"w-full md:w-64 flex-shrink-0 bg-gray-900 border-r border-gray-800 flex flex-col h-full z-20"},H={class:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-950"},Q={class:"text-xs text-gray-500 font-mono"},ee={class:"flex-grow overflow-y-auto custom-scrollbar p-2 space-y-2"},te=["onClick"],se=["src"],oe={class:"absolute bottom-1 left-1 bg-black/60 px-1.5 py-0.5 rounded text-[10px] font-bold font-mono"},le={class:"flex-grow relative flex flex-col h-full bg-black"},ae={class:"absolute top-0 left-0 right-0 p-4 flex justify-between items-start z-30 pointer-events-none"},re={class:"pointer-events-auto bg-black/40 backdrop-blur-md rounded-full px-4 py-1.5 text-sm font-medium border border-white/10"},ne={class:"pointer-events-auto flex gap-2"},ie=["src"],ce={class:"p-4 border-t border-white/10 bg-gray-900/80 backdrop-blur flex justify-center gap-4 z-30"},de={__name:"SlideshowModal",setup(ue){const r=$(),x=B(),k=a(()=>r.slideshow.isOpen),c=a(()=>r.slideshow.slides||[]),l=a(()=>r.slideshow.startIndex||0),F=a(()=>r.slideshow.title),y=a(()=>r.slideshow.messageId),j=a(()=>c.value[l.value]||{}),_=a(()=>l.value<c.value.length-1),S=a(()=>l.value>0),f=L(!1);function d(){r.closeSlideshow()}function v(t){r.setSlideshowIndex(t)}function p(){_.value&&v(l.value+1)}function h(){S.value&&v(l.value-1)}function D(){document.fullscreenElement?(document.exitFullscreen(),f.value=!1):(document.documentElement.requestFullscreen(),f.value=!0)}function M(t){t.deltaY>0?p():h()}function C(t){k.value&&(t.key==="Escape"&&d(),(t.key==="ArrowRight"||t.key==="ArrowDown"||t.key==="Space")&&p(),(t.key==="ArrowLeft"||t.key==="ArrowUp")&&h())}async function I(t){y.value&&await x.exportMessage({discussionId:x.currentDiscussionId,messageId:y.value,format:t})}return T(()=>window.addEventListener("keydown",C)),A(()=>window.removeEventListener("keydown",C)),(t,s)=>(o(),g(Z,{to:"body"},[n(E,{"enter-active-class":"transition-opacity ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:z(()=>[k.value?(o(),i("div",{key:0,class:"fixed inset-0 z-[100] bg-black/90 backdrop-blur-md flex flex-col md:flex-row h-full w-full text-white overflow-hidden",onKeydown:N(d,["esc"])},[e("div",G,[e("div",H,[s[2]||(s[2]=e("h3",{class:"font-bold text-sm uppercase tracking-wider text-gray-400"},"Slides",-1)),e("span",Q,b(l.value+1)+" / "+b(c.value.length),1)]),e("div",ee,[(o(!0),i(K,null,U(c.value,(w,u)=>(o(),i("div",{key:u,onClick:be=>v(u),class:V(["relative aspect-video rounded-md overflow-hidden cursor-pointer border-2 transition-all group",u===l.value?"border-blue-500 ring-2 ring-blue-500/50":"border-transparent hover:border-gray-600"])},[e("img",{src:w.src,class:"w-full h-full object-cover",loading:"lazy"},null,8,se),s[3]||(s[3]=e("div",{class:"absolute inset-0 bg-black/20 group-hover:bg-transparent transition-colors"},null,-1)),e("div",oe,b(u+1),1)],10,te))),128))]),e("div",{class:"md:hidden p-2 border-t border-gray-800"},[e("button",{onClick:d,class:"w-full py-2 bg-gray-800 rounded text-sm"},"Close")])]),e("div",le,[e("div",ae,[e("div",re,b(F.value||"Presentation"),1),e("div",ne,[e("button",{onClick:D,class:"p-2 rounded-full bg-black/40 hover:bg-white/20 backdrop-blur-md border border-white/10 transition-colors",title:"Fullscreen"},[f.value?(o(),g(R,{key:1,class:"w-5 h-5"})):(o(),g(O,{key:0,class:"w-5 h-5"}))]),e("button",{onClick:d,class:"p-2 rounded-full bg-black/40 hover:bg-red-500/20 hover:text-red-400 backdrop-blur-md border border-white/10 transition-colors",title:"Close"},[n(W,{class:"w-5 h-5"})])])]),e("div",{class:"flex-grow flex items-center justify-center p-4 md:p-10 overflow-hidden relative group",onWheel:M},[S.value?(o(),i("button",{key:0,onClick:h,class:"absolute left-4 z-20 p-3 rounded-full bg-black/20 hover:bg-black/60 hover:scale-110 transition-all backdrop-blur text-white/70 hover:text-white"},[n(X,{class:"w-8 h-8"})])):m("",!0),_.value?(o(),i("button",{key:1,onClick:p,class:"absolute right-4 z-20 p-3 rounded-full bg-black/20 hover:bg-black/60 hover:scale-110 transition-all backdrop-blur text-white/70 hover:text-white"},[n(q,{class:"w-8 h-8"})])):m("",!0),n(E,{name:"slide-fade",mode:"out-in"},{default:z(()=>[(o(),i("div",{key:l.value,class:"relative max-w-full max-h-full shadow-2xl"},[e("img",{src:j.value.src,class:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-black/50"},null,8,ie)]))]),_:1})],32),e("div",ce,[e("button",{onClick:s[0]||(s[0]=w=>I("pptx")),class:"btn-action"},[n(J,{class:"w-5 h-5 text-orange-400"}),s[4]||(s[4]=e("span",null,"Export PPTX",-1))]),e("button",{onClick:s[1]||(s[1]=w=>I("pdf")),class:"btn-action"},[n(Y,{class:"w-5 h-5 text-red-400"}),s[5]||(s[5]=e("span",null,"Export PDF",-1))])])])],32)):m("",!0)]),_:1})]))}},ve=P(de,[["__scopeId","data-v-8c00fc35"]]);export{ve as default};
