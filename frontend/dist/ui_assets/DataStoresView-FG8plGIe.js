const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["ui_assets/DataStoreGraphManager-DOGMmUcv.js","ui_assets/index-IMwO7oGA.js","ui_assets/index-Df1oM2mJ.css"])))=>i.map(i=>d[i]);
import{ag as dt,u as ct,ad as mt,g as vt,an as ze,L as u,c as O,j as pt,k as ie,$ as ft,a as S,w as be,b as t,f as g,e as n,l as c,K as ue,T as y,a7 as z,d as Z,ap as Re,F as T,n as U,t as i,m as k,aB as P,B as qe,U as gt,a3 as yt,au as bt,ax as Le,J as G,V as ht,ar as xt,aK as kt,aE as Pe,aG as wt,as as _t,aL as St,q as Ct,aA as Dt,R as zt,at as $t,M as Vt,H as Mt,p as Tt,o as s,Y as Ft,aH as At,aI as It,aD as $e}from"./index-IMwO7oGA.js";import{u as Ut}from"./admin-pNfXmtNC.js";import{P as jt}from"./PageViewLayout-B9-AqoMz.js";import{_ as Ve}from"./JsonRenderer-BWdltj6u.js";import{_ as Nt}from"./GenericModal-D7D7fv2K.js";/* empty css                                                                       */const Et={class:"space-y-1 mt-2"},Rt=["onClick"],qt={class:"truncate"},Lt={class:"space-y-1 mt-2"},Pt=["onClick"],Kt={class:"truncate"},Ot={class:"relative h-full w-full"},Gt={key:0,class:"p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm h-full overflow-y-auto"},Bt={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Qt=["label"],Ht=["value"],Jt={key:0,class:"text-xs text-red-500 mt-1"},Wt={key:1,class:"p-4 border dark:border-gray-700 rounded-lg space-y-4"},Yt={class:"font-medium text-lg"},Xt={class:"text-sm text-gray-500"},Zt={key:0,class:"space-y-4"},ea={key:0},ta=["for"],aa={key:0,class:"text-red-500"},la={class:"relative mt-1"},sa=["type","onUpdate:modelValue","placeholder"],na=["onClick","title"],oa={class:"flex justify-end gap-3"},ra=["disabled"],ia={key:1,class:"h-full flex items-center justify-center bg-white dark:bg-gray-800 rounded-lg shadow-sm"},ua={class:"text-center"},da={key:2,class:"text-center py-20 bg-white dark:bg-gray-800 rounded-lg shadow-sm"},ca={key:3,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md h-full overflow-hidden flex flex-col"},ma={class:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-start flex-wrap gap-4"},va={class:"text-2xl font-bold text-gray-900 dark:text-white"},pa={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},fa={class:"flex items-center text-xs text-gray-500 dark:text-gray-400 mt-2"},ga={class:"mt-2 text-xs font-mono p-2 bg-gray-100 dark:bg-gray-700/50 rounded-md"},ya={key:0,class:"mt-1"},ba={class:"flex items-center space-x-3 flex-shrink-0"},ha={class:"border-b border-gray-200 dark:border-gray-700 px-6"},xa={class:"-mb-px flex space-x-6","aria-label":"Tabs"},ka={class:"p-6 flex-grow overflow-y-auto space-y-8"},wa={key:0,class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6 space-y-4"},_a={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Sa={class:"relative flex items-start pt-7"},Ca={class:"flex h-6 items-center"},Da={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-4"},za={class:"flex justify-center gap-2 flex-wrap"},$a={class:"border rounded-lg p-6 bg-white dark:bg-gray-800 dark:border-gray-600 flex flex-col min-h-[180px]"},Va={class:"text-sm font-semibold mb-3 flex items-center gap-2"},Ma={class:"space-y-3 flex-grow"},Ta={class:"flex items-center gap-4"},Fa={class:"flex-grow"},Aa={class:"self-end"},Ia=["disabled"],Ua={key:0},ja={key:0,class:"mt-4"},Na={class:"flex items-center gap-4 mt-1"},Ea={class:"flex items-center"},Ra={class:"flex items-center"},qa={key:1,class:"mt-4"},La={class:"text-sm font-medium mb-2"},Pa={class:"list-disc list-inside text-sm space-y-1 max-h-40 overflow-y-auto mb-4 p-2 bg-gray-100 dark:bg-gray-800 rounded-md"},Ka={class:"truncate"},Oa=["onClick"],Ga={key:2,class:"space-y-4 mt-4 max-h-96 overflow-y-auto"},Ba={class:"flex justify-between items-start"},Qa={class:"font-semibold text-sm truncate"},Ha=["onClick"],Ja=["onUpdate:modelValue"],Wa={key:3,class:"mt-4"},Ya={class:"text-sm font-medium mb-2"},Xa={class:"space-y-1 max-h-40 overflow-y-auto"},Za={class:"truncate"},el=["onClick"],tl={key:1,class:"mt-4 text-center text-sm text-gray-500 italic p-4 border-2 border-dashed rounded-lg dark:border-gray-600"},al={class:"flex justify-end items-center mt-4"},ll=["disabled"],sl={key:1,class:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700 text-sm"},nl={key:2,class:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-700 text-sm"},ol={class:"text-xl font-semibold mb-4"},rl={key:0,class:"flex items-center justify-between bg-gray-50 dark:bg-gray-800/50 p-2 rounded-md mb-2"},il={class:"flex items-center"},ul=["checked","indeterminate"],dl=["disabled"],cl={key:1,class:"text-center py-10"},ml={key:2,class:"text-center py-10 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},vl={key:3,class:"divide-y divide-gray-200 dark:divide-gray-700"},pl=["onChange","checked"],fl={class:"flex-grow min-w-0"},gl={class:"flex items-center gap-2"},yl=["onClick"],bl={key:0,class:"mt-2 text-xs"},hl={class:"mt-1 p-2 bg-gray-100 dark:bg-gray-700/50 rounded"},xl={key:0,class:"p-6 flex-grow overflow-y-auto flex flex-col"},kl={class:"flex-shrink-0 space-y-4"},wl={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},_l={class:"self-end"},Sl=["disabled"],Cl={class:"flex-grow min-h-0 mt-6 border-t dark:border-gray-700 pt-6"},Dl={class:"flex justify-between items-center mb-4"},zl={class:"text-lg font-semibold"},$l={key:0,class:"flex items-center gap-2"},Vl={class:"text-sm text-gray-500 font-mono"},Ml={key:0,class:"text-center p-6 text-gray-500"},Tl={key:1,class:"p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-md"},Fl={key:2,class:"text-center p-6 text-gray-500"},Al={key:3,class:"text-center p-6 text-gray-500"},Il={key:4,class:"space-y-4 overflow-y-auto custom-scrollbar h-full pb-10"},Ul=["id"],jl={class:"flex justify-between items-center text-xs text-gray-500 dark:text-gray-400 mb-2"},Nl=["title"],El=["title"],Rl=["innerHTML"],ql={key:1,class:"p-6 flex-grow overflow-y-auto"},Ll={key:4,class:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm rounded-lg"},Pl={key:0,class:"space-y-4"},Kl={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 flex flex-col gap-2"},Ol={class:"flex justify-between items-start"},Gl={class:"text-lg font-bold text-gray-900 dark:text-white break-all"},Bl={key:0,class:"text-sm text-gray-500 dark:text-gray-400 font-mono mt-1"},Ql={class:"text-right text-xs text-gray-500 dark:text-gray-400 space-y-1 flex-shrink-0 ml-4"},Hl={title:"Total characters"},Jl={class:"font-semibold"},Wl={title:"Approximate word count"},Yl={class:"font-semibold"},Xl={title:"Estimated tokens (char/4)"},Zl={class:"font-semibold"},es={key:0,class:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700"},ts={class:"text-sm group"},as={class:"mt-2 p-2 bg-white dark:bg-gray-900 rounded border dark:border-gray-700"},ls={class:"relative group"},ss={class:"absolute top-2 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity z-10"},ns={class:"p-4 border rounded-lg dark:border-gray-700 bg-white dark:bg-gray-900 overflow-auto max-h-[60vh] whitespace-pre-wrap font-mono text-sm leading-relaxed"},vs={__name:"DataStoresView",setup(os){const Ke=Ct({loader:()=>Mt(()=>import("./DataStoreGraphManager-DOGMmUcv.js"),__vite__mapDeps([0,1,2])),loadingComponent:null,delay:200,errorComponent:null,timeout:3e3}),C=dt(),w=ct(),he=mt();Ut();const Oe=vt(),Ge=Tt(),{user:de}=ze(Oe),{ownedDataStores:Me,sharedDataStores:Te,availableVectorizers:Be}=ze(C),{tasks:Qe}=ze(he),$=u(null),D=u(null),F=u("documents"),ee=u(!1),m=u({name:"",description:"",selectedVectorizerKey:null,config:{},chunk_size:1024,chunk_overlap:256}),te=u({}),j=u([]),ce=u(!1),h=u([]),me=u(null),ve=u(null),N=u(null),pe=u(null),E=u(null),ae=u(!1),_=u(new Set),W=u(""),fe=u(0),le=u(!1),se=u(!1),Y=u(""),xe=u(10),ke=u(50),A=u([]),X=u(!1),ne=u(""),R=u(""),V=u([]),B=u(-1),b=u(null),Q=u(null),q=u("none"),H=u({}),we=u(!0),J=u("per-file"),oe=u(`title: 
subject: 
authors: `),Fe=O(()=>j.value.length>0&&_.value.size===j.value.length),He=O(()=>_.value.size>0&&!Fe.value),_e=O(()=>Be.value),L=O(()=>{if(!m.value.selectedVectorizerKey)return null;const l=m.value.selectedVectorizerKey.split("/");if(l.length<2)return null;const e=l[0],r=l.slice(1).join("/"),a=_e.value.find(o=>o.alias===e);return a?{...a,selectedModelName:r}:null}),Je=O(()=>[...Me.value,...Te.value].sort((l,e)=>l.name.localeCompare(e.name))),Ae=O(()=>Me.value.sort((l,e)=>l.name.localeCompare(e.name))),d=O(()=>Je.value.find(l=>l.id===$.value)),ge=O(()=>!!N.value||!!pe.value||!!E.value);function We(l){if(!l)return"";if(!R.value||V.value.length===0)return l;const e=R.value,r=new RegExp(`(${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return l.replace(r,'<mark class="bg-yellow-200 dark:bg-yellow-700 rounded">$1</mark>')}pt(()=>{C.fetchDataStores(),C.fetchAvailableVectorizers(),he.fetchTasks(),window.addEventListener("lollms:open-new-datastore",Se)}),ie(()=>Ge.currentRoute.value.query.storeId,l=>{l&&re(l)},{immediate:!0}),ft(()=>{window.removeEventListener("lollms:open-new-datastore",Se)}),ie(Qe,l=>{if(!d.value){N.value=null,pe.value=null,E.value=null;return}const e=d.value.name,r=M=>l.filter(v=>v.name.startsWith(M)&&v.name.includes(e)&&(v.status==="running"||v.status==="pending")).sort((v,f)=>new Date(f.created_at)-new Date(v.created_at))[0]||null,a=r("Add files to DataStore:"),o=r("Generate Graph for:")||r("Update Graph for:"),p=r("Scrape URL to DataStore:");(N.value&&!a&&(N.value.status==="running"||N.value.status==="pending")||E.value&&!p&&(E.value.status==="running"||E.value.status==="pending"))&&De(d.value.id),N.value=a,pe.value=o,E.value=p},{deep:!0}),ie($,l=>{ee.value=!1,_.value.clear(),l?(F.value="documents",De(l),Y.value="",A.value=[],ne.value=""):j.value=[]},{immediate:!0}),ie(L,l=>{m.value.config={},l&&(m.value.config={...l.vectorizer_config||{}},l.selectedModelName&&(m.value.config.model_name=l.selectedModelName))},{deep:!0}),ie(A,()=>{R.value="",V.value=[],B.value=-1});function re(l){$.value=l}function Se(){var l,e;ee.value=!0,$.value=null,m.value={name:"",description:"",selectedVectorizerKey:null,config:{},chunk_size:((l=de.value)==null?void 0:l.default_chunk_size)||1024,chunk_overlap:((e=de.value)==null?void 0:e.default_chunk_overlap)||256}}async function Ye(){if(!m.value.name.trim()||!L.value){w.addNotification("Name and vectorizer are required.","warning");return}D.value="add_store";try{const l={name:m.value.name,description:m.value.description,vectorizer_name:L.value.vectorizer_name,vectorizer_config:m.value.config||{},chunk_size:m.value.chunk_size,chunk_overlap:m.value.chunk_overlap},e=await C.addDataStore(l);m.value={name:"",description:"",selectedVectorizerKey:null,config:{},chunk_size:1024,chunk_overlap:256},ee.value=!1,await C.fetchDataStores(),e&&e.id&&re(e.id)}finally{D.value=null}}function Xe(l){w.openModal("editDataStore",{store:l})}async function Ze(l){const{confirmed:e}=await w.showConfirmation({title:`Delete Data Store '${l.name}'?`,message:"This will permanently delete the data store and all its indexed documents.",confirmText:"Delete"});if(e){D.value=`delete_store_${l.id}`;try{await C.deleteDataStore(l.id),$.value===l.id&&($.value=null)}finally{D.value=null}}}function et(l){w.openModal("shareDataStore",{store:l})}async function tt(l){l.preventDefault(),ae.value=!1;const e=l.dataTransfer.items,r=[];function a(v){return new Promise((f,x)=>{v.readEntries(f,x)})}async function o(v){const f=v.createReader();let x=[],I;do I=await a(f),x=x.concat(I);while(I.length>0);return x}async function p(v){if(v.isFile)await new Promise((f,x)=>v.file(I=>{r.push(I),f()},x));else if(v.isDirectory){const f=await o(directoryEntry);for(const x of f)await p(x)}}const M=[];for(let v=0;v<e.length;v++){const f=e[v].webkitGetAsEntry();f&&M.push(p(f))}await Promise.all(M),r.length>0&&Ue(r)}function Ie(l){Ue(Array.from(l.target.files))}function Ue(l){const e=new Set(h.value.map(o=>o.name+o.size)),r=[],a={};for(const o of l){const p=o.name+o.size;e.has(p)||(r.push(o),a[o.name]=`title: 
subject: 
authors: `,e.add(p))}r.length>0&&(h.value=[...h.value,...r],H.value={...H.value,...a}),r.length<l.length&&w.addNotification(`${l.length-r.length} duplicate files skipped.`,"info"),me.value&&(me.value.value=""),ve.value&&(ve.value.value="")}function Ce(l){const e=h.value.splice(l,1);e.length>0&&delete H.value[e[0].name]}async function De(l){ce.value=!0;try{j.value=await C.fetchStoreFiles(l)}finally{ce.value=!1}}async function at(){if(!d.value||h.value.length===0){w.addNotification("Please select files to upload.","warning");return}if(ge.value){w.addNotification("A task is already running for this Data Store.","warning");return}le.value=!0;try{const l=new FormData;if(h.value.forEach(e=>l.append("files",e)),l.append("metadata_option",q.value),l.append("vectorize_with_metadata",we.value),q.value==="manual"){let e={};const r=a=>{const o={};if(!a)return o;const p=a.split(`
`);for(const M of p){const v=M.split(":");if(v.length>=2){const f=v[0].trim(),x=v.slice(1).join(":").trim();f&&(["authors","tags","keywords"].includes(f.toLowerCase())?o[f]=x.split(",").map(I=>I.trim()).filter(Boolean):o[f]=x)}}return o};try{if(J.value==="all"){const a=oe.value.trim()?r(oe.value):{};for(const o of h.value)e[o.name]=a}else for(const a of h.value){const o=H.value[a.name]||"";e[a.name]=o.trim()?r(o):{}}l.append("manual_metadata_json",JSON.stringify(e))}catch(a){w.addNotification("Invalid metadata format. Please use 'key: value' pairs, with one entry per line.","error"),console.error("Metadata parsing error:",a);return}}await C.uploadFilesToStore({storeId:d.value.id,formData:l}),h.value=[],H.value={},oe.value=`title: 
subject: 
authors: `}finally{le.value=!1}}async function lt(){if(!W.value.trim()){w.addNotification("Please enter a URL.","warning");return}if(ge.value){w.addNotification("A task is already running for this Data Store.","warning");return}se.value=!0;try{const e=(await Vt.post(`/api/store/${d.value.id}/scrape-url`,{url:W.value,depth:fe.value})).data;w.addNotification(`Scrape task '${e.name}' started.`,"info"),he.addTask(e),W.value="",fe.value=0}catch(l){console.error("Scrape failed:",l)}finally{se.value=!1}}function ye(l){return l&&["owner","read_write","revectorize"].includes(l.permission_level)}function st(l){_.value.has(l)?_.value.delete(l):_.value.add(l)}function nt(l){l.target.checked?_.value=new Set(j.value.map(e=>e.filename)):_.value.clear()}async function ot(){if(_.value.size===0)return;const{confirmed:l}=await w.showConfirmation({title:`Delete ${_.value.size} file(s)?`,message:"This will permanently remove the selected documents and their data from the data store.",confirmText:"Delete"});if(l){D.value="delete_selected_files";try{const e=Array.from(_.value);await C.deleteFilesFromStore({storeId:d.value.id,filenames:e}),await De(d.value.id),_.value.clear()}finally{D.value=null}}}async function rt(){if(!(!Y.value.trim()||!d.value)){X.value=!0,ne.value="",A.value=[];try{const l=await C.queryDataStore({storeId:d.value.id,query:Y.value,top_k:xe.value,min_similarity_percent:ke.value});A.value=l}catch{ne.value="An error occurred during the query."}finally{X.value=!1}}}function je(){if(!R.value){V.value=[],B.value=-1,document.querySelectorAll(".current-search-highlight").forEach(r=>r.classList.remove("current-search-highlight"));return}const l=R.value,e=[];A.value.forEach((r,a)=>{const o=r.chunk_text||"",p=new RegExp(l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");let M;for(;(M=p.exec(o))!==null;)e.push({chunkIndex:a,matchIndexInText:M.index})}),V.value=e,e.length>0?(B.value=0,Ee(e[0])):(B.value=-1,w.addNotification("No matches found in results.","info"),document.querySelectorAll(".current-search-highlight").forEach(r=>r.classList.remove("current-search-highlight")))}function Ne(l){if(V.value.length===0)return;let e=B.value+l;e<0&&(e=V.value.length-1),e>=V.value.length&&(e=0),B.value=e,Ee(V.value[e])}function Ee(l){var r;const e=document.getElementById(`chunk-${l.chunkIndex}`);if(e){document.querySelectorAll(".current-search-highlight").forEach(o=>o.classList.remove("current-search-highlight"));const a=Array.from(e.querySelectorAll("mark"));if(a.length>0){let o=0;const p=((r=A.value[l.chunkIndex])==null?void 0:r.chunk_text)||"",M=R.value,v=new RegExp(M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");let f=-1;const x=p.split(v);let I=0;for(let K=1;K<x.length;K+=2){if(I===l.matchIndexInText){f=o;break}I+=(x[K-1]?x[K-1].length:0)+x[K].length,o++}if(f!==-1&&a[f]){const K=a[f];K.classList.add("current-search-highlight"),K.scrollIntoView({behavior:"smooth",block:"center"})}else e.scrollIntoView({behavior:"smooth",block:"center"})}else e.scrollIntoView({behavior:"smooth",block:"center"})}}async function it(l){if(!Q.value){Q.value=l.filename;try{const e=await C.fetchFileContent(d.value.id,l.filename);b.value={filename:l.filename,metadata:l.metadata,content:e},w.openModal("fileContent")}catch{}finally{Q.value=null}}}function ut(){b.value&&b.value.content&&(navigator.clipboard.writeText(b.value.content),w.addNotification("Content copied to clipboard","success"))}return(l,e)=>(s(),S(jt,{title:"Data Studio","title-icon":qe},{sidebar:be(()=>[t("button",{onClick:Se,class:"w-full flex items-center space-x-3 text-left px-3 py-2.5 rounded-lg text-sm font-medium text-blue-700 dark:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/50 transition-colors"},[g(zt,{class:"w-5 h-5 flex-shrink-0"}),e[31]||(e[31]=t("span",null,"New Data Store",-1))]),t("button",{onClick:e[0]||(e[0]=r=>Z(C).fetchDataStores()),class:"w-full flex items-center space-x-3 text-left px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors mt-2"},[g($t,{class:"w-5 h-5 flex-shrink-0"}),e[32]||(e[32]=t("span",null,"Refresh All Stores",-1))]),e[34]||(e[34]=t("h3",{class:"text-sm font-semibold uppercase text-gray-500 dark:text-gray-400 mt-4 px-3"},"Your Stores",-1)),t("ul",Et,[(s(!0),n(T,null,U(Ae.value,r=>(s(),n("li",{key:r.id},[t("button",{onClick:a=>re(r.id),class:G(["w-full flex items-center justify-between text-left px-3 py-2 rounded-lg text-sm transition-colors group",{"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300":$.value===r.id,"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700":$.value!==r.id}])},[t("span",qt,i(r.name),1),e[33]||(e[33]=t("span",{class:"ml-2 text-xs px-2 py-0.5 rounded-full bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"},"Owner",-1))],10,Rt)]))),128))]),e[35]||(e[35]=t("h3",{class:"text-sm font-semibold uppercase text-gray-500 dark:text-gray-400 mt-4 px-3"},"Shared With You",-1)),t("ul",Lt,[(s(!0),n(T,null,U(Z(Te),r=>(s(),n("li",{key:r.id},[t("button",{onClick:a=>re(r.id),class:G(["w-full flex items-center justify-between text-left px-3 py-2 rounded-lg text-sm transition-colors group",{"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300":$.value===r.id,"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700":$.value!==r.id}])},[t("span",Kt,i(r.name),1),t("span",{class:G(["ml-2 text-xs px-2 py-0.5 rounded-full",{"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":r.permission_level==="revectorize","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300":r.permission_level==="read_write","bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300":r.permission_level==="read_query"}])},i(r.permission_level.replace("_"," ")),3)],10,Pt)]))),128))])]),main:be(()=>{var r;return[t("div",Ot,[ee.value?(s(),n("div",Gt,[e[44]||(e[44]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Data Store",-1)),e[45]||(e[45]=t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"A Data Store turns your documents into a queryable knowledge base.",-1)),t("form",{onSubmit:ue(Ye,["prevent"]),class:"mt-6 space-y-6"},[t("div",null,[e[36]||(e[36]=t("label",{for:"new-ds-name",class:"block text-sm font-medium"},"Name",-1)),y(t("input",{id:"new-ds-name","onUpdate:modelValue":e[1]||(e[1]=a=>m.value.name=a),type:"text",class:"input-field mt-1",required:""},null,512),[[z,m.value.name]])]),t("div",null,[e[37]||(e[37]=t("label",{for:"new-ds-desc",class:"block text-sm font-medium"},"Description",-1)),y(t("textarea",{id:"new-ds-desc","onUpdate:modelValue":e[2]||(e[2]=a=>m.value.description=a),rows:"2",class:"input-field mt-1"},null,512),[[z,m.value.description]])]),Z(de)&&Z(de).allow_user_chunking_config?(s(),n("div",Bt,[t("div",null,[e[38]||(e[38]=t("label",{for:"new-ds-chunk-size",class:"block text-sm font-medium"},"Chunk Size",-1)),y(t("input",{id:"new-ds-chunk-size","onUpdate:modelValue":e[3]||(e[3]=a=>m.value.chunk_size=a),type:"number",min:"1",class:"input-field mt-1"},null,512),[[z,m.value.chunk_size,void 0,{number:!0}]]),e[39]||(e[39]=t("p",{class:"text-xs text-gray-500 mt-1"},"Number of characters per data chunk.",-1))]),t("div",null,[e[40]||(e[40]=t("label",{for:"new-ds-chunk-overlap",class:"block text-sm font-medium"},"Chunk Overlap",-1)),y(t("input",{id:"new-ds-chunk-overlap","onUpdate:modelValue":e[4]||(e[4]=a=>m.value.chunk_overlap=a),type:"number",min:"0",class:"input-field mt-1"},null,512),[[z,m.value.chunk_overlap,void 0,{number:!0}]]),e[41]||(e[41]=t("p",{class:"text-xs text-gray-500 mt-1"},"Number of overlapping characters between chunks.",-1))])])):c("",!0),t("div",null,[e[43]||(e[43]=t("label",{for:"new-ds-vectorizer",class:"block text-sm font-medium"},"Vectorizer",-1)),y(t("select",{id:"new-ds-vectorizer","onUpdate:modelValue":e[5]||(e[5]=a=>m.value.selectedVectorizerKey=a),class:"input-field mt-1"},[e[42]||(e[42]=t("option",{value:null,disabled:""},"-- Select a Vectorizer Model --",-1)),(s(!0),n(T,null,U(_e.value,a=>(s(),n("optgroup",{key:a.id,label:a.alias||a.vectorizer_name},[(s(!0),n(T,null,U(a.models,o=>(s(),n("option",{key:`${a.id}-${o.value}`,value:`${a.alias}/${o.value}`},i(o.name),9,Ht))),128))],8,Qt))),128))],512),[[Re,m.value.selectedVectorizerKey]]),_e.value.length===0?(s(),n("p",Jt," No active RAG bindings found. Please configure them in Settings. ")):c("",!0)]),L.value?(s(),n("div",Wt,[t("h4",Yt,i(L.value.title||L.value.name),1),t("p",Xt,i(L.value.description),1),((r=L.value.input_parameters)==null?void 0:r.length)>0?(s(),n("div",Zt,[(s(!0),n(T,null,U(L.value.input_parameters,a=>(s(),n("div",{key:a.name},[a.name!=="model"?(s(),n("div",ea,[t("label",{for:`param-${a.name}`,class:"block text-sm font-medium"},[k(i(a.name)+" ",1),a.mandatory?(s(),n("span",aa,"*")):c("",!0)],8,ta),t("div",la,[y(t("input",{type:(a.name.includes("key")||a.name.includes("token"))&&!te.value[a.name]?"password":"text","onUpdate:modelValue":o=>m.value.config[a.name]=o,class:"input-field pr-10",placeholder:a.description},null,8,sa),[[Ft,m.value.config[a.name]]]),a.name.includes("key")||a.name.includes("token")?(s(),n("button",{key:0,type:"button",onClick:o=>te.value[a.name]=!te.value[a.name],class:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",title:te.value[a.name]?"Hide":"Show"},[te.value[a.name]?(s(),S(At,{key:0,class:"w-5 h-5"})):(s(),S(It,{key:1,class:"w-5 h-5"}))],8,na)):c("",!0)])])):c("",!0)]))),128))])):c("",!0)])):c("",!0),t("div",oa,[t("button",{type:"button",onClick:e[6]||(e[6]=a=>{var o;ee.value=!1,re((o=Ae.value[0])==null?void 0:o.id)}),class:"btn btn-secondary"},"Cancel"),t("button",{type:"submit",class:"btn btn-primary",disabled:D.value==="add_store"},[D.value==="add_store"?(s(),S(P,{key:0,class:"w-5 h-5 mr-2 animate-spin"})):c("",!0),k(" "+i(D.value==="add_store"?"Creating...":"Create Data Store"),1)],8,ra)])],32)])):$.value?d.value?(s(),n("div",ca,[t("div",ma,[t("div",null,[t("h2",va,i(d.value.name),1),t("p",pa,i(d.value.description||"No description provided."),1),t("div",fa,[e[49]||(e[49]=t("span",{class:"mr-1"},"Owner:",-1)),g(gt,{username:d.value.owner_username,"size-class":"h-4 w-4",class:"mr-1"},null,8,["username"]),t("span",null,i(d.value.owner_username),1)]),t("div",ga,[t("p",null,[e[50]||(e[50]=t("span",{class:"font-semibold"},"Vectorizer:",-1)),k(" "+i(d.value.vectorizer_name),1)]),t("p",null,[e[51]||(e[51]=t("span",{class:"font-semibold"},"Chunking:",-1)),k(" "+i(d.value.chunk_size)+" / "+i(d.value.chunk_overlap),1)]),Object.keys(d.value.vectorizer_config).length>0?(s(),n("details",ya,[e[52]||(e[52]=t("summary",{class:"cursor-pointer text-gray-500"},"View Config",-1)),g(Ve,{json:d.value.vectorizer_config,class:"mt-1 text-xs"},null,8,["json"])])):c("",!0)])]),t("div",ba,[d.value.permission_level==="owner"?(s(),n("button",{key:0,onClick:e[7]||(e[7]=a=>et(d.value)),class:"btn btn-secondary btn-sm"},[g(yt,{class:"w-4 h-4 mr-2"}),e[53]||(e[53]=k(" Share"))])):c("",!0),ye(d.value)?(s(),n("button",{key:1,onClick:e[8]||(e[8]=a=>Xe(d.value)),class:"btn btn-secondary btn-sm"},[g(bt,{class:"w-4 h-4 mr-2"}),e[54]||(e[54]=k(" Edit"))])):c("",!0),d.value.permission_level==="owner"?(s(),n("button",{key:2,onClick:e[9]||(e[9]=a=>Ze(d.value)),class:"btn btn-danger btn-sm"},[D.value===`delete_store_${d.value.id}`?(s(),S(P,{key:0,class:"w-4 h-4 mr-2 animate-spin"})):(s(),S(Le,{key:1,class:"w-4 h-4 mr-2"})),e[55]||(e[55]=k(" Delete "))])):c("",!0)])]),t("div",ha,[t("nav",xa,[t("button",{onClick:e[10]||(e[10]=a=>F.value="documents"),class:G(["tab-button",F.value==="documents"?"active":"inactive"])},"Documents",2),t("button",{onClick:e[11]||(e[11]=a=>F.value="query"),class:G(["tab-button",F.value==="query"?"active":"inactive"])},"Query",2),t("button",{onClick:e[12]||(e[12]=a=>F.value="graph"),class:G(["tab-button",F.value==="graph"?"active":"inactive"])},"Graph",2)])]),y(t("div",ka,[ye(d.value)?(s(),n("div",wa,[e[70]||(e[70]=t("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"},"Add Documents",-1)),t("div",_a,[t("div",null,[e[57]||(e[57]=t("label",{for:"metadata-option",class:"block text-sm font-medium"},"Metadata Handling",-1)),y(t("select",{id:"metadata-option","onUpdate:modelValue":e[13]||(e[13]=a=>q.value=a),class:"input-field mt-1"},e[56]||(e[56]=[t("option",{value:"none"},"None",-1),t("option",{value:"manual"},"Manual Entry",-1),t("option",{value:"auto-generate"},"Auto-generate for each file",-1),t("option",{value:"rewrite-chunk"},"Rewrite full content with metadata for each chunk",-1)]),512),[[Re,q.value]]),e[58]||(e[58]=t("p",{class:"text-xs text-gray-500 mt-1"},"Choose how to handle metadata for uploaded files.",-1))]),t("div",Sa,[t("div",Ca,[y(t("input",{id:"vectorize-with-metadata","onUpdate:modelValue":e[14]||(e[14]=a=>we.value=a),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-600"},null,512),[[xt,we.value]])]),e[59]||(e[59]=t("div",{class:"ml-3 text-sm leading-6"},[t("label",{for:"vectorize-with-metadata",class:"font-medium text-gray-900 dark:text-gray-100"},"Vectorize with Metadata"),t("p",{class:"text-gray-500 dark:text-gray-400"},"Include document metadata in the vectorization process for better context.")],-1))])]),t("div",Da,[t("div",{onDragover:e[17]||(e[17]=ue(a=>ae.value=!0,["prevent"])),onDragleave:e[18]||(e[18]=ue(a=>ae.value=!1,["prevent"])),onDrop:ue(tt,["prevent"]),class:G(["border-2 border-dashed rounded-lg p-6 text-center transition-colors flex flex-col justify-center min-h-[180px]",{"border-blue-500 bg-blue-50 dark:bg-blue-900/20":ae.value,"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500":!ae.value}])},[t("input",{type:"file",multiple:"",ref_key:"fileInputRef",ref:me,onChange:Ie,class:"hidden",accept:".pdf,.docx,.pptx,.xlsx,.msg,.vcf,.txt,.md,.py,.js,.ts,.html,.css,.c,.cpp,.h,.hpp,.cs,.java,.json,.xml,.sh,.vhd,.v,.rb,.php,.go,.rs,.swift,.kt,.yaml,.yml,.sql,.log,.csv"},null,544),t("input",{type:"file",ref_key:"folderInputRef",ref:ve,onChange:Ie,class:"hidden",webkitdirectory:"",directory:"",multiple:""},null,544),e[60]||(e[60]=t("p",{class:"text-gray-600 dark:text-gray-300 font-medium mb-4"},"Drag & drop files here",-1)),t("div",za,[t("button",{type:"button",onClick:e[15]||(e[15]=a=>me.value.click()),class:"btn btn-secondary btn-sm"},"Select File(s)"),t("button",{type:"button",onClick:e[16]||(e[16]=a=>ve.value.click()),class:"btn btn-secondary btn-sm"},"Select Folder")])],34),t("div",$a,[t("h4",Va,[g(kt,{class:"w-4 h-4"}),e[61]||(e[61]=k(" Add from URL "))]),t("div",Ma,[y(t("input",{type:"text","onUpdate:modelValue":e[19]||(e[19]=a=>W.value=a),placeholder:"https://example.com/docs",class:"input-field text-sm"},null,512),[[z,W.value]]),t("div",Ta,[t("div",Fa,[e[62]||(e[62]=t("label",{class:"text-xs text-gray-500 uppercase font-bold"},"Depth",-1)),y(t("input",{type:"number","onUpdate:modelValue":e[20]||(e[20]=a=>fe.value=a),min:"0",max:"5",class:"input-field text-sm mt-1"},null,512),[[z,fe.value,void 0,{number:!0}]])]),t("div",Aa,[t("button",{onClick:lt,class:"btn btn-primary btn-sm w-full",disabled:se.value||ge.value||!W.value},[se.value?(s(),S(P,{key:0,class:"w-4 h-4 mr-1 animate-spin"})):c("",!0),k(" "+i(se.value?"Scraping...":"Scrape & Add"),1)],8,Ia)])]),e[63]||(e[63]=t("p",{class:"text-xs text-gray-500"},"Depth 0 = single page. Depth > 0 follows internal links.",-1))])])]),h.value.length>0?(s(),n("div",Ua,[q.value==="manual"?(s(),n("div",ja,[e[66]||(e[66]=t("label",{class:"block text-sm font-medium"},"Manual Metadata Mode",-1)),t("div",Na,[t("label",Ea,[y(t("input",{type:"radio","onUpdate:modelValue":e[21]||(e[21]=a=>J.value=a),value:"per-file",class:"radio-input"},null,512),[[Pe,J.value]]),e[64]||(e[64]=t("span",{class:"ml-2"},"Per File",-1))]),t("label",Ra,[y(t("input",{type:"radio","onUpdate:modelValue":e[22]||(e[22]=a=>J.value=a),value:"all",class:"radio-input"},null,512),[[Pe,J.value]]),e[65]||(e[65]=t("span",{class:"ml-2"},"For All Files",-1))])])])):c("",!0),q.value==="manual"&&J.value==="all"?(s(),n("div",qa,[t("h4",La,"Selected Files ("+i(h.value.length)+")",1),t("ul",Pa,[(s(!0),n(T,null,U(h.value,(a,o)=>(s(),n("li",{key:o,class:"flex justify-between items-center"},[t("span",Ka,i(a.name),1),t("button",{onClick:p=>Ce(o),class:"text-red-500 hover:text-red-700 ml-2",title:"Remove"},[g($e,{class:"w-4 h-4"})],8,Oa)]))),128))]),e[67]||(e[67]=t("label",{class:"block text-sm font-medium"},"Metadata for all files (Key: Value format)",-1)),y(t("textarea",{"onUpdate:modelValue":e[23]||(e[23]=a=>oe.value=a),rows:"4",class:"input-field mt-1 font-mono text-xs",placeholder:`title: My Document
subject: AI Research
authors: John Doe, Jane Smith`},null,512),[[z,oe.value]])])):q.value==="manual"&&J.value==="per-file"?(s(),n("div",Ga,[e[69]||(e[69]=t("h4",{class:"text-sm font-medium"},"Enter Metadata for Each File:",-1)),(s(!0),n(T,null,U(h.value,(a,o)=>(s(),n("div",{key:o,class:"p-3 border rounded-lg dark:border-gray-600 space-y-3"},[t("div",Ba,[t("p",Qa,i(a.name),1),t("button",{onClick:p=>Ce(o),class:"text-red-500 hover:text-red-700",title:"Remove"},[g($e,{class:"w-5 h-5"})],8,Ha)]),t("div",null,[e[68]||(e[68]=t("label",{class:"text-xs font-medium"},"Metadata (Key: Value format)",-1)),y(t("textarea",{"onUpdate:modelValue":p=>H.value[a.name]=p,rows:"4",class:"input-field-sm w-full mt-1 font-mono text-xs",placeholder:"title: ..."},null,8,Ja),[[z,H.value[a.name]]])])]))),128))])):q.value!=="manual"?(s(),n("div",Wa,[t("h4",Ya,"Selected for Upload ("+i(h.value.length)+")",1),t("ul",Xa,[(s(!0),n(T,null,U(h.value,(a,o)=>(s(),n("li",{key:o,class:"flex justify-between items-center bg-gray-100 dark:bg-gray-800 p-2 rounded text-sm"},[t("span",Za,i(a.name)+" ("+i((a.size/1024/1024).toFixed(2))+" MB)",1),t("button",{onClick:p=>Ce(o),class:"text-red-500 hover:text-red-700 ml-2",title:"Remove"},[g($e,{class:"w-4 h-4"})],8,el)]))),128))])])):c("",!0)])):q.value==="manual"?(s(),n("div",tl," Select files to enter their metadata manually. ")):c("",!0),t("div",al,[t("button",{onClick:at,class:"btn btn-primary",disabled:ge.value||h.value.length===0||le.value},[le.value?(s(),S(P,{key:0,class:"w-5 h-5 mr-2 animate-spin"})):(s(),S(wt,{key:1,class:"w-5 h-5 mr-2"})),k(" "+i(le.value?"Uploading...":`Add ${h.value.length} File(s)`),1)],8,ll)])])):c("",!0),N.value?(s(),n("div",sl,[e[71]||(e[71]=t("span",{class:"font-semibold text-blue-800 dark:text-blue-300"},"File Uploading:",-1)),k(" "+i(N.value.progress)+"% - "+i(N.value.description),1)])):c("",!0),E.value?(s(),n("div",nl,[e[72]||(e[72]=t("span",{class:"font-semibold text-green-800 dark:text-green-300"},"Scraping:",-1)),k(" "+i(E.value.progress)+"% - "+i(E.value.description),1)])):c("",!0),t("div",null,[t("h3",ol,"Indexed Documents ("+i(j.value.length)+")",1),!ce.value&&j.value.length>0&&ye(d.value)?(s(),n("div",rl,[t("div",il,[t("input",{type:"checkbox",onChange:nt,checked:Fe.value,indeterminate:He.value,id:"select-all-files-checkbox",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,40,ul),e[73]||(e[73]=t("label",{for:"select-all-files-checkbox",class:"ml-2 text-sm select-none cursor-pointer"},"Select All",-1))]),t("button",{onClick:ot,class:"btn btn-danger btn-sm",disabled:_.value.size===0||D.value==="delete_selected_files"},[D.value==="delete_selected_files"?(s(),S(P,{key:0,class:"w-4 h-4 mr-2 animate-spin"})):(s(),S(Le,{key:1,class:"w-4 h-4 mr-2"})),k(" Delete Selected ("+i(_.value.size)+") ",1)],8,dl)])):c("",!0),ce.value?(s(),n("div",cl,e[74]||(e[74]=[t("p",null,"Loading documents...",-1)]))):j.value.length===0?(s(),n("div",ml,e[75]||(e[75]=[t("p",null,"No documents indexed.",-1)]))):(s(),n("ul",vl,[(s(!0),n(T,null,U(j.value,a=>(s(),n("li",{key:a.filename,class:"py-3 flex items-center"},[ye(d.value)?(s(),n("input",{key:0,type:"checkbox",onChange:o=>st(a.filename),checked:_.value.has(a.filename),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-4 flex-shrink-0"},null,40,pl)):c("",!0),t("div",fl,[t("div",gl,[t("span",{class:G(["text-sm font-medium truncate cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors",{"opacity-50 pointer-events-none":Q.value&&Q.value!==a.filename}]),onClick:o=>it(a)},i(a.filename),11,yl),Q.value===a.filename?(s(),S(P,{key:0,class:"w-4 h-4 text-blue-500 animate-spin flex-shrink-0"})):c("",!0)]),a.metadata&&Object.keys(a.metadata).length>0?(s(),n("details",bl,[e[76]||(e[76]=t("summary",{class:"cursor-pointer text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"},"View Metadata",-1)),t("div",hl,[g(Ve,{json:a.metadata},null,8,["json"])])])):c("",!0)])]))),128))]))])],512),[[ht,F.value==="documents"]]),F.value==="query"?(s(),n("div",xl,[t("div",kl,[e[80]||(e[80]=t("h3",{class:"text-xl font-semibold"},"Query Data Store",-1)),t("form",{onSubmit:ue(rt,["prevent"]),class:"space-y-4"},[t("div",null,[e[77]||(e[77]=t("label",{for:"query-text",class:"block text-sm font-medium"},"Query Text",-1)),y(t("textarea",{id:"query-text","onUpdate:modelValue":e[24]||(e[24]=a=>Y.value=a),rows:"3",class:"input-field mt-1",placeholder:"Enter your question..."},null,512),[[z,Y.value]])]),t("div",wl,[t("div",null,[e[78]||(e[78]=t("label",{for:"query-topk",class:"block text-sm font-medium"},"Top K",-1)),y(t("input",{id:"query-topk","onUpdate:modelValue":e[25]||(e[25]=a=>xe.value=a),type:"number",min:"1",class:"input-field mt-1"},null,512),[[z,xe.value,void 0,{number:!0}]])]),t("div",null,[e[79]||(e[79]=t("label",{for:"query-minsim",class:"block text-sm font-medium"},"Min Similarity %",-1)),y(t("input",{id:"query-minsim","onUpdate:modelValue":e[26]||(e[26]=a=>ke.value=a),type:"number",min:"0",max:"100",step:"0.1",class:"input-field mt-1"},null,512),[[z,ke.value,void 0,{number:!0}]])]),t("div",_l,[t("button",{type:"submit",class:"btn btn-primary w-full",disabled:X.value||!Y.value.trim()},[X.value?(s(),S(P,{key:0,class:"w-5 h-5 mr-2 animate-spin"})):c("",!0),k(" "+i(X.value?"Querying...":"Query"),1)],8,Sl)])])],32)]),t("div",Cl,[t("div",Dl,[t("h4",zl,"Results ("+i(A.value.length)+")",1),A.value.length>0?(s(),n("div",$l,[y(t("input",{type:"text","onUpdate:modelValue":e[27]||(e[27]=a=>R.value=a),onKeyup:_t(je,["enter"]),placeholder:"Search in results...",class:"input-field !py-1.5 !text-sm"},null,544),[[z,R.value]]),t("button",{onClick:je,class:"btn btn-secondary btn-sm p-2"},[g(St,{class:"w-4 h-4"})]),V.value.length>0?(s(),n(T,{key:0},[t("button",{onClick:e[28]||(e[28]=a=>Ne(-1)),class:"btn btn-secondary btn-sm p-2",title:"Previous match"},"‹"),t("span",Vl,i(B.value+1)+" / "+i(V.value.length),1),t("button",{onClick:e[29]||(e[29]=a=>Ne(1)),class:"btn btn-secondary btn-sm p-2",title:"Next match"},"›")],64)):c("",!0)])):c("",!0)]),X.value?(s(),n("div",Ml,[g(P,{class:"w-8 h-8 mx-auto animate-spin"}),e[81]||(e[81]=t("p",{class:"mt-2"},"Fetching results...",-1))])):ne.value?(s(),n("div",Tl,i(ne.value),1)):A.value.length===0?(s(),n("div",Fl," No results to display. Run a query to see matching text chunks. ")):R.value&&V.value.length===0?(s(),n("div",Al," No chunks match your search term. ")):(s(),n("div",Il,[(s(!0),n(T,null,U(A.value,(a,o)=>(s(),n("div",{key:o,id:`chunk-${o}`,class:"p-4 border rounded-lg dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},[t("div",jl,[t("span",{class:"font-mono truncate",title:a.file_path},".../"+i(a.file_path.split(/[/\\]/).pop()),9,Nl),t("span",{class:"font-semibold",title:`Similarity: ${a.similarity_percent}`},i(a.similarity_percent.toFixed(2))+"%",9,El)]),t("pre",{class:"whitespace-pre-wrap font-sans text-sm",innerHTML:We(a.chunk_text)},null,8,Rl)],8,Ul))),128))]))])])):c("",!0),F.value==="graph"?(s(),n("div",ql,[g(Z(Ke),{store:d.value,task:pe.value},null,8,["store","task"])])):c("",!0)])):(s(),n("div",da,e[48]||(e[48]=[t("h3",{class:"text-xl font-semibold text-gray-700 dark:text-gray-200"},"Data Store Not Found",-1),t("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"The selected data store could not be loaded.",-1)]))):(s(),n("div",ia,[t("div",ua,[g(qe,{class:"mx-auto h-12 w-12 text-gray-400"}),e[46]||(e[46]=t("h3",{class:"mt-2 text-xl font-semibold text-gray-900 dark:text-white"},"Select a Data Store",-1)),e[47]||(e[47]=t("p",{class:"mt-1 text-sm text-gray-500"},"Choose a store from the sidebar or create a new one to begin.",-1))])])),Q.value?(s(),n("div",Ll,[g(P,{class:"w-12 h-12 text-blue-600 dark:text-blue-400 mb-4 animate-spin"}),e[82]||(e[82]=t("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"},"Loading file content",-1)),e[83]||(e[83]=t("p",{class:"text-gray-600 dark:text-gray-300"},"Please stand by...",-1))])):c("",!0)]),g(Nt,{modalName:"fileContent",title:"Document Viewer",size:"4xl"},{body:be(()=>{var a,o,p;return[b.value?(s(),n("div",Pl,[t("div",Kl,[t("div",Ol,[t("div",null,[t("h3",Gl,i(((a=b.value.metadata)==null?void 0:a.title)||b.value.filename),1),(o=b.value.metadata)!=null&&o.title&&((p=b.value.metadata)==null?void 0:p.title)!==b.value.filename?(s(),n("p",Bl,i(b.value.filename),1)):c("",!0)]),t("div",Ql,[t("div",Hl,[t("span",Jl,i(b.value.content.length.toLocaleString()),1),e[84]||(e[84]=k(" chars"))]),t("div",Wl,[t("span",Yl,i(b.value.content.split(/\s+/).length.toLocaleString()),1),e[85]||(e[85]=k(" words"))]),t("div",Xl,[t("span",Zl,"~"+i(Math.ceil(b.value.content.length/4).toLocaleString()),1),e[86]||(e[86]=k(" tokens"))])])]),b.value.metadata&&Object.keys(b.value.metadata).length>0?(s(),n("div",es,[t("details",ts,[e[87]||(e[87]=t("summary",{class:"cursor-pointer text-blue-600 dark:text-blue-400 font-medium select-none"},"Show Metadata",-1)),t("div",as,[g(Ve,{json:b.value.metadata},null,8,["json"])])])])):c("",!0)]),t("div",ls,[t("div",ss,[t("button",{onClick:ut,class:"p-2 bg-white dark:bg-gray-800 border dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",title:"Copy Content"},[g(Dt,{class:"w-4 h-4"})])]),t("div",ns,i(b.value.content),1)])])):c("",!0)]}),footer:be(()=>[t("button",{onClick:e[30]||(e[30]=a=>Z(w).closeModal("fileContent")),class:"btn btn-primary"},"Close")]),_:1})]}),_:1}))}};export{vs as default};
