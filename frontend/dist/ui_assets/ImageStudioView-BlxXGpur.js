import{D as pe,g as i,d as l,f as t,ai as ze,x as Le,a as Re,u as Be,s as Oe,a9 as Fe,y as O,r as k,c as I,w as Q,o as Ge,aq as qe,W as de,I as We,b as ue,l as d,h as f,k as F,a4 as V,t as m,S as Ze,A as r,ac as Y,i as v,v as G,p as q,a1 as N,cU as Je,aB as He,cN as Ke,z as ce,J as X,F as A,B as W,e as Qe,H as Ye,C as Xe,L as et,ag as tt,am as st,V as ot,j as $,U as at,q as nt,a0 as lt,Q as it,P as rt,O as dt,K as ut}from"./index-Dja0BxAz.js";import{I as ct}from"./IconMaximize-CCp4Ck1v.js";const pt={},mt={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function gt(me,c){return l(),i("svg",mt,c[0]||(c[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.776 48.776 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"},null,-1)]))}const ft=pe(pt,[["render",gt]]),vt={class:"flex items-center gap-2"},bt=["disabled"],ht={key:0,class:"absolute inset-0 bg-blue-500/20 border-4 border-dashed border-blue-500 rounded-lg z-20 flex items-center justify-center m-4 pointer-events-none"},xt={class:"flex-grow min-h-0 flex overflow-hidden"},wt={class:"w-80 md:w-96 flex-shrink-0 bg-white dark:bg-gray-800 border-r dark:border-gray-700 flex flex-col overflow-hidden"},yt={class:"flex-grow p-4 space-y-5 overflow-y-auto custom-scrollbar"},_t={class:"space-y-3"},kt={class:"flex justify-between items-center mb-1"},Ct=["disabled"],St={class:"relative"},It=["disabled"],$t={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none bg-white/20 dark:bg-black/20 backdrop-blur-sm rounded"},Dt={class:"flex justify-between items-center mb-1"},Mt=["disabled"],Tt={class:"relative"},Pt=["disabled"],Vt={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none bg-white/20 dark:bg-black/20 backdrop-blur-sm rounded"},Nt=["disabled"],At={class:"pt-4 border-t dark:border-gray-700"},jt={class:"mt-4 space-y-4"},Et={class:"grid grid-cols-2 gap-4"},Ut={key:0},zt={class:"flex items-center mt-1"},Lt={class:"text-sm font-medium w-4 text-center"},Rt={class:"col-span-2"},Bt={class:"flex gap-2 mt-1"},Ot={key:0,class:"space-y-3 pt-2 border-t dark:border-gray-700/50"},Ft=["for"],Gt=["id","onUpdate:modelValue"],qt=["value"],Wt=["type","step","id","onUpdate:modelValue","placeholder"],Zt={class:"p-4 border-t dark:border-gray-700 flex-shrink-0 bg-gray-50 dark:bg-gray-800/50"},Jt={class:"flex-grow flex flex-col min-w-0 h-full relative"},Ht={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-3 flex items-center justify-between flex-shrink-0 z-10 shadow-sm"},Kt={class:"flex items-center gap-4"},Qt={class:"flex items-center gap-2"},Yt={class:"font-semibold text-gray-800 dark:text-gray-200"},Xt={class:"text-gray-500 font-normal ml-1"},es={class:"flex items-center gap-2"},ts={class:"btn-icon text-gray-500 hover:text-blue-600 cursor-pointer",title:"Upload Images"},ss={key:0,class:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/30 px-3 py-1.5 rounded-lg border border-blue-100 dark:border-blue-800 transition-all"},os={class:"text-sm font-medium text-blue-800 dark:text-blue-200"},as={class:"flex-grow overflow-y-auto p-4 custom-scrollbar bg-gray-50 dark:bg-gray-900"},ns={key:0,class:"mb-6"},ls={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"},is={class:"relative z-10"},rs=["title"],ds={class:"text-[10px] text-gray-500 mt-1"},us={class:"absolute bottom-0 left-0 right-0 h-1 bg-gray-200 dark:bg-gray-700"},cs={key:1,class:"h-64 flex flex-col items-center justify-center text-gray-400"},ps={key:2,class:"h-full flex flex-col items-center justify-center text-gray-400 opacity-60"},ms={key:3,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 pb-10"},gs=["onClick"],fs={class:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex flex-col justify-end p-3"},vs={class:"text-white text-xs line-clamp-2 drop-shadow-md"},bs={class:"flex items-center justify-between mt-2 pt-2 border-t border-white/20"},hs={class:"text-[10px] text-gray-300 font-mono"},xs={class:"flex gap-1"},ws=["onClick"],ys=["onClick"],_s=["onClick"],ks={key:0,class:"absolute top-2 left-2 bg-blue-500 text-white rounded-full p-0.5 shadow-sm z-10 animate-bounce-in"},Cs={__name:"ImageStudioView",setup(me){const c=ze(),j=Le(),u=Re(),ee=Be(),D=Oe(),te=Fe(),se=at(),{images:b,isLoading:ge,isGenerating:oe,prompt:h,negativePrompt:C,imageSize:M,nImages:T,seed:S,generationParams:x}=O(c),{user:fe}=O(ee),{imageGenerationTasks:ve,imageGenerationTasksCount:Z}=O(te),{currentModelVisionSupport:be}=O(D),E=k(!0),w=k(!1),y=k(!1),U=I(()=>w.value||y.value),ae=k(""),ne=k("description"),p=k([]),_=I(()=>p.value.length>0),le=I({get:()=>b.value.length>0&&p.value.length===b.value.length,set:s=>{p.value=s?b.value.map(e=>e.id):[]}}),z=k(!1),L=I(()=>{var s;return(s=fe.value)==null?void 0:s.tti_binding_model_name}),R=I(()=>!L.value||j.availableTtiModels.length===0?null:j.availableTtiModels.find(s=>s.id===L.value)),J=I(()=>{var n;if(!((n=R.value)!=null&&n.binding_params))return[];const s=_.value?R.value.binding_params.edit_parameters||[]:R.value.binding_params.generation_parameters||[],e=["prompt","negative_prompt","image","mask","width","height","n","seed","size"];return s.filter(o=>!e.includes(o.name))});function he(s){return typeof s=="string"?s.split(",").map(e=>e.trim()).filter(e=>e):Array.isArray(s)?s.filter(e=>e):[]}Q(R,s=>{s&&J.value.forEach(e=>{e.name in x.value||(x.value[e.name]=e.default)})},{immediate:!0,deep:!0}),Q(Z,(s,e)=>{e>0&&s===0&&setTimeout(()=>{c.fetchImages()},1e3)}),Ge(()=>{u.setPageTitle({title:"Image Studio",icon:qe(de)}),c.fetchImages(),j.availableTtiModels.length===0&&j.fetchAvailableTtiModels(),Object.keys(D.discussions).length===0&&D.loadDiscussions(),window.addEventListener("paste",re)}),We(()=>{u.setPageTitle({title:""}),window.removeEventListener("paste",re)});function ie(s){return p.value.includes(s)}function xe(s){const e=p.value.indexOf(s);e>-1?p.value.splice(e,1):p.value.push(s)}async function we(){if(!h.value.trim()||!L.value){u.addNotification("A prompt and model are required.","warning");return}const s={prompt:h.value,negative_prompt:C.value,model:L.value,seed:S.value,...x.value};if(_.value){const[e,n]=M.value.split("x").map(Number);await c.editImage({...s,image_ids:p.value,width:e,height:n})}else await c.generateImage({...s,size:M.value,n:T.value})}async function ye(s,e={}){var o;if(s!=="negative_prompt"&&!h.value.trim()){u.addNotification("Please enter a prompt to enhance.","warning");return}(s==="prompt"||s==="both")&&(w.value=!0),(s==="negative_prompt"||s==="both")&&(y.value=!0);const n={prompt:h.value,negative_prompt:C.value,target:s,model:(o=ee.user)==null?void 0:o.lollms_model_name,instructions:e.instructions||"",mode:e.mode||"description"};if(_.value&&be.value&&p.value.length>0){u.addNotification("Enhancing prompt with image context...","info");const a=[];for(const g of p.value)try{const K=await nt.get(`/api/image-studio/${g}/file`,{responseType:"blob"}),je=await new Promise((Ee,Ue)=>{const B=new FileReader;B.onloadend=()=>Ee(B.result.split(",")[1]),B.onerror=Ue,B.readAsDataURL(K.data)});a.push(je)}catch(K){console.error(`Failed to fetch and encode image ${g}`,K),u.addNotification(`Could not load image ${g} for context.`,"warning")}a.length>0&&(n.image_b64s=a)}try{u.addNotification("Prompt enhancement started...","info");const a=await c.enhanceImagePrompt(n);a&&a.id?_e(a.id,s):P(s)}catch(a){console.error("Enhancement failed to start:",a),P(s)}}function _e(s,e){console.log(`Monitoring task ${s} for ${e}`);const n=Q(()=>te.tasks.find(o=>o.id===s),o=>{if(!o){console.log(`Task ${s} not found in store yet.`);return}if(console.log(`Task ${s} status: ${o.status}`),o.status==="completed"){console.log("Task completed. Result:",o.result);let a=o.result;if(typeof a=="string")try{a=JSON.parse(a)}catch{}a&&(a.prompt&&(c.prompt=a.prompt),a.negative_prompt&&(c.negativePrompt=a.negative_prompt),u.addNotification("Prompt enhanced successfully!","success")),P(e),n()}else["failed","cancelled"].includes(o.status)&&(u.addNotification("Enhancement task failed.","error"),P(e),n())},{deep:!0,immediate:!0});setTimeout(()=>{(w.value||y.value)&&(console.warn("Task monitoring timed out."),P(e),n())},12e4)}function P(s){(s==="prompt"||s==="both")&&(w.value=!1),(s==="negative_prompt"||s==="both")&&(y.value=!1)}function H(s){u.openModal("enhancePrompt",{instructions:ae.value,mode:ne.value,onConfirm:({instructions:e,mode:n})=>{ae.value=e,ne.value=n,ye(s,{instructions:e,mode:n})}})}function ke(){se.push("/image-studio/edit/new")}function Ce(s){h.value=s.prompt,C.value=s.negative_prompt,S.value=s.seed,u.addNotification("Prompt and parameters have been reused.","success")}function Se(s){se.push(`/image-studio/edit/${s.id}`)}function Ie(s,e){u.openImageViewer({imageList:b.value.map(n=>({...n,src:`/api/image-studio/${n.id}/file`})),startIndex:e})}async function $e(s){const e=Array.from(s.target.files);e.length>0&&(u.addNotification(`Uploading ${e.length} image(s)...`,"info"),await c.uploadImages(e))}async function De(){(await u.showConfirmation({title:`Delete ${p.value.length} Images?`,message:"This action cannot be undone.",confirmText:"Delete"})).confirmed&&(await Promise.all(p.value.map(e=>c.deleteImage(e))),p.value=[])}async function Me(){if(!_.value)return;const{confirmed:s,value:e}=await u.showConfirmation({title:`Move ${p.value.length} Images to Discussion`,message:"Select a discussion:",confirmText:"Move",inputType:"select",inputOptions:D.sortedDiscussions.map(n=>({text:n.title,value:n.id})),inputValue:D.currentDiscussionId});s&&e&&(await Promise.all(p.value.map(n=>c.moveImageToDiscussion(n,e))),p.value=[])}function Te(s){s.preventDefault(),z.value=!0}function Pe(s){s.currentTarget.contains(s.relatedTarget)||(z.value=!1)}async function Ve(s){s.preventDefault(),z.value=!1;const e=Array.from(s.dataTransfer.files).filter(n=>n.type.startsWith("image/"));e.length>0&&(u.addNotification(`Uploading ${e.length} image(s)...`,"info"),await c.uploadImages(e))}async function re(s){const e=(s.clipboardData||window.clipboardData).items;if(!e)return;const n=[];for(const o of e)if(o.kind==="file"&&o.type.startsWith("image/")){const a=o.getAsFile();if(a){const g=(a.type.split("/")[1]||"png").toLowerCase().replace("jpeg","jpg");n.push(new File([a],`pasted_image_${Date.now()}_${Math.random().toString(36).substr(2,9)}.${g}`,{type:a.type}))}}n.length>0&&(s.preventDefault(),u.addNotification(`Pasting ${n.length} image(s)...`,"info"),await c.uploadImages(n))}function Ne(){u.openModal("cameraCapture")}async function Ae(){await c.fetchImages(),u.addNotification("Image gallery refreshed.","success")}return(s,e)=>{const n=Ye("router-link");return l(),i(A,null,[(l(),ue(Ze,{to:"#global-header-actions-target"},[t("div",vt,[t("button",{onClick:we,class:"btn btn-primary",disabled:d(oe)||U.value},[d(oe)?(l(),ue(V,{key:0,class:"w-5 h-5 mr-2 animate-spin"})):f("",!0),F(" "+m(_.value?"Apply Edit":"Generate"),1)],8,bt)])])),t("div",{class:"h-full flex flex-col bg-gray-50 dark:bg-gray-900",onDragover:$(Te,["prevent"]),onDragleave:$(Pe,["prevent"]),onDrop:$(Ve,["prevent"])},[z.value?(l(),i("div",ht,e[11]||(e[11]=[t("p",{class:"text-2xl font-bold text-blue-600"},"Drop images anywhere to upload",-1)]))):f("",!0),t("div",xt,[t("div",wt,[t("div",yt,[t("div",_t,[t("div",null,[t("div",kt,[e[12]||(e[12]=t("label",{for:"prompt",class:"text-sm font-semibold text-gray-700 dark:text-gray-200"},"Prompt",-1)),t("button",{onClick:e[0]||(e[0]=o=>H("prompt")),class:"text-blue-600 dark:text-blue-400 hover:text-blue-700 p-1 rounded hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors",title:"Enhance prompt with AI",disabled:U.value},[r(Y,{class:"w-4 h-4"})],8,Ct)]),t("div",St,[v(t("textarea",{id:"prompt","onUpdate:modelValue":e[1]||(e[1]=o=>N(h)?h.value=o:null),rows:"4",class:q(["input-field w-full resize-none shadow-sm",{"opacity-50 pointer-events-none":w.value}]),disabled:w.value,placeholder:"Describe your image..."},null,10,It),[[G,d(h)]]),w.value?(l(),i("div",$t,[r(V,{class:"w-6 h-6 text-blue-500 animate-spin"})])):f("",!0)])]),t("div",null,[t("div",Dt,[e[13]||(e[13]=t("label",{for:"negative-prompt",class:"text-sm font-semibold text-gray-700 dark:text-gray-200"},"Negative Prompt",-1)),t("button",{onClick:e[2]||(e[2]=o=>H("negative_prompt")),class:"text-red-600 dark:text-red-400 hover:text-red-700 p-1 rounded hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors",title:"Enhance negative prompt with AI",disabled:U.value},[r(Y,{class:"w-4 h-4"})],8,Mt)]),t("div",Tt,[v(t("textarea",{id:"negative-prompt","onUpdate:modelValue":e[3]||(e[3]=o=>N(C)?C.value=o:null),rows:"3",class:q(["input-field w-full resize-none shadow-sm",{"opacity-50 pointer-events-none":y.value}]),disabled:y.value,placeholder:"Things to avoid..."},null,10,Pt),[[G,d(C)]]),y.value?(l(),i("div",Vt,[r(V,{class:"w-6 h-6 text-red-500 animate-spin"})])):f("",!0)])]),t("button",{onClick:e[4]||(e[4]=o=>H("both")),class:"btn btn-secondary w-full text-xs py-1.5",disabled:U.value},[r(Y,{class:"w-3 h-3 mr-1.5"}),e[14]||(e[14]=F(" Enhance All "))],8,Nt)]),t("div",At,[t("div",{class:"flex items-center justify-between cursor-pointer",onClick:e[5]||(e[5]=o=>E.value=!E.value)},[e[15]||(e[15]=t("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-200"},"Settings",-1)),r(Je,{class:q(["w-4 h-4 text-gray-500 transition-transform duration-200",{"rotate-180":!E.value}])},null,8,["class"])]),v(t("div",jt,[t("div",Et,[_.value?f("",!0):(l(),i("div",Ut,[e[16]||(e[16]=t("label",{class:"label text-xs"},"Count",-1)),t("div",zt,[v(t("input",{type:"range","onUpdate:modelValue":e[6]||(e[6]=o=>N(T)?T.value=o:null),min:"1",max:"8",class:"flex-grow mr-2 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"},null,512),[[G,d(T),void 0,{number:!0}]]),t("span",Lt,m(d(T)),1)])])),t("div",Rt,[e[18]||(e[18]=t("label",{for:"size",class:"label text-xs"},"Size",-1)),v(t("select",{id:"size","onUpdate:modelValue":e[7]||(e[7]=o=>N(M)?M.value=o:null),class:"input-field mt-1 w-full text-sm"},e[17]||(e[17]=[Ke('<option value="1024x1024" data-v-520633b2>1024x1024 (Square 1:1)</option><option value="1152x896" data-v-520633b2>1152x896 (Landscape ~4:3)</option><option value="896x1152" data-v-520633b2>896x1152 (Portrait ~3:4)</option><option value="1216x832" data-v-520633b2>1216x832 (Landscape ~3:2)</option><option value="832x1216" data-v-520633b2>832x1216 (Portrait ~2:3)</option><option value="1344x768" data-v-520633b2>1344x768 (Widescreen 16:9)</option><option value="768x1344" data-v-520633b2>768x1344 (Tall 9:16)</option><option value="1536x640" data-v-520633b2>1536x640 (Cinematic ~2.4:1)</option><option value="640x1536" data-v-520633b2>640x1536 (Tall Cinematic ~1:2.4)</option><option value="512x512" data-v-520633b2>512x512 (Small Square)</option>',10)]),512),[[ce,d(M)]])])]),t("div",null,[e[19]||(e[19]=t("label",{for:"seed",class:"label text-xs"},"Seed",-1)),t("div",Bt,[v(t("input",{id:"seed","onUpdate:modelValue":e[8]||(e[8]=o=>N(S)?S.value=o:null),type:"number",class:"input-field flex-grow text-sm",placeholder:"-1 (Random)"},null,512),[[G,d(S),void 0,{number:!0}]]),t("button",{onClick:e[9]||(e[9]=o=>S.value=-1),class:"btn btn-secondary px-2",title:"Randomize Seed"},[r(X,{class:"w-4 h-4"})])])]),J.value.length>0?(l(),i("div",Ot,[e[20]||(e[20]=t("p",{class:"text-xs font-semibold text-gray-500 uppercase"},"Model Parameters",-1)),(l(!0),i(A,null,W(J.value,o=>(l(),i("div",{key:o.name},[t("label",{for:`param-${o.name}`,class:"label text-xs capitalize"},m(o.name.replace(/_/g," ")),9,Ft),o.options&&o.options.length>0?v((l(),i("select",{key:0,id:`param-${o.name}`,"onUpdate:modelValue":a=>d(x)[o.name]=a,class:"input-field mt-1 w-full text-sm"},[(l(!0),i(A,null,W(he(o.options),a=>(l(),i("option",{key:a,value:a},m(a),9,qt))),128))],8,Gt)),[[ce,d(x)[o.name]]]):v((l(),i("input",{key:1,type:o.type==="str"?"text":"number",step:o.type==="float"?"0.1":"1",id:`param-${o.name}`,"onUpdate:modelValue":a=>d(x)[o.name]=a,class:"input-field mt-1 w-full text-sm",placeholder:o.default},null,8,Wt)),[[lt,d(x)[o.name]]])]))),128))])):f("",!0)],512),[[He,E.value]])])]),t("div",Zt,[r(n,{to:"/",class:"w-full flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors"},{default:Qe(()=>[r(it,{class:"w-4 h-4"}),e[21]||(e[21]=F(" Back to App "))]),_:1})])]),t("div",Jt,[t("div",Ht,[t("div",Kt,[t("div",Qt,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=o=>le.value=o),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",title:"Select All"},null,512),[[Xe,le.value]]),t("h2",Yt,[e[22]||(e[22]=F("Gallery ")),t("span",Xt,"("+m(d(b).length)+")",1)])]),e[23]||(e[23]=t("div",{class:"h-6 w-px bg-gray-300 dark:bg-gray-600 mx-2"},null,-1)),t("div",es,[t("button",{onClick:Ae,class:"btn-icon text-gray-500 hover:text-blue-600",title:"Refresh Gallery"},[r(X,{class:"w-5 h-5"})]),t("label",ts,[r(et,{class:"w-5 h-5"}),t("input",{type:"file",onChange:$e,class:"hidden",accept:"image/*",multiple:""},null,32)]),t("button",{onClick:Ne,class:"btn-icon text-gray-500 hover:text-blue-600",title:"Take Photo"},[r(ft,{class:"w-5 h-5"})]),t("button",{onClick:ke,class:"btn-icon text-gray-500 hover:text-blue-600",title:"Create Blank Canvas"},[r(tt,{class:"w-5 h-5"})])])]),_.value?(l(),i("div",ss,[t("span",os,m(p.value.length)+" selected",1),e[24]||(e[24]=t("div",{class:"h-4 w-px bg-blue-200 dark:bg-blue-700"},null,-1)),t("button",{onClick:Me,class:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",title:"Send to Chat"},[r(st,{class:"w-5 h-5"})]),t("button",{onClick:De,class:"text-red-500 hover:text-red-700",title:"Delete"},[r(ot,{class:"w-5 h-5"})])])):f("",!0)]),t("div",as,[d(Z)>0?(l(),i("div",ns,[e[26]||(e[26]=t("h3",{class:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2"},"Active Generations",-1)),t("div",ls,[(l(!0),i(A,null,W(d(ve),o=>(l(),i("div",{key:o.id,class:"relative aspect-square rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm flex flex-col items-center justify-center p-4 text-center overflow-hidden group"},[e[25]||(e[25]=t("div",{class:"absolute inset-0 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 animate-pulse"},null,-1)),t("div",is,[r(V,{class:"w-8 h-8 text-blue-500 mb-3 animate-spin mx-auto"}),t("p",{class:"text-xs font-semibold text-gray-700 dark:text-gray-200 truncate w-full px-2",title:o.name},m(o.name),9,rs),t("p",ds,m(o.progress)+"%",1)]),t("div",us,[t("div",{class:"h-full bg-blue-500 transition-all duration-300",style:rt({width:o.progress+"%"})},null,4)])]))),128))])])):f("",!0),d(ge)&&d(b).length===0?(l(),i("div",cs,[r(V,{class:"w-10 h-10 mb-3 text-blue-500"}),e[27]||(e[27]=t("p",null,"Loading gallery...",-1))])):d(b).length===0&&d(Z)===0?(l(),i("div",ps,[r(de,{class:"w-24 h-24 mb-4"}),e[28]||(e[28]=t("p",{class:"text-lg font-medium"},"Your gallery is empty",-1)),e[29]||(e[29]=t("p",{class:"text-sm mt-1"},"Start generating or upload images to get started!",-1))])):(l(),i("div",ms,[(l(!0),i(A,null,W(d(b),(o,a)=>(l(),i("div",{key:o.id,onClick:g=>xe(o.id),class:q(["relative aspect-square rounded-xl overflow-hidden group cursor-pointer border-2 transition-all duration-200 shadow-sm hover:shadow-md bg-gray-200 dark:bg-gray-800",ie(o.id)?"border-blue-500 ring-2 ring-blue-500 ring-offset-2 dark:ring-offset-gray-900":"border-transparent hover:border-gray-300 dark:hover:border-gray-600"])},[r(dt,{src:`/api/image-studio/${o.id}/file`,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"},null,8,["src"]),t("div",fs,[t("p",vs,m(o.prompt||"No prompt"),1),t("div",bs,[t("span",hs,m(o.width)+"x"+m(o.height),1),t("div",xs,[t("button",{onClick:$(g=>Ce(o),["stop"]),class:"p-1.5 bg-white/20 hover:bg-white/40 rounded text-white backdrop-blur-sm transition-colors",title:"Reuse Settings"},[r(X,{class:"w-3.5 h-3.5"})],8,ws),t("button",{onClick:$(g=>Se(o),["stop"]),class:"p-1.5 bg-white/20 hover:bg-white/40 rounded text-white backdrop-blur-sm transition-colors",title:"Edit"},[r(ut,{class:"w-3.5 h-3.5"})],8,ys),t("button",{onClick:$(g=>Ie(o,a),["stop"]),class:"p-1.5 bg-white/20 hover:bg-white/40 rounded text-white backdrop-blur-sm transition-colors",title:"View"},[r(ct,{class:"w-3.5 h-3.5"})],8,_s)])])]),ie(o.id)?(l(),i("div",ks,e[30]||(e[30]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)]))):f("",!0)],10,gs))),128))]))])])])],32)],64)}}},$s=pe(Cs,[["__scopeId","data-v-520633b2"]]);export{$s as default};
