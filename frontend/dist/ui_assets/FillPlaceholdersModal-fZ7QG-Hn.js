import{u as w,h as V,r as v,l as S,c as x,o as s,w as h,a as p,d as u,F as g,A as k,b as U,e as $,f as b,t as _,y as D,B as P,_ as M,C as B}from"./index-C2FPU61Y.js";import{_ as E}from"./GenericModal-BZ_c4i9n.js";function F(d){if(!d)return[];const c=new Map,m=/@<([^>]+?)>@([\s\S]*?)@<\/\1>@|@<([^>]+?)>@/g;let n;for(;(n=m.exec(d))!==null;){const a=n[1]||n[3],o=n[2];if(!c.has(a)){const r={name:a,title:a.replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase()),type:"str",options:[],default:"",help:""};o&&o.trim()&&o.trim().split(`
`).forEach(i=>{const e=i.indexOf(":");if(e===-1)return;const t=i.substring(0,e).trim().toLowerCase(),f=i.substring(e+1).trim();t&&f!==""&&Object.prototype.hasOwnProperty.call(r,t)&&(t==="options"?r.options=f.split(",").map(y=>y.trim()).filter(Boolean):r[t]=f)}),["str","text","int","float","bool"].includes(r.type)||(r.type="str"),c.set(a,r)}}return Array.from(c.values())}function N(d){if(!d)return"";const c=/@<([^>]+?)>@[\s\S]*?@<\/\1>@/g,n=d.replace(c,"").split(`
`);let a=-1;for(let o=0;o<n.length;o++)if(n[o].trim()!==""){a=o;break}return a!==-1?n.slice(a).join(`
`):""}const C={parse:F,clean:N},T=["for"],L={key:0,class:"text-xs text-gray-500 mb-1"},O=["id","onUpdate:modelValue"],j=["value"],A={key:2,class:"mt-2 flex items-center"},I=["id","onUpdate:modelValue"],R=["for"],W=["type","id","onUpdate:modelValue"],q={key:1,class:"text-center text-gray-500"},H={__name:"FillPlaceholdersModal",setup(d){const c=w(),m=V(()=>c.modalData("fillPlaceholders")),n=v([]),a=v({});S(()=>{var l;return(l=m.value)==null?void 0:l.promptTemplate},l=>{if(l){const i=C.parse(l);n.value=i;const e={};i.forEach(t=>{t.type==="bool"?e[t.name]=t.default==="true":e[t.name]=t.default||""}),a.value=e}else n.value=[],a.value={}},{immediate:!0});function o(){var e;const l=m.value.promptTemplate;let i=C.clean(l);n.value.forEach(t=>{const f=a.value[t.name],y=new RegExp(`@<${t.name}>@`,"g");i=i.replace(y,String(f))}),(e=m.value)!=null&&e.onConfirm&&m.value.onConfirm(i),r()}function r(){c.closeModal("fillPlaceholders")}return(l,i)=>(s(),x(E,{modalName:"fillPlaceholders",title:"Fill in Prompt Details",maxWidthClass:"max-w-2xl",onClose:r},{body:h(()=>[n.value.length>0?(s(),u("form",{key:0,onSubmit:U(o,["prevent"]),class:"space-y-4"},[(s(!0),u(g,null,k(n.value,e=>(s(),u("div",{key:e.name},[p("label",{for:`placeholder-${e.name}`,class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},_(e.title),9,T),e.help?(s(),u("p",L,_(e.help),1)):$("",!0),e.options&&e.options.length>0?b((s(),u("select",{key:1,id:`placeholder-${e.name}`,"onUpdate:modelValue":t=>a.value[e.name]=t,class:"input-field mt-1"},[(s(!0),u(g,null,k(e.options,t=>(s(),u("option",{key:t,value:t},_(t),9,j))),128))],8,O)),[[D,a.value[e.name]]]):e.type==="bool"?(s(),u("div",A,[b(p("input",{id:`placeholder-${e.name}`,type:"checkbox","onUpdate:modelValue":t=>a.value[e.name]=t,class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,I),[[P,a.value[e.name]]]),p("label",{for:`placeholder-${e.name}`,class:"ml-2 block text-sm text-gray-900 dark:text-gray-100"}," Enable ",8,R)])):e.type==="text"?(s(),x(M,{key:3,id:`placeholder-${e.name}`,modelValue:a.value[e.name],"onUpdate:modelValue":t=>a.value[e.name]=t,class:"mt-1 h-40"},null,8,["id","modelValue","onUpdate:modelValue"])):b((s(),u("input",{key:4,type:e.type==="int"||e.type==="float"?"number":"text",id:`placeholder-${e.name}`,"onUpdate:modelValue":t=>a.value[e.name]=t,class:"input-field mt-1"},null,8,W)),[[B,a.value[e.name]]])]))),128))],32)):(s(),u("div",q," No placeholders were found in this prompt. "))]),footer:h(()=>[p("button",{onClick:r,type:"button",class:"btn btn-secondary"}," Cancel "),p("button",{onClick:o,type:"button",class:"btn btn-primary"}," Confirm ")]),_:1}))}};export{H as default};
