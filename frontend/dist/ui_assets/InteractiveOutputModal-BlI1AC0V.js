import{dm as Ce,dF as Vi,K as it,X as mi,c as ct,o as Ri,dG as dt,a4 as zi,w as Wt,d as j,l as $,e as I,h as at,t as Ot,$ as Ii,aj as Li,n as Xt,f as lt,g as Be,J as _e,ah as Fe,H as Ue,df as Ze,ci as Di,az as Bi,ae as _i,F as Ht,da as Fi,N as Ui,O as Zi,Y as Xi,dH as Hi,a5 as Yi,ai as qi}from"./index-DBRQkGj9.js";import{I as Gi}from"./IconArrowPath-Cp1U5yQn.js";var ue,Xe;function Wi(){return Xe||(Xe=1,ue=(function(){var c="",t,e,i,n=[],s={passive:!0},o={passive:!1};window.addEventListener?(t="addEventListener",e="removeEventListener"):(t="attachEvent",e="detachEvent",c="on"),i="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";function r(p,g){var m=function(y){!y&&(y=window.event);var x={originalEvent:y,target:y.target||y.srcElement,type:"wheel",deltaMode:y.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){y.preventDefault?y.preventDefault():y.returnValue=!1}};return i=="mousewheel"?(x.deltaY=-.025*y.wheelDelta,y.wheelDeltaX&&(x.deltaX=-.025*y.wheelDeltaX)):x.deltaY=y.detail,g(x)};return n.push({element:p,fn:m}),m}function l(p){for(var g=0;g<n.length;g++)if(n[g].element===p)return n[g].fn;return function(){}}function h(p){for(var g=0;g<n.length;g++)if(n[g].element===p)return n.splice(g,1)}function a(p,g,m,y){var x;i==="wheel"?x=m:x=r(p,m),p[t](c+g,x,y?s:o)}function u(p,g,m,y){var x;i==="wheel"?x=m:x=l(p),p[e](c+g,x,y?s:o),h(p)}function f(p,g,m){a(p,i,g,m),i=="DOMMouseScroll"&&a(p,"MozMousePixelScroll",g,m)}function d(p,g,m){u(p,i,g,m),i=="DOMMouseScroll"&&u(p,"MozMousePixelScroll",g,m)}return{on:f,off:d}})()),ue}var ce,He;function Ae(){if(He)return ce;He=1,ce={extend:function(t,e){t=t||{};for(var i in e)this.isObject(e[i])?t[i]=this.extend(t[i],e[i]):t[i]=e[i];return t},isElement:function(t){return t instanceof HTMLElement||t instanceof SVGElement||t instanceof SVGSVGElement||t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"},isObject:function(t){return Object.prototype.toString.call(t)==="[object Object]"},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},getSvg:function(t){var e,i;if(this.isElement(t))e=t;else if(typeof t=="string"||t instanceof String){if(e=document.querySelector(t),!e)throw new Error("Provided selector did not find any elements. Selector: "+t)}else throw new Error("Provided selector is not an HTML object nor String");if(e.tagName.toLowerCase()==="svg")i=e;else if(e.tagName.toLowerCase()==="object")i=e.contentDocument.documentElement;else if(e.tagName.toLowerCase()==="embed")i=e.getSVGDocument().documentElement;else throw e.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return i},proxy:function(t,e){return function(){return t.apply(e,arguments)}},getType:function(t){return Object.prototype.toString.apply(t).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(t,e){if(t.clientX===void 0||t.clientX===null)if(t.clientX=0,t.clientY=0,t.touches!==void 0&&t.touches.length){if(t.touches[0].clientX!==void 0)t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY;else if(t.touches[0].pageX!==void 0){var i=e.getBoundingClientRect();t.clientX=t.touches[0].pageX-i.left,t.clientY=t.touches[0].pageY-i.top}}else t.originalEvent!==void 0&&t.originalEvent.clientX!==void 0&&(t.clientX=t.originalEvent.clientX,t.clientY=t.originalEvent.clientY)},isDblClick:function(t,e){if(t.detail===2)return!0;if(e!=null){var i=t.timeStamp-e.timeStamp,n=Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2));return i<250&&n<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(t,e,i){var n=this,s,o,r,l=null,h=0;i||(i={});var a=function(){h=i.leading===!1?0:n.now(),l=null,r=t.apply(s,o),l||(s=o=null)};return function(){var u=n.now();!h&&i.leading===!1&&(h=u);var f=e-(u-h);return s=this,o=arguments,f<=0||f>e?(clearTimeout(l),l=null,h=u,r=t.apply(s,o),l||(s=o=null)):!l&&i.trailing!==!1&&(l=setTimeout(a,f)),r}},createRequestAnimationFrame:function(t){var e=null;return t!=="auto"&&t<60&&t>1&&(e=Math.floor(1e3/t)),e===null?window.requestAnimationFrame||c(33):c(e)}};function c(t){return function(e){window.setTimeout(e,t)}}return ce}var Nt,Ye;function Te(){if(Ye)return Nt;Ye=1;var c=Ae(),t="unknown";return document.documentMode&&(t="ie"),Nt={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(e){if(e.clientWidth&&e.clientHeight)return{width:e.clientWidth,height:e.clientHeight};if(e.getBoundingClientRect())return e.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(e,i){var n=null;if(c.isElement(i)?n=i:n=e.querySelector(i),!n){var s=Array.prototype.slice.call(e.childNodes||e.children).filter(function(a){return a.nodeName!=="defs"&&a.nodeName!=="#text"});s.length===1&&s[0].nodeName==="g"&&s[0].getAttribute("transform")===null&&(n=s[0])}if(!n){var o="viewport-"+new Date().toISOString().replace(/\D/g,"");n=document.createElementNS(this.svgNS,"g"),n.setAttribute("id",o);var r=e.childNodes||e.children;if(r&&r.length>0)for(var l=r.length;l>0;l--)r[r.length-l].nodeName!=="defs"&&n.appendChild(r[r.length-l]);e.appendChild(n)}var h=[];return n.getAttribute("class")&&(h=n.getAttribute("class").split(" ")),~h.indexOf("svg-pan-zoom_viewport")||(h.push("svg-pan-zoom_viewport"),n.setAttribute("class",h.join(" "))),n},setupSvgAttributes:function(e){if(e.setAttribute("xmlns",this.svgNS),e.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),e.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),e.parentNode!==null){var i=e.getAttribute("style")||"";i.toLowerCase().indexOf("overflow")===-1&&e.setAttribute("style","overflow: hidden; "+i)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:c.throttle(function(){for(var e=document.querySelectorAll("defs"),i=e.length,n=0;n<i;n++){var s=e[n];s.parentNode.insertBefore(s,s)}},Nt?Nt.internetExplorerRedisplayInterval:null),setCTM:function(e,i,n){var s=this,o="matrix("+i.a+","+i.b+","+i.c+","+i.d+","+i.e+","+i.f+")";e.setAttributeNS(null,"transform",o),"transform"in e.style?e.style.transform=o:"-ms-transform"in e.style?e.style["-ms-transform"]=o:"-webkit-transform"in e.style&&(e.style["-webkit-transform"]=o),t==="ie"&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){s.refreshDefsGlobal()},s.internetExplorerRedisplayInterval))},getEventPoint:function(e,i){var n=i.createSVGPoint();return c.mouseAndTouchNormalize(e,i),n.x=e.clientX,n.y=e.clientY,n},getSvgCenterPoint:function(e,i,n){return this.createSVGPoint(e,i/2,n/2)},createSVGPoint:function(e,i,n){var s=e.createSVGPoint();return s.x=i,s.y=n,s}},Nt}var fe,qe;function $i(){if(qe)return fe;qe=1;var c=Te();return fe={enable:function(t){var e=t.svg.querySelector("defs");e||(e=document.createElementNS(c.svgNS,"defs"),t.svg.appendChild(e));var i=e.querySelector("style#svg-pan-zoom-controls-styles");if(!i){var n=document.createElementNS(c.svgNS,"style");n.setAttribute("id","svg-pan-zoom-controls-styles"),n.setAttribute("type","text/css"),n.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",e.appendChild(n)}var s=document.createElementNS(c.svgNS,"g");s.setAttribute("id","svg-pan-zoom-controls"),s.setAttribute("transform","translate("+(t.width-70)+" "+(t.height-76)+") scale(0.75)"),s.setAttribute("class","svg-pan-zoom-control"),s.appendChild(this._createZoomIn(t)),s.appendChild(this._createZoomReset(t)),s.appendChild(this._createZoomOut(t)),t.svg.appendChild(s),t.controlIcons=s},_createZoomIn:function(t){var e=document.createElementNS(c.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-in"),e.setAttribute("transform","translate(30.5 5) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().zoomIn()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().zoomIn()},!1);var i=document.createElementNS(c.svgNS,"rect");i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("width","1500"),i.setAttribute("height","1400"),i.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(i);var n=document.createElementNS(c.svgNS,"path");return n.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),n.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(n),e},_createZoomReset:function(t){var e=document.createElementNS(c.svgNS,"g");e.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),e.setAttribute("transform","translate(5 35) scale(0.4)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().reset()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().reset()},!1);var i=document.createElementNS(c.svgNS,"rect");i.setAttribute("x","2"),i.setAttribute("y","2"),i.setAttribute("width","182"),i.setAttribute("height","58"),i.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(i);var n=document.createElementNS(c.svgNS,"path");n.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),n.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(n);var s=document.createElementNS(c.svgNS,"path");return s.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),s.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(s),e},_createZoomOut:function(t){var e=document.createElementNS(c.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-out"),e.setAttribute("transform","translate(30.5 70) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().zoomOut()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().zoomOut()},!1);var i=document.createElementNS(c.svgNS,"rect");i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("width","1500"),i.setAttribute("height","1400"),i.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(i);var n=document.createElementNS(c.svgNS,"path");return n.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),n.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(n),e},disable:function(t){t.controlIcons&&(t.controlIcons.parentNode.removeChild(t.controlIcons),t.controlIcons=null)}},fe}var de,Ge;function Qi(){if(Ge)return de;Ge=1;var c=Te(),t=Ae(),e=function(i,n){this.init(i,n)};return e.prototype.init=function(i,n){this.viewport=i,this.options=n,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=t.proxy(this.updateCTM,this),this.requestAnimationFrame=t.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var s=this.processCTM();this.setCTM(s),this.updateCTM()},e.prototype.cacheViewBox=function(){var i=this.options.svg.getAttribute("viewBox");if(i){var n=i.split(/[\s\,]/).filter(function(o){return o}).map(parseFloat);this.viewBox.x=n[0],this.viewBox.y=n[1],this.viewBox.width=n[2],this.viewBox.height=n[3];var s=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=s,this.activeState.x=(this.options.width-this.viewBox.width*s)/2,this.activeState.y=(this.options.height-this.viewBox.height*s)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},e.prototype.simpleViewBoxCache=function(){var i=this.viewport.getBBox();this.viewBox.x=i.x,this.viewBox.y=i.y,this.viewBox.width=i.width,this.viewBox.height=i.height},e.prototype.getViewBox=function(){return t.extend({},this.viewBox)},e.prototype.processCTM=function(){var i=this.getCTM();if(this.options.fit||this.options.contain){var n;this.options.fit?n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):n=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),i.a=n,i.d=n,i.e=-this.viewBox.x*n,i.f=-this.viewBox.y*n}if(this.options.center){var s=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*i.a)*.5,o=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*i.a)*.5;i.e=s,i.f=o}return this.originalState.zoom=i.a,this.originalState.x=i.e,this.originalState.y=i.f,i},e.prototype.getOriginalState=function(){return t.extend({},this.originalState)},e.prototype.getState=function(){return t.extend({},this.activeState)},e.prototype.getZoom=function(){return this.activeState.zoom},e.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},e.prototype.computeRelativeZoom=function(i){return i/this.originalState.zoom},e.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},e.prototype.getCTM=function(){var i=this.options.svg.createSVGMatrix();return i.a=this.activeState.zoom,i.b=0,i.c=0,i.d=this.activeState.zoom,i.e=this.activeState.x,i.f=this.activeState.y,i},e.prototype.setCTM=function(i){var n=this.isZoomDifferent(i),s=this.isPanDifferent(i);if(n||s){if(n&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(i.a))===!1?(i.a=i.d=this.activeState.zoom,n=!1):(this.updateCache(i),this.options.onZoom(this.getRelativeZoom()))),s){var o=this.options.beforePan(this.getPan(),{x:i.e,y:i.f}),r=!1,l=!1;o===!1?(i.e=this.getPan().x,i.f=this.getPan().y,r=l=!0):t.isObject(o)&&(o.x===!1?(i.e=this.getPan().x,r=!0):t.isNumber(o.x)&&(i.e=o.x),o.y===!1?(i.f=this.getPan().y,l=!0):t.isNumber(o.y)&&(i.f=o.y)),r&&l||!this.isPanDifferent(i)?s=!1:(this.updateCache(i),this.options.onPan(this.getPan()))}(n||s)&&this.updateCTMOnNextFrame()}},e.prototype.isZoomDifferent=function(i){return this.activeState.zoom!==i.a},e.prototype.isPanDifferent=function(i){return this.activeState.x!==i.e||this.activeState.y!==i.f},e.prototype.updateCache=function(i){this.activeState.zoom=i.a,this.activeState.x=i.e,this.activeState.y=i.f},e.prototype.pendingUpdate=!1,e.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},e.prototype.updateCTM=function(){var i=this.getCTM();c.setCTM(this.viewport,i,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(i)},de=function(i,n){return new e(i,n)},de}var ge,We;function ji(){if(We)return ge;We=1;var c=Wi(),t=$i(),e=Ae(),i=Te(),n=Qi(),s=function(a,u){this.init(a,u)},o={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},r={passive:!0};s.prototype.init=function(a,u){var f=this;this.svg=a,this.defs=a.querySelector("defs"),i.setupSvgAttributes(this.svg),this.options=e.extend(e.extend({},o),u),this.state="none";var d=i.getBoundingClientRectNormalized(a);this.width=d.width,this.height=d.height,this.viewport=n(i.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(g,m){if(f.viewport&&f.options.beforeZoom)return f.options.beforeZoom(g,m)},onZoom:function(g){if(f.viewport&&f.options.onZoom)return f.options.onZoom(g)},beforePan:function(g,m){if(f.viewport&&f.options.beforePan)return f.options.beforePan(g,m)},onPan:function(g){if(f.viewport&&f.options.onPan)return f.options.onPan(g)},onUpdatedCTM:function(g){if(f.viewport&&f.options.onUpdatedCTM)return f.options.onUpdatedCTM(g)}});var p=this.getPublicInstance();p.setBeforeZoom(this.options.beforeZoom),p.setOnZoom(this.options.onZoom),p.setBeforePan(this.options.beforePan),p.setOnPan(this.options.onPan),p.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&t.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},s.prototype.setupHandlers=function(){var a=this,u=null;if(this.eventListeners={mousedown:function(g){var m=a.handleMouseDown(g,u);return u=g,m},touchstart:function(g){var m=a.handleMouseDown(g,u);return u=g,m},mouseup:function(g){return a.handleMouseUp(g)},touchend:function(g){return a.handleMouseUp(g)},mousemove:function(g){return a.handleMouseMove(g)},touchmove:function(g){return a.handleMouseMove(g)},mouseleave:function(g){return a.handleMouseUp(g)},touchleave:function(g){return a.handleMouseUp(g)},touchcancel:function(g){return a.handleMouseUp(g)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var f=this.options.customEventsHandler.haltEventListeners;if(f&&f.length)for(var d=f.length-1;d>=0;d--)this.eventListeners.hasOwnProperty(f[d])&&delete this.eventListeners[f[d]]}for(var p in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(p,this.eventListeners[p],this.options.preventMouseEventsDefault?!1:r);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},s.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var a=this;this.wheelListener=function(f){return a.handleMouseWheel(f)};var u=!this.options.preventMouseEventsDefault;c.on(this.options.eventsListenerElement||this.svg,this.wheelListener,u),this.options.mouseWheelZoomEnabled=!0}},s.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var a=!this.options.preventMouseEventsDefault;c.off(this.options.eventsListenerElement||this.svg,this.wheelListener,a),this.options.mouseWheelZoomEnabled=!1}},s.prototype.handleMouseWheel=function(a){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(a.preventDefault?a.preventDefault():a.returnValue=!1);var u=a.deltaY||1,f=Date.now()-this.lastMouseWheelEventTime,d=3+Math.max(0,30-f);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in a&&a.deltaMode===0&&a.wheelDelta&&(u=a.deltaY===0?0:Math.abs(a.wheelDelta)/a.deltaY),u=-.3<u&&u<.3?u:(u>0?1:-1)*Math.log(Math.abs(u)+10)/d;var p=this.svg.getScreenCTM().inverse(),g=i.getEventPoint(a,this.svg).matrixTransform(p),m=Math.pow(1+this.options.zoomScaleSensitivity,-1*u);this.zoomAtPoint(m,g)}},s.prototype.zoomAtPoint=function(a,u,f){var d=this.viewport.getOriginalState();f?(a=Math.max(this.options.minZoom*d.zoom,Math.min(this.options.maxZoom*d.zoom,a)),a=a/this.getZoom()):this.getZoom()*a<this.options.minZoom*d.zoom?a=this.options.minZoom*d.zoom/this.getZoom():this.getZoom()*a>this.options.maxZoom*d.zoom&&(a=this.options.maxZoom*d.zoom/this.getZoom());var p=this.viewport.getCTM(),g=u.matrixTransform(p.inverse()),m=this.svg.createSVGMatrix().translate(g.x,g.y).scale(a).translate(-g.x,-g.y),y=p.multiply(m);y.a!==p.a&&this.viewport.setCTM(y)},s.prototype.zoom=function(a,u){this.zoomAtPoint(a,i.getSvgCenterPoint(this.svg,this.width,this.height),u)},s.prototype.publicZoom=function(a,u){u&&(a=this.computeFromRelativeZoom(a)),this.zoom(a,u)},s.prototype.publicZoomAtPoint=function(a,u,f){if(f&&(a=this.computeFromRelativeZoom(a)),e.getType(u)!=="SVGPoint")if("x"in u&&"y"in u)u=i.createSVGPoint(this.svg,u.x,u.y);else throw new Error("Given point is invalid");this.zoomAtPoint(a,u,f)},s.prototype.getZoom=function(){return this.viewport.getZoom()},s.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},s.prototype.computeFromRelativeZoom=function(a){return a*this.viewport.getOriginalState().zoom},s.prototype.resetZoom=function(){var a=this.viewport.getOriginalState();this.zoom(a.zoom,!0)},s.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},s.prototype.reset=function(){this.resetZoom(),this.resetPan()},s.prototype.handleDblClick=function(a){if(this.options.preventMouseEventsDefault&&(a.preventDefault?a.preventDefault():a.returnValue=!1),this.options.controlIconsEnabled){var u=a.target.getAttribute("class")||"";if(u.indexOf("svg-pan-zoom-control")>-1)return!1}var f;a.shiftKey?f=1/((1+this.options.zoomScaleSensitivity)*2):f=(1+this.options.zoomScaleSensitivity)*2;var d=i.getEventPoint(a,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(f,d)},s.prototype.handleMouseDown=function(a,u){this.options.preventMouseEventsDefault&&(a.preventDefault?a.preventDefault():a.returnValue=!1),e.mouseAndTouchNormalize(a,this.svg),this.options.dblClickZoomEnabled&&e.isDblClick(a,u)?this.handleDblClick(a):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=i.getEventPoint(a,this.svg).matrixTransform(this.firstEventCTM.inverse()))},s.prototype.handleMouseMove=function(a){if(this.options.preventMouseEventsDefault&&(a.preventDefault?a.preventDefault():a.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var u=i.getEventPoint(a,this.svg).matrixTransform(this.firstEventCTM.inverse()),f=this.firstEventCTM.translate(u.x-this.stateOrigin.x,u.y-this.stateOrigin.y);this.viewport.setCTM(f)}},s.prototype.handleMouseUp=function(a){this.options.preventMouseEventsDefault&&(a.preventDefault?a.preventDefault():a.returnValue=!1),this.state==="pan"&&(this.state="none")},s.prototype.fit=function(){var a=this.viewport.getViewBox(),u=Math.min(this.width/a.width,this.height/a.height);this.zoom(u,!0)},s.prototype.contain=function(){var a=this.viewport.getViewBox(),u=Math.max(this.width/a.width,this.height/a.height);this.zoom(u,!0)},s.prototype.center=function(){var a=this.viewport.getViewBox(),u=(this.width-(a.width+a.x*2)*this.getZoom())*.5,f=(this.height-(a.height+a.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:u,y:f})},s.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},s.prototype.pan=function(a){var u=this.viewport.getCTM();u.e=a.x,u.f=a.y,this.viewport.setCTM(u)},s.prototype.panBy=function(a){var u=this.viewport.getCTM();u.e+=a.x,u.f+=a.y,this.viewport.setCTM(u)},s.prototype.getPan=function(){var a=this.viewport.getState();return{x:a.x,y:a.y}},s.prototype.resize=function(){var a=i.getBoundingClientRectNormalized(this.svg);this.width=a.width,this.height=a.height;var u=this.viewport;u.options.width=this.width,u.options.height=this.height,u.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},s.prototype.destroy=function(){var a=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var u in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(u,this.eventListeners[u],this.options.preventMouseEventsDefault?!1:r);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),l=l.filter(function(f){return f.svg!==a.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},s.prototype.getPublicInstance=function(){var a=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return a.options.panEnabled=!0,a.pi},disablePan:function(){return a.options.panEnabled=!1,a.pi},isPanEnabled:function(){return!!a.options.panEnabled},pan:function(u){return a.pan(u),a.pi},panBy:function(u){return a.panBy(u),a.pi},getPan:function(){return a.getPan()},setBeforePan:function(u){return a.options.beforePan=u===null?null:e.proxy(u,a.publicInstance),a.pi},setOnPan:function(u){return a.options.onPan=u===null?null:e.proxy(u,a.publicInstance),a.pi},enableZoom:function(){return a.options.zoomEnabled=!0,a.pi},disableZoom:function(){return a.options.zoomEnabled=!1,a.pi},isZoomEnabled:function(){return!!a.options.zoomEnabled},enableControlIcons:function(){return a.options.controlIconsEnabled||(a.options.controlIconsEnabled=!0,t.enable(a)),a.pi},disableControlIcons:function(){return a.options.controlIconsEnabled&&(a.options.controlIconsEnabled=!1,t.disable(a)),a.pi},isControlIconsEnabled:function(){return!!a.options.controlIconsEnabled},enableDblClickZoom:function(){return a.options.dblClickZoomEnabled=!0,a.pi},disableDblClickZoom:function(){return a.options.dblClickZoomEnabled=!1,a.pi},isDblClickZoomEnabled:function(){return!!a.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return a.enableMouseWheelZoom(),a.pi},disableMouseWheelZoom:function(){return a.disableMouseWheelZoom(),a.pi},isMouseWheelZoomEnabled:function(){return!!a.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(u){return a.options.zoomScaleSensitivity=u,a.pi},setMinZoom:function(u){return a.options.minZoom=u,a.pi},setMaxZoom:function(u){return a.options.maxZoom=u,a.pi},setBeforeZoom:function(u){return a.options.beforeZoom=u===null?null:e.proxy(u,a.publicInstance),a.pi},setOnZoom:function(u){return a.options.onZoom=u===null?null:e.proxy(u,a.publicInstance),a.pi},zoom:function(u){return a.publicZoom(u,!0),a.pi},zoomBy:function(u){return a.publicZoom(u,!1),a.pi},zoomAtPoint:function(u,f){return a.publicZoomAtPoint(u,f,!0),a.pi},zoomAtPointBy:function(u,f){return a.publicZoomAtPoint(u,f,!1),a.pi},zoomIn:function(){return this.zoomBy(1+a.options.zoomScaleSensitivity),a.pi},zoomOut:function(){return this.zoomBy(1/(1+a.options.zoomScaleSensitivity)),a.pi},getZoom:function(){return a.getRelativeZoom()},setOnUpdatedCTM:function(u){return a.options.onUpdatedCTM=u===null?null:e.proxy(u,a.publicInstance),a.pi},resetZoom:function(){return a.resetZoom(),a.pi},resetPan:function(){return a.resetPan(),a.pi},reset:function(){return a.reset(),a.pi},fit:function(){return a.fit(),a.pi},contain:function(){return a.contain(),a.pi},center:function(){return a.center(),a.pi},updateBBox:function(){return a.updateBBox(),a.pi},resize:function(){return a.resize(),a.pi},getSizes:function(){return{width:a.width,height:a.height,realZoom:a.getZoom(),viewBox:a.viewport.getViewBox()}},destroy:function(){return a.destroy(),a.pi}}),this.publicInstance};var l=[],h=function(a,u){var f=e.getSvg(a);if(f===null)return null;for(var d=l.length-1;d>=0;d--)if(l[d].svg===f)return l[d].instance.getPublicInstance();return l.push({svg:f,instance:new s(f,u)}),l[l.length-1].instance.getPublicInstance()};return ge=h,ge}var Ki=ji();const Ji=Ce(Ki);var kt={exports:{}},St={exports:{}},tn=St.exports,$e;function en(){return $e||($e=1,(function(){var c,t,e,i,n,s;typeof performance<"u"&&performance!==null&&performance.now?St.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(St.exports=function(){return(c()-n)/1e6},t=process.hrtime,c=function(){var o;return o=t(),o[0]*1e9+o[1]},i=c(),s=process.uptime()*1e9,n=i-s):Date.now?(St.exports=function(){return Date.now()-e},e=Date.now()):(St.exports=function(){return new Date().getTime()-e},e=new Date().getTime())}).call(tn)),St.exports}var Qe;function nn(){if(Qe)return kt.exports;Qe=1;for(var c=en(),t=typeof window>"u"?Vi:window,e=["moz","webkit"],i="AnimationFrame",n=t["request"+i],s=t["cancel"+i]||t["cancelRequest"+i],o=0;!n&&o<e.length;o++)n=t[e[o]+"Request"+i],s=t[e[o]+"Cancel"+i]||t[e[o]+"CancelRequest"+i];if(!n||!s){var r=0,l=0,h=[],a=1e3/60;n=function(u){if(h.length===0){var f=c(),d=Math.max(0,a-(f-r));r=d+f,setTimeout(function(){var p=h.slice(0);h.length=0;for(var g=0;g<p.length;g++)if(!p[g].cancelled)try{p[g].callback(r)}catch(m){setTimeout(function(){throw m},0)}},Math.round(d))}return h.push({handle:++l,callback:u,cancelled:!1}),l},s=function(u){for(var f=0;f<h.length;f++)h[f].handle===u&&(h[f].cancelled=!0)}}return kt.exports=function(u){return n.call(t,u)},kt.exports.cancel=function(){s.apply(t,arguments)},kt.exports.polyfill=function(u){u||(u=t),u.requestAnimationFrame=n,u.cancelAnimationFrame=s},kt.exports}var sn=nn();const pe=Ce(sn);var me,je;function rn(){return je||(je=1,me=function(c){this.ok=!1,this.alpha=1,c.charAt(0)=="#"&&(c=c.substr(1,6)),c=c.replace(/ /g,""),c=c.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};c=t[c]||c;for(var e=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3]),parseFloat(l[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],i=0;i<e.length;i++){var n=e[i].re,s=e[i].process,o=n.exec(c);if(o){var r=s(o);this.r=r[0],this.g=r[1],this.b=r[2],r.length>3&&(this.alpha=r[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var l=this.r.toString(16),h=this.g.toString(16),a=this.b.toString(16);return l.length==1&&(l="0"+l),h.length==1&&(h="0"+h),a.length==1&&(a="0"+a),"#"+l+h+a},this.getHelpXML=function(){for(var l=new Array,h=0;h<e.length;h++)for(var a=e[h].example,u=0;u<a.length;u++)l[l.length]=a[u];for(var f in t)l[l.length]=f;var d=document.createElement("ul");d.setAttribute("id","rgbcolor-examples");for(var h=0;h<l.length;h++)try{var p=document.createElement("li"),g=new RGBColor(l[h]),m=document.createElement("div");m.style.cssText="margin: 3px; border: 1px solid black; background:"+g.toHex()+"; color:"+g.toHex(),m.appendChild(document.createTextNode("test"));var y=document.createTextNode(" "+l[h]+" -> "+g.toRGB()+" -> "+g.toHex());p.appendChild(m),p.appendChild(y),d.appendChild(p)}catch{}return d}}),me}var on=rn();const xe=Ce(on);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yi=function(c,t){return(yi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])})(c,t)};function vi(c,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=c}yi(c,t),c.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function an(c){var t="";Array.isArray(c)||(c=[c]);for(var e=0;e<c.length;e++){var i=c[e];if(i.type===v.CLOSE_PATH)t+="z";else if(i.type===v.HORIZ_LINE_TO)t+=(i.relative?"h":"H")+i.x;else if(i.type===v.VERT_LINE_TO)t+=(i.relative?"v":"V")+i.y;else if(i.type===v.MOVE_TO)t+=(i.relative?"m":"M")+i.x+" "+i.y;else if(i.type===v.LINE_TO)t+=(i.relative?"l":"L")+i.x+" "+i.y;else if(i.type===v.CURVE_TO)t+=(i.relative?"c":"C")+i.x1+" "+i.y1+" "+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===v.SMOOTH_CURVE_TO)t+=(i.relative?"s":"S")+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===v.QUAD_TO)t+=(i.relative?"q":"Q")+i.x1+" "+i.y1+" "+i.x+" "+i.y;else if(i.type===v.SMOOTH_QUAD_TO)t+=(i.relative?"t":"T")+i.x+" "+i.y;else{if(i.type!==v.ARC)throw new Error('Unexpected command type "'+i.type+'" at index '+e+".");t+=(i.relative?"a":"A")+i.rX+" "+i.rY+" "+i.xRot+" "+ +i.lArcFlag+" "+ +i.sweepFlag+" "+i.x+" "+i.y}}return t}function we(c,t){var e=c[0],i=c[1];return[e*Math.cos(t)-i*Math.sin(t),e*Math.sin(t)+i*Math.cos(t)]}function rt(){for(var c=[],t=0;t<arguments.length;t++)c[t]=arguments[t];for(var e=0;e<c.length;e++)if(typeof c[e]!="number")throw new Error("assertNumbers arguments["+e+"] is not a number. "+typeof c[e]+" == typeof "+c[e]);return!0}var gt=Math.PI;function ye(c,t,e){c.lArcFlag=c.lArcFlag===0?0:1,c.sweepFlag=c.sweepFlag===0?0:1;var i=c.rX,n=c.rY,s=c.x,o=c.y;i=Math.abs(c.rX),n=Math.abs(c.rY);var r=we([(t-s)/2,(e-o)/2],-c.xRot/180*gt),l=r[0],h=r[1],a=Math.pow(l,2)/Math.pow(i,2)+Math.pow(h,2)/Math.pow(n,2);1<a&&(i*=Math.sqrt(a),n*=Math.sqrt(a)),c.rX=i,c.rY=n;var u=Math.pow(i,2)*Math.pow(h,2)+Math.pow(n,2)*Math.pow(l,2),f=(c.lArcFlag!==c.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(i,2)*Math.pow(n,2)-u)/u)),d=i*h/n*f,p=-n*l/i*f,g=we([d,p],c.xRot/180*gt);c.cX=g[0]+(t+s)/2,c.cY=g[1]+(e+o)/2,c.phi1=Math.atan2((h-p)/n,(l-d)/i),c.phi2=Math.atan2((-h-p)/n,(-l-d)/i),c.sweepFlag===0&&c.phi2>c.phi1&&(c.phi2-=2*gt),c.sweepFlag===1&&c.phi2<c.phi1&&(c.phi2+=2*gt),c.phi1*=180/gt,c.phi2*=180/gt}function Ke(c,t,e){rt(c,t,e);var i=c*c+t*t-e*e;if(0>i)return[];if(i===0)return[[c*e/(c*c+t*t),t*e/(c*c+t*t)]];var n=Math.sqrt(i);return[[(c*e+t*n)/(c*c+t*t),(t*e-c*n)/(c*c+t*t)],[(c*e-t*n)/(c*c+t*t),(t*e+c*n)/(c*c+t*t)]]}var W,ht=Math.PI/180;function Je(c,t,e){return(1-e)*c+e*t}function ti(c,t,e,i){return c+Math.cos(i/180*gt)*t+Math.sin(i/180*gt)*e}function ei(c,t,e,i){var n=1e-6,s=t-c,o=e-t,r=3*s+3*(i-e)-6*o,l=6*(o-s),h=3*s;return Math.abs(r)<n?[-h/l]:(function(a,u,f){var d=a*a/4-u;if(d<-f)return[];if(d<=f)return[-a/2];var p=Math.sqrt(d);return[-a/2-p,-a/2+p]})(l/r,h/r,n)}function ii(c,t,e,i,n){var s=1-n;return c*(s*s*s)+t*(3*s*s*n)+e*(3*s*n*n)+i*(n*n*n)}(function(c){function t(){return n((function(r,l,h){return r.relative&&(r.x1!==void 0&&(r.x1+=l),r.y1!==void 0&&(r.y1+=h),r.x2!==void 0&&(r.x2+=l),r.y2!==void 0&&(r.y2+=h),r.x!==void 0&&(r.x+=l),r.y!==void 0&&(r.y+=h),r.relative=!1),r}))}function e(){var r=NaN,l=NaN,h=NaN,a=NaN;return n((function(u,f,d){return u.type&v.SMOOTH_CURVE_TO&&(u.type=v.CURVE_TO,r=isNaN(r)?f:r,l=isNaN(l)?d:l,u.x1=u.relative?f-r:2*f-r,u.y1=u.relative?d-l:2*d-l),u.type&v.CURVE_TO?(r=u.relative?f+u.x2:u.x2,l=u.relative?d+u.y2:u.y2):(r=NaN,l=NaN),u.type&v.SMOOTH_QUAD_TO&&(u.type=v.QUAD_TO,h=isNaN(h)?f:h,a=isNaN(a)?d:a,u.x1=u.relative?f-h:2*f-h,u.y1=u.relative?d-a:2*d-a),u.type&v.QUAD_TO?(h=u.relative?f+u.x1:u.x1,a=u.relative?d+u.y1:u.y1):(h=NaN,a=NaN),u}))}function i(){var r=NaN,l=NaN;return n((function(h,a,u){if(h.type&v.SMOOTH_QUAD_TO&&(h.type=v.QUAD_TO,r=isNaN(r)?a:r,l=isNaN(l)?u:l,h.x1=h.relative?a-r:2*a-r,h.y1=h.relative?u-l:2*u-l),h.type&v.QUAD_TO){r=h.relative?a+h.x1:h.x1,l=h.relative?u+h.y1:h.y1;var f=h.x1,d=h.y1;h.type=v.CURVE_TO,h.x1=((h.relative?0:a)+2*f)/3,h.y1=((h.relative?0:u)+2*d)/3,h.x2=(h.x+2*f)/3,h.y2=(h.y+2*d)/3}else r=NaN,l=NaN;return h}))}function n(r){var l=0,h=0,a=NaN,u=NaN;return function(f){if(isNaN(a)&&!(f.type&v.MOVE_TO))throw new Error("path must start with moveto");var d=r(f,l,h,a,u);return f.type&v.CLOSE_PATH&&(l=a,h=u),f.x!==void 0&&(l=f.relative?l+f.x:f.x),f.y!==void 0&&(h=f.relative?h+f.y:f.y),f.type&v.MOVE_TO&&(a=l,u=h),d}}function s(r,l,h,a,u,f){return rt(r,l,h,a,u,f),n((function(d,p,g,m){var y=d.x1,x=d.x2,b=d.relative&&!isNaN(m),S=d.x!==void 0?d.x:b?0:p,L=d.y!==void 0?d.y:b?0:g;function R(Y){return Y*Y}d.type&v.HORIZ_LINE_TO&&l!==0&&(d.type=v.LINE_TO,d.y=d.relative?0:g),d.type&v.VERT_LINE_TO&&h!==0&&(d.type=v.LINE_TO,d.x=d.relative?0:p),d.x!==void 0&&(d.x=d.x*r+L*h+(b?0:u)),d.y!==void 0&&(d.y=S*l+d.y*a+(b?0:f)),d.x1!==void 0&&(d.x1=d.x1*r+d.y1*h+(b?0:u)),d.y1!==void 0&&(d.y1=y*l+d.y1*a+(b?0:f)),d.x2!==void 0&&(d.x2=d.x2*r+d.y2*h+(b?0:u)),d.y2!==void 0&&(d.y2=x*l+d.y2*a+(b?0:f));var A=r*a-l*h;if(d.xRot!==void 0&&(r!==1||l!==0||h!==0||a!==1))if(A===0)delete d.rX,delete d.rY,delete d.xRot,delete d.lArcFlag,delete d.sweepFlag,d.type=v.LINE_TO;else{var F=d.xRot*Math.PI/180,E=Math.sin(F),N=Math.cos(F),P=1/R(d.rX),O=1/R(d.rY),B=R(N)*P+R(E)*O,D=2*E*N*(P-O),_=R(E)*P+R(N)*O,k=B*a*a-D*l*a+_*l*l,z=D*(r*a+l*h)-2*(B*h*a+_*r*l),w=B*h*h-D*r*h+_*r*r,T=(Math.atan2(z,k-w)+Math.PI)%Math.PI/2,M=Math.sin(T),Z=Math.cos(T);d.rX=Math.abs(A)/Math.sqrt(k*R(Z)+z*M*Z+w*R(M)),d.rY=Math.abs(A)/Math.sqrt(k*R(M)-z*M*Z+w*R(Z)),d.xRot=180*T/Math.PI}return d.sweepFlag!==void 0&&0>A&&(d.sweepFlag=+!d.sweepFlag),d}))}function o(){return function(r){var l={};for(var h in r)l[h]=r[h];return l}}c.ROUND=function(r){function l(h){return Math.round(h*r)/r}return r===void 0&&(r=1e13),rt(r),function(h){return h.x1!==void 0&&(h.x1=l(h.x1)),h.y1!==void 0&&(h.y1=l(h.y1)),h.x2!==void 0&&(h.x2=l(h.x2)),h.y2!==void 0&&(h.y2=l(h.y2)),h.x!==void 0&&(h.x=l(h.x)),h.y!==void 0&&(h.y=l(h.y)),h.rX!==void 0&&(h.rX=l(h.rX)),h.rY!==void 0&&(h.rY=l(h.rY)),h}},c.TO_ABS=t,c.TO_REL=function(){return n((function(r,l,h){return r.relative||(r.x1!==void 0&&(r.x1-=l),r.y1!==void 0&&(r.y1-=h),r.x2!==void 0&&(r.x2-=l),r.y2!==void 0&&(r.y2-=h),r.x!==void 0&&(r.x-=l),r.y!==void 0&&(r.y-=h),r.relative=!0),r}))},c.NORMALIZE_HVZ=function(r,l,h){return r===void 0&&(r=!0),l===void 0&&(l=!0),h===void 0&&(h=!0),n((function(a,u,f,d,p){if(isNaN(d)&&!(a.type&v.MOVE_TO))throw new Error("path must start with moveto");return l&&a.type&v.HORIZ_LINE_TO&&(a.type=v.LINE_TO,a.y=a.relative?0:f),h&&a.type&v.VERT_LINE_TO&&(a.type=v.LINE_TO,a.x=a.relative?0:u),r&&a.type&v.CLOSE_PATH&&(a.type=v.LINE_TO,a.x=a.relative?d-u:d,a.y=a.relative?p-f:p),a.type&v.ARC&&(a.rX===0||a.rY===0)&&(a.type=v.LINE_TO,delete a.rX,delete a.rY,delete a.xRot,delete a.lArcFlag,delete a.sweepFlag),a}))},c.NORMALIZE_ST=e,c.QT_TO_C=i,c.INFO=n,c.SANITIZE=function(r){r===void 0&&(r=0),rt(r);var l=NaN,h=NaN,a=NaN,u=NaN;return n((function(f,d,p,g,m){var y=Math.abs,x=!1,b=0,S=0;if(f.type&v.SMOOTH_CURVE_TO&&(b=isNaN(l)?0:d-l,S=isNaN(h)?0:p-h),f.type&(v.CURVE_TO|v.SMOOTH_CURVE_TO)?(l=f.relative?d+f.x2:f.x2,h=f.relative?p+f.y2:f.y2):(l=NaN,h=NaN),f.type&v.SMOOTH_QUAD_TO?(a=isNaN(a)?d:2*d-a,u=isNaN(u)?p:2*p-u):f.type&v.QUAD_TO?(a=f.relative?d+f.x1:f.x1,u=f.relative?p+f.y1:f.y2):(a=NaN,u=NaN),f.type&v.LINE_COMMANDS||f.type&v.ARC&&(f.rX===0||f.rY===0||!f.lArcFlag)||f.type&v.CURVE_TO||f.type&v.SMOOTH_CURVE_TO||f.type&v.QUAD_TO||f.type&v.SMOOTH_QUAD_TO){var L=f.x===void 0?0:f.relative?f.x:f.x-d,R=f.y===void 0?0:f.relative?f.y:f.y-p;b=isNaN(a)?f.x1===void 0?b:f.relative?f.x:f.x1-d:a-d,S=isNaN(u)?f.y1===void 0?S:f.relative?f.y:f.y1-p:u-p;var A=f.x2===void 0?0:f.relative?f.x:f.x2-d,F=f.y2===void 0?0:f.relative?f.y:f.y2-p;y(L)<=r&&y(R)<=r&&y(b)<=r&&y(S)<=r&&y(A)<=r&&y(F)<=r&&(x=!0)}return f.type&v.CLOSE_PATH&&y(d-g)<=r&&y(p-m)<=r&&(x=!0),x?[]:f}))},c.MATRIX=s,c.ROTATE=function(r,l,h){l===void 0&&(l=0),h===void 0&&(h=0),rt(r,l,h);var a=Math.sin(r),u=Math.cos(r);return s(u,a,-a,u,l-l*u+h*a,h-l*a-h*u)},c.TRANSLATE=function(r,l){return l===void 0&&(l=0),rt(r,l),s(1,0,0,1,r,l)},c.SCALE=function(r,l){return l===void 0&&(l=r),rt(r,l),s(r,0,0,l,0,0)},c.SKEW_X=function(r){return rt(r),s(1,0,Math.atan(r),1,0,0)},c.SKEW_Y=function(r){return rt(r),s(1,Math.atan(r),0,1,0,0)},c.X_AXIS_SYMMETRY=function(r){return r===void 0&&(r=0),rt(r),s(-1,0,0,1,r,0)},c.Y_AXIS_SYMMETRY=function(r){return r===void 0&&(r=0),rt(r),s(1,0,0,-1,0,r)},c.A_TO_C=function(){return n((function(r,l,h){return v.ARC===r.type?(function(a,u,f){var d,p,g,m;a.cX||ye(a,u,f);for(var y=Math.min(a.phi1,a.phi2),x=Math.max(a.phi1,a.phi2)-y,b=Math.ceil(x/90),S=new Array(b),L=u,R=f,A=0;A<b;A++){var F=Je(a.phi1,a.phi2,A/b),E=Je(a.phi1,a.phi2,(A+1)/b),N=E-F,P=4/3*Math.tan(N*ht/4),O=[Math.cos(F*ht)-P*Math.sin(F*ht),Math.sin(F*ht)+P*Math.cos(F*ht)],B=O[0],D=O[1],_=[Math.cos(E*ht),Math.sin(E*ht)],k=_[0],z=_[1],w=[k+P*Math.sin(E*ht),z-P*Math.cos(E*ht)],T=w[0],M=w[1];S[A]={relative:a.relative,type:v.CURVE_TO};var Z=function(Y,q){var Q=we([Y*a.rX,q*a.rY],a.xRot),J=Q[0],zt=Q[1];return[a.cX+J,a.cY+zt]};d=Z(B,D),S[A].x1=d[0],S[A].y1=d[1],p=Z(T,M),S[A].x2=p[0],S[A].y2=p[1],g=Z(k,z),S[A].x=g[0],S[A].y=g[1],a.relative&&(S[A].x1-=L,S[A].y1-=R,S[A].x2-=L,S[A].y2-=R,S[A].x-=L,S[A].y-=R),L=(m=[S[A].x,S[A].y])[0],R=m[1]}return S})(r,r.relative?0:l,r.relative?0:h):r}))},c.ANNOTATE_ARCS=function(){return n((function(r,l,h){return r.relative&&(l=0,h=0),v.ARC===r.type&&ye(r,l,h),r}))},c.CLONE=o,c.CALCULATE_BOUNDS=function(){var r=function(f){var d={};for(var p in f)d[p]=f[p];return d},l=t(),h=i(),a=e(),u=n((function(f,d,p){var g=a(h(l(r(f))));function m(M){M>u.maxX&&(u.maxX=M),M<u.minX&&(u.minX=M)}function y(M){M>u.maxY&&(u.maxY=M),M<u.minY&&(u.minY=M)}if(g.type&v.DRAWING_COMMANDS&&(m(d),y(p)),g.type&v.HORIZ_LINE_TO&&m(g.x),g.type&v.VERT_LINE_TO&&y(g.y),g.type&v.LINE_TO&&(m(g.x),y(g.y)),g.type&v.CURVE_TO){m(g.x),y(g.y);for(var x=0,b=ei(d,g.x1,g.x2,g.x);x<b.length;x++)0<(T=b[x])&&1>T&&m(ii(d,g.x1,g.x2,g.x,T));for(var S=0,L=ei(p,g.y1,g.y2,g.y);S<L.length;S++)0<(T=L[S])&&1>T&&y(ii(p,g.y1,g.y2,g.y,T))}if(g.type&v.ARC){m(g.x),y(g.y),ye(g,d,p);for(var R=g.xRot/180*Math.PI,A=Math.cos(R)*g.rX,F=Math.sin(R)*g.rX,E=-Math.sin(R)*g.rY,N=Math.cos(R)*g.rY,P=g.phi1<g.phi2?[g.phi1,g.phi2]:-180>g.phi2?[g.phi2+360,g.phi1+360]:[g.phi2,g.phi1],O=P[0],B=P[1],D=function(M){var Z=M[0],Y=M[1],q=180*Math.atan2(Y,Z)/Math.PI;return q<O?q+360:q},_=0,k=Ke(E,-A,0).map(D);_<k.length;_++)(T=k[_])>O&&T<B&&m(ti(g.cX,A,E,T));for(var z=0,w=Ke(N,-F,0).map(D);z<w.length;z++){var T;(T=w[z])>O&&T<B&&y(ti(g.cY,F,N,T))}}return f}));return u.minX=1/0,u.maxX=-1/0,u.minY=1/0,u.maxY=-1/0,u}})(W||(W={}));var st,bi=(function(){function c(){}return c.prototype.round=function(t){return this.transform(W.ROUND(t))},c.prototype.toAbs=function(){return this.transform(W.TO_ABS())},c.prototype.toRel=function(){return this.transform(W.TO_REL())},c.prototype.normalizeHVZ=function(t,e,i){return this.transform(W.NORMALIZE_HVZ(t,e,i))},c.prototype.normalizeST=function(){return this.transform(W.NORMALIZE_ST())},c.prototype.qtToC=function(){return this.transform(W.QT_TO_C())},c.prototype.aToC=function(){return this.transform(W.A_TO_C())},c.prototype.sanitize=function(t){return this.transform(W.SANITIZE(t))},c.prototype.translate=function(t,e){return this.transform(W.TRANSLATE(t,e))},c.prototype.scale=function(t,e){return this.transform(W.SCALE(t,e))},c.prototype.rotate=function(t,e,i){return this.transform(W.ROTATE(t,e,i))},c.prototype.matrix=function(t,e,i,n,s,o){return this.transform(W.MATRIX(t,e,i,n,s,o))},c.prototype.skewX=function(t){return this.transform(W.SKEW_X(t))},c.prototype.skewY=function(t){return this.transform(W.SKEW_Y(t))},c.prototype.xSymmetry=function(t){return this.transform(W.X_AXIS_SYMMETRY(t))},c.prototype.ySymmetry=function(t){return this.transform(W.Y_AXIS_SYMMETRY(t))},c.prototype.annotateArcs=function(){return this.transform(W.ANNOTATE_ARCS())},c})(),ln=function(c){return c===" "||c==="	"||c==="\r"||c===`
`},ni=function(c){return 48<=c.charCodeAt(0)&&c.charCodeAt(0)<=57},hn=(function(c){function t(){var e=c.call(this)||this;return e.curNumber="",e.curCommandType=-1,e.curCommandRelative=!1,e.canParseCommandOrComma=!0,e.curNumberHasExp=!1,e.curNumberHasExpDigits=!1,e.curNumberHasDecimal=!1,e.curArgs=[],e}return vi(t,c),t.prototype.finish=function(e){if(e===void 0&&(e=[]),this.parse(" ",e),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,i){var n=this;i===void 0&&(i=[]);for(var s=function(u){i.push(u),n.curArgs.length=0,n.canParseCommandOrComma=!0},o=0;o<e.length;o++){var r=e[o],l=!(this.curCommandType!==v.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),h=ni(r)&&(this.curNumber==="0"&&r==="0"||l);if(!ni(r)||h)if(r!=="e"&&r!=="E")if(r!=="-"&&r!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(r!=="."||this.curNumberHasExp||this.curNumberHasDecimal||l){if(this.curNumber&&this.curCommandType!==-1){var a=Number(this.curNumber);if(isNaN(a))throw new SyntaxError("Invalid number ending at "+o);if(this.curCommandType===v.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>a)throw new SyntaxError('Expected positive number, got "'+a+'" at index "'+o+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+o+'"')}this.curArgs.push(a),this.curArgs.length===un[this.curCommandType]&&(v.HORIZ_LINE_TO===this.curCommandType?s({type:v.HORIZ_LINE_TO,relative:this.curCommandRelative,x:a}):v.VERT_LINE_TO===this.curCommandType?s({type:v.VERT_LINE_TO,relative:this.curCommandRelative,y:a}):this.curCommandType===v.MOVE_TO||this.curCommandType===v.LINE_TO||this.curCommandType===v.SMOOTH_QUAD_TO?(s({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),v.MOVE_TO===this.curCommandType&&(this.curCommandType=v.LINE_TO)):this.curCommandType===v.CURVE_TO?s({type:v.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===v.SMOOTH_CURVE_TO?s({type:v.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===v.QUAD_TO?s({type:v.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===v.ARC&&s({type:v.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!ln(r))if(r===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(r!=="+"&&r!=="-"&&r!==".")if(h)this.curNumber=r,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+o+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+r+'" at index '+o+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,r!=="z"&&r!=="Z")if(r==="h"||r==="H")this.curCommandType=v.HORIZ_LINE_TO,this.curCommandRelative=r==="h";else if(r==="v"||r==="V")this.curCommandType=v.VERT_LINE_TO,this.curCommandRelative=r==="v";else if(r==="m"||r==="M")this.curCommandType=v.MOVE_TO,this.curCommandRelative=r==="m";else if(r==="l"||r==="L")this.curCommandType=v.LINE_TO,this.curCommandRelative=r==="l";else if(r==="c"||r==="C")this.curCommandType=v.CURVE_TO,this.curCommandRelative=r==="c";else if(r==="s"||r==="S")this.curCommandType=v.SMOOTH_CURVE_TO,this.curCommandRelative=r==="s";else if(r==="q"||r==="Q")this.curCommandType=v.QUAD_TO,this.curCommandRelative=r==="q";else if(r==="t"||r==="T")this.curCommandType=v.SMOOTH_QUAD_TO,this.curCommandRelative=r==="t";else{if(r!=="a"&&r!=="A")throw new SyntaxError('Unexpected character "'+r+'" at index '+o+".");this.curCommandType=v.ARC,this.curCommandRelative=r==="a"}else i.push({type:v.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=r,this.curNumberHasDecimal=r==="."}else this.curNumber+=r,this.curNumberHasDecimal=!0;else this.curNumber+=r;else this.curNumber+=r,this.curNumberHasExp=!0;else this.curNumber+=r,this.curNumberHasExpDigits=this.curNumberHasExp}return i},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(i,n){n===void 0&&(n=[]);for(var s=0,o=Object.getPrototypeOf(this).parse.call(this,i);s<o.length;s++){var r=o[s],l=e(r);Array.isArray(l)?n.push.apply(n,l):n.push(l)}return n}}})},t})(bi),v=(function(c){function t(e){var i=c.call(this)||this;return i.commands=typeof e=="string"?t.parse(e):e,i}return vi(t,c),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=W.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var i=[],n=0,s=this.commands;n<s.length;n++){var o=e(s[n]);Array.isArray(o)?i.push.apply(i,o):i.push(o)}return this.commands=i,this},t.encode=function(e){return an(e)},t.parse=function(e){var i=new hn,n=[];return i.parse(e,n),i.finish(n),n},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t})(bi),un=((st={})[v.MOVE_TO]=2,st[v.LINE_TO]=2,st[v.HORIZ_LINE_TO]=1,st[v.VERT_LINE_TO]=1,st[v.CLOSE_PATH]=0,st[v.QUAD_TO]=4,st[v.SMOOTH_QUAD_TO]=2,st[v.CURVE_TO]=6,st[v.SMOOTH_CURVE_TO]=4,st[v.ARC]=7,st);function Gt(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gt=function(t){return typeof t}:Gt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(c)}function cn(c,t){if(!(c instanceof t))throw new TypeError("Cannot call a class as a function")}var fn=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],dn=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function gn(c,t,e,i,n){if(typeof c=="string"&&(c=document.getElementById(c)),!c||Gt(c)!=="object"||!("getContext"in c))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var s=c.getContext("2d");try{return s.getImageData(t,e,i,n)}catch(o){throw new Error("unable to access image data: "+o)}}function pn(c,t,e,i,n,s){if(!(isNaN(s)||s<1)){s|=0;var o=gn(c,t,e,i,n);o=mn(o,t,e,i,n,s),c.getContext("2d").putImageData(o,t,e)}}function mn(c,t,e,i,n,s){for(var o=c.data,r=2*s+1,l=i-1,h=n-1,a=s+1,u=a*(a+1)/2,f=new si,d=f,p,g=1;g<r;g++)d=d.next=new si,g===a&&(p=d);d.next=f;for(var m=null,y=null,x=0,b=0,S=fn[s],L=dn[s],R=0;R<n;R++){d=f;for(var A=o[b],F=o[b+1],E=o[b+2],N=o[b+3],P=0;P<a;P++)d.r=A,d.g=F,d.b=E,d.a=N,d=d.next;for(var O=0,B=0,D=0,_=0,k=a*A,z=a*F,w=a*E,T=a*N,M=u*A,Z=u*F,Y=u*E,q=u*N,Q=1;Q<a;Q++){var J=b+((l<Q?l:Q)<<2),zt=o[J],Ne=o[J+1],ke=o[J+2],Oe=o[J+3],It=a-Q;M+=(d.r=zt)*It,Z+=(d.g=Ne)*It,Y+=(d.b=ke)*It,q+=(d.a=Oe)*It,O+=zt,B+=Ne,D+=ke,_+=Oe,d=d.next}m=f,y=p;for(var Kt=0;Kt<i;Kt++){var Jt=q*S>>>L;if(o[b+3]=Jt,Jt!==0){var te=255/Jt;o[b]=(M*S>>>L)*te,o[b+1]=(Z*S>>>L)*te,o[b+2]=(Y*S>>>L)*te}else o[b]=o[b+1]=o[b+2]=0;M-=k,Z-=z,Y-=w,q-=T,k-=m.r,z-=m.g,w-=m.b,T-=m.a;var yt=Kt+s+1;yt=x+(yt<l?yt:l)<<2,O+=m.r=o[yt],B+=m.g=o[yt+1],D+=m.b=o[yt+2],_+=m.a=o[yt+3],M+=O,Z+=B,Y+=D,q+=_,m=m.next;var Lt=y,Ve=Lt.r,Re=Lt.g,ze=Lt.b,Ie=Lt.a;k+=Ve,z+=Re,w+=ze,T+=Ie,O-=Ve,B-=Re,D-=ze,_-=Ie,y=y.next,b+=4}x+=i}for(var Tt=0;Tt<i;Tt++){b=Tt<<2;var vt=o[b],bt=o[b+1],xt=o[b+2],tt=o[b+3],ee=a*vt,ie=a*bt,ne=a*xt,se=a*tt,Dt=u*vt,Bt=u*bt,_t=u*xt,Ft=u*tt;d=f;for(var Le=0;Le<a;Le++)d.r=vt,d.g=bt,d.b=xt,d.a=tt,d=d.next;for(var De=i,re=0,oe=0,ae=0,le=0,Ut=1;Ut<=s;Ut++){b=De+Tt<<2;var Zt=a-Ut;Dt+=(d.r=vt=o[b])*Zt,Bt+=(d.g=bt=o[b+1])*Zt,_t+=(d.b=xt=o[b+2])*Zt,Ft+=(d.a=tt=o[b+3])*Zt,le+=vt,re+=bt,oe+=xt,ae+=tt,d=d.next,Ut<h&&(De+=i)}b=Tt,m=f,y=p;for(var he=0;he<n;he++){var et=b<<2;o[et+3]=tt=Ft*S>>>L,tt>0?(tt=255/tt,o[et]=(Dt*S>>>L)*tt,o[et+1]=(Bt*S>>>L)*tt,o[et+2]=(_t*S>>>L)*tt):o[et]=o[et+1]=o[et+2]=0,Dt-=ee,Bt-=ie,_t-=ne,Ft-=se,ee-=m.r,ie-=m.g,ne-=m.b,se-=m.a,et=Tt+((et=he+a)<h?et:h)*i<<2,Dt+=le+=m.r=o[et],Bt+=re+=m.g=o[et+1],_t+=oe+=m.b=o[et+2],Ft+=ae+=m.a=o[et+3],m=m.next,ee+=vt=y.r,ie+=bt=y.g,ne+=xt=y.b,se+=tt=y.a,le-=vt,re-=bt,oe-=xt,ae-=tt,y=y.next,b+=i}}return c}var si=function c(){cn(this,c),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function Pt(c){return c.replace(/(?!\u3000)\s+/gm," ")}function yn(c){return c.replace(/^[\n \t]+/,"")}function vn(c){return c.replace(/[\n \t]+$/,"")}function nt(c){const t=c.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return t?t.map(parseFloat):[]}function bn(c){const t=nt(c);return[t[0]||0,t[1]||0,t[2]||0,t[3]||0,t[4]||0,t[5]||0]}const xn=/^[A-Z-]+$/;function wn(c){return xn.test(c)?c.toLowerCase():c}function xi(c){const t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(c);return t&&(t[2]||t[3]||t[4])||""}function Sn(c){if(!c.startsWith("rgb"))return c;let t=3;return c.replace(/\d+(\.\d+)?/g,(i,n)=>t--&&n?String(Math.round(parseFloat(i))):i)}const Cn=/(\[[^\]]+\])/g,An=/(#[^\s+>~.[:]+)/g,Tn=/(\.[^\s+>~.[:]+)/g,En=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,Mn=/(:[\w-]+\([^)]*\))/gi,Pn=/(:[^\s+>~.[:]+)/g,Nn=/([^\s+>~.[:]+)/g;function wt(c,t){const e=t.exec(c);return e?[c.replace(t," "),e.length]:[c,0]}function kn(c){const t=[0,0,0];let e=c.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),i=0;return[e,i]=wt(e,Cn),t[1]+=i,[e,i]=wt(e,An),t[0]+=i,[e,i]=wt(e,Tn),t[1]+=i,[e,i]=wt(e,En),t[2]+=i,[e,i]=wt(e,Mn),t[1]+=i,[e,i]=wt(e,Pn),t[1]+=i,e=e.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[e,i]=wt(e,Nn),t[2]+=i,t.join("")}const Mt=1e-8;function ri(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2))}function Se(c,t){return(c[0]*t[0]+c[1]*t[1])/(ri(c)*ri(t))}function oi(c,t){return(c[0]*t[1]<c[1]*t[0]?-1:1)*Math.acos(Se(c,t))}function ai(c){return c*c*c}function li(c){return 3*c*c*(1-c)}function hi(c){return 3*c*(1-c)*(1-c)}function ui(c){return(1-c)*(1-c)*(1-c)}function ci(c){return c*c}function fi(c){return 2*c*(1-c)}function di(c){return(1-c)*(1-c)}class C{static empty(t){return new C(t,"EMPTY","")}split(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ";const{document:e,name:i}=this;return Pt(this.getString()).trim().split(t).map(n=>new C(e,i,n))}hasValue(t){const e=this.value;return e!==null&&e!==""&&(t||e!==0)&&typeof e<"u"}isString(t){const{value:e}=this,i=typeof e=="string";return!i||!t?i:t.test(e)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;const t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return typeof t>"u"||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return typeof t>"u"?0:parseFloat(t);const{value:e}=this;let i=parseFloat(e);return this.isString(/%$/)&&(i/=100),i}getString(t){return typeof t>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(t)}getColor(t){let e=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,e=Sn(e),this.value=e),e}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;const[i,n]=typeof t=="boolean"?[void 0,t]:[t],{viewPort:s}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(s.computeSize("x"),s.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(s.computeSize("x"),s.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*s.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*s.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&n):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*s.computeSize(i);default:{const o=this.getNumber();return e&&o<1?o*s.computeSize(i):o}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){const t=this.getString(),e=/#([^)'"]+)/.exec(t),i=(e==null?void 0:e[1])||t;return this.document.definitions.get(i)}getFillStyleDefinition(t,e){let i=this.getDefinition();if(!i)return null;if(typeof i.createGradient=="function"&&"getBoundingBox"in t)return i.createGradient(this.document.ctx,t,e);if(typeof i.createPattern=="function"){if(i.getHrefAttribute().hasValue()){const n=i.getAttribute("patternTransform");i=i.getHrefAttribute().getDefinition(),i&&n.hasValue()&&i.getAttribute("patternTransform",!0).setValue(n.value)}if(i)return i.createPattern(this.document.ctx,t,e)}return null}getTextBaseline(){if(!this.hasValue())return null;const t=this.getString();return C.textBaselineMapping[t]||null}addOpacity(t){let e=this.getColor();const i=e.length;let n=0;for(let s=0;s<i&&(e[s]===","&&n++,n!==3);s++);if(t.hasValue()&&this.isString()&&n!==3){const s=new xe(e);s.ok&&(s.alpha=t.getNumber(),e=s.toRGBA())}return new C(this.document,this.name,e)}constructor(t,e,i){this.document=t,this.name=e,this.value=i,this.isNormalizedColor=!1}}C.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class Vt{clear(){this.viewPorts=[]}setCurrent(t,e){this.viewPorts.push({width:t,height:e})}removeCurrent(){this.viewPorts.pop()}getRoot(){const[t]=this.viewPorts;return t||gi()}getCurrent(){const{viewPorts:t}=this,e=t[t.length-1];return e||gi()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return typeof t=="number"?t:t==="x"?this.width:t==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}}Vt.DEFAULT_VIEWPORT_WIDTH=800;Vt.DEFAULT_VIEWPORT_HEIGHT=600;function gi(){return{width:Vt.DEFAULT_VIEWPORT_WIDTH,height:Vt.DEFAULT_VIEWPORT_HEIGHT}}class H{static parse(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const[i=e,n=e]=nt(t);return new H(i,n)}static parseScale(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const[i=e,n=i]=nt(t);return new H(i,n)}static parsePath(t){const e=nt(t),i=e.length,n=[];for(let s=0;s<i;s+=2)n.push(new H(e[s],e[s+1]));return n}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){const{x:e,y:i}=this,n=e*t[0]+i*t[2]+t[4],s=e*t[1]+i*t[3]+t[5];this.x=n,this.y=s}constructor(t,e){this.x=t,this.y=e}}class On{isWorking(){return this.working}start(){if(this.working)return;const{screen:t,onClick:e,onMouseMove:i}=this,n=t.ctx.canvas;n.onclick=e,n.onmousemove=i,this.working=!0}stop(){if(!this.working)return;const t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;const{screen:t,events:e,eventElements:i}=this,{style:n}=t.ctx.canvas;let s;n&&(n.cursor=""),e.forEach((o,r)=>{let{run:l}=o;for(s=i[r];s;)l(s),s=s.parent}),this.events=[],this.eventElements=[]}checkPath(t,e){if(!this.working||!e)return;const{events:i,eventElements:n}=this;i.forEach((s,o)=>{let{x:r,y:l}=s;!n[o]&&e.isPointInPath&&e.isPointInPath(r,l)&&(n[o]=t)})}checkBoundingBox(t,e){if(!this.working||!e)return;const{events:i,eventElements:n}=this;i.forEach((s,o)=>{let{x:r,y:l}=s;!n[o]&&e.isPointInBox(r,l)&&(n[o]=t)})}mapXY(t,e){const{window:i,ctx:n}=this.screen,s=new H(t,e);let o=n.canvas;for(;o;)s.x-=o.offsetLeft,s.y-=o.offsetTop,o=o.offsetParent;return i!=null&&i.scrollX&&(s.x+=i.scrollX),i!=null&&i.scrollY&&(s.y+=i.scrollY),s}onClick(t){const{x:e,y:i}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:e,y:i,run(n){n.onClick&&n.onClick()}})}onMouseMove(t){const{x:e,y:i}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:e,y:i,run(n){n.onMouseMove&&n.onMouseMove()}})}constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}}const wi=typeof window<"u"?window:null,Si=typeof fetch<"u"?fetch.bind(void 0):void 0;class ft{wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;const t=this.waits.every(e=>e());return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){let{document:e,ctx:i,aspectRatio:n,width:s,desiredWidth:o,height:r,desiredHeight:l,minX:h=0,minY:a=0,refX:u,refY:f,clip:d=!1,clipX:p=0,clipY:g=0}=t;const m=Pt(n).replace(/^defer\s/,""),[y,x]=m.split(" "),b=y||"xMidYMid",S=x||"meet",L=s/o,R=r/l,A=Math.min(L,R),F=Math.max(L,R);let E=o,N=l;S==="meet"&&(E*=A,N*=A),S==="slice"&&(E*=F,N*=F);const P=new C(e,"refX",u),O=new C(e,"refY",f),B=P.hasValue()&&O.hasValue();if(B&&i.translate(-A*P.getPixels("x"),-A*O.getPixels("y")),d){const D=A*p,_=A*g;i.beginPath(),i.moveTo(D,_),i.lineTo(s,_),i.lineTo(s,r),i.lineTo(D,r),i.closePath(),i.clip()}if(!B){const D=S==="meet"&&A===R,_=S==="slice"&&F===R,k=S==="meet"&&A===L,z=S==="slice"&&F===L;b.startsWith("xMid")&&(D||_)&&i.translate(s/2-E/2,0),b.endsWith("YMid")&&(k||z)&&i.translate(0,r/2-N/2),b.startsWith("xMax")&&(D||_)&&i.translate(s-E,0),b.endsWith("YMax")&&(k||z)&&i.translate(0,r-N)}switch(!0){case b==="none":i.scale(L,R);break;case S==="meet":i.scale(A,A);break;case S==="slice":i.scale(F,F);break}i.translate(-h,-a)}start(t){let{enableRedraw:e=!1,ignoreMouse:i=!1,ignoreAnimation:n=!1,ignoreDimensions:s=!1,ignoreClear:o=!1,forceRedraw:r,scaleWidth:l,scaleHeight:h,offsetX:a,offsetY:u}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{mouse:f}=this,d=1e3/ft.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=d,this.readyPromise=new Promise(x=>{this.resolveReady=x}),this.isReady()&&this.render(t,s,o,l,h,a,u),!e)return;let p=Date.now(),g=p,m=0;const y=()=>{p=Date.now(),m=p-g,m>=d&&(g=p-m%d,this.shouldUpdate(n,r)&&(this.render(t,s,o,l,h,a,u),f.runEvents())),this.intervalId=pe(y)};i||f.start(),this.intervalId=pe(y)}stop(){this.intervalId&&(pe.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,e){if(!t){const{frameDuration:i}=this;if(this.animations.reduce((s,o)=>o.update(i)||s,!1))return!0}return!!(typeof e=="function"&&e()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(t,e,i,n,s,o,r){const{viewPort:l,ctx:h,isFirstRender:a}=this,u=h.canvas;l.clear(),u.width&&u.height&&l.setCurrent(u.width,u.height);const f=t.getStyle("width"),d=t.getStyle("height");!e&&(a||typeof n!="number"&&typeof s!="number")&&(f.hasValue()&&(u.width=f.getPixels("x"),u.style&&(u.style.width="".concat(u.width,"px"))),d.hasValue()&&(u.height=d.getPixels("y"),u.style&&(u.style.height="".concat(u.height,"px"))));let p=u.clientWidth||u.width,g=u.clientHeight||u.height;if(e&&f.hasValue()&&d.hasValue()&&(p=f.getPixels("x"),g=d.getPixels("y")),l.setCurrent(p,g),typeof o=="number"&&t.getAttribute("x",!0).setValue(o),typeof r=="number"&&t.getAttribute("y",!0).setValue(r),typeof n=="number"||typeof s=="number"){const m=nt(t.getAttribute("viewBox").getString());let y=0,x=0;if(typeof n=="number"){const S=t.getStyle("width");S.hasValue()?y=S.getPixels("x")/n:m[2]&&!isNaN(m[2])&&(y=m[2]/n)}if(typeof s=="number"){const S=t.getStyle("height");S.hasValue()?x=S.getPixels("y")/s:m[3]&&!isNaN(m[3])&&(x=m[3]/s)}y||(y=x),x||(x=y),t.getAttribute("width",!0).setValue(n),t.getAttribute("height",!0).setValue(s);const b=t.getStyle("transform",!0,!0);b.setValue("".concat(b.getString()," scale(").concat(1/y,", ").concat(1/x,")"))}i||h.clearRect(0,0,p,g),t.render(h),a&&(this.isFirstRender=!1)}constructor(t,{fetch:e=Si,window:i=wi}={}){if(this.ctx=t,this.viewPort=new Vt,this.mouse=new On(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=i,!e)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=e}}ft.defaultWindow=wi;ft.defaultFetch=Si;ft.FRAMERATE=30;ft.MAX_VIRTUAL_PIXELS=3e4;const{defaultFetch:Vn}=ft,Rn=typeof DOMParser<"u"?DOMParser:void 0;class ve{async parse(t){return t.startsWith("<")?this.parseFromString(t):this.load(t)}parseFromString(t){const e=new this.DOMParser;try{return this.checkDocument(e.parseFromString(t,"image/svg+xml"))}catch{return this.checkDocument(e.parseFromString(t,"text/xml"))}}checkDocument(t){const e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent||"Unknown parse error");return t}async load(t){const i=await(await this.fetch(t)).text();return this.parseFromString(i)}constructor({fetch:t=Vn,DOMParser:e=Rn}={}){if(!t)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!e)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=t,this.DOMParser=e}}class zn{apply(t){const{x:e,y:i}=this.point;t.translate(e||0,i||0)}unapply(t){const{x:e,y:i}=this.point;t.translate(-1*e||0,-1*i||0)}applyToPoint(t){const{x:e,y:i}=this.point;t.applyTransform([1,0,0,1,e||0,i||0])}constructor(t,e){this.type="translate",this.point=H.parse(e)}}class In{apply(t){const{cx:e,cy:i,originX:n,originY:s,angle:o}=this,r=e+n.getPixels("x"),l=i+s.getPixels("y");t.translate(r,l),t.rotate(o.getRadians()),t.translate(-r,-l)}unapply(t){const{cx:e,cy:i,originX:n,originY:s,angle:o}=this,r=e+n.getPixels("x"),l=i+s.getPixels("y");t.translate(r,l),t.rotate(-1*o.getRadians()),t.translate(-r,-l)}applyToPoint(t){const{cx:e,cy:i,angle:n}=this,s=n.getRadians();t.applyTransform([1,0,0,1,e||0,i||0]),t.applyTransform([Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),0,0]),t.applyTransform([1,0,0,1,-e||0,-i||0])}constructor(t,e,i){this.type="rotate";const n=nt(e);this.angle=new C(t,"angle",n[0]),this.originX=i[0],this.originY=i[1],this.cx=n[1]||0,this.cy=n[2]||0}}class Ln{apply(t){const{scale:{x:e,y:i},originX:n,originY:s}=this,o=n.getPixels("x"),r=s.getPixels("y");t.translate(o,r),t.scale(e,i||e),t.translate(-o,-r)}unapply(t){const{scale:{x:e,y:i},originX:n,originY:s}=this,o=n.getPixels("x"),r=s.getPixels("y");t.translate(o,r),t.scale(1/e,1/i||e),t.translate(-o,-r)}applyToPoint(t){const{x:e,y:i}=this.scale;t.applyTransform([e||0,0,0,i||0,0,0])}constructor(t,e,i){this.type="scale";const n=H.parseScale(e);(n.x===0||n.y===0)&&(n.x=Mt,n.y=Mt),this.scale=n,this.originX=i[0],this.originY=i[1]}}class Ci{apply(t){const{originX:e,originY:i,matrix:n}=this,s=e.getPixels("x"),o=i.getPixels("y");t.translate(s,o),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t.translate(-s,-o)}unapply(t){const{originX:e,originY:i,matrix:n}=this,s=n[0],o=n[2],r=n[4],l=n[1],h=n[3],a=n[5],u=0,f=0,d=1,p=1/(s*(h*d-a*f)-o*(l*d-a*u)+r*(l*f-h*u)),g=e.getPixels("x"),m=i.getPixels("y");t.translate(g,m),t.transform(p*(h*d-a*f),p*(a*u-l*d),p*(r*f-o*d),p*(s*d-r*u),p*(o*a-r*h),p*(r*l-s*a)),t.translate(-g,-m)}applyToPoint(t){t.applyTransform(this.matrix)}constructor(t,e,i){this.type="matrix",this.matrix=bn(e),this.originX=i[0],this.originY=i[1]}}class Ai extends Ci{constructor(t,e,i){super(t,e,i),this.type="skew",this.angle=new C(t,"angle",e)}}class Dn extends Ai{constructor(t,e,i){super(t,e,i),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class Bn extends Ai{constructor(t,e,i){super(t,e,i),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function _n(c){return Pt(c).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function Fn(c){const[t="",e=""]=c.split("(");return[t.trim(),e.trim().replace(")","")]}class Ct{static fromElement(t,e){const i=e.getStyle("transform",!1,!0);if(i.hasValue()){const[n,s=n]=e.getStyle("transform-origin",!1,!0).split();if(n&&s){const o=[n,s];return new Ct(t,i.getString(),o)}}return null}apply(t){this.transforms.forEach(e=>e.apply(t))}unapply(t){this.transforms.forEach(e=>e.unapply(t))}applyToPoint(t){this.transforms.forEach(e=>e.applyToPoint(t))}constructor(t,e,i){this.document=t,this.transforms=[],_n(e).forEach(s=>{if(s==="none")return;const[o,r]=Fn(s),l=Ct.transformTypes[o];l&&this.transforms.push(new l(this.document,r,i))})}}Ct.transformTypes={translate:zn,rotate:In,scale:Ln,matrix:Ci,skewX:Dn,skewY:Bn};class X{getAttribute(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=this.attributes.get(t);if(!i&&e){const n=new C(this.document,t,"");return this.attributes.set(t,n),n}return i||C.empty(this.document)}getHrefAttribute(){let t;for(const[e,i]of this.attributes)if(e==="href"||e.endsWith(":href")){t=i;break}return t||C.empty(this.document)}getStyle(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const n=this.styles.get(t);if(n)return n;const s=this.getAttribute(t);if(s.hasValue())return this.styles.set(t,s),s;if(!i){const{parent:o}=this;if(o){const r=o.getStyle(t);if(r.hasValue())return r}}if(e){const o=new C(this.document,t,"");return this.styles.set(t,o),o}return C.empty(this.document)}render(t){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(t.save(),this.getStyle("mask").hasValue()){const e=this.getStyle("mask").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else if(this.getStyle("filter").getValue("none")!=="none"){const e=this.getStyle("filter").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){const e=Ct.fromElement(this.document,this);e&&e.apply(t);const i=this.getStyle("clip-path",!1,!0);if(i.hasValue()){const n=i.getDefinition();n&&n.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach(e=>{e.render(t)})}addChild(t){const e=t instanceof X?t:this.document.createElement(t);e.parent=this,X.ignoreChildTypes.includes(e.type)||this.children.push(e)}matchesSelector(t){var e;const{node:i}=this;if(typeof i.matches=="function")return i.matches(t);const n=(e=i.getAttribute)===null||e===void 0?void 0:e.call(i,"class");return!n||n===""?!1:n.split(" ").some(s=>".".concat(s)===t)}addStylesFromStyleDefinition(){const{styles:t,stylesSpecificity:e}=this.document;for(const[i,n]of t)if(!i.startsWith("@")&&this.matchesSelector(i)){const s=e.get(i);if(n)for(const[o,r]of n){let l=this.stylesSpecificity.get(o);typeof l>"u"&&(l="000"),s&&s>=l&&(r&&this.styles.set(o,r),this.stylesSpecificity.set(o,s))}}}removeStyles(t,e){return e.reduce((n,s)=>{const o=t.getStyle(s);if(!o.hasValue())return n;const r=o.getString();return o.setValue(""),[...n,[s,r]]},[])}restoreStyles(t,e){e.forEach(i=>{let[n,s]=i;t.getStyle(n,!0).setValue(s)})}isFirstChild(){var t;return((t=this.parent)===null||t===void 0?void 0:t.children.indexOf(this))===0}constructor(t,e,i=!1){if(this.document=t,this.node=e,this.captureTextNodes=i,this.type="",this.attributes=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!e||e.nodeType!==1)return;Array.from(e.attributes).forEach(o=>{const r=wn(o.nodeName);this.attributes.set(r,new C(t,r,o.value))}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(r=>r.trim()).forEach(r=>{if(!r)return;const[l,h]=r.split(":").map(a=>a.trim());l&&this.styles.set(l,new C(t,l,h))});const{definitions:n}=t,s=this.getAttribute("id");s.hasValue()&&(n.has(s.getString())||n.set(s.getString(),this)),Array.from(e.childNodes).forEach(o=>{if(o.nodeType===1)this.addChild(o);else if(i&&(o.nodeType===3||o.nodeType===4)){const r=t.createTextNode(o);r.getText().length>0&&this.addChild(r)}})}}X.ignoreChildTypes=["title"];class Un extends X{constructor(t,e,i){super(t,e,i)}}function Zn(c){const t=c.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function Xn(c){return typeof process>"u"?c:c.trim().split(",").map(Zn).join(",")}function Hn(c){if(!c)return"";const t=c.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}function Yn(c){if(!c)return"";const t=c.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}class K{static parse(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,i="",n="",s="",o="",r="";const l=Pt(t).trim().split(" "),h={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return l.forEach(a=>{switch(!0){case(!h.fontStyle&&K.styles.includes(a)):a!=="inherit"&&(i=a),h.fontStyle=!0;break;case(!h.fontVariant&&K.variants.includes(a)):a!=="inherit"&&(n=a),h.fontStyle=!0,h.fontVariant=!0;break;case(!h.fontWeight&&K.weights.includes(a)):a!=="inherit"&&(s=a),h.fontStyle=!0,h.fontVariant=!0,h.fontWeight=!0;break;case!h.fontSize:a!=="inherit"&&(o=a.split("/")[0]||""),h.fontStyle=!0,h.fontVariant=!0,h.fontWeight=!0,h.fontSize=!0;break;default:a!=="inherit"&&(r+=a)}}),new K(i,n,s,o,r,e)}toString(){return[Hn(this.fontStyle),this.fontVariant,Yn(this.fontWeight),this.fontSize,Xn(this.fontFamily)].join(" ").trim()}constructor(t,e,i,n,s,o){const r=o?typeof o=="string"?K.parse(o):o:{};this.fontFamily=s||r.fontFamily,this.fontSize=n||r.fontSize,this.fontStyle=t||r.fontStyle,this.fontWeight=i||r.fontWeight,this.fontVariant=e||r.fontVariant}}K.styles="normal|italic|oblique|inherit";K.variants="normal|small-caps|inherit";K.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class ot{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,e){typeof t<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof e<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}addX(t){this.addPoint(t,0)}addY(t){this.addPoint(0,t)}addBoundingBox(t){if(!t)return;const{x1:e,y1:i,x2:n,y2:s}=t;this.addPoint(e,i),this.addPoint(n,s)}sumCubic(t,e,i,n,s){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*i+3*(1-t)*Math.pow(t,2)*n+Math.pow(t,3)*s}bezierCurveAdd(t,e,i,n,s){const o=6*e-12*i+6*n,r=-3*e+9*i-9*n+3*s,l=3*i-3*e;if(r===0){if(o===0)return;const f=-l/o;0<f&&f<1&&(t?this.addX(this.sumCubic(f,e,i,n,s)):this.addY(this.sumCubic(f,e,i,n,s)));return}const h=Math.pow(o,2)-4*l*r;if(h<0)return;const a=(-o+Math.sqrt(h))/(2*r);0<a&&a<1&&(t?this.addX(this.sumCubic(a,e,i,n,s)):this.addY(this.sumCubic(a,e,i,n,s)));const u=(-o-Math.sqrt(h))/(2*r);0<u&&u<1&&(t?this.addX(this.sumCubic(u,e,i,n,s)):this.addY(this.sumCubic(u,e,i,n,s)))}addBezierCurve(t,e,i,n,s,o,r,l){this.addPoint(t,e),this.addPoint(r,l),this.bezierCurveAdd(!0,t,i,s,r),this.bezierCurveAdd(!1,e,n,o,l)}addQuadraticCurve(t,e,i,n,s,o){const r=t+.6666666666666666*(i-t),l=e+2/3*(n-e),h=r+1/3*(s-t),a=l+1/3*(o-e);this.addBezierCurve(t,e,r,h,l,a,s,o)}isPointInBox(t,e){const{x1:i,y1:n,x2:s,y2:o}=this;return i<=t&&t<=s&&n<=e&&e<=o}constructor(t=Number.NaN,e=Number.NaN,i=Number.NaN,n=Number.NaN){this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.addPoint(t,e),this.addPoint(i,n)}}class At extends X{calculateOpacity(){let t=1,e=this;for(;e;){const i=e.getStyle("opacity",!1,!0);i.hasValue(!0)&&(t*=i.getNumber()),e=e.parent}return t}setContext(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!e){const i=this.getStyle("fill"),n=this.getStyle("fill-opacity"),s=this.getStyle("stroke"),o=this.getStyle("stroke-opacity");if(i.isUrlDefinition()){const d=i.getFillStyleDefinition(this,n);d&&(t.fillStyle=d)}else if(i.hasValue()){i.getString()==="currentColor"&&i.setValue(this.getStyle("color").getColor());const d=i.getColor();d!=="inherit"&&(t.fillStyle=d==="none"?"rgba(0,0,0,0)":d)}if(n.hasValue()){const d=new C(this.document,"fill",t.fillStyle).addOpacity(n).getColor();t.fillStyle=d}if(s.isUrlDefinition()){const d=s.getFillStyleDefinition(this,o);d&&(t.strokeStyle=d)}else if(s.hasValue()){s.getString()==="currentColor"&&s.setValue(this.getStyle("color").getColor());const d=s.getString();d!=="inherit"&&(t.strokeStyle=d==="none"?"rgba(0,0,0,0)":d)}if(o.hasValue()){const d=new C(this.document,"stroke",t.strokeStyle).addOpacity(o).getString();t.strokeStyle=d}const r=this.getStyle("stroke-width");if(r.hasValue()){const d=r.getPixels();t.lineWidth=d||Mt}const l=this.getStyle("stroke-linecap"),h=this.getStyle("stroke-linejoin"),a=this.getStyle("stroke-miterlimit"),u=this.getStyle("stroke-dasharray"),f=this.getStyle("stroke-dashoffset");if(l.hasValue()&&(t.lineCap=l.getString()),h.hasValue()&&(t.lineJoin=h.getString()),a.hasValue()&&(t.miterLimit=a.getNumber()),u.hasValue()&&u.getString()!=="none"){const d=nt(u.getString());typeof t.setLineDash<"u"?t.setLineDash(d):typeof t.webkitLineDash<"u"?t.webkitLineDash=d:typeof t.mozDash<"u"&&!(d.length===1&&d[0]===0)&&(t.mozDash=d);const p=f.getPixels();typeof t.lineDashOffset<"u"?t.lineDashOffset=p:typeof t.webkitLineDashOffset<"u"?t.webkitLineDashOffset=p:typeof t.mozDashOffset<"u"&&(t.mozDashOffset=p)}}if(this.modifiedEmSizeStack=!1,typeof t.font<"u"){const i=this.getStyle("font"),n=this.getStyle("font-style"),s=this.getStyle("font-variant"),o=this.getStyle("font-weight"),r=this.getStyle("font-size"),l=this.getStyle("font-family"),h=new K(n.getString(),s.getString(),o.getString(),r.hasValue()?"".concat(r.getPixels(!0),"px"):"",l.getString(),K.parse(i.getString(),t.font));n.setValue(h.fontStyle),s.setValue(h.fontVariant),o.setValue(h.fontWeight),r.setValue(h.fontSize),l.setValue(h.fontFamily),t.font=h.toString(),r.isPixels()&&(this.document.emSize=r.getPixels(),this.modifiedEmSizeStack=!0)}e||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...t){super(...t),this.modifiedEmSizeStack=!1}}class mt extends At{setContext(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(t,e);const i=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();i&&(t.textBaseline=i)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if(this.type!=="text")return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);let e=null;return this.children.forEach((i,n)=>{const s=this.getChildBoundingBox(t,this,this,n);e?e.addBoundingBox(s):e=s}),e}getFontSize(){const{document:t,parent:e}=this,i=K.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(i)}getTElementBoundingBox(t){const e=this.getFontSize();return new ot(this.x,this.y-e,this.x+this.measureText(t),this.y)}getGlyph(t,e,i){const n=e[i];let s;if(t.isArabic){var o;const r=e.length,l=e[i-1],h=e[i+1];let a="isolated";(i===0||l===" ")&&i<r-1&&h!==" "&&(a="terminal"),i>0&&l!==" "&&i<r-1&&h!==" "&&(a="medial"),i>0&&l!==" "&&(i===r-1||h===" ")&&(a="initial"),s=((o=t.arabicGlyphs.get(n))===null||o===void 0?void 0:o.get(a))||t.glyphs.get(n)}else s=t.glyphs.get(n);return s||(s=t.missingGlyph),s}getText(){return""}getTextFromNode(t){const e=t||this.node,i=Array.from(e.parentNode.childNodes),n=i.indexOf(e),s=i.length-1;let o=Pt(e.textContent||"");return n===0&&(o=yn(o)),n===s&&(o=vn(o)),o}renderChildren(t){if(this.type!=="text"){this.renderTElementChildren(t);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach((i,n)=>{this.renderChild(t,this,this,n)});const{mouse:e}=this.document.screen;e.isWorking()&&e.checkBoundingBox(this,this.getBoundingBox(t))}renderTElementChildren(t){const{document:e,parent:i}=this,n=this.getText(),s=i.getStyle("font-family").getDefinition();if(s){const{unitsPerEm:l}=s.fontFace,h=K.parse(e.ctx.font),a=i.getStyle("font-size").getNumber(h.fontSize),u=i.getStyle("font-style").getString(h.fontStyle),f=a/l,d=s.isRTL?n.split("").reverse().join(""):n,p=nt(i.getAttribute("dx").getString()),g=d.length;for(let m=0;m<g;m++){const y=this.getGlyph(s,d,m);t.translate(this.x,this.y),t.scale(f,-f);const x=t.lineWidth;t.lineWidth=t.lineWidth*l/a,u==="italic"&&t.transform(1,0,.4,1,0,0),y.render(t),u==="italic"&&t.transform(1,0,-.4,1,0,0),t.lineWidth=x,t.scale(1/f,-1/f),t.translate(-this.x,-this.y),this.x+=a*(y.horizAdvX||s.horizAdvX)/l,typeof p[m]<"u"&&!isNaN(p[m])&&(this.x+=p[m])}return}const{x:o,y:r}=this;t.fillStyle&&t.fillText(n,o,r),t.strokeStyle&&t.strokeText(n,o,r)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;const t=this.leafTexts[this.textChunkStart],e=t.getStyle("text-anchor").getString("start"),i=!1;let n=0;e==="start"&&!i||e==="end"&&i?n=t.x-this.minX:e==="end"&&!i||e==="start"&&i?n=t.x-this.maxX:n=t.x-(this.minX+this.maxX)/2;for(let s=this.textChunkStart;s<this.leafTexts.length;s++)this.leafTexts[s].x+=n;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(t){this.children.forEach((e,i)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,i)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,e,i,n){const s=i.children[n];s.children.length>0?s.children.forEach((o,r)=>{e.adjustChildCoordinatesRecursiveCore(t,e,s,r)}):this.adjustChildCoordinates(t,e,i,n)}adjustChildCoordinates(t,e,i,n){const s=i.children[n];if(typeof s.measureText!="function")return s;t.save(),s.setContext(t,!0);const o=s.getAttribute("x"),r=s.getAttribute("y"),l=s.getAttribute("dx"),h=s.getAttribute("dy"),a=s.getStyle("font-family").getDefinition(),u=!!(a!=null&&a.isRTL);n===0&&(o.hasValue()||o.setValue(s.getInheritedAttribute("x")),r.hasValue()||r.setValue(s.getInheritedAttribute("y")),l.hasValue()||l.setValue(s.getInheritedAttribute("dx")),h.hasValue()||h.setValue(s.getInheritedAttribute("dy")));const f=s.measureText(t);return u&&(e.x-=f),o.hasValue()?(e.applyAnchoring(),s.x=o.getPixels("x"),l.hasValue()&&(s.x+=l.getPixels("x"))):(l.hasValue()&&(e.x+=l.getPixels("x")),s.x=e.x),e.x=s.x,u||(e.x+=f),r.hasValue()?(s.y=r.getPixels("y"),h.hasValue()&&(s.y+=h.getPixels("y"))):(h.hasValue()&&(e.y+=h.getPixels("y")),s.y=e.y),e.y=s.y,e.leafTexts.push(s),e.minX=Math.min(e.minX,s.x,s.x+f),e.maxX=Math.max(e.maxX,s.x,s.x+f),s.clearContext(t),t.restore(),s}getChildBoundingBox(t,e,i,n){const s=i.children[n];if(typeof s.getBoundingBox!="function")return null;const o=s.getBoundingBox(t);return o&&s.children.forEach((r,l)=>{const h=e.getChildBoundingBox(t,e,s,l);o.addBoundingBox(h)}),o}renderChild(t,e,i,n){const s=i.children[n];s.render(t),s.children.forEach((o,r)=>{e.renderChild(t,e,s,r)})}measureText(t){const{measureCache:e}=this;if(~e)return e;const i=this.getText(),n=this.measureTargetText(t,i);return this.measureCache=n,n}measureTargetText(t,e){if(!e.length)return 0;const{parent:i}=this,n=i.getStyle("font-family").getDefinition();if(n){const o=this.getFontSize(),r=n.isRTL?e.split("").reverse().join(""):e,l=nt(i.getAttribute("dx").getString()),h=r.length;let a=0;for(let u=0;u<h;u++){const f=this.getGlyph(n,r,u);a+=(f.horizAdvX||n.horizAdvX)*o/n.fontFace.unitsPerEm,typeof l[u]<"u"&&!isNaN(l[u])&&(a+=l[u])}return a}if(!t.measureText)return e.length*10;t.save(),this.setContext(t,!0);const{width:s}=t.measureText(e);return this.clearContext(t),t.restore(),s}getInheritedAttribute(t){let e=this;for(;e instanceof mt&&e.isFirstChild()&&e.parent;){const i=e.parent.getAttribute(t);if(i.hasValue(!0))return i.getString("0");e=e.parent}return null}constructor(t,e,i){super(t,e,new.target===mt?!0:i),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}}class $t extends mt{getText(){return this.text}constructor(t,e,i){super(t,e,new.target===$t?!0:i),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}}class qn extends $t{constructor(...t){super(...t),this.type="textNode"}}class V extends v{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new H(0,0),this.control=new H(0,0),this.current=new H(0,0),this.points=[],this.angles=[]}isEnd(){const{i:t,commands:e}=this;return t>=e.length-1}next(){const t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y";const i=new H(this.command[t],this.command[e]);return this.makeAbsolute(i)}getAsControlPoint(t,e){const i=this.getPoint(t,e);return this.control=i,i}getAsCurrentPoint(t,e){const i=this.getPoint(t,e);return this.current=i,i}getReflectedControlPoint(){const t=this.previousCommand.type;if(t!==v.CURVE_TO&&t!==v.SMOOTH_CURVE_TO&&t!==v.QUAD_TO&&t!==v.SMOOTH_QUAD_TO)return this.current;const{current:{x:e,y:i},control:{x:n,y:s}}=this;return new H(2*e-n,2*i-s)}makeAbsolute(t){if(this.command.relative){const{x:e,y:i}=this.current;t.x+=e,t.y+=i}return t}addMarker(t,e,i){const{points:n,angles:s}=this;i&&s.length>0&&!s[s.length-1]&&(s[s.length-1]=n[n.length-1].angleTo(i)),this.addMarkerAngle(t,e?e.angleTo(t):null)}addMarkerAngle(t,e){this.points.push(t),this.angles.push(e)}getMarkerPoints(){return this.points}getMarkerAngles(){const{angles:t}=this,e=t.length;for(let i=0;i<e;i++)if(!t[i]){for(let n=i+1;n<e;n++)if(t[n]){t[i]=t[n];break}}return t}constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new H(0,0),this.start=new H(0,0),this.current=new H(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}}class U extends At{path(t){const{pathParser:e}=this,i=new ot;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.next().type){case V.MOVE_TO:this.pathM(t,i);break;case V.LINE_TO:this.pathL(t,i);break;case V.HORIZ_LINE_TO:this.pathH(t,i);break;case V.VERT_LINE_TO:this.pathV(t,i);break;case V.CURVE_TO:this.pathC(t,i);break;case V.SMOOTH_CURVE_TO:this.pathS(t,i);break;case V.QUAD_TO:this.pathQ(t,i);break;case V.SMOOTH_QUAD_TO:this.pathT(t,i);break;case V.ARC:this.pathA(t,i);break;case V.CLOSE_PATH:this.pathZ(t,i);break}return i}getBoundingBox(t){return this.path()}getMarkers(){const{pathParser:t}=this,e=t.getMarkerPoints(),i=t.getMarkerAngles();return e.map((s,o)=>[s,i[o]])}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);const e=this.getStyle("fill-rule");t.fillStyle!==""&&(e.getString("inherit")!=="inherit"?t.fill(e.getString()):t.fill()),t.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());const i=this.getMarkers();if(i){const n=i.length-1,s=this.getStyle("marker-start"),o=this.getStyle("marker-mid"),r=this.getStyle("marker-end");if(s.isUrlDefinition()){const l=s.getDefinition(),[h,a]=i[0];l.render(t,h,a)}if(o.isUrlDefinition()){const l=o.getDefinition();for(let h=1;h<n;h++){const[a,u]=i[h];l.render(t,a,u)}}if(r.isUrlDefinition()){const l=r.getDefinition(),[h,a]=i[n];l.render(t,h,a)}}}static pathM(t){const e=t.getAsCurrentPoint();return t.start=t.current,{point:e}}pathM(t,e){const{pathParser:i}=this,{point:n}=U.pathM(i),{x:s,y:o}=n;i.addMarker(n),e.addPoint(s,o),t&&t.moveTo(s,o)}static pathL(t){const{current:e}=t,i=t.getAsCurrentPoint();return{current:e,point:i}}pathL(t,e){const{pathParser:i}=this,{current:n,point:s}=U.pathL(i),{x:o,y:r}=s;i.addMarker(s,n),e.addPoint(o,r),t&&t.lineTo(o,r)}static pathH(t){const{current:e,command:i}=t,n=new H((i.relative?e.x:0)+i.x,e.y);return t.current=n,{current:e,point:n}}pathH(t,e){const{pathParser:i}=this,{current:n,point:s}=U.pathH(i),{x:o,y:r}=s;i.addMarker(s,n),e.addPoint(o,r),t&&t.lineTo(o,r)}static pathV(t){const{current:e,command:i}=t,n=new H(e.x,(i.relative?e.y:0)+i.y);return t.current=n,{current:e,point:n}}pathV(t,e){const{pathParser:i}=this,{current:n,point:s}=U.pathV(i),{x:o,y:r}=s;i.addMarker(s,n),e.addPoint(o,r),t&&t.lineTo(o,r)}static pathC(t){const{current:e}=t,i=t.getPoint("x1","y1"),n=t.getAsControlPoint("x2","y2"),s=t.getAsCurrentPoint();return{current:e,point:i,controlPoint:n,currentPoint:s}}pathC(t,e){const{pathParser:i}=this,{current:n,point:s,controlPoint:o,currentPoint:r}=U.pathC(i);i.addMarker(r,o,s),e.addBezierCurve(n.x,n.y,s.x,s.y,o.x,o.y,r.x,r.y),t&&t.bezierCurveTo(s.x,s.y,o.x,o.y,r.x,r.y)}static pathS(t){const{current:e}=t,i=t.getReflectedControlPoint(),n=t.getAsControlPoint("x2","y2"),s=t.getAsCurrentPoint();return{current:e,point:i,controlPoint:n,currentPoint:s}}pathS(t,e){const{pathParser:i}=this,{current:n,point:s,controlPoint:o,currentPoint:r}=U.pathS(i);i.addMarker(r,o,s),e.addBezierCurve(n.x,n.y,s.x,s.y,o.x,o.y,r.x,r.y),t&&t.bezierCurveTo(s.x,s.y,o.x,o.y,r.x,r.y)}static pathQ(t){const{current:e}=t,i=t.getAsControlPoint("x1","y1"),n=t.getAsCurrentPoint();return{current:e,controlPoint:i,currentPoint:n}}pathQ(t,e){const{pathParser:i}=this,{current:n,controlPoint:s,currentPoint:o}=U.pathQ(i);i.addMarker(o,s,s),e.addQuadraticCurve(n.x,n.y,s.x,s.y,o.x,o.y),t&&t.quadraticCurveTo(s.x,s.y,o.x,o.y)}static pathT(t){const{current:e}=t,i=t.getReflectedControlPoint();t.control=i;const n=t.getAsCurrentPoint();return{current:e,controlPoint:i,currentPoint:n}}pathT(t,e){const{pathParser:i}=this,{current:n,controlPoint:s,currentPoint:o}=U.pathT(i);i.addMarker(o,s,s),e.addQuadraticCurve(n.x,n.y,s.x,s.y,o.x,o.y),t&&t.quadraticCurveTo(s.x,s.y,o.x,o.y)}static pathA(t){const{current:e,command:i}=t;let{rX:n,rY:s,xRot:o,lArcFlag:r,sweepFlag:l}=i;const h=o*(Math.PI/180),a=t.getAsCurrentPoint(),u=new H(Math.cos(h)*(e.x-a.x)/2+Math.sin(h)*(e.y-a.y)/2,-Math.sin(h)*(e.x-a.x)/2+Math.cos(h)*(e.y-a.y)/2),f=Math.pow(u.x,2)/Math.pow(n,2)+Math.pow(u.y,2)/Math.pow(s,2);f>1&&(n*=Math.sqrt(f),s*=Math.sqrt(f));let d=(r===l?-1:1)*Math.sqrt((Math.pow(n,2)*Math.pow(s,2)-Math.pow(n,2)*Math.pow(u.y,2)-Math.pow(s,2)*Math.pow(u.x,2))/(Math.pow(n,2)*Math.pow(u.y,2)+Math.pow(s,2)*Math.pow(u.x,2)));isNaN(d)&&(d=0);const p=new H(d*n*u.y/s,d*-s*u.x/n),g=new H((e.x+a.x)/2+Math.cos(h)*p.x-Math.sin(h)*p.y,(e.y+a.y)/2+Math.sin(h)*p.x+Math.cos(h)*p.y),m=oi([1,0],[(u.x-p.x)/n,(u.y-p.y)/s]),y=[(u.x-p.x)/n,(u.y-p.y)/s],x=[(-u.x-p.x)/n,(-u.y-p.y)/s];let b=oi(y,x);return Se(y,x)<=-1&&(b=Math.PI),Se(y,x)>=1&&(b=0),{currentPoint:a,rX:n,rY:s,sweepFlag:l,xAxisRotation:h,centp:g,a1:m,ad:b}}pathA(t,e){const{pathParser:i}=this,{currentPoint:n,rX:s,rY:o,sweepFlag:r,xAxisRotation:l,centp:h,a1:a,ad:u}=U.pathA(i),f=1-r?1:-1,d=a+f*(u/2),p=new H(h.x+s*Math.cos(d),h.y+o*Math.sin(d));if(i.addMarkerAngle(p,d-f*Math.PI/2),i.addMarkerAngle(n,d-f*Math.PI),e.addPoint(n.x,n.y),t&&!isNaN(a)&&!isNaN(u)){const g=s>o?s:o,m=s>o?1:s/o,y=s>o?o/s:1;t.translate(h.x,h.y),t.rotate(l),t.scale(m,y),t.arc(0,0,g,a,a+u,!!(1-r)),t.scale(1/m,1/y),t.rotate(-l),t.translate(-h.x,-h.y)}}static pathZ(t){t.current=t.start}pathZ(t,e){U.pathZ(this.pathParser),t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath()}constructor(t,e,i){super(t,e,i),this.type="path",this.pathParser=new V(this.getAttribute("d").getString())}}let Rt=class extends At{setContext(t){var e;const{document:i}=this,{screen:n,window:s}=i,o=t.canvas;if(n.setDefaults(t),"style"in o&&typeof t.font<"u"&&s&&typeof s.getComputedStyle<"u"){t.font=s.getComputedStyle(o).getPropertyValue("font");const x=new C(i,"fontSize",K.parse(t.font).fontSize);x.hasValue()&&(i.rootEmSize=x.getPixels("y"),i.emSize=i.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:r,height:l}=n.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");const h=this.getAttribute("refX"),a=this.getAttribute("refY"),u=this.getAttribute("viewBox"),f=u.hasValue()?nt(u.getString()):null,d=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible";let p=0,g=0,m=0,y=0;f&&(p=f[0],g=f[1]),this.root||(r=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y"),this.type==="marker"&&(m=p,y=g,p=0,g=0)),n.viewPort.setCurrent(r,l),this.node&&(!this.parent||((e=this.node.parentNode)===null||e===void 0?void 0:e.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),f&&(r=f[2],l=f[3]),i.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:n.viewPort.width,desiredWidth:r,height:n.viewPort.height,desiredHeight:l,minX:p,minY:g,refX:h.getValue(),refY:a.getValue(),clip:d,clipX:m,clipY:y}),f&&(n.viewPort.removeCurrent(),n.viewPort.setCurrent(r,l))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const n=this.getAttribute("width",!0),s=this.getAttribute("height",!0),o=this.getAttribute("viewBox"),r=this.getAttribute("style"),l=n.getNumber(0),h=s.getNumber(0);if(i)if(typeof i=="string")this.getAttribute("preserveAspectRatio",!0).setValue(i);else{const a=this.getAttribute("preserveAspectRatio");a.hasValue()&&a.setValue(a.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(n.setValue(t),s.setValue(e),o.hasValue()||o.setValue("0 0 ".concat(l||t," ").concat(h||e)),r.hasValue()){const a=this.getStyle("width"),u=this.getStyle("height");a.hasValue()&&a.setValue("".concat(t,"px")),u.hasValue()&&u.setValue("".concat(e,"px"))}}constructor(...t){super(...t),this.type="svg",this.root=!1}};class Ti extends U{path(t){const e=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),n=this.getStyle("width",!1,!0).getPixels("x"),s=this.getStyle("height",!1,!0).getPixels("y"),o=this.getAttribute("rx"),r=this.getAttribute("ry");let l=o.getPixels("x"),h=r.getPixels("y");if(o.hasValue()&&!r.hasValue()&&(h=l),r.hasValue()&&!o.hasValue()&&(l=h),l=Math.min(l,n/2),h=Math.min(h,s/2),t){const a=4*((Math.sqrt(2)-1)/3);t.beginPath(),s>0&&n>0&&(t.moveTo(e+l,i),t.lineTo(e+n-l,i),t.bezierCurveTo(e+n-l+a*l,i,e+n,i+h-a*h,e+n,i+h),t.lineTo(e+n,i+s-h),t.bezierCurveTo(e+n,i+s-h+a*h,e+n-l+a*l,i+s,e+n-l,i+s),t.lineTo(e+l,i+s),t.bezierCurveTo(e+l-a*l,i+s,e,i+s-h+a*h,e,i+s-h),t.lineTo(e,i+h),t.bezierCurveTo(e,i+h-a*h,e+l-a*l,i,e+l,i),t.closePath())}return new ot(e,i,e+n,i+s)}getMarkers(){return null}constructor(...t){super(...t),this.type="rect"}}class Gn extends U{path(t){const e=this.getAttribute("cx").getPixels("x"),i=this.getAttribute("cy").getPixels("y"),n=this.getAttribute("r").getPixels();return t&&n>0&&(t.beginPath(),t.arc(e,i,n,0,Math.PI*2,!1),t.closePath()),new ot(e-n,i-n,e+n,i+n)}getMarkers(){return null}constructor(...t){super(...t),this.type="circle"}}class Wn extends U{path(t){const e=4*((Math.sqrt(2)-1)/3),i=this.getAttribute("rx").getPixels("x"),n=this.getAttribute("ry").getPixels("y"),s=this.getAttribute("cx").getPixels("x"),o=this.getAttribute("cy").getPixels("y");return t&&i>0&&n>0&&(t.beginPath(),t.moveTo(s+i,o),t.bezierCurveTo(s+i,o+e*n,s+e*i,o+n,s,o+n),t.bezierCurveTo(s-e*i,o+n,s-i,o+e*n,s-i,o),t.bezierCurveTo(s-i,o-e*n,s-e*i,o-n,s,o-n),t.bezierCurveTo(s+e*i,o-n,s+i,o-e*n,s+i,o),t.closePath()),new ot(s-i,o-n,s+i,o+n)}getMarkers(){return null}constructor(...t){super(...t),this.type="ellipse"}}class $n extends U{getPoints(){return[new H(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new H(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){const[{x:e,y:i},{x:n,y:s}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(e,i),t.lineTo(n,s)),new ot(e,i,n,s)}getMarkers(){const[t,e]=this.getPoints(),i=t.angleTo(e);return[[t,i],[e,i]]}constructor(...t){super(...t),this.type="line"}}class Ei extends U{path(t){const{points:e}=this,[{x:i,y:n}]=e,s=new ot(i,n);return t&&(t.beginPath(),t.moveTo(i,n)),e.forEach(o=>{let{x:r,y:l}=o;s.addPoint(r,l),t&&t.lineTo(r,l)}),s}getMarkers(){const{points:t}=this,e=t.length-1,i=[];return t.forEach((n,s)=>{s!==e&&i.push([n,n.angleTo(t[s+1])])}),i.length>0&&i.push([t[t.length-1],i[i.length-1][1]]),i}constructor(t,e,i){super(t,e,i),this.type="polyline",this.points=[],this.points=H.parsePath(this.getAttribute("points").getString())}}class Qn extends Ei{path(t){const e=super.path(t),[{x:i,y:n}]=this.points;return t&&(t.lineTo(i,n),t.closePath()),e}constructor(...t){super(...t),this.type="polygon"}}class jn extends X{createPattern(t,e,i){const n=this.getStyle("width").getPixels("x",!0),s=this.getStyle("height").getPixels("y",!0),o=new Rt(this.document,null);o.attributes.set("viewBox",new C(this.document,"viewBox",this.getAttribute("viewBox").getValue())),o.attributes.set("width",new C(this.document,"width","".concat(n,"px"))),o.attributes.set("height",new C(this.document,"height","".concat(s,"px"))),o.attributes.set("transform",new C(this.document,"transform",this.getAttribute("patternTransform").getValue())),o.children=this.children;const r=this.document.createCanvas(n,s),l=r.getContext("2d"),h=this.getAttribute("x"),a=this.getAttribute("y");h.hasValue()&&a.hasValue()&&l.translate(h.getPixels("x",!0),a.getPixels("y",!0)),i.hasValue()?this.styles.set("fill-opacity",i):this.styles.delete("fill-opacity");for(let f=-1;f<=1;f++)for(let d=-1;d<=1;d++)l.save(),o.attributes.set("x",new C(this.document,"x",f*r.width)),o.attributes.set("y",new C(this.document,"y",d*r.height)),o.render(l),l.restore();return t.createPattern(r,"repeat")}constructor(...t){super(...t),this.type="pattern"}}class Kn extends X{render(t,e,i){if(!e)return;const{x:n,y:s}=e,o=this.getAttribute("orient").getString("auto"),r=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(n,s),o==="auto"&&t.rotate(i),r==="strokeWidth"&&t.scale(t.lineWidth,t.lineWidth),t.save();const l=new Rt(this.document);l.type=this.type,l.attributes.set("viewBox",new C(this.document,"viewBox",this.getAttribute("viewBox").getValue())),l.attributes.set("refX",new C(this.document,"refX",this.getAttribute("refX").getValue())),l.attributes.set("refY",new C(this.document,"refY",this.getAttribute("refY").getValue())),l.attributes.set("width",new C(this.document,"width",this.getAttribute("markerWidth").getValue())),l.attributes.set("height",new C(this.document,"height",this.getAttribute("markerHeight").getValue())),l.attributes.set("overflow",new C(this.document,"overflow",this.getAttribute("overflow").getValue())),l.attributes.set("fill",new C(this.document,"fill",this.getAttribute("fill").getColor("black"))),l.attributes.set("stroke",new C(this.document,"stroke",this.getAttribute("stroke").getValue("none"))),l.children=this.children,l.render(t),t.restore(),r==="strokeWidth"&&t.scale(1/t.lineWidth,1/t.lineWidth),o==="auto"&&t.rotate(-i),t.translate(-n,-s)}constructor(...t){super(...t),this.type="marker"}}class Jn extends X{render(){}constructor(...t){super(...t),this.type="defs"}}class Ee extends At{getBoundingBox(t){const e=new ot;return this.children.forEach(i=>{e.addBoundingBox(i.getBoundingBox(t))}),e}constructor(...t){super(...t),this.type="g"}}class Mi extends X{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,e,i){let n=this;this.getHrefAttribute().hasValue()&&(n=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(n));const{stops:s}=n,o=this.getGradient(t,e);if(!o)return this.addParentOpacity(i,s[s.length-1].color);if(s.forEach(r=>{o.addColorStop(r.offset,this.addParentOpacity(i,r.color))}),this.getAttribute("gradientTransform").hasValue()){const{document:r}=this,{MAX_VIRTUAL_PIXELS:l}=ft,{viewPort:h}=r.screen,a=h.getRoot(),u=new Ti(r);u.attributes.set("x",new C(r,"x",-l/3)),u.attributes.set("y",new C(r,"y",-l/3)),u.attributes.set("width",new C(r,"width",l)),u.attributes.set("height",new C(r,"height",l));const f=new Ee(r);f.attributes.set("transform",new C(r,"transform",this.getAttribute("gradientTransform").getValue())),f.children=[u];const d=new Rt(r);d.attributes.set("x",new C(r,"x",0)),d.attributes.set("y",new C(r,"y",0)),d.attributes.set("width",new C(r,"width",a.width)),d.attributes.set("height",new C(r,"height",a.height)),d.children=[f];const p=r.createCanvas(a.width,a.height),g=p.getContext("2d");return g.fillStyle=o,d.render(g),g.createPattern(p,"no-repeat")}return o}inheritStopContainer(t){this.attributesToInherit.forEach(e=>{!this.getAttribute(e).hasValue()&&t.getAttribute(e).hasValue()&&this.getAttribute(e,!0).setValue(t.getAttribute(e).getValue())})}addParentOpacity(t,e){return t.hasValue()?new C(this.document,"color",e).addOpacity(t).getColor():e}constructor(t,e,i){super(t,e,i),this.attributesToInherit=["gradientUnits"],this.stops=[];const{stops:n,children:s}=this;s.forEach(o=>{o.type==="stop"&&n.push(o)})}}class ts extends Mi{getGradient(t,e){const i=this.getGradientUnits()==="objectBoundingBox",n=i?e.getBoundingBox(t):null;if(i&&!n)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));const s=i?n.x+n.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),o=i?n.y+n.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),r=i?n.x+n.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),l=i?n.y+n.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return s===r&&o===l?null:t.createLinearGradient(s,o,r,l)}constructor(t,e,i){super(t,e,i),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}}class es extends Mi{getGradient(t,e){const i=this.getGradientUnits()==="objectBoundingBox",n=e.getBoundingBox(t);if(i&&!n)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");const s=i?n.x+n.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),o=i?n.y+n.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y");let r=s,l=o;this.getAttribute("fx").hasValue()&&(r=i?n.x+n.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(l=i?n.y+n.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));const h=i?(n.width+n.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),a=this.getAttribute("fr").getPixels();return t.createRadialGradient(r,l,a,s,o,h)}constructor(t,e,i){super(t,e,i),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}}class is extends X{constructor(t,e,i){super(t,e,i),this.type="stop";const n=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),s=this.getStyle("stop-opacity");let o=this.getStyle("stop-color",!0);o.getString()===""&&o.setValue("#000"),s.hasValue()&&(o=o.addOpacity(s)),this.offset=n,this.color=o.getColor()}}class Me extends X{getProperty(){const t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return t==="CSS"?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}calcValue(){const{initialUnits:t}=this,{progress:e,from:i,to:n}=this.getProgress();let s=i.getNumber()+(n.getNumber()-i.getNumber())*e;return t==="%"&&(s*=100),"".concat(s).concat(t)}update(t){const{parent:e}=this,i=this.getProperty();if(this.initialValue||(this.initialValue=i.getString(),this.initialUnits=i.getUnits()),this.duration>this.maxDuration){const s=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(s==="freeze"&&!this.frozen)this.frozen=!0,e&&i&&(e.animationFrozen=!0,e.animationFrozenValue=i.getString());else if(s==="remove"&&!this.removed)return this.removed=!0,e&&i&&i.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=t;let n=!1;if(this.begin<this.duration){let s=this.calcValue();const o=this.getAttribute("type");if(o.hasValue()){const r=o.getString();s="".concat(r,"(").concat(s,")")}i.setValue(s),n=!0}return n}getProgress(){const{document:t,values:e}=this;let i=(this.duration-this.begin)/(this.maxDuration-this.begin),n,s;if(e.hasValue()){const o=i*(e.getValue().length-1),r=Math.floor(o),l=Math.ceil(o);let h;h=e.getValue()[r],n=new C(t,"from",h?parseFloat(h):0),h=e.getValue()[l],s=new C(t,"to",h?parseFloat(h):0),i=(o-r)/(l-r)}else n=this.from,s=this.to;return{progress:i,from:n,to:s}}constructor(t,e,i){super(t,e,i),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new C(t,"values",null);const n=this.getAttribute("values");n.hasValue()&&this.values.setValue(n.getString().split(";"))}}class ns extends Me{calcValue(){const{progress:t,from:e,to:i}=this.getProgress(),n=new xe(e.getColor()),s=new xe(i.getColor());if(n.ok&&s.ok){const o=n.r+(s.r-n.r)*t,r=n.g+(s.g-n.g)*t,l=n.b+(s.b-n.b)*t;return"rgb(".concat(Math.floor(o),", ").concat(Math.floor(r),", ").concat(Math.floor(l),")")}return this.getAttribute("from").getColor()}constructor(...t){super(...t),this.type="animateColor"}}class ss extends Me{calcValue(){const{progress:t,from:e,to:i}=this.getProgress(),n=nt(e.getString()),s=nt(i.getString());return n.map((r,l)=>{const h=s[l];return r+(h-r)*t}).join(" ")}constructor(...t){super(...t),this.type="animateTransform"}}class Pi extends X{constructor(t,e,i){super(t,e,i),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class Pe extends U{constructor(t,e,i){super(t,e,i),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class Ni extends Pe{constructor(...t){super(...t),this.type="missing-glyph",this.horizAdvX=0}}class rs extends X{render(){}constructor(t,e,i){super(t,e,i),this.type="font",this.isArabic=!1,this.glyphs=new Map,this.arabicGlyphs=new Map,this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();const{definitions:n}=t,{children:s}=this;for(const o of s)if(o instanceof Pi){this.fontFace=o;const r=o.getStyle("font-family");r.hasValue()&&n.set(r.getString(),this)}else if(o instanceof Ni)this.missingGlyph=o;else if(o instanceof Pe)if(o.arabicForm){this.isRTL=!0,this.isArabic=!0;let r=this.arabicGlyphs.get(o.unicode);typeof r>"u"&&(r=new Map,this.arabicGlyphs.set(o.unicode,r)),r.set(o.arabicForm,o)}else this.glyphs.set(o.unicode,o)}}class os extends mt{getText(){const t=this.getHrefAttribute().getDefinition();if(t){const e=t.children[0];if(e)return e.getText()}return""}constructor(...t){super(...t),this.type="tref"}}class as extends mt{getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);const{document:e,x:i,y:n}=this,{mouse:s}=e.screen,o=new C(e,"fontSize",K.parse(e.ctx.font).fontSize);s.isWorking()&&s.checkBoundingBox(this,new ot(i,n-o.getPixels("y"),i+this.measureText(t),n))}else if(this.children.length>0){const e=new Ee(this.document);e.children=this.children,e.parent=this,e.render(t)}}onClick(){const{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){const t=this.document.ctx;t.canvas.style.cursor="pointer"}constructor(t,e,i){super(t,e,i),this.type="a";const{childNodes:n}=e,s=n[0],o=n.length>0&&Array.from(n).every(r=>r.nodeType===3);this.hasText=o,this.text=o?this.getTextFromNode(s):""}}class ls extends mt{getText(){return this.text}path(t){const{dataArray:e}=this;t&&t.beginPath(),e.forEach(i=>{let{type:n,points:s}=i;switch(n){case V.LINE_TO:t&&t.lineTo(s[0],s[1]);break;case V.MOVE_TO:t&&t.moveTo(s[0],s[1]);break;case V.CURVE_TO:t&&t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case V.QUAD_TO:t&&t.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case V.ARC:{const[o,r,l,h,a,u,f,d]=s,p=l>h?l:h,g=l>h?1:l/h,m=l>h?h/l:1;t&&(t.translate(o,r),t.rotate(f),t.scale(g,m),t.arc(0,0,p,a,a+u,!!(1-d)),t.scale(1/g,1/m),t.rotate(-f),t.translate(-o,-r));break}case V.CLOSE_PATH:t&&t.closePath();break}})}renderChildren(t){this.setTextData(t),t.save();const e=this.parent.getStyle("text-decoration").getString(),i=this.getFontSize(),{glyphInfo:n}=this,s=t.fillStyle;e==="underline"&&t.beginPath(),n.forEach((o,r)=>{const{p0:l,p1:h,rotation:a,text:u}=o;t.save(),t.translate(l.x,l.y),t.rotate(a),t.fillStyle&&t.fillText(u,0,0),t.strokeStyle&&t.strokeText(u,0,0),t.restore(),e==="underline"&&(r===0&&t.moveTo(l.x,l.y+i/8),t.lineTo(h.x,h.y+i/5))}),e==="underline"&&(t.lineWidth=i/20,t.strokeStyle=s,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,e,i,n,s,o,r,l,h){let a=o,u=this.measureText(t,l);l===" "&&e==="justify"&&i<n&&(u+=(n-i)/s),h>-1&&(a+=this.getLetterSpacingAt(h));const f=this.textHeight/20,d=this.getEquidistantPointOnPath(a,f,0),p=this.getEquidistantPointOnPath(a+u,f,0),g={p0:d,p1:p},m=d&&p?Math.atan2(p.y-d.y,p.x-d.x):0;if(r){const y=Math.cos(Math.PI/2+m)*r,x=Math.cos(-m)*r;g.p0={...d,x:d.x+y,y:d.y+x},g.p1={...p,x:p.x+y,y:p.y+x}}return a+=u,{offset:a,segment:g,rotation:m}}measureText(t,e){const{measuresCache:i}=this,n=e||this.getText();if(i.has(n))return i.get(n);const s=this.measureTargetText(t,n);return i.set(n,s),s}setTextData(t){if(this.glyphInfo)return;const e=this.getText(),i=e.split(""),n=e.split(" ").length-1,s=this.parent.getAttribute("dx").split().map(b=>b.getPixels("x")),o=this.parent.getAttribute("dy").getPixels("y"),r=this.parent.getStyle("text-anchor").getString("start"),l=this.getStyle("letter-spacing"),h=this.parent.getStyle("letter-spacing");let a=0;!l.hasValue()||l.getValue()==="inherit"?a=h.getPixels():l.hasValue()&&l.getValue()!=="initial"&&l.getValue()!=="unset"&&(a=l.getPixels());const u=[],f=e.length;this.letterSpacingCache=u;for(let b=0;b<f;b++)u.push(typeof s[b]<"u"?s[b]:a);const d=u.reduce((b,S,L)=>L===0?0:b+S||0,0),p=this.measureText(t),g=Math.max(p+d,0);this.textWidth=p,this.textHeight=this.getFontSize(),this.glyphInfo=[];const m=this.getPathLength(),y=this.getStyle("startOffset").getNumber(0)*m;let x=0;(r==="middle"||r==="center")&&(x=-g/2),(r==="end"||r==="right")&&(x=-g),x+=y,i.forEach((b,S)=>{const{offset:L,segment:R,rotation:A}=this.findSegmentToFitChar(t,r,g,m,n,x,o,b,S);x=L,!(!R.p0||!R.p1)&&this.glyphInfo.push({text:i[S],p0:R.p0,p1:R.p1,rotation:A})})}parsePathData(t){if(this.pathLength=-1,!t)return[];const e=[],{pathParser:i}=t;for(i.reset();!i.isEnd();){const{current:n}=i,s=n?n.x:0,o=n?n.y:0,r=i.next();let l=r.type,h=[];switch(r.type){case V.MOVE_TO:this.pathM(i,h);break;case V.LINE_TO:l=this.pathL(i,h);break;case V.HORIZ_LINE_TO:l=this.pathH(i,h);break;case V.VERT_LINE_TO:l=this.pathV(i,h);break;case V.CURVE_TO:this.pathC(i,h);break;case V.SMOOTH_CURVE_TO:l=this.pathS(i,h);break;case V.QUAD_TO:this.pathQ(i,h);break;case V.SMOOTH_QUAD_TO:l=this.pathT(i,h);break;case V.ARC:h=this.pathA(i);break;case V.CLOSE_PATH:U.pathZ(i);break}r.type!==V.CLOSE_PATH?e.push({type:l,points:h,start:{x:s,y:o},pathLength:this.calcLength(s,o,l,h)}):e.push({type:V.CLOSE_PATH,points:[],pathLength:0})}return e}pathM(t,e){const{x:i,y:n}=U.pathM(t).point;e.push(i,n)}pathL(t,e){const{x:i,y:n}=U.pathL(t).point;return e.push(i,n),V.LINE_TO}pathH(t,e){const{x:i,y:n}=U.pathH(t).point;return e.push(i,n),V.LINE_TO}pathV(t,e){const{x:i,y:n}=U.pathV(t).point;return e.push(i,n),V.LINE_TO}pathC(t,e){const{point:i,controlPoint:n,currentPoint:s}=U.pathC(t);e.push(i.x,i.y,n.x,n.y,s.x,s.y)}pathS(t,e){const{point:i,controlPoint:n,currentPoint:s}=U.pathS(t);return e.push(i.x,i.y,n.x,n.y,s.x,s.y),V.CURVE_TO}pathQ(t,e){const{controlPoint:i,currentPoint:n}=U.pathQ(t);e.push(i.x,i.y,n.x,n.y)}pathT(t,e){const{controlPoint:i,currentPoint:n}=U.pathT(t);return e.push(i.x,i.y,n.x,n.y),V.QUAD_TO}pathA(t){let{rX:e,rY:i,sweepFlag:n,xAxisRotation:s,centp:o,a1:r,ad:l}=U.pathA(t);return n===0&&l>0&&(l-=2*Math.PI),n===1&&l<0&&(l+=2*Math.PI),[o.x,o.y,e,i,r,l,s,n]}calcLength(t,e,i,n){let s=0,o=null,r=null,l=0;switch(i){case V.LINE_TO:return this.getLineLength(t,e,n[0],n[1]);case V.CURVE_TO:for(s=0,o=this.getPointOnCubicBezier(0,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),l=.01;l<=1;l+=.01)r=this.getPointOnCubicBezier(l,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),s+=this.getLineLength(o.x,o.y,r.x,r.y),o=r;return s;case V.QUAD_TO:for(s=0,o=this.getPointOnQuadraticBezier(0,t,e,n[0],n[1],n[2],n[3]),l=.01;l<=1;l+=.01)r=this.getPointOnQuadraticBezier(l,t,e,n[0],n[1],n[2],n[3]),s+=this.getLineLength(o.x,o.y,r.x,r.y),o=r;return s;case V.ARC:{s=0;const h=n[4],a=n[5],u=n[4]+a;let f=Math.PI/180;if(Math.abs(h-u)<f&&(f=Math.abs(h-u)),o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],h,0),a<0)for(l=h-f;l>u;l-=f)r=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=this.getLineLength(o.x,o.y,r.x,r.y),o=r;else for(l=h+f;l<u;l+=f)r=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=this.getLineLength(o.x,o.y,r.x,r.y),o=r;return r=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),s+=this.getLineLength(o.x,o.y,r.x,r.y),s}}return 0}getPointOnLine(t,e,i,n,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:e,r=arguments.length>6&&arguments[6]!==void 0?arguments[6]:i;const l=(s-i)/(n-e+Mt);let h=Math.sqrt(t*t/(1+l*l));n<e&&(h*=-1);let a=l*h,u=null;if(n===e)u={x:o,y:r+a};else if((r-i)/(o-e+Mt)===l)u={x:o+h,y:r+a};else{let f=0,d=0;const p=this.getLineLength(e,i,n,s);if(p<Mt)return null;let g=(o-e)*(n-e)+(r-i)*(s-i);g/=p*p,f=e+g*(n-e),d=i+g*(s-i);const m=this.getLineLength(o,r,f,d),y=Math.sqrt(t*t-m*m);h=Math.sqrt(y*y/(1+l*l)),n<e&&(h*=-1),a=l*h,u={x:f+h,y:d+a}}return u}getPointOnPath(t){const e=this.getPathLength();let i=0,n=null;if(t<-5e-5||t-5e-5>e)return null;const{dataArray:s}=this;for(const o of s){if(o&&(o.pathLength<5e-5||i+o.pathLength+5e-5<t)){i+=o.pathLength;continue}const r=t-i;let l=0;switch(o.type){case V.LINE_TO:n=this.getPointOnLine(r,o.start.x,o.start.y,o.points[0],o.points[1],o.start.x,o.start.y);break;case V.ARC:{const h=o.points[4],a=o.points[5],u=o.points[4]+a;if(l=h+r/o.pathLength*a,a<0&&l<u||a>=0&&l>u)break;n=this.getPointOnEllipticalArc(o.points[0],o.points[1],o.points[2],o.points[3],l,o.points[6]);break}case V.CURVE_TO:l=r/o.pathLength,l>1&&(l=1),n=this.getPointOnCubicBezier(l,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3],o.points[4],o.points[5]);break;case V.QUAD_TO:l=r/o.pathLength,l>1&&(l=1),n=this.getPointOnQuadraticBezier(l,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3]);break}if(n)return n;break}return null}getLineLength(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((t,e)=>e.pathLength>0?t+e.pathLength:t,0)),this.pathLength}getPointOnCubicBezier(t,e,i,n,s,o,r,l,h){const a=l*ai(t)+o*li(t)+n*hi(t)+e*ui(t),u=h*ai(t)+r*li(t)+s*hi(t)+i*ui(t);return{x:a,y:u}}getPointOnQuadraticBezier(t,e,i,n,s,o,r){const l=o*ci(t)+n*fi(t)+e*di(t),h=r*ci(t)+s*fi(t)+i*di(t);return{x:l,y:h}}getPointOnEllipticalArc(t,e,i,n,s,o){const r=Math.cos(o),l=Math.sin(o),h={x:i*Math.cos(s),y:n*Math.sin(s)};return{x:t+(h.x*r-h.y*l),y:e+(h.x*l+h.y*r)}}buildEquidistantCache(t,e){const i=this.getPathLength(),n=e||.25,s=t||i/100;if(!this.equidistantCache||this.equidistantCache.step!==s||this.equidistantCache.precision!==n){this.equidistantCache={step:s,precision:n,points:[]};let o=0;for(let r=0;r<=i;r+=n){const l=this.getPointOnPath(r),h=this.getPointOnPath(r+n);!l||!h||(o+=this.getLineLength(l.x,l.y,h.x,h.y),o>=s&&(this.equidistantCache.points.push({x:l.x,y:l.y,distance:r}),o-=s))}}}getEquidistantPointOnPath(t,e,i){if(this.buildEquidistantCache(e,i),t<0||t-this.getPathLength()>5e-5)return null;const n=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[n]||null}constructor(t,e,i){super(t,e,i),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);const n=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(n)}}const hs=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class us extends At{async loadImage(t){try{const e=await this.document.createImage(t);this.image=e}catch(e){console.error('Error while loading image "'.concat(t,'":'),e)}this.loaded=!0}async loadSvg(t){const e=hs.exec(t);if(e){const i=e[5];i&&(e[4]==="base64"?this.image=atob(i):this.image=decodeURIComponent(i))}else try{const n=await(await this.document.fetch(t)).text();this.image=n}catch(i){console.error('Error while loading image "'.concat(t,'":'),i)}this.loaded=!0}renderChildren(t){const{document:e,image:i,loaded:n}=this,s=this.getAttribute("x").getPixels("x"),o=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");if(!(!n||!i||!r||!l)){if(t.save(),t.translate(s,o),typeof i=="string"){const h=e.canvg.forkString(t,i,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:r,scaleHeight:l}),{documentElement:a}=h.document;a&&(a.parent=this),h.render()}else e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:r,desiredWidth:i.width,height:l,desiredHeight:i.height}),this.loaded&&(!("complete"in i)||i.complete)&&t.drawImage(i,0,0);t.restore()}}getBoundingBox(){const t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),i=this.getStyle("width").getPixels("x"),n=this.getStyle("height").getPixels("y");return new ot(t,e,t+i,e+n)}constructor(t,e,i){super(t,e,i),this.type="image",this.loaded=!1;const n=this.getHrefAttribute().getString();if(!n)return;const s=n.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(n);t.images.push(this),s?this.loadSvg(n):this.loadImage(n)}}class cs extends At{render(t){}constructor(...t){super(...t),this.type="symbol"}}class fs{async load(t,e){try{const{document:i}=this,s=(await i.canvg.parser.load(e)).getElementsByTagName("font");Array.from(s).forEach(o=>{const r=i.createElement(o);i.definitions.set(t,r)})}catch(i){console.error('Error while loading font "'.concat(e,'":'),i)}this.loaded=!0}constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}}class ki extends X{constructor(t,e,i){super(t,e,i),this.type="style",Pt(Array.from(e.childNodes).map(o=>o.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(o=>{const r=o.trim();if(!r)return;const l=r.split("{"),h=l[0].split(","),a=l[1].split(";");h.forEach(u=>{const f=u.trim();if(!f)return;const d=t.styles.get(f)||new Map;if(a.forEach(p=>{const g=p.indexOf(":"),m=p.substr(0,g).trim(),y=p.substr(g+1,p.length-g).trim();m&&y&&d.set(m,new C(t,m,y))}),t.styles.set(f,d),t.stylesSpecificity.set(f,kn(f)),f==="@font-face"){const p=d.get("font-family").getString().replace(/"|'/g,"");d.get("src").getString().split(",").forEach(m=>{if(m.indexOf('format("svg")')>0){const y=xi(m);y&&new fs(t).load(p,y)}})}})})}}ki.parseExternalUrl=xi;class ds extends At{setContext(t){super.setContext(t);const e=this.getAttribute("x"),i=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),i.hasValue()&&t.translate(0,i.getPixels("y"))}path(t){const{element:e}=this;e&&e.path(t)}renderChildren(t){const{document:e,element:i}=this;if(i){let n=i;if(i.type==="symbol"&&(n=new Rt(e),n.attributes.set("viewBox",new C(e,"viewBox",i.getAttribute("viewBox").getString())),n.attributes.set("preserveAspectRatio",new C(e,"preserveAspectRatio",i.getAttribute("preserveAspectRatio").getString())),n.attributes.set("overflow",new C(e,"overflow",i.getAttribute("overflow").getString())),n.children=i.children,i.styles.set("opacity",new C(e,"opacity",this.calculateOpacity()))),n.type==="svg"){const o=this.getStyle("width",!1,!0),r=this.getStyle("height",!1,!0);o.hasValue()&&n.attributes.set("width",new C(e,"width",o.getString())),r.hasValue()&&n.attributes.set("height",new C(e,"height",r.getString()))}const s=n.parent;n.parent=this,n.render(t),n.parent=s}}getBoundingBox(t){const{element:e}=this;return e?e.getBoundingBox(t):null}elementTransform(){const{document:t,element:e}=this;return e?Ct.fromElement(t,e):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...t){super(...t),this.type="use"}}function Yt(c,t,e,i,n,s){return c[e*i*4+t*4+s]}function qt(c,t,e,i,n,s,o){c[e*i*4+t*4+s]=o}function G(c,t,e){return c[t]*e}function ut(c,t,e,i){return t+Math.cos(c)*e+Math.sin(c)*i}class Oi extends X{apply(t,e,i,n,s){const{includeOpacity:o,matrix:r}=this,l=t.getImageData(0,0,n,s);for(let h=0;h<s;h++)for(let a=0;a<n;a++){const u=Yt(l.data,a,h,n,s,0),f=Yt(l.data,a,h,n,s,1),d=Yt(l.data,a,h,n,s,2),p=Yt(l.data,a,h,n,s,3);let g=G(r,0,u)+G(r,1,f)+G(r,2,d)+G(r,3,p)+G(r,4,1),m=G(r,5,u)+G(r,6,f)+G(r,7,d)+G(r,8,p)+G(r,9,1),y=G(r,10,u)+G(r,11,f)+G(r,12,d)+G(r,13,p)+G(r,14,1),x=G(r,15,u)+G(r,16,f)+G(r,17,d)+G(r,18,p)+G(r,19,1);o&&(g=0,m=0,y=0,x*=p/255),qt(l.data,a,h,n,s,0,g),qt(l.data,a,h,n,s,1,m),qt(l.data,a,h,n,s,2,y),qt(l.data,a,h,n,s,3,x)}t.clearRect(0,0,n,s),t.putImageData(l,0,0)}constructor(t,e,i){super(t,e,i),this.type="feColorMatrix";let n=nt(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{const s=n[0];n=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{const s=n[0]*Math.PI/180;n=[ut(s,.213,.787,-.213),ut(s,.715,-.715,-.715),ut(s,.072,-.072,.928),0,0,ut(s,.213,-.213,.143),ut(s,.715,.285,.14),ut(s,.072,-.072,-.283),0,0,ut(s,.213,-.213,-.787),ut(s,.715,-.715,.715),ut(s,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=n,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}}class Qt extends X{apply(t,e){const{document:i}=this;let n=this.getAttribute("x").getPixels("x"),s=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),r=this.getStyle("height").getPixels("y");if(!o&&!r){const d=new ot;this.children.forEach(p=>{d.addBoundingBox(p.getBoundingBox(t))}),n=Math.floor(d.x1),s=Math.floor(d.y1),o=Math.floor(d.width),r=Math.floor(d.height)}const l=this.removeStyles(e,Qt.ignoreStyles),h=i.createCanvas(n+o,s+r),a=h.getContext("2d");i.screen.setDefaults(a),this.renderChildren(a),new Oi(i,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(a,0,0,n+o,s+r);const u=i.createCanvas(n+o,s+r),f=u.getContext("2d");i.screen.setDefaults(f),e.render(f),f.globalCompositeOperation="destination-in",f.fillStyle=a.createPattern(h,"no-repeat"),f.fillRect(0,0,n+o,s+r),t.fillStyle=f.createPattern(u,"no-repeat"),t.fillRect(0,0,n+o,s+r),this.restoreStyles(e,l)}render(t){}constructor(...t){super(...t),this.type="mask"}}Qt.ignoreStyles=["mask","transform","clip-path"];const pi=()=>{};class gs extends X{apply(t){const{document:e}=this,i=Reflect.getPrototypeOf(t),{beginPath:n,closePath:s}=t;i&&(i.beginPath=pi,i.closePath=pi),Reflect.apply(n,t,[]),this.children.forEach(o=>{if(!("path"in o))return;let r="elementTransform"in o?o.elementTransform():null;r||(r=Ct.fromElement(e,o)),r&&r.apply(t),o.path(t),i&&(i.closePath=s),r&&r.unapply(t)}),Reflect.apply(s,t,[]),t.clip(),i&&(i.beginPath=n,i.closePath=s)}render(t){}constructor(...t){super(...t),this.type="clipPath"}}class jt extends X{apply(t,e){const{document:i,children:n}=this,s="getBoundingBox"in e?e.getBoundingBox(t):null;if(!s)return;let o=0,r=0;n.forEach(y=>{const x=y.extraFilterDistance||0;o=Math.max(o,x),r=Math.max(r,x)});const l=Math.floor(s.width),h=Math.floor(s.height),a=l+2*o,u=h+2*r;if(a<1||u<1)return;const f=Math.floor(s.x),d=Math.floor(s.y),p=this.removeStyles(e,jt.ignoreStyles),g=i.createCanvas(a,u),m=g.getContext("2d");i.screen.setDefaults(m),m.translate(-f+o,-d+r),e.render(m),n.forEach(y=>{typeof y.apply=="function"&&y.apply(m,0,0,a,u)}),t.drawImage(g,0,0,a,u,f-o,d-r,a,u),this.restoreStyles(e,p)}render(t){}constructor(...t){super(...t),this.type="filter"}}jt.ignoreStyles=["filter","transform","clip-path"];class ps extends X{apply(t,e,i,n,s){}constructor(t,e,i){super(t,e,i),this.type="feDropShadow",this.addStylesFromStyleDefinition()}}class ms extends X{apply(t,e,i,n,s){}constructor(...t){super(...t),this.type="feMorphology"}}class ys extends X{apply(t,e,i,n,s){}constructor(...t){super(...t),this.type="feComposite"}}class vs extends X{apply(t,e,i,n,s){const{document:o,blurRadius:r}=this,l=o.window?o.window.document.body:null,h=t.canvas;h.id=o.getUniqueId(),l&&(h.style.display="none",l.appendChild(h)),pn(h,e,i,n,s,r),l&&l.removeChild(h)}constructor(t,e,i){super(t,e,i),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}}class bs extends X{constructor(...t){super(...t),this.type="title"}}class xs extends X{constructor(...t){super(...t),this.type="desc"}}const ws={svg:Rt,rect:Ti,circle:Gn,ellipse:Wn,line:$n,polyline:Ei,polygon:Qn,path:U,pattern:jn,marker:Kn,defs:Jn,linearGradient:ts,radialGradient:es,stop:is,animate:Me,animateColor:ns,animateTransform:ss,font:rs,"font-face":Pi,"missing-glyph":Ni,glyph:Pe,text:mt,tspan:$t,tref:os,a:as,textPath:ls,image:us,g:Ee,symbol:cs,style:ki,use:ds,mask:Qt,clipPath:gs,filter:jt,feDropShadow:ps,feMorphology:ms,feComposite:ys,feColorMatrix:Oi,feGaussianBlur:vs,title:bs,desc:xs};function Ss(c,t){const e=document.createElement("canvas");return e.width=c,e.height=t,e}async function Cs(c){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const e=document.createElement("img");return t&&(e.crossOrigin="Anonymous"),new Promise((i,n)=>{e.onload=()=>{i(e)},e.onerror=(s,o,r,l,h)=>{n(h)},e.src=c})}const be=12;class pt{bindCreateImage(t,e){return typeof e=="boolean"?(i,n)=>t(i,typeof n=="boolean"?n:e):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){const{emSizeStack:t}=this;return t[t.length-1]||be}set emSize(t){const{emSizeStack:e}=this;e.push(t)}popEmSize(){const{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(t=>t.loaded)}isFontsLoaded(){return this.fonts.every(t=>t.loaded)}createDocumentElement(t){const e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e,e}createElement(t){const e=t.nodeName.replace(/^[^:]+:/,""),i=pt.elementTypes[e];return i?new i(this,t):new Un(this,t)}createTextNode(t){return new qn(this,t)}setViewBox(t){this.screen.setViewBox({document:this,...t})}constructor(t,{rootEmSize:e=be,emSize:i=be,createCanvas:n=pt.createCanvas,createImage:s=pt.createImage,anonymousCrossOrigin:o}={}){this.canvg=t,this.definitions=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=e,this.emSize=i,this.createCanvas=n,this.createImage=this.bindCreateImage(s,o),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}}pt.createCanvas=Ss;pt.createImage=Cs;pt.elementTypes=ws;class Et{static async from(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=await new ve(i).parse(e);return new Et(t,s,i)}static fromString(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=new ve(i).parseFromString(e);return new Et(t,s,i)}fork(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Et.from(t,e,{...this.options,...i})}forkString(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Et.fromString(t,e,{...this.options,...i})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...t}),await this.ready(),this.stop()}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{documentElement:e,screen:i,options:n}=this;i.start(e,{enableRedraw:!0,...n,...t})}stop(){this.screen.stop()}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(t,e,i)}constructor(t,e,i={}){this.parser=new ve(i),this.screen=new ft(t,i),this.options=i;const n=new pt(this,i),s=n.createDocumentElement(e);this.document=n,this.documentElement=s}}const As={key:0,class:"absolute top-3 right-3 px-2 py-1 text-xs rounded-md bg-black/10 dark:bg-white/10 text-gray-800 dark:text-gray-100 backdrop-blur-sm"},Ts={key:1,class:"absolute left-4 bottom-4 text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2 z-10 p-1 rounded-md bg-white/50 dark:bg-black/50 backdrop-blur-sm"},Es={key:2,class:"absolute inset-0 flex items-center justify-center pointer-events-none z-30"},Ms={class:"pointer-events-auto bg-white/95 dark:bg-gray-900/95 border border-red-300 dark:border-red-700 rounded-lg p-4 max-w-2xl mx-4 shadow-2xl"},Ps={class:"flex items-start gap-3"},Ns={class:"flex-1"},ks={class:"text-xs text-red-700 dark:text-red-400 whitespace-pre-wrap max-h-48 overflow-auto p-2 bg-red-50 dark:bg-red-900/20 rounded-md"},Os={class:"mt-3"},Vs={__name:"InteractiveMermaid",props:{mermaidCode:{type:String,required:!0}},emits:["error","ready"],setup(c,{expose:t,emit:e}){const i=c,n=e,s=it(null),o=it(null);let r=null,l=null;const h=mi(),a=it(""),u=it("Copy Error Message"),f=it(""),d=it(!1),p=E=>({startOnLoad:!1,securityLevel:"loose",theme:E,themeVariables:{fontSize:"15px"}}),g=ct(()=>f.value?`Mermaid: ${f.value.charAt(0).toUpperCase()+f.value.slice(1)}`:"");function m(){d.value=!1,r&&(r.destroy(),r=null),l&&(l.disconnect(),l=null),o.value&&(o.value.innerHTML="")}function y(E){return E&&E.replace(/\[/g,"&#91;").replace(/\]/g,"&#93;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/{/g,"&#123;").replace(/}/g,"&#125;")}function x(E){return E&&E.split(`
`).map(O=>O.replace(/(\b[A-Za-z0-9_]+\s*)([[({])([^\]})]*)([\]})])/g,(B,D,_,k,z)=>{const w=y(k);return`${D}${_}${w}${z}`})).join(`
`)}async function b(){var N;if(m(),a.value="",!i.mermaidCode||!i.mermaidCode.trim())return;const E=`mermaid-svg-${Date.now()}`;try{try{f.value=dt.detectType(i.mermaidCode,{default:{type:"flowchart"}})}catch{f.value="Unknown"}const P=x(i.mermaidCode),O=p(h.currentTheme==="dark"?"dark":"default"),{svg:B}=await dt.render(E,P);o.value&&(o.value.innerHTML=B);const D=(N=o.value)==null?void 0:N.querySelector("svg");if(!D)throw new Error("Mermaid failed to produce an SVG element.");D.removeAttribute("style"),D.setAttribute("xmlns","http://www.w3.org/2000/svg");const _=D.querySelector("g");if(_)try{const k=_.getBBox();k.width>0&&k.height>0&&D.setAttribute("viewBox",`${k.x-20} ${k.y-20} ${k.width+40} ${k.height+40}`)}catch(k){console.warn("Could not get bounding box to trim SVG whitespace.",k)}r=Ji(D,{zoomEnabled:!0,panEnabled:!0,controlIconsEnabled:!1,fit:!0,center:!0,minZoom:.1,maxZoom:20}),l=new ResizeObserver(()=>{r==null||r.resize(),r==null||r.fit(),r==null||r.center()}),l.observe(s.value),d.value=!0,await Ii(),n("ready",{panZoom:r,svg:D})}catch(P){let O="An unknown error occurred during rendering.";P instanceof Error?O=P.message:typeof P=="string"?O=P:P&&typeof P.str=="string"&&(O=P.str),a.value=O,n("error",P)}}function S(){navigator.clipboard.writeText(a.value).then(()=>{u.value="Copied!",setTimeout(()=>{u.value="Copy Error Message"},2e3)})}async function L(){const E=h.currentTheme==="dark"?"dark":"default";try{dt.initialize(p("base"));const N=x(i.mermaidCode),{svg:P}=await dt.render(`export-${Date.now()}`,N);dt.initialize(p(E));const O=document.createElement("div");O.style.position="absolute",O.style.left="-9999px",O.innerHTML=P;const B=O.querySelector("svg");if(!B)throw new Error("Failed to create temporary SVG for export.");document.body.appendChild(O),B.querySelectorAll("*").forEach(M=>{const Z=window.getComputedStyle(M);let Y="";const q=["fill","stroke","stroke-width","stroke-dasharray","font-family","font-size","font-weight","font-style","text-anchor","dominant-baseline","alignment-baseline","letter-spacing","word-spacing","line-height","opacity","visibility","display"];for(const Q of q){const J=Z.getPropertyValue(Q);J&&J!=="none"&&J!=="normal"&&(Y+=`${Q}: ${J}; `)}if(Y&&M.setAttribute("style",Y),M.tagName==="text"||M.tagName==="tspan"){const Q=Z.getPropertyValue("fill");(!Q||Q==="none")&&M.setAttribute("fill","#000")}});const _=B.querySelector("g");if(!_)throw new Error("Main group not found in temp SVG.");const k=_.getBBox();document.body.removeChild(O);const z=20,w=Math.ceil(k.width+z*2),T=Math.ceil(k.height+z*2);return B.setAttribute("viewBox",`${k.x-z} ${k.y-z} ${w} ${T}`),B.setAttribute("width",w),B.setAttribute("height",T),B.setAttribute("style","font-family: Arial, sans-serif;"),{svg:B,width:w,height:T}}catch(N){throw dt.initialize(p(E)),N}}async function R({filename:E="diagram.png",scale:N=3,bgColor:P="#FFFFFF"}={}){try{const{svg:O,width:B,height:D}=await L(),k=new XMLSerializer().serializeToString(O),z=document.createElement("canvas");z.width=B*N,z.height=D*N;const w=z.getContext("2d");P&&(w.fillStyle=P,w.fillRect(0,0,z.width,z.height)),await(await Et.from(w,k,{ignoreClear:!0,ignoreAnimation:!0,scaleX:N,scaleY:N,renderOptions:{enableRedraw:!1,ignoreDimensions:!1,ignoreClear:!0,offsetX:0,offsetY:0}})).render();const M=document.createElement("a");M.href=z.toDataURL("image/png"),M.download=E,document.body.appendChild(M),M.click(),document.body.removeChild(M)}catch(O){throw console.error("PNG Export failed:",O),O}}async function A({filename:E="diagram.svg",bgColor:N=null}={}){try{const{svg:P}=await L();if(N){const z=document.createElementNS("http://www.w3.org/2000/svg","rect");z.setAttribute("width","100%"),z.setAttribute("height","100%"),z.setAttribute("fill",N),P.insertBefore(z,P.firstChild)}const B=`<?xml version="1.0" standalone="no"?>\r
`+new XMLSerializer().serializeToString(P),D=new Blob([B],{type:"image/svg+xml;charset=utf-8"}),_=URL.createObjectURL(D),k=document.createElement("a");k.href=_,k.download=E,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(_)}catch(P){throw console.error("SVG Export failed:",P),P}}function F(){r&&(r.reset(),r.fit(),r.center())}return Ri(()=>{dt.initialize(p(h.currentTheme==="dark"?"dark":"default")),b()}),zi(m),Wt(()=>i.mermaidCode,b),Wt(()=>h.currentTheme,E=>{dt.initialize(p(E==="dark"?"dark":"default")),b()}),t({exportPNG:R,exportSVG:A,resetView:F}),(E,N)=>($(),j("div",{ref_key:"wrapperRef",ref:s,class:"w-full h-full relative bg-gray-50 dark:bg-gray-800/50 overflow-hidden"},[I("div",{ref_key:"mountRef",ref:o,class:"w-full h-full mermaid-container"},null,512),g.value?($(),j("div",As,Ot(g.value),1)):at("",!0),d.value?($(),j("div",Ts,N[0]||(N[0]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 4h-4m4 0l-5-5"})],-1),I("span",null,"Interactive SVG (Pan & Zoom enabled)",-1)]))):at("",!0),a.value?($(),j("div",Es,[I("div",Ms,[I("div",Ps,[N[2]||(N[2]=I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-red-500 dark:text-red-400 flex-none",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.6",d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.6",d:"M12 9v4m0 4h.01"})],-1)),I("div",Ns,[N[1]||(N[1]=I("div",{class:"text-sm font-semibold text-red-800 dark:text-red-200 mb-1"},"Mermaid Rendering Error",-1)),I("pre",ks,Ot(a.value),1),I("div",Os,[I("button",{onClick:S,class:"px-3 py-1 rounded-md bg-red-600 hover:bg-red-700 text-white text-sm text-left"},Ot(u.value),1)])])])])])):at("",!0)],512))}},Rs={key:0,class:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700 flex-shrink-0"},zs={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},Is={class:"flex items-center space-x-2"},Ls=["title"],Ds={key:1,class:"w-full h-full"},Bs=["innerHTML"],_s=["srcdoc"],Fs={key:2,class:"flex items-center justify-center h-full text-gray-500"},Us={key:0,class:"absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-1 bg-gray-900/60 text-white p-2 rounded-lg backdrop-blur-md shadow-lg z-50"},Zs={class:"flex items-center gap-2 pr-2"},Xs={__name:"InteractiveOutputModal",setup(c){const t=mi(),e=it(!1),i=it(null),n=it(null),s=it(t.currentTheme==="dark"?"#1F2937":"#FFFFFF"),o=ct(()=>t.isModalOpen("interactiveOutput")),r=ct(()=>t.modalData("interactiveOutput")),l=ct(()=>{var w;return((w=r.value)==null?void 0:w.contentType)==="mermaid"}),h=ct(()=>{var w;return((w=r.value)==null?void 0:w.contentType)==="svg"}),a=ct(()=>h.value||l.value),u=it(1),f=it(0),d=it(0);let p=!1,g=0,m=0;const y=ct(()=>({transform:`translate(${f.value}px, ${d.value}px) scale(${u.value})`,cursor:p.value?"grabbing":u.value>1?"grab":"default"}));function x(){u.value=1,f.value=0,d.value=0}const b=w=>{if(!h.value)return;const T=.1,M=i.value.getBoundingClientRect(),Z=w.clientX-M.left,Y=w.clientY-M.top,q=u.value+(w.deltaY<0?T:-T)*u.value,Q=Math.min(Math.max(.5,q),10),J=Q-u.value;f.value-=(Z-f.value)*(J/u.value),d.value-=(Y-d.value)*(J/u.value),u.value=Q},S=w=>{!h.value||u.value<=1||(w.preventDefault(),p=!0,g=w.clientX-f.value,m=w.clientY-d.value,window.addEventListener("mousemove",L),window.addEventListener("mouseup",R))},L=w=>{p&&(w.preventDefault(),f.value=w.clientX-g,d.value=w.clientY-m)},R=()=>{p=!1,window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",R)},A=()=>{h.value&&(u.value=Math.min(10,u.value+.25))},F=()=>{h.value&&(u.value=Math.max(.5,u.value-.25))};function E(){t.closeModal("interactiveOutput")}function N(){i.value&&(document.fullscreenElement?document.exitFullscreen():i.value.requestFullscreen().then(()=>{e.value=!0}).catch(w=>{console.warn(`Fullscreen error: ${w.message}`),e.value=!e.value}))}typeof document<"u"&&document.addEventListener("fullscreenchange",()=>{e.value=!!document.fullscreenElement});function P(){var w;l.value?(w=n.value)==null||w.resetView():h.value&&x()}Wt(o,w=>{w||(document.fullscreenElement&&document.exitFullscreen(),e.value=!1,x())}),Wt(()=>t.currentTheme,w=>{s.value=w==="dark"?"#1F2937":"#FFFFFF"});function O(w,T,M){const Z=new Blob([w],{type:M}),Y=URL.createObjectURL(Z),q=document.createElement("a");q.href=Y,q.download=T,document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(Y)}function B(){var w,T;if(l.value)(w=n.value)==null||w.exportSVG({filename:`${r.value.title||"diagram"}.svg`});else if(h.value&&((T=r.value)!=null&&T.htmlContent)){const M=/<svg[\s\S]*?<\/svg>/.exec(r.value.htmlContent);M&&O(M[0],`${r.value.title||"diagram"}.svg`,"image/svg+xml")}}function D(){var w;l.value&&((w=n.value)==null||w.exportPNG({filename:`${r.value.title||"diagram"}.png`,bgColor:s.value}))}function _(){var w;l.value&&((w=r.value)!=null&&w.sourceCode)&&O(r.value.sourceCode,`${r.value.title||"source"}.md`,"text/markdown")}const k=ct(()=>e.value?"w-screen h-screen rounded-none":"w-full max-w-5xl h-[85vh] rounded-lg shadow-2xl"),z=ct(()=>e.value?"p-0":"p-4");return(w,T)=>($(),Xt(qi,{to:"body"},[lt(Fe,{"enter-active-class":"transition-opacity ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Be(()=>[o.value?($(),j("div",{key:0,class:"fixed inset-0 bg-black/70 backdrop-blur-sm z-40 flex items-center justify-center",onClick:_e(E,["self"])},[lt(Fe,{"enter-active-class":"transition-all ease-out duration-300","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all ease-in duration-200","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:Be(()=>{var M,Z;return[I("div",{class:Ue([k.value,"bg-white dark:bg-gray-900 flex flex-col max-h-screen transition-all duration-300 ease-in-out"])},[e.value?at("",!0):($(),j("header",Rs,[I("h3",zs,Ot(((M=r.value)==null?void 0:M.title)||"Interactive Output"),1),I("div",Is,[I("button",{onClick:N,class:"modal-header-btn",title:e.value?"Exit Fullscreen":"Fullscreen"},[e.value?($(),Xt(Ze,{key:0,class:"w-5 h-5"})):($(),Xt(Di,{key:1,class:"w-5 h-5"}))],8,Ls),I("button",{onClick:E,class:"modal-header-btn",title:"Close"},[lt(Bi,{class:"w-5 h-5"})])])])),I("main",{class:Ue(["flex-grow min-h-0 relative",z.value])},[I("div",{ref_key:"viewerRef",ref:i,class:"absolute inset-0 overflow-hidden bg-gray-100 dark:bg-gray-800/50",onWheel:_e(b,["prevent"]),onMousedown:S},[l.value?($(),Xt(Vs,{key:0,"mermaid-code":r.value.sourceCode,ref_key:"mermaidInstance",ref:n},null,8,["mermaid-code"])):(Z=r.value)!=null&&Z.htmlContent?($(),j("div",Ds,[h.value?($(),j("div",{key:0,innerHTML:r.value.htmlContent,style:_i(y.value),class:"w-full h-full transition-transform duration-75"},null,12,Bs)):($(),j("iframe",{key:1,srcdoc:r.value.htmlContent,class:"w-full h-full border-0",sandbox:"allow-scripts allow-same-origin"},null,8,_s))])):($(),j("div",Fs,T[1]||(T[1]=[I("p",null,"No content provided.",-1)])))],544),a.value?($(),j("div",Us,[e.value?($(),j(Ht,{key:0},[I("button",{onClick:N,class:"btn-viewer",title:"Exit Fullscreen"},[lt(Ze,{class:"w-5 h-5"})]),T[2]||(T[2]=I("div",{class:"w-px h-6 bg-white/20 mx-1"},null,-1))],64)):at("",!0),h.value?($(),j(Ht,{key:1},[I("button",{onClick:F,class:"btn-viewer",title:"Zoom Out"},[lt(Fi,{class:"w-5 h-5"})]),I("button",{onClick:P,class:"btn-viewer px-3 text-sm font-mono",title:"Reset View"},Ot(Math.round(u.value*100))+"%",1),I("button",{onClick:A,class:"btn-viewer",title:"Zoom In"},[lt(Ui,{class:"w-5 h-5"})])],64)):at("",!0),l.value?($(),j(Ht,{key:2},[I("button",{onClick:P,class:"btn-viewer",title:"Reset View"},[lt(Gi,{class:"w-5 h-5"})]),T[4]||(T[4]=I("div",{class:"w-px h-6 bg-white/20 mx-1"},null,-1)),I("div",Zs,[T[3]||(T[3]=I("label",{for:"png-bg-color",class:"text-xs font-medium",title:"PNG Background Color"},"BG:",-1)),Zi(I("input",{id:"png-bg-color",type:"color","onUpdate:modelValue":T[0]||(T[0]=Y=>s.value=Y),class:"w-6 h-6 p-0 border-none rounded cursor-pointer bg-transparent"},null,512),[[Xi,s.value]])]),I("button",{onClick:D,class:"btn-viewer",title:"Download as PNG"},"PNG"),I("button",{onClick:B,class:"btn-viewer",title:"Download as SVG"},"SVG"),T[5]||(T[5]=I("div",{class:"w-px h-6 bg-white/20 mx-1"},null,-1)),I("button",{onClick:_,class:"btn-viewer",title:"Download Mermaid Source"},[lt(Hi,{class:"w-5 h-5"})])],64)):at("",!0),h.value?($(),j(Ht,{key:3},[T[6]||(T[6]=I("div",{class:"w-px h-6 bg-white/20 mx-1"},null,-1)),I("button",{onClick:B,class:"btn-viewer",title:"Download as SVG"},[lt(Yi,{class:"w-5 h-5"})])],64)):at("",!0)])):at("",!0)],2)],2)]}),_:1})])):at("",!0)]),_:1})]))}},Gs=Li(Xs,[["__scopeId","data-v-a31f0c6c"]]);export{Gs as default};
