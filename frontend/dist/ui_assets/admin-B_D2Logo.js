const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["ui_assets/index-DltwgrES.js","ui_assets/index-DXnDy7CW.css"])))=>i.map(i=>d[i]);
import{af as ws,u as _s,R as hs,L as n,ag as Da,m as Va,V as bs,N as e,H as S}from"./index-DltwgrES.js";function qa(o,r){try{const w=localStorage.getItem(o);if(w){const R=JSON.parse(w);return{...r,...R}}}catch{localStorage.removeItem(o)}return r}const Ts=(o,r)=>{if(r==="boolean")return typeof o=="string"?o.toLowerCase()==="true":!!o;if(r==="integer"){const w=parseInt(o,10);return isNaN(w)?null:w}if(r==="float"){const w=parseFloat(o);return isNaN(w)?null:w}return o},zs=ws("admin",()=>{const o=_s(),r=hs(),{on:w}=bs(),R=n(null),Q=n(!1),Ga=n([]),W=n(!1),H=n(null),A=n(!1),X=n([]),Y=n(!1),V=n(null),aa=n(!1),u=n([]),ta=n(!1),ea=n([]),p=n([]),ia=n(!1),sa=n([]),f=n([]),na=n(!1),oa=n([]),m=n([]),ra=n(!1),ca=n([]),g=n([]),la=n(!1),da=n([]),y=n([]),ua=n(!1),pa=n([]),v=n([]),fa=n(!1),ma=n([]),ga=n([]),_=n([]),ya=n(!1),l=n([]),P=n(!1),d=n([]),Z=n(!1),h=n([]),k=n(!1),N=n({items:[],total:0,pages:1,categories:[]}),L=n(!1),F=n({items:[],total:0,pages:1,categories:[]}),M=n(!1),x=n({items:[],total:0,pages:1,categories:[]}),I=n(!1),C=n({items:[],total:0,pages:1,categories:[]}),U=n(!1),E=n([]),va=n(!1),ja=n(null),wa=n(!1),_a=n([]),ha=n(!1),ba=n(null),Ta=n(!1),q=n(null),$a=n(!1),za=n([]),Ba=n(!1),O=n([]),Sa=n(!1),Ra=n([]),Aa=n(!1),Pa=n([]),Za=n(!1),ka=n(!1),Na=n(!1),La=n([]),Fa=n(!1),Ma=n([]),xa=n(!1),Ka=n([]),Ia=n(!1),Ja=Da(qa("lollms-app-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"last_update_date",sortOrder:"desc",currentPage:1,pageSize:24})),Qa=Da(qa("lollms-mcp-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"last_update_date",sortOrder:"desc",currentPage:1,pageSize:24})),Wa=Da(qa("lollms-prompt-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"name",sortOrder:"asc",currentPage:1,pageSize:24}));Va(Ja,a=>{localStorage.setItem("lollms-app-filters",JSON.stringify(a))},{deep:!0}),Va(Qa,a=>{localStorage.setItem("lollms-mcp-filters",JSON.stringify(a))},{deep:!0}),Va(Wa,a=>{localStorage.setItem("lollms-prompt-filters",JSON.stringify(a))},{deep:!0});async function Mt(a){var i;if(!a||!["completed","failed","cancelled"].includes(a.status))return;const t=(a.name||"").toLowerCase();if((t.includes("app")||t.includes("mcp"))&&(z(!0),B(!0)),t.includes("prompt")&&D({},!0),t.includes("personality")&&Oa({},!0),t.includes("purge unused temporary files")&&a.status==="completed"){const s=((i=a.result)==null?void 0:i.message)||"Purge completed successfully.";o.addNotification(s,"success",6e3)}t.includes("generate self-signed certificate")&&a.status==="completed"&&(b(!0),o.addNotification("Certificate generated successfully. Reloading settings...","success",6e3)),t.includes("content")&&a.status==="completed"&&o.addNotification("Moderation task completed.","success",6e3),t.includes("generate fun facts")&&a.status==="completed"&&(o.addNotification("Fun Facts Generated!","success"),T(!0),$(!0)),t.includes("install requirement")&&a.status==="completed"&&(St(),o.addNotification("Requirement installed successfully.","success"))}w("task:completed",Mt);async function xt(a){try{const t=await e.post("/api/admin/system/force-all-users-config",a);return o.addNotification(t.data.message,"success"),!0}catch(t){return console.error(t),!1}}async function It(){Q.value=!0;try{const a=await e.get("/api/admin/stats");R.value=a.data}catch{R.value=null}finally{Q.value=!1}}async function Ct(){ha.value=!0;try{const a=await e.get("/api/admin/ws-connections");_a.value=a.data}catch{_a.value=[]}finally{ha.value=!1}}async function Ut(){if(!q.value){$a.value=!0;try{const a=await e.get("/api/admin/global-generation-stats");q.value=a.data}catch{q.value=null}finally{$a.value=!1}}}async function Ca(){wa.value=!0;try{const a=await e.get("/api/admin/system-status");ja.value=a.data}finally{wa.value=!1}}async function Et(a=!1){if(!(!a&&Ma.value.length>0)){xa.value=!0;try{const t=await e.get("/api/admin/system/logs");Ma.value=t.data}catch{o.addNotification("Failed to fetch system logs.","error")}finally{xa.value=!1}}}async function Ot(){if(!ba.value){Ta.value=!0;try{const a=await e.get("/api/admin/server-info");ba.value=a.data}finally{Ta.value=!1}}}async function Dt(){Ba.value=!0;try{const a=await e.get("/api/admin/model-usage-stats");za.value=a.data||[]}catch(a){console.error("Failed to fetch model usage stats:",a),za.value=[]}finally{Ba.value=!1}}async function b(a=!1){if(!(!a&&X.value.length>0)){Y.value=!0;try{const t=await e.get("/api/admin/settings");X.value=t.data.map(i=>({...i,value:Ts(i.value,i.type)}))}finally{Y.value=!1}}}async function Vt(a){await e.put("/api/admin/settings",{configs:a}),await b(!0),o.addNotification("Settings updated.","success")}async function qt(a=!1){if(!(!a&&V.value)){aa.value=!0;try{const t=await e.get("/api/admin/ai-bot-settings");V.value=t.data}finally{aa.value=!1}}}async function Gt(a){const t=await e.put("/api/admin/ai-bot-settings",a);V.value=t.data,o.addNotification("AI Bot user settings updated.","success")}async function jt(a=!1){if(!(!a&&u.value.length>0)){ta.value=!0;try{const t=await e.get("/api/admin/bindings");u.value=t.data}finally{ta.value=!1}}}async function Kt(a=!1){if(!a&&ea.value.length>0)return;const t=await e.get("/api/admin/bindings/available_types");ea.value=t.data}async function Jt(a){const t=await e.post("/api/admin/bindings",a);u.value.push(t.data),o.addNotification(`Binding '${t.data.alias}' created.`,"success")}async function Qt(a,t){const i=await e.put(`/api/admin/bindings/${a}`,t),s=u.value.findIndex(c=>c.id===a);s!==-1&&(u.value[s]=i.data),o.addNotification(`Binding '${i.data.alias}' updated.`,"success")}async function Wt(a){await e.delete(`/api/admin/bindings/${a}`),u.value=u.value.filter(t=>t.id!==a),o.addNotification("Binding deleted.","success")}async function Ht(a=!1){if(!(!a&&p.value.length>0)){ia.value=!0;try{const t=await e.get("/api/admin/tti-bindings");p.value=t.data}finally{ia.value=!1}}}async function Xt(a=!1){if(!a&&sa.value.length>0)return;const t=await e.get("/api/admin/tti-bindings/available_types");sa.value=t.data}async function Yt(a){const t=await e.post("/api/admin/tti-bindings",a);p.value.push(t.data),o.addNotification(`TTI Binding '${t.data.alias}' created.`,"success")}async function ae(a,t){const i=await e.put(`/api/admin/tti-bindings/${a}`,t),s=p.value.findIndex(c=>c.id===a);s!==-1&&(p.value[s]=i.data),o.addNotification(`TTI Binding '${i.data.alias}' updated.`,"success")}async function te(a){await e.delete(`/api/admin/tti-bindings/${a}`),p.value=p.value.filter(t=>t.id!==a),o.addNotification("TTI Binding deleted.","success")}async function ee(a=!1){if(!(!a&&f.value.length>0)){na.value=!0;try{const t=await e.get("/api/admin/tts-bindings");f.value=t.data}finally{na.value=!1}}}async function ie(a=!1){if(!a&&oa.value.length>0)return;const t=await e.get("/api/admin/tts-bindings/available_types");oa.value=t.data}async function se(a){const t=await e.post("/api/admin/tts-bindings",a);f.value.push(t.data),o.addNotification(`TTS Binding '${t.data.alias}' created.`,"success")}async function ne(a,t){const i=await e.put(`/api/admin/tts-bindings/${a}`,t),s=f.value.findIndex(c=>c.id===a);s!==-1&&(f.value[s]=i.data),o.addNotification(`TTS Binding '${i.data.alias}' updated.`,"success")}async function oe(a){await e.delete(`/api/admin/tts-bindings/${a}`),f.value=f.value.filter(t=>t.id!==a),o.addNotification("TTS Binding deleted.","success")}async function re(a=!1){if(!(!a&&m.value.length>0)){ra.value=!0;try{const t=await e.get("/api/admin/stt-bindings");m.value=t.data}finally{ra.value=!1}}}async function ce(a=!1){if(!a&&ca.value.length>0)return;const t=await e.get("/api/admin/stt-bindings/available_types");ca.value=t.data}async function le(a){const t=await e.post("/api/admin/stt-bindings",a);m.value.push(t.data),o.addNotification(`STT Binding '${t.data.alias}' created.`,"success")}async function de(a,t){const i=await e.put(`/api/admin/stt-bindings/${a}`,t),s=m.value.findIndex(c=>c.id===a);s!==-1&&(m.value[s]=i.data),o.addNotification(`STT Binding '${i.data.alias}' updated.`,"success")}async function ue(a){await e.delete(`/api/admin/stt-bindings/${a}`),m.value=m.value.filter(t=>t.id!==a),o.addNotification("STT Binding deleted.","success")}async function pe(a=!1){if(!(!a&&g.value.length>0)){la.value=!0;try{const t=await e.get("/api/admin/ttv-bindings");g.value=t.data}finally{la.value=!1}}}async function fe(a=!1){if(!a&&da.value.length>0)return;const t=await e.get("/api/admin/ttv-bindings/available_types");da.value=t.data}async function me(a){const t=await e.post("/api/admin/ttv-bindings",a);g.value.push(t.data),o.addNotification(`TTV Binding '${t.data.alias}' created.`,"success")}async function ge(a,t){const i=await e.put(`/api/admin/ttv-bindings/${a}`,t),s=g.value.findIndex(c=>c.id===a);s!==-1&&(g.value[s]=i.data),o.addNotification(`TTV Binding '${i.data.alias}' updated.`,"success")}async function ye(a){await e.delete(`/api/admin/ttv-bindings/${a}`),g.value=g.value.filter(t=>t.id!==a),o.addNotification("TTV Binding deleted.","success")}async function ve(a=!1){if(!(!a&&y.value.length>0)){ua.value=!0;try{const t=await e.get("/api/admin/ttm-bindings");y.value=t.data}finally{ua.value=!1}}}async function we(a=!1){if(!a&&pa.value.length>0)return;const t=await e.get("/api/admin/ttm-bindings/available_types");pa.value=t.data}async function _e(a){const t=await e.post("/api/admin/ttm-bindings",a);y.value.push(t.data),o.addNotification(`TTM Binding '${t.data.alias}' created.`,"success")}async function he(a,t){const i=await e.put(`/api/admin/ttm-bindings/${a}`,t),s=y.value.findIndex(c=>c.id===a);s!==-1&&(y.value[s]=i.data),o.addNotification(`TTM Binding '${i.data.alias}' updated.`,"success")}async function be(a){await e.delete(`/api/admin/ttm-bindings/${a}`),y.value=y.value.filter(t=>t.id!==a),o.addNotification("TTM Binding deleted.","success")}async function Te(a=!1){if(!(!a&&v.value.length>0)){fa.value=!0;try{const t=await e.get("/api/admin/rag-bindings");v.value=t.data}catch(t){console.error(t)}finally{fa.value=!1}}}async function $e(a=!1){if(!(!a&&ma.value.length>0))try{const t=await e.get("/api/admin/rag-bindings/available_types");ma.value=t.data}catch(t){console.error(t)}}async function ze(a){const t=await e.post("/api/admin/rag-bindings",a);v.value.push(t.data),o.addNotification(`RAG Binding '${t.data.alias}' created.`,"success")}async function Be(a,t){const i=await e.put(`/api/admin/rag-bindings/${a}`,t),s=v.value.findIndex(c=>c.id===a);s!==-1&&(v.value[s]=i.data),o.addNotification(`RAG Binding '${i.data.alias}' updated.`,"success")}async function Se(a){await e.delete(`/api/admin/rag-bindings/${a}`),v.value=v.value.filter(t=>t.id!==a),o.addNotification("RAG Binding deleted.","success")}async function Re(a){return(await e.get(`/api/admin/bindings/${a}/models`)).data}async function Ae(a,t){return(await e.post(`/api/admin/bindings/${a}/context-size`,{model_name:t})).data.ctx_size}async function Pe(a,t){const i=await e.put(`/api/admin/bindings/${a}/alias`,t),s=u.value.findIndex(c=>c.id===a);s!==-1&&(u.value[s]=i.data)}async function Ze(a,t){const i=await e.delete(`/api/admin/bindings/${a}/alias`,{data:{original_model_name:t}}),s=u.value.findIndex(c=>c.id===a);s!==-1&&(u.value[s]=i.data)}async function ke(a,t,i={}){return(await e.post(`/api/admin/bindings/${a}/execute_command`,{command_name:t,parameters:i})).data}async function Ne(a){return(await e.get(`/api/admin/tti-bindings/${a}/models`)).data}async function Le(a,t){const i=await e.put(`/api/admin/tti-bindings/${a}/alias`,t),s=p.value.findIndex(c=>c.id===a);s!==-1&&(p.value[s]=i.data)}async function Fe(a,t){const i=await e.delete(`/api/admin/tti-bindings/${a}/alias`,{data:{original_model_name:t}}),s=p.value.findIndex(c=>c.id===a);s!==-1&&(p.value[s]=i.data)}async function Me(a,t,i={}){return(await e.post(`/api/admin/tti-bindings/${a}/execute_command`,{command_name:t,parameters:i})).data}async function xe(a){return(await e.get(`/api/admin/tts-bindings/${a}/models`)).data}async function Ie(a,t){const i=await e.put(`/api/admin/tts-bindings/${a}/alias`,t),s=f.value.findIndex(c=>c.id===a);s!==-1&&(f.value[s]=i.data)}async function Ce(a,t){const i=await e.delete(`/api/admin/tts-bindings/${a}/alias`,{data:{original_model_name:t}}),s=f.value.findIndex(c=>c.id===a);s!==-1&&(f.value[s]=i.data)}async function Ue(a,t,i={}){return(await e.post(`/api/admin/tts-bindings/${a}/execute_command`,{command_name:t,parameters:i})).data}async function Ee(a){return(await e.get(`/api/admin/stt-bindings/${a}/models`)).data}async function Oe(a,t){const i=await e.put(`/api/admin/stt-bindings/${a}/alias`,t),s=m.value.findIndex(c=>c.id===a);s!==-1&&(m.value[s]=i.data)}async function De(a,t){const i=await e.delete(`/api/admin/stt-bindings/${a}/alias`,{data:{original_model_name:t}}),s=m.value.findIndex(c=>c.id===a);s!==-1&&(m.value[s]=i.data)}async function Ve(a,t,i={}){return(await e.post(`/api/admin/stt-bindings/${a}/execute_command`,{command_name:t,parameters:i})).data}async function qe(a){return(await e.get(`/api/admin/ttv-bindings/${a}/models`)).data}async function Ge(a,t){const i=await e.put(`/api/admin/ttv-bindings/${a}/alias`,t),s=g.value.findIndex(c=>c.id===a);s!==-1&&(g.value[s]=i.data)}async function je(a,t){const i=await e.delete(`/api/admin/ttv-bindings/${a}/alias`,{data:{original_model_name:t}}),s=g.value.findIndex(c=>c.id===a);s!==-1&&(g.value[s]=i.data)}async function Ke(a,t,i={}){return(await e.post(`/api/admin/ttv-bindings/${a}/execute_command`,{command_name:t,parameters:i})).data}async function Je(a){return(await e.get(`/api/admin/ttm-bindings/${a}/models`)).data}async function Qe(a,t){const i=await e.put(`/api/admin/ttm-bindings/${a}/alias`,t),s=y.value.findIndex(c=>c.id===a);s!==-1&&(y.value[s]=i.data)}async function We(a,t){const i=await e.delete(`/api/admin/ttm-bindings/${a}/alias`,{data:{original_model_name:t}}),s=y.value.findIndex(c=>c.id===a);s!==-1&&(y.value[s]=i.data)}async function He(a,t,i={}){return(await e.post(`/api/admin/ttm-bindings/${a}/execute_command`,{command_name:t,parameters:i})).data}async function Xe(a){return(await e.get(`/api/admin/rag-bindings/${a}/models`)).data}async function Ye(a,t){const i=await e.put(`/api/admin/rag-bindings/${a}/alias`,t),s=v.value.findIndex(c=>c.id===a);s!==-1&&(v.value[s]=i.data)}async function ai(a,t){const i=await e.delete(`/api/admin/rag-bindings/${a}/alias`,{data:{original_model_name:t}}),s=v.value.findIndex(c=>c.id===a);s!==-1&&(v.value[s]=i.data)}async function ti(a){return(await e.get(`/api/admin/rag-bindings/models-for-type/${a}`)).data}async function ei(a){await e.post("/api/admin/rag/aliases",a),await b(!0),o.addNotification(`Alias '${a.alias_name}' saved.`,"success")}async function ii(a){await e.delete("/api/admin/rag/aliases",{data:{alias_name:a}}),await b(!0),o.addNotification(`Alias '${a}' deleted.`,"success")}async function si(a=!1){if(!(!a&&ga.value.length>0))try{const t=await e.get("/api/admin/rag/available-vectorizers");ga.value=t.data}catch(t){console.error(t)}}async function ni(a=!1){if(!(!a&&_.value.length>0)){ya.value=!0;try{const t=await e.get("/api/apps_zoo/repositories");_.value=t.data}finally{ya.value=!1}}}async function oi(a){return(await e.get(`/api/admin/bindings/${a}/zoo`)).data}async function ri(a,t){const i=await e.post(`/api/admin/bindings/${a}/zoo/install`,{index:t});return r.addTask(i.data),i.data}async function ci(a){return(await e.get(`/api/admin/tti-bindings/${a}/zoo`)).data}async function li(a,t){const i=await e.post(`/api/admin/tti-bindings/${a}/zoo/install`,{index:t});return r.addTask(i.data),i.data}async function di(a){return(await e.get(`/api/admin/tts-bindings/${a}/zoo`)).data}async function ui(a,t){const i=await e.post(`/api/admin/tts-bindings/${a}/zoo/install`,{index:t});return r.addTask(i.data),i.data}async function pi(a){return(await e.get(`/api/admin/stt-bindings/${a}/zoo`)).data}async function fi(a,t){const i=await e.post(`/api/admin/stt-bindings/${a}/zoo/install`,{index:t});return r.addTask(i.data),i.data}async function mi(a){return(await e.get(`/api/admin/ttv-bindings/${a}/zoo`)).data}async function gi(a,t){const i=await e.post(`/api/admin/ttv-bindings/${a}/zoo/install`,{index:t});return r.addTask(i.data),i.data}async function yi(a){return(await e.get(`/api/admin/ttm-bindings/${a}/zoo`)).data}async function vi(a,t){const i=await e.post(`/api/admin/ttm-bindings/${a}/zoo/install`,{index:t});return r.addTask(i.data),i.data}async function Ha(a=!1){if(!(!a&&E.value.length>0)){va.value=!0;try{const t=await e.get("/api/apps_zoo/installed");E.value=t.data}finally{va.value=!1}}}async function wi(a=null){const t=a?{port:a}:{};return(await e.get("/api/apps_zoo/get-next-available-port",{params:t})).data.port}async function _i(a){const t=await e.post(`/api/apps_zoo/installed/${a}/start`);r.addTask(t.data)}async function hi(a){const t=await e.post(`/api/apps_zoo/installed/${a}/stop`);r.addTask(t.data)}async function bi(a){const t=await e.post(`/api/apps_zoo/installed/${a}/restart`);r.addTask(t.data)}async function Ti(a){const t=await e.post(`/api/apps_zoo/installed/${a}/update`);r.addTask(t.data)}async function $i(a){await e.delete(`/api/apps_zoo/installed/${a}`),await z(!0),await B(!0),o.addNotification("Item uninstalled.","success")}async function zi(a,t){await e.put(`/api/apps_zoo/installed/${a}`,t),await z(!0),await B(!0)}async function Bi(a){return(await e.get(`/api/apps_zoo/installed/${a}/logs`)).data.log_content}async function Si(a){return(await e.get(`/api/apps_zoo/installed/${a}/config-schema`)).data}async function Ri(a){return(await e.get(`/api/apps_zoo/installed/${a}/config`)).data}async function Ai(a,t){await e.put(`/api/apps_zoo/installed/${a}/config`,t)}async function Pi(a){return(await e.get(`/api/apps_zoo/installed/${a}/env`)).data}async function Zi(a,t){await e.put(`/api/apps_zoo/installed/${a}/env`,{content:t}),o.addNotification(".env file saved.","success")}async function ki(a){await e.delete(`/api/apps/${a}`),await z(!0),o.addNotification("App registration removed.","success")}async function Ni(a){await e.delete(`/api/mcps/${a}`),await B(!0),o.addNotification("MCP registration removed.","success")}async function Li(){const a=await e.post("/api/apps_zoo/sync-installs");r.addTask(a.data)}async function Fi(a){const t=await e.post("/api/apps_zoo/purge-broken",{item_type:a.item_type||"app",folder_name:a.folder_name});r.addTask(t.data)}async function Mi(a){const t=await e.post("/api/apps_zoo/fix-broken",{item_type:a.item_type||"app",folder_name:a.folder_name});r.addTask(t.data)}function xi(a){if(!E.value)return;const t=E.value.find(i=>i.id===a.id);t?(a.status&&(t.status=a.status),a.is_installed!==void 0&&(t.is_installed=a.is_installed)):Ha(!0)}async function T(a=!1){if(!(!a&&O.value.length>0)){Sa.value=!0;try{const t=await e.get("/api/admin/fun-facts");O.value=t.data}finally{Sa.value=!1}}}async function $(a=!1){if(!(!a&&Ra.value.length>0)){Aa.value=!0;try{const t=await e.get("/api/admin/fun-facts/categories");Ra.value=t.data}finally{Aa.value=!1}}}async function Ii(a){await e.post("/api/admin/fun-facts",a),await T(!0)}async function Ci(a,t){await e.put(`/api/admin/fun-facts/${a}`,t),await T(!0)}async function Ui(a){await e.delete(`/api/admin/fun-facts/${a}`),O.value=O.value.filter(t=>t.id!==a)}async function Ei(a){await e.post("/api/admin/fun-facts/categories",a),await $(!0)}async function Oi(a,t){await e.put(`/api/admin/fun-facts/categories/${a}`,t),await $(!0)}async function Di(a){await e.delete(`/api/admin/fun-facts/categories/${a}`),await Promise.all([$(!0),T(!0)])}async function Vi(){const a=await e.get("/api/admin/fun-facts/export",{responseType:"blob"}),t=URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");i.href=t,i.download="fun_facts_export.json",i.click(),URL.revokeObjectURL(t)}async function qi(a,t){const i=await e.get(`/api/admin/fun-facts/categories/${a}/export`,{responseType:"blob"}),s=URL.createObjectURL(new Blob([i.data])),c=document.createElement("a");c.href=s,c.download=`fun_facts_${t}.json`,c.click(),URL.revokeObjectURL(s)}async function Gi(a){const t={fun_facts:a},i=await e.post("/api/admin/fun-facts/import",t);await Promise.all([T(!0),$(!0)]),o.addNotification(`Imported ${i.data.facts_created} facts and ${i.data.categories_created} new categories.`,"success")}async function ji(a){const t=new FormData;t.append("file",a);const i=await e.post("/api/admin/fun-facts/categories/import",t);await Promise.all([T(!0),$(!0)]),o.addNotification(`Imported ${i.data.facts_created} facts for category.`,"success")}async function Ki(a,t){let i;typeof a=="object"?i=a:i={content:a,category:t,source_type:"topic"};const s=await e.post("/api/admin/fun-facts/generate-from-prompt",i);return r.addTask(s.data),s.data}async function Ua(a=!1){if(!(!a&&Pa.value.length>0)){Za.value=!0;try{const t=await e.get("/api/admin/news-articles");Pa.value=t.data}finally{Za.value=!1}}}async function Ji(a,t){await e.put(`/api/admin/news-articles/${a}`,t),await Ua(!0),o.addNotification("Article updated.","success")}async function Qi(a){await e.post("/api/admin/news-articles/batch-delete",{article_ids:a}),await Ua(!0),o.addNotification(`${a.length} article(s) deleted.`,"success")}async function Ea(a={}){W.value=!0;try{const t=await e.get("/api/admin/users",{params:a});Ga.value=t.data}finally{W.value=!1}}async function Wi(a){await e.post(`/api/admin/users/${a}/activate`),o.addNotification("User activated.","success"),Ea()}async function Hi(a){try{return(await e.get(`/api/admin/users/${a}/stats`)).data}catch{return null}}async function Xi(a){await e.post("/api/admin/users/batch-update-settings",a),await Ea()}async function Yi(a,t,i,s,c){const vs=await e.post("/api/admin/email-users",{subject:a,body:t,user_ids:i,background_color:s,send_as_text:c});return r.addTask(vs.data),!0}async function as(a,t,i,s){Na.value=!0;try{return(await e.post("/api/admin/enhance-email",{subject:a,body:t,background_color:i,prompt:s})).data}finally{Na.value=!1}}async function ts(a){const t=new FormData;t.append("file",a);const i=await e.post("/api/admin/upload-logo",t);await b(!0),o.addNotification(i.data.message,"success")}async function es(){await e.delete("/api/admin/remove-logo"),await b(!0),o.addNotification("Custom logo removed.","success")}async function is(a,t){const i=new FormData;i.append("file",a),i.append("file_type",t);const s=await e.post("/api/admin/upload-ssl-file",i,{headers:{"Content-Type":"multipart/form-data"}});return await b(!0),s.data.path}async function ss(){var a,t;try{const i=await e.post("/api/admin/generate-cert");return r.addTask(i.data),o.addNotification("Certificate generation task started. Check tasks for progress.","info"),i.data}catch(i){const s=((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.detail)||"Failed to start certificate task.";throw o.addNotification(s,"error"),i}}async function ns(){try{const a=await e.get("/api/admin/download-cert",{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");i.href=t,i.setAttribute("download","lollms_cert.pem"),document.body.appendChild(i),i.click(),i.remove()}catch{o.addNotification("Failed to download certificate.","error")}}async function os(a){try{const t=await e.get("/api/admin/download-trust-script",{params:{script_type:a},responseType:"blob"}),i=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=i;const c=a==="windows"?"bat":"sh";s.setAttribute("download",`install_lollms_cert.${c}`),document.body.appendChild(s),s.click(),s.remove()}catch(t){console.error(t),o.addNotification("Failed to download trust script.","error")}}async function rs(a){ka.value=!0;const t=new FormData;t.append("file",a);try{await e.post("/api/admin/import-openwebui",t)}finally{ka.value=!1}}async function cs(a=!1){if(!(!a&&La.value.length>0)){Fa.value=!0;try{const t=await e.get("/api/admin/available-models");La.value=t.data}finally{Fa.value=!1}}}async function ls(a){const t=await e.post("/api/admin/bindings/generate_icon",{prompt:a});return r.addTask(t.data),t.data}async function ds(){const a=await e.post("/api/admin/rss-feeds/scrape");return r.addTask(a.data),a.data}async function us(){const a=await e.post("/api/admin/refresh-zoo-cache");return r.addTask(a.data),a.data}async function ps(a=null){const t={};return a&&(t.status_filter=a),(await e.get("/api/admin/moderation/queue",{params:t})).data}async function fs(a,t){await e.post(`/api/admin/moderation/${a}/${t}/approve`)}async function ms(a,t){await e.delete(`/api/admin/moderation/${a}/${t}`)}async function Xa(a){const{usePromptsStore:t}=await S(async()=>{const{usePromptsStore:s}=await import("./index-DltwgrES.js").then(c=>c.eK);return{usePromptsStore:s}},__vite__mapDeps([0,1])),i=await e.post("/api/prompts_zoo/installed",a);return await t().fetchPrompts(),i.data}async function Ya(a,t){const{usePromptsStore:i}=await S(async()=>{const{usePromptsStore:s}=await import("./index-DltwgrES.js").then(c=>c.eK);return{usePromptsStore:s}},__vite__mapDeps([0,1]));await e.put(`/api/prompts_zoo/installed/${a}`,t),await i().fetchPrompts()}async function at(a){const{usePromptsStore:t}=await S(async()=>{const{usePromptsStore:i}=await import("./index-DltwgrES.js").then(s=>s.eK);return{usePromptsStore:i}},__vite__mapDeps([0,1]));await e.delete(`/api/prompts_zoo/installed/${a}`),await t().fetchPrompts(),await D({},!0)}async function tt(a){const t=await e.post(`/api/prompts_zoo/installed/${a}/update`);r.addTask(t.data)}async function et(a){const t=await e.post("/api/prompts_zoo/generate_from_prompt",{prompt:a});return r.addTask(t.data),t.data}async function z(a=!1){if(!(!a&&N.value.items.length>0)){L.value=!0;try{const[t,i]=await Promise.all([e.get("/api/apps_zoo/categories"),e.get("/api/apps_zoo/available")]);N.value={...i.data,categories:t.data}}finally{L.value=!1}}}async function it(a){const t=await e.post("/api/apps_zoo/install",a);r.addTask(t.data)}async function st(a,t){return(await e.get("/api/apps_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function B(a=!1){if(!(!a&&F.value.items.length>0)){M.value=!0;try{const[t,i]=await Promise.all([e.get("/api/mcps_zoo/categories"),e.get("/api/mcps_zoo/available")]);F.value={...i.data,categories:t.data}}finally{M.value=!1}}}async function nt(a){const t=await e.post("/api/mcps_zoo/install",a);r.addTask(t.data)}async function ot(a,t){return(await e.get("/api/mcps_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function D(a={},t=!1){if(!(!t&&x.value.items.length>0)){I.value=!0;try{const[i,s]=await Promise.all([e.get("/api/prompts_zoo/categories"),e.get("/api/prompts_zoo/available",{params:a})]);x.value={...s.data,categories:i.data}}finally{I.value=!1}}}async function rt(a){const t=await e.post("/api/prompts_zoo/install",a);r.addTask(t.data)}async function ct(a,t){return(await e.get("/api/prompts_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function Oa(a={},t=!1){if(!(!t&&C.value.items.length>0)){U.value=!0;try{const[i,s]=await Promise.all([e.get("/api/personalities_zoo/categories"),e.get("/api/personalities_zoo/available",{params:a})]);C.value={...s.data,categories:i.data}}catch(i){console.error(i)}finally{U.value=!1}}}async function lt(a){const t=await e.post("/api/personalities_zoo/install",a);r.addTask(t.data)}async function dt(a,t){return(await e.get("/api/personalities_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function ut(a=!1){if(!(!a&&l.value.length>0)){P.value=!0;try{const t=await e.get("/api/mcps_zoo/repositories");l.value=t.data}finally{P.value=!1}}}async function pt(a){const t=await e.post("/api/mcps_zoo/repositories",a);l.value.push(t.data)}async function ft(a){await e.delete(`/api/mcps_zoo/repositories/${a}`),l.value=l.value.filter(t=>t.id!==a)}async function G(a){const t=await e.post(`/api/mcps_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function mt(){for(const a of l.value)await G(a.id)}async function gt(a=!1){if(!(!a&&d.value.length>0)){Z.value=!0;try{const t=await e.get("/api/prompts_zoo/repositories");d.value=t.data}finally{Z.value=!1}}}async function yt(a){const t=await e.post("/api/prompts_zoo/repositories",a);d.value.push(t.data)}async function vt(a){await e.delete(`/api/prompts_zoo/repositories/${a}`),d.value=d.value.filter(t=>t.id!==a)}async function j(a){const t=await e.post(`/api/prompts_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function wt(){for(const a of d.value)await j(a.id)}async function _t(a=!1){if(!(!a&&h.value.length>0)){k.value=!0;try{const t=await e.get("/api/personalities_zoo/repositories");h.value=t.data}catch(t){console.error(t)}finally{k.value=!1}}}async function ht(a){const t=await e.post("/api/personalities_zoo/repositories",a);h.value.push(t.data)}async function bt(a){await e.delete(`/api/personalities_zoo/repositories/${a}`),h.value=h.value.filter(t=>t.id!==a)}async function Tt(a){const t=await e.post(`/api/personalities_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function $t(a){const t=await e.post("/api/apps_zoo/repositories",a);_.value.push(t.data)}async function zt(a){await e.delete(`/api/apps_zoo/repositories/${a}`),_.value=_.value.filter(t=>t.id!==a)}async function K(a){const t=await e.post(`/api/apps_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function Bt(){for(const a of _.value)await K(a.id)}async function St(){Ia.value=!0;try{const a=await e.get("/api/admin/system/requirements");Ka.value=a.data}finally{Ia.value=!1}}async function gs(a,t){const i=await e.post("/api/admin/system/requirements/install",{name:a,version:t});r.addTask(i.data)}async function J(){A.value=!0;try{const a=await e.get("/api/admin/services/dashboard");H.value=a.data}finally{A.value=!1}}async function Rt(){await e.post("/api/admin/services/reset-usage"),await J(),o.addNotification("Usage statistics reset.","success")}async function At(a){const t=await e.post("/api/admin/backup/create",{password:a});return r.addTask(t.data),t.data}async function Pt(){try{const a=await e.post("/api/admin/system/analyze-logs");return r.addTask(a.data),a.data}catch(a){throw o.addNotification("Failed to start log analysis.","error"),a}}async function Zt(){const a=await e.post("/api/admin/purge-unused-uploads");r.addTask(a.data)}async function kt(){const a=await e.post("/api/admin/trigger-moderation");r.addTask(a.data)}async function Nt(){const a=await e.post("/api/admin/trigger-full-remoderation");r.addTask(a.data)}async function Lt(a){await e.post("/api/admin/broadcast",{message:a})}async function Ft(a){await e.post("/api/admin/system/kill-process",{pid:a}),o.addNotification(`Process ${a} killed.`,"success"),Ca()}async function ys(){const a=await e.post("/api/admin/system/requirements/fix-all");r.addTask(a.data)}return{dashboardStats:R,isLoadingDashboardStats:Q,allUsers:Ga,isLoadingUsers:W,serviceStats:H,isLoadingServiceStats:A,globalSettings:X,isLoadingSettings:Y,aiBotSettings:V,isLoadingAiBotSettings:aa,bindings:u,isLoadingBindings:ta,availableBindingTypes:ea,ttiBindings:p,isLoadingTtiBindings:ia,availableTtiBindingTypes:sa,ttsBindings:f,isLoadingTtsBindings:na,availableTtsBindingTypes:oa,sttBindings:m,isLoadingSttBindings:ra,availableSttBindingTypes:ca,ttvBindings:g,isLoadingTtvBindings:la,availableTtvBindingTypes:da,ttmBindings:y,isLoadingTtmBindings:ua,availableTtmBindingTypes:pa,ragBindings:v,isLoadingRagBindings:fa,availableRagBindingTypes:ma,availableRagVectorizers:ga,zooRepositories:_,isLoadingZooRepositories:ya,mcpZooRepositories:l,isLoadingMcpZooRepositories:P,promptZooRepositories:d,isLoadingPromptZooRepositories:Z,personalityZooRepositories:h,isLoadingPersonalityZooRepositories:k,zooApps:N,isLoadingZooApps:L,zooMcps:F,isLoadingZooMcps:M,zooPrompts:x,isLoadingZooPrompts:I,zooPersonalities:C,isLoadingZooPersonalities:U,installedApps:E,isLoadingInstalledApps:va,systemStatus:ja,isLoadingSystemStatus:wa,connectedUsers:_a,isLoadingConnectedUsers:ha,serverInfo:ba,isLoadingServerInfo:Ta,globalGenerationStats:q,isLoadingGlobalGenerationStats:$a,modelUsageStats:za,isLoadingModelUsageStats:Ba,funFacts:O,isLoadingFunFacts:Sa,funFactCategories:Ra,isLoadingFunFactCategories:Aa,newsArticles:Pa,isLoadingNewsArticles:Za,isImporting:ka,isEnhancingEmail:Na,adminAvailableLollmsModels:La,isLoadingLollmsModels:Fa,appFilters:Ja,mcpFilters:Qa,promptFilters:Wa,systemLogs:Ma,isLoadingSystemLogs:xa,systemRequirements:Ka,isLoadingRequirements:Ia,forceAllUsersConfig:xt,fetchDashboardStats:It,fetchConnectedUsers:Ct,broadcastMessage:Lt,createBackup:At,analyzeSystemLogs:Pt,fetchServiceDashboard:J,resetServiceUsage:Rt,fetchSystemStatus:Ca,killProcess:Ft,fetchModelUsageStats:Dt,fetchServerInfo:Ot,purgeUnusedUploads:Zt,fetchAllUsers:Ea,activateUser:Wi,fetchUserStats:Hi,batchUpdateUsers:Xi,fetchGlobalGenerationStats:Ut,fetchGlobalSettings:b,updateGlobalSettings:Vt,fetchAiBotSettings:qt,updateAiBotSettings:Gt,triggerBatchModeration:kt,triggerFullRemoderation:Nt,uploadWelcomeLogo:ts,removeWelcomeLogo:es,uploadSslFile:is,importOpenWebUIData:rs,fetchAdminAvailableLollmsModels:cs,generateIconForModel:ls,fetchBindings:jt,fetchAvailableBindingTypes:Kt,addBinding:Jt,updateBinding:Qt,deleteBinding:Wt,fetchBindingModels:Re,getModelCtxSize:Ae,saveModelAlias:Pe,deleteModelAlias:Ze,executeBindingCommand:ke,fetchTtiBindings:Ht,fetchAvailableTtiBindingTypes:Xt,addTtiBinding:Yt,updateTtiBinding:ae,deleteTtiBinding:te,fetchTtiBindingModels:Ne,saveTtiModelAlias:Le,deleteTtiModelAlias:Fe,executeTtiBindingCommand:Me,fetchTtsBindings:ee,fetchAvailableTtsBindingTypes:ie,addTtsBinding:se,updateTtsBinding:ne,deleteTtsBinding:oe,fetchTtsBindingModels:xe,saveTtsModelAlias:Ie,deleteTtsModelAlias:Ce,executeTtsBindingCommand:Ue,fetchSttBindings:re,fetchAvailableSttBindingTypes:ce,addSttBinding:le,updateSttBinding:de,deleteSttBinding:ue,fetchSttBindingModels:Ee,saveSttModelAlias:Oe,deleteSttModelAlias:De,executeSttBindingCommand:Ve,fetchTtvBindings:pe,fetchAvailableTtvBindingTypes:fe,addTtvBinding:me,updateTtvBinding:ge,deleteTtvBinding:ye,fetchTtvBindingModels:qe,saveTtvModelAlias:Ge,deleteTtvModelAlias:je,executeTtvBindingCommand:Ke,fetchTtmBindings:ve,fetchAvailableTtmBindingTypes:we,addTtmBinding:_e,updateTtmBinding:he,deleteTtmBinding:be,fetchTtmBindingModels:Je,saveTtmModelAlias:Qe,deleteTtmModelAlias:We,executeTtmBindingCommand:He,fetchRagBindings:Te,fetchAvailableRagBindingTypes:$e,addRagBinding:ze,updateRagBinding:Be,deleteRagBinding:Se,fetchRagBindingModels:Xe,saveRagModelAlias:Ye,deleteRagModelAlias:ai,fetchRagModelsForType:ti,addOrUpdateRagAlias:ei,deleteRagAlias:ii,fetchAvailableRagVectorizers:si,fetchZooRepositories:ni,addZooRepository:$t,deleteZooRepository:zt,pullZooRepository:K,pullAllZooRepositories:Bt,fetchMcpZooRepositories:ut,addMcpZooRepository:pt,deleteMcpZooRepository:ft,pullMcpZooRepository:G,pullAllMcpZooRepositories:mt,fetchPromptZooRepositories:gt,addPromptZooRepository:yt,deletePromptZooRepository:vt,pullPromptZooRepository:j,pullAllPromptZooRepositories:wt,fetchPersonalityZooRepositories:_t,addPersonalityZooRepository:ht,deletePersonalityZooRepository:bt,pullPersonalityZooRepository:Tt,fetchZooApps:z,installZooApp:it,fetchAppReadme:st,fetchZooMcps:B,installZooMcp:nt,fetchMcpReadme:ot,fetchZooPrompts:D,installZooPrompt:rt,fetchPromptReadme:ct,fetchZooPersonalities:Oa,installZooPersonality:lt,fetchPersonalityReadme:dt,createSystemPrompt:Xa,updateSystemPrompt:Ya,deleteSystemPrompt:at,updateSystemPromptFromZoo:tt,generateSystemPrompt:et,fetchInstalledApps:Ha,fetchNextAvailablePort:wi,startApp:_i,stopApp:hi,restartApp:bi,updateApp:Ti,uninstallApp:$i,updateInstalledApp:zi,fetchAppLog:Bi,fetchAppConfigSchema:Si,fetchAppConfig:Ri,updateAppConfig:Ai,fetchAppEnv:Pi,updateAppEnv:Zi,deleteRegisteredApp:ki,deleteRegisteredMcp:Ni,syncInstallations:Li,purgeBrokenInstallation:Fi,fixBrokenInstallation:Mi,handleAppStatusUpdate:xi,fetchFunFacts:T,fetchFunFactCategories:$,createFunFact:Ii,updateFunFact:Ci,deleteFunFact:Ui,createFunFactCategory:Ei,updateFunFactCategory:Oi,deleteFunFactCategory:Di,exportFunFacts:Vi,exportCategory:qi,importFunFacts:Gi,importCategoryFromFile:ji,generateFunFacts:Ki,fetchNewsArticles:Ua,updateNewsArticle:Ji,deleteBatchNewsArticles:Qi,fetchSystemLogs:Et,sendEmailToUsers:Yi,enhanceEmail:as,triggerRssScraping:ds,refreshZooCache:us,generateSelfSignedCert:ss,downloadCertificate:ns,downloadTrustScript:os,fetchBindingZoo:oi,installLlmFromZoo:ri,fetchTtiBindingZoo:ci,installTtiFromZoo:li,fetchTtsBindingZoo:di,installTtsFromZoo:ui,fetchSttBindingZoo:pi,installSttFromZoo:fi,fetchTtvBindingZoo:mi,installTtvFromZoo:gi,fetchTtmBindingZoo:yi,installTtmFromZoo:vi,fetchModerationQueue:ps,approveContent:fs,deleteContent:ms,fetchRequirements:St,installRequirement:gs,fixAllRequirements:ys}});export{zs as u};
