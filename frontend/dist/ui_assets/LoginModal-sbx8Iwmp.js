import{u as M,a as S,r as a,c as V,o as B,w as L,b as N,d as o,e as j,f as e,g as n,h as f,i as x,v as b,j as v,t as w,k as y,n as U}from"./index-GJY6etPD.js";import{_ as I}from"./GenericModal-Cz02a-9C.js";const P=["disabled"],T={class:"flex items-center justify-between"},q={class:"text-sm"},z=["disabled"],A={key:0,class:"text-red-600 text-sm text-center",role:"alert"},D=["disabled"],E={key:0,class:"flex items-center"},F={key:1},H=["src"],R={class:"text-sm text-center text-gray-600 dark:text-gray-300"},G={__name:"LoginModal",setup(W){const r=M(),l=S(),d=a(""),c=a(""),s=a(!1),i=a(""),g=a(null),u=V(()=>r.ssoClientConfig);B(()=>{r.ssoClientConfig.enabled||r.fetchSsoClientConfig()});function h(){window.location.href="/api/sso-client/login"}L(()=>l.activeModal,m=>{m==="login"&&U(()=>{var t;(t=g.value)==null||t.focus()})});const _=async()=>{i.value="",s.value=!0;try{await r.login(d.value,c.value)}catch{i.value="Incorrect username or password."}finally{s.value=!1}},k=()=>{l.closeModal("login"),l.openModal("register")},C=()=>{l.closeModal("login"),l.openModal("forgotPassword")};return(m,t)=>(o(),N(I,{modalName:"login",title:"Sign in to your account",maxWidthClass:"max-w-md"},{body:j(()=>[e("form",{onSubmit:v(_,["prevent"]),class:"space-y-4"},[e("div",null,[t[2]||(t[2]=e("label",{for:"login-username",class:"block text-sm font-medium"},"Username or Email",-1)),x(e("input",{ref_key:"usernameInput",ref:g,"onUpdate:modelValue":t[0]||(t[0]=p=>d.value=p),type:"text",id:"login-username",required:"",disabled:s.value,class:"input-field mt-1 w-full",placeholder:"your-username",autocomplete:"username"},null,8,P),[[b,d.value]])]),e("div",null,[e("div",T,[t[3]||(t[3]=e("label",{for:"login-password",class:"block text-sm font-medium"},"Password",-1)),e("div",q,[e("a",{onClick:v(C,["prevent"]),href:"#",class:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-500 dark:hover:text-blue-400"}," Forgot password? ")])]),x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=p=>c.value=p),type:"password",id:"login-password",required:"",disabled:s.value,class:"input-field mt-1 w-full",placeholder:"Your password",autocomplete:"current-password"},null,8,z),[[b,c.value]])]),i.value?(o(),n("div",A,w(i.value),1)):f("",!0),e("div",null,[e("button",{type:"submit",class:"btn btn-primary w-full flex justify-center items-center",disabled:s.value},[s.value?(o(),n("span",E,t[4]||(t[4]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",null,"Signing in...",-1)]))):(o(),n("span",F,"Login"))],8,D)]),u.value.enabled?(o(),n("button",{key:1,onClick:h,type:"button",class:"btn btn-secondary w-full flex justify-center items-center gap-2 mt-4"},[u.value.icon_url?(o(),n("img",{key:0,src:u.value.icon_url,alt:"",class:"w-6 h-6"},null,8,H)):f("",!0),y(" "+w(u.value.display_name),1)])):f("",!0),e("div",R,[t[5]||(t[5]=y(" Not a member? ")),e("a",{onClick:v(k,["prevent"]),href:"#",class:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-500 dark:hover:text-blue-400"}," Create an account ")])],32)]),_:1}))}};export{G as default};
