import{a9 as _e,s as k,K as te,aa as ae,E as _,q as oe,d as c,l as r,e as a,R as Ce,u as Se,W as q,c as P,w as z,o as Te,n as L,g as K,j as b,H as G,h as V,z as D,f as p,ao as J,t as h,Q as F,ar as Q,p as w,a0 as Ne,m as I,cS as $e,d4 as Ae,F as T,i as N,aq as X,y as Y,ca as Z,a1 as Ie,M as ee,Y as Ue,a4 as Re,$ as Ve,X as De,au as Fe,ay as je,I as Be,ap as Me,d5 as Pe,ai as ze,T as Le,d6 as Ge}from"./index-BT_1XIF6.js";import{_ as Oe}from"./PageViewLayout-BoyeaKVm.js";const We=_e("notebooks",()=>{const x=k([]),s=k(null),n=k(!1),f=te(),j=ae();async function U(){n.value=!0;try{const i=await _.get("/api/notebooks");x.value=i.data}finally{n.value=!1}}async function O(i){const d=x.value.find(S=>S.id===i);d&&(s.value=d,s.value.tabs||(s.value.tabs=[])),await U();const u=x.value.find(S=>S.id===i);u?(s.value=u,s.value.tabs||(s.value.tabs=[])):s.value=null}async function l(){if(s.value)try{const i=await _.put(`/api/notebooks/${s.value.id}`,{title:s.value.title,content:s.value.content,artefacts:s.value.artefacts,tabs:s.value.tabs});s.value=i.data;const d=x.value.findIndex(u=>u.id===i.data.id);d!==-1&&(x.value[d]=i.data)}catch{f.addNotification("Failed to save notebook.","error")}}async function B(i){if(!s.value)return;const d=new FormData;d.append("file",i);try{await _.post(`/api/notebooks/${s.value.id}/upload`,d),await U(),s.value=x.value.find(u=>u.id===s.value.id),f.addNotification(`Uploaded ${i.name}`,"success")}catch(u){f.addNotification(`Upload failed: ${i.name}. ${u.message}`,"error"),console.error(u)}}async function W(i,d){if(s.value)try{await _.post(`/api/notebooks/${s.value.id}/artefact`,{title:i,content:d}),await U(),s.value=x.value.find(u=>u.id===s.value.id),f.addNotification(`Saved "${i}" as source.`,"success")}catch(u){f.addNotification(`Failed to save source: ${u.message}`,"error")}}async function $(i){if(s.value)try{const d=await _.post(`/api/notebooks/${s.value.id}/scrape`,{url:i});j.addTask(d.data),f.addNotification(`Scraping task started for ${i}`,"info")}catch(d){f.addNotification(`Scrape request failed: ${d.message}`,"error")}}async function R(i,d,u){if(s.value)try{const S=await _.post(`/api/notebooks/${s.value.id}/process`,{prompt:i,input_tab_ids:d,output_type:u});j.addTask(S.data),f.addNotification(`AI processing (${u}) started.`,"info")}catch{f.addNotification("Failed to start AI processing.","error")}}async function M(){if(s.value)try{f.addNotification("Generating title...","info");const i=await _.post(`/api/notebooks/${s.value.id}/generate_title`);s.value.title=i.data.title,f.addNotification("Title updated.","success");const d=x.value.findIndex(u=>u.id===s.value.id);d!==-1&&(x.value[d].title=i.data.title)}catch{f.addNotification("Failed to generate title.","error")}}function A(i="markdown"){if(!s.value)return;const d={id:crypto.randomUUID(),title:"New Tab",type:i,content:"",images:[]};s.value.tabs.push(d),l()}function g(i){if(!s.value)return;const d=s.value.tabs.findIndex(u=>u.id===i);d!==-1&&(s.value.tabs.splice(d,1),l())}function C(){x.value=[],s.value=null}return{notebooks:x,activeNotebook:s,isLoading:n,fetchNotebooks:U,selectNotebook:O,saveActive:l,uploadSource:B,createTextArtefact:W,scrapeUrl:$,processWithAi:R,generateTitle:M,addTab:A,removeTab:g,$reset:C}}),qe={},Ee={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"};function He(x,s){return r(),c("svg",Ee,s[0]||(s[0]=[a("path",{d:"M3.375 3C2.339 3 1.5 3.84 1.5 4.875v.75c0 1.036.84 1.875 1.875 1.875h17.25c1.035 0 1.875-.84 1.875-1.875v-.75C22.5 3.839 21.66 3 20.625 3H3.375z"},null,-1),a("path",{"fill-rule":"evenodd",d:"M3.087 9l.54 9.176A3 3 0 006.62 21h10.757a3 3 0 002.995-2.824L20.913 9H3.087zm6.163 3.75A.75.75 0 0110 12h4a.75.75 0 010 1.5h-4a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)]))}const Ke=oe(qe,[["render",He]]),Je={class:"p-2 space-y-4"},Qe={class:"space-y-1"},Xe=["onClick"],Ye={class:"truncate font-semibold text-sm"},Ze={class:"flex items-center"},et=["onClick"],tt={key:0,class:"absolute inset-0 bg-blue-500/10 border-4 border-dashed border-blue-500 rounded-lg z-50 flex items-center justify-center m-4 pointer-events-none"},at={class:"bg-gray-100 dark:bg-gray-800 border-b dark:border-gray-700 pt-2 px-2 flex flex-col gap-2"},ot={class:"flex items-center justify-between px-2 pb-2"},st={class:"flex items-center gap-2 flex-grow"},lt={key:0,class:"flex items-center gap-2 mr-4 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-3 py-1 rounded-full animate-pulse"},nt={class:"text-xs font-bold uppercase tracking-wide"},rt={class:"bg-white dark:bg-gray-700 rounded-lg p-0.5 flex text-xs font-bold border dark:border-gray-600 flex-shrink-0"},it={class:"flex items-center gap-2"},dt={class:"flex items-center gap-1 overflow-x-auto custom-scrollbar pb-0"},ct=["onClick"],ut=["onClick"],vt={class:"flex-grow flex min-h-0 relative"},pt={class:"flex-grow flex flex-col min-w-0 border-r dark:border-gray-700 relative"},bt={key:0,class:"absolute inset-0 z-30 bg-white/95 dark:bg-gray-900/95 flex flex-col backdrop-blur-sm"},ft={class:"p-4 border-b dark:border-gray-700 flex items-center justify-between shadow-sm bg-white dark:bg-gray-800"},gt={class:"flex items-center gap-3"},yt={class:"font-bold text-sm text-gray-900 dark:text-gray-100"},xt={class:"text-xs text-gray-500 dark:text-gray-400"},ht={class:"text-xs font-mono text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded"},kt={class:"flex-grow overflow-hidden relative"},mt={class:"text-gray-400 shrink-0"},wt={key:1,class:"flex-grow overflow-hidden flex flex-col relative h-full"},_t={key:0,class:"h-full flex flex-col"},Ct={class:"p-2 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50"},St={class:"flex gap-1 bg-white dark:bg-gray-700 rounded p-0.5 border dark:border-gray-600"},Tt={class:"flex-grow overflow-hidden relative"},Nt={key:0,class:"absolute inset-0 overflow-y-auto p-8 custom-scrollbar"},$t={key:1,class:"h-full overflow-y-auto p-4 custom-scrollbar"},At={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},It=["onClick"],Ut={class:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2"},Rt={class:"text-white text-xs truncate"},Vt={key:1,class:"text-center text-gray-500 py-10"},Dt={key:2,class:"h-full overflow-hidden flex flex-col"},Ft={class:"flex-grow overflow-y-auto p-8 custom-scrollbar bg-gray-100 dark:bg-gray-900"},jt={key:2,class:"flex-grow flex items-center justify-center text-gray-400"},Bt={class:"p-4 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},Mt={class:"flex items-center gap-2 mb-2 overflow-x-auto pb-1"},Pt=["onClick"],zt={class:"flex gap-2"},Lt={class:"relative flex-grow"},Gt=["placeholder"],Ot=["value","disabled"],Wt=["disabled"],qt={key:0,class:"text-[10px] text-gray-400 mt-1"},Et={class:"w-72 flex-shrink-0 flex flex-col bg-gray-50/50 dark:bg-gray-900/30 border-l dark:border-gray-700"},Ht={class:"p-3 border-b dark:border-gray-700 flex justify-between items-center"},Kt={class:"flex gap-1"},Jt={class:"flex-grow overflow-y-auto p-2 space-y-2 custom-scrollbar"},Qt={class:"flex items-center justify-between mb-2"},Xt={class:"flex items-center gap-2 min-w-0"},Yt=["title"],Zt={class:"flex items-center"},ea=["onClick"],ta=["onClick"],aa=["onClick"],oa={key:0,class:"text-center py-10 text-[10px] uppercase font-bold text-gray-400 opacity-50 italic px-4"},sa={key:1,class:"h-full flex items-center justify-center text-gray-500 italic text-sm"},la={__name:"NotebookStudioView",setup(x){const s=te(),n=We(),f=Ce(),j=ae(),U=Se(),{notebooks:O,activeNotebook:l}=q(n),{tasks:B}=q(j),{user:W}=q(U),$=k(""),R=k(!1),M=k(null),A=k(!0),g=k(null),C=k(new Set),i=k("text"),d=k("general"),u=k(null),S=P(()=>{var o;return!!((o=W.value)!=null&&o.tti_binding_model_name)}),se=P(()=>d.value==="story"?[{value:"story_structure",label:"Update Structure"},{value:"story_chapter",label:"Write Chapter"},{value:"text",label:"Free Text"}]:[{value:"text",label:"Text"},{value:"images",label:"Images"},{value:"presentation",label:"Slides"}]),m=P(()=>l.value?B.value.find(o=>o.name.includes(l.value.id)&&(o.status==="running"||o.status==="pending")):null),v=P(()=>!l.value||!l.value.tabs?null:l.value.tabs.find(o=>o.id===g.value)||l.value.tabs[0]);z(l,o=>{o&&o.tabs&&o.tabs.length>0?(!g.value||!o.tabs.find(t=>t.id===g.value))&&(g.value=o.tabs[o.tabs.length-1].id):o&&(!o.tabs||o.tabs.length===0)&&n.addTab()},{immediate:!0}),z(()=>{var o,t;return(t=(o=l.value)==null?void 0:o.tabs)==null?void 0:t.length},(o,t)=>{o>t&&m.value&&(g.value=l.value.tabs[o-1].id)}),z(()=>{var o,t;return(t=(o=m.value)==null?void 0:o.logs)==null?void 0:t.length},()=>{Le(()=>{u.value&&(u.value.scrollTop=u.value.scrollHeight)})},{deep:!0}),z(B,o=>{l.value&&o.find(e=>e.status==="completed"&&e.result&&e.result.notebook_id===l.value.id)&&n.fetchNotebooks().then(()=>{n.selectNotebook(l.value.id),l.value.tabs.length>0&&!l.value.tabs.find(e=>e.id===g.value)&&(g.value=l.value.tabs[l.value.tabs.length-1].id)})},{deep:!0});async function le(){try{const o=await _.post("/api/notebooks",{title:"New Research",content:""});await n.fetchNotebooks(),await n.selectNotebook(o.data.id)}catch{s.addNotification("Failed to create notebook.","error")}}async function ne(o){await s.showConfirmation({title:"Delete Notebook?"})&&(await n.selectNotebook(o),await _.delete(`/api/notebooks/${o}`),await n.fetchNotebooks(),n.activeNotebook=null)}async function re(o){o.is_loaded=!o.is_loaded,await n.saveActive()}async function ie(o){await s.showConfirmation({title:"Remove Source?"})&&(l.value.artefacts=l.value.artefacts.filter(t=>t.filename!==o),await n.saveActive())}async function de(o){s.openModal("sourceViewer",{title:o.filename,content:o.content,language:"markdown"})}async function ce(){if(!v.value)return;const{confirmed:o,value:t}=await s.showConfirmation({title:"Send to Chat",message:"Append current tab content to discussion context:",inputType:"select",inputOptions:Object.values(f.discussions).map(e=>({text:e.title,value:e.id})),confirmText:"Send"});if(o&&t){const e=v.value.content||(v.value.type==="gallery"?JSON.stringify(v.value.images):"");await f.appendToDataZone({discussionId:t,content:e}),s.addNotification("Content sent to chat.","success")}}async function ue(o){R.value=!1;const t=Array.from(o.dataTransfer.files);!l.value||t.length===0||(s.addNotification(`Uploading ${t.length} source(s)...`,"info"),await Promise.all(t.map(e=>n.uploadSource(e))))}function ve(){M.value.click()}async function pe(o){const t=Array.from(o.target.files);!l.value||t.length===0||(s.addNotification(`Uploading ${t.length} source(s)...`,"info"),await Promise.all(t.map(e=>n.uploadSource(e))),o.target.value="")}async function be(){if(!l.value)return;const{confirmed:o,value:t}=await s.showConfirmation({title:"Scrape URL",message:"Enter URL to scrape content from:",inputType:"text",inputPlaceholder:"https://example.com",confirmText:"Scrape"});o&&t&&await n.scrapeUrl(t)}async function fe(){l.value&&(await n.selectNotebook(l.value.id),s.addNotification("Notebook refreshed.","success"))}async function ge(){if(!v.value)return;const{confirmed:o,value:t}=await s.showConfirmation({title:"Convert to Source",message:"Enter a title for the new source artefact:",inputType:"text",inputPlaceholder:"My Tab Notes",confirmText:"Convert"});if(o&&t){const e=v.value.content||(v.value.type==="gallery"?JSON.stringify(v.value.images):"");await n.createTextArtefact(t,e)}}function ye(o){g.value=o}async function xe(){n.addTab(),setTimeout(()=>{l.value.tabs.length>0&&(g.value=l.value.tabs[l.value.tabs.length-1].id)},100)}function he(o){confirm("Delete this tab?")&&(n.removeTab(o),g.value===o&&(g.value=l.value.tabs.length>0?l.value.tabs[0].id:null))}function ke(o){C.value.has(o)?C.value.delete(o):C.value.add(o)}function E(){if(!$.value.trim())return;const o=Array.from(C.value);n.processWithAi($.value,o,i.value),$.value="",C.value.clear()}function me(){n.generateTitle()}function we(o){s.openImageViewer({imageList:[{src:o,prompt:"Notebook Image"}],startIndex:0})}return Te(n.fetchNotebooks),(o,t)=>(r(),L(Oe,{title:"Notebook Studio","title-icon":Ge},{sidebar:K(()=>[a("div",Je,[a("button",{onClick:le,class:"btn btn-primary w-full flex items-center justify-center gap-2 py-3"},[p(Y,{class:"w-5 h-5"}),t[18]||(t[18]=I(" New Notebook "))]),a("div",Qe,[(r(!0),c(T,null,N(b(O),e=>{var y;return r(),c("div",{key:e.id,onClick:H=>b(n).selectNotebook(e.id),class:w(["p-3 rounded-xl cursor-pointer flex justify-between items-center group transition-all",((y=b(l))==null?void 0:y.id)===e.id?"bg-blue-600 text-white":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"])},[a("span",Ye,h(e.title),1),a("div",Ze,[a("button",{onClick:G(H=>ne(e.id),["stop"]),class:"opacity-0 group-hover:opacity-100 p-1 hover:text-red-400"},[p(ze,{class:"w-4 h-4"})],8,et)])],10,Xe)}),128))])])]),main:K(()=>[b(l)?(r(),c("div",{key:0,class:"h-full flex flex-col bg-white dark:bg-gray-900 relative",onDragover:t[16]||(t[16]=G(e=>R.value=!0,["prevent"])),onDragleave:t[17]||(t[17]=e=>R.value=!1),onDrop:G(ue,["prevent"])},[R.value?(r(),c("div",tt,t[19]||(t[19]=[a("p",{class:"text-2xl font-black text-blue-600 uppercase"},"Drop Research Sources Here",-1)]))):V("",!0),a("div",at,[a("div",ot,[a("div",st,[m.value?(r(),c("div",lt,[p(J,{class:"w-4 h-4 animate-spin"}),a("span",nt,"Processing... "+h(m.value.progress)+"%",1)])):V("",!0),D(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>b(l).title=e),onBlur:t[1]||(t[1]=(...e)=>b(n).saveActive&&b(n).saveActive(...e)),class:"text-lg font-black bg-transparent border-none focus:ring-0 w-full"},null,544),[[F,b(l).title]]),a("button",{onClick:me,class:"p-1 rounded hover:bg-purple-100 dark:hover:bg-purple-900/50 text-purple-500",title:"Auto-rename with AI"},[p(Q,{class:"w-4 h-4"})]),a("div",rt,[a("button",{onClick:t[2]||(t[2]=e=>d.value="general"),class:w(["px-2 py-1 rounded-md transition-colors",d.value==="general"?"bg-blue-100 text-blue-700":"text-gray-500"])},"General",2),a("button",{onClick:t[3]||(t[3]=e=>d.value="story"),class:w(["px-2 py-1 rounded-md transition-colors",d.value==="story"?"bg-purple-100 text-purple-700":"text-gray-500"])},"Story",2)])]),a("div",it,[a("button",{onClick:fe,class:"btn btn-secondary btn-sm",title:"Refresh"},[p(Ne,{class:"w-4 h-4"})]),a("button",{onClick:ge,class:"btn btn-secondary btn-sm gap-2",title:"Save content as a new source"},[p(Ke,{class:"w-4 h-4"}),t[20]||(t[20]=I(" Src "))]),a("button",{onClick:ce,class:"btn btn-secondary btn-sm gap-2"},[p($e,{class:"w-4 h-4"}),t[21]||(t[21]=I(" To Chat"))]),a("button",{onClick:t[4]||(t[4]=(...e)=>b(n).saveActive&&b(n).saveActive(...e)),class:"btn btn-primary btn-sm gap-2"},[p(Ae,{class:"w-4 h-4"}),t[22]||(t[22]=I(" Save"))])])]),a("div",dt,[(r(!0),c(T,null,N(b(l).tabs,e=>(r(),c("div",{key:e.id,class:w(["group relative flex items-center gap-2 px-4 py-2 rounded-t-lg cursor-pointer transition-colors border-t border-x border-transparent hover:bg-gray-200 dark:hover:bg-gray-700",g.value===e.id?"bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 text-blue-600 dark:text-blue-400 font-bold":"text-gray-500 bg-gray-100 dark:bg-gray-800 border-b border-gray-300 dark:border-gray-600"])},[a("span",{onClick:y=>ye(e.id),class:"text-xs uppercase tracking-wide truncate max-w-[150px]"},h(e.title),9,ct),a("button",{onClick:G(y=>he(e.id),["stop"]),class:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500"},[p(X,{class:"w-3 h-3"})],8,ut)],2))),128)),a("button",{onClick:xe,class:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 mb-1"},[p(Y,{class:"w-4 h-4"})])])]),a("div",vt,[a("div",pt,[m.value?(r(),c("div",bt,[a("div",ft,[a("div",gt,[p(J,{class:"w-5 h-5 text-blue-600 animate-spin"}),a("div",null,[a("h3",yt,h(m.value.name),1),a("p",xt,h(m.value.description),1)])]),a("div",ht,h(m.value.progress)+"% ",1)]),a("div",kt,[a("div",{ref_key:"logsContainer",ref:u,class:"absolute inset-0 overflow-y-auto p-4 font-mono text-xs text-gray-600 dark:text-gray-300 space-y-1"},[(r(!0),c(T,null,N(m.value.logs,(e,y)=>(r(),c("div",{key:y,class:"flex gap-2"},[a("span",mt,"["+h(new Date(e.timestamp).toLocaleTimeString())+"]",1),a("span",{class:w({"text-red-500":e.level==="ERROR","text-yellow-500":e.level==="WARNING"})},h(e.message),3)]))),128))],512)])])):V("",!0),v.value?(r(),c("div",wt,[v.value.type==="markdown"?(r(),c("div",_t,[a("div",Ct,[D(a("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>v.value.title=e),onBlur:t[6]||(t[6]=(...e)=>b(n).saveActive&&b(n).saveActive(...e)),class:"bg-transparent border-none text-sm font-bold text-gray-700 dark:text-gray-300 focus:ring-0",placeholder:"Tab Title"},null,544),[[F,v.value.title]]),a("div",St,[a("button",{onClick:t[7]||(t[7]=e=>A.value=!0),class:w(["p-1 rounded",A.value?"bg-blue-100 text-blue-600":"text-gray-500"])},[p(Z,{class:"w-4 h-4"})],2),a("button",{onClick:t[8]||(t[8]=e=>A.value=!1),class:w(["p-1 rounded",A.value?"text-gray-500":"bg-blue-100 text-blue-600"])},[p(Ie,{class:"w-4 h-4"})],2)])]),a("div",Tt,[A.value?(r(),c("div",Nt,[p(ee,{content:v.value.content,class:"prose dark:prose-invert max-w-none"},null,8,["content"])])):(r(),L(Ue,{key:1,modelValue:v.value.content,"onUpdate:modelValue":t[9]||(t[9]=e=>v.value.content=e),onBlur:b(n).saveActive,class:"h-full"},null,8,["modelValue","onBlur"]))])])):v.value.type==="gallery"?(r(),c("div",$t,[D(a("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>v.value.title=e),onBlur:t[11]||(t[11]=(...e)=>b(n).saveActive&&b(n).saveActive(...e)),class:"w-full mb-4 bg-transparent border-b border-gray-300 dark:border-gray-700 text-lg font-bold p-2",placeholder:"Gallery Title"},null,544),[[F,v.value.title]]),v.value.images&&v.value.images.length>0?(r(),c("div",At,[(r(!0),c(T,null,N(v.value.images,(e,y)=>(r(),c("div",{key:y,class:"relative group aspect-square rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 border dark:border-gray-700 cursor-pointer",onClick:H=>we(e.path)},[p(Re,{src:e.path,class:"w-full h-full object-cover"},null,8,["src"]),a("div",Ut,[a("p",Rt,h(e.prompt),1)])],8,It))),128))])):(r(),c("div",Vt,"No images generated."))])):v.value.type==="slides"?(r(),c("div",Dt,[D(a("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>v.value.title=e),onBlur:t[13]||(t[13]=(...e)=>b(n).saveActive&&b(n).saveActive(...e)),class:"w-full p-2 bg-transparent border-b text-lg font-bold",placeholder:"Presentation Title"},null,544),[[F,v.value.title]]),a("div",Ft,[(r(!0),c(T,null,N(v.value.content.split("---"),(e,y)=>(r(),c("div",{key:y,class:"bg-white dark:bg-gray-800 p-8 shadow-lg rounded-xl mb-8 min-h-[400px] prose dark:prose-invert max-w-none border dark:border-gray-700"},[p(ee,{content:e.trim()},null,8,["content"])]))),128))])])):V("",!0)])):(r(),c("div",jt,"No tab selected.")),a("div",Bt,[a("div",Mt,[t[23]||(t[23]=a("span",{class:"text-xs font-bold text-gray-500 uppercase"},"Input Context:",-1)),(r(!0),c(T,null,N(b(l).tabs,e=>(r(),c("div",{key:"ctx-"+e.id,onClick:y=>ke(e.id),class:w(["px-2 py-1 rounded text-xs cursor-pointer border transition-colors select-none whitespace-nowrap",C.value.has(e.id)?"bg-blue-100 border-blue-300 text-blue-700":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-500"])},h(e.title),11,Pt))),128))]),a("div",zt,[a("div",Lt,[D(a("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>$.value=e),placeholder:d.value==="story"?"Describe the chapter or structural change...":"Ask AI to process selected tabs...",class:"input-field w-full pr-32",onKeyup:Ve(E,["enter"])},null,40,Gt),[[F,$.value]]),D(a("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>i.value=e),class:"absolute right-1 top-1 bottom-1 bg-gray-100 dark:bg-gray-700 border-none text-xs rounded px-2 outline-none cursor-pointer text-gray-600 dark:text-gray-300 font-bold uppercase"},[(r(!0),c(T,null,N(se.value,e=>(r(),c("option",{key:e.value,value:e.value,disabled:e.value==="images"&&!S.value},h(e.label),9,Ot))),128))],512),[[De,i.value]])]),a("button",{onClick:E,disabled:!!m.value,class:"btn btn-primary gap-2 w-24"},[p(Q,{class:"w-4 h-4"}),t[24]||(t[24]=I(" Go "))],8,Wt)]),d.value==="story"?(r(),c("p",qt,t[25]||(t[25]=[I(" Tip: Use "),a("code",null,"<ScanForInfos>query</ScanForInfos>",-1),I(" in prompt or context to trigger agentic lookup. ")]))):V("",!0)])]),a("div",Et,[a("div",Ht,[t[26]||(t[26]=a("span",{class:"font-black text-[10px] uppercase text-gray-500 tracking-widest"},"Research Sources",-1)),a("div",Kt,[a("button",{onClick:ve,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-500",title:"Upload File"},[p(Fe,{class:"w-4 h-4"})]),a("input",{type:"file",ref_key:"fileInput",ref:M,onChange:pe,multiple:"",class:"hidden"},null,544),a("button",{onClick:be,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-500",title:"Scrape URL"},[p(je,{class:"w-4 h-4"})])])]),a("div",Jt,[(r(!0),c(T,null,N(b(l).artefacts,e=>(r(),c("div",{key:e.filename,class:"p-3 bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-700 shadow-sm group hover:shadow-md transition-shadow"},[a("div",Qt,[a("div",Xt,[p(Be,{class:"w-4 h-4 text-blue-400 shrink-0"}),a("span",{class:"text-xs truncate font-bold",title:e.filename},h(e.filename),9,Yt)]),a("div",Zt,[a("button",{onClick:y=>de(e),class:"text-gray-400 hover:text-blue-500 mr-1 opacity-0 group-hover:opacity-100 transition-opacity",title:"View Content"},[p(Z,{class:"w-3.5 h-3.5"})],8,ea),a("button",{onClick:y=>ie(e.filename),class:"text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity"},[p(X,{class:"w-3.5 h-3.5"})],8,ta)])]),a("button",{onClick:y=>re(e),class:w(["w-full flex items-center justify-between text-[10px] font-bold uppercase tracking-tighter px-2 py-1.5 rounded transition-colors",e.is_loaded?"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700 text-gray-500"])},[a("span",null,h(e.is_loaded?"Active":"Inactive"),1),e.is_loaded?(r(),L(Me,{key:0,class:"w-3 h-3"})):(r(),L(Pe,{key:1,class:"w-3 h-3"}))],10,aa)]))),128)),b(l).artefacts.length===0?(r(),c("div",oa," Drop files here or use buttons above to add sources. ")):V("",!0)])])])],32)):(r(),c("div",sa,"Select or create a notebook to begin."))]),_:1}))}},ia=oe(la,[["__scopeId","data-v-b7248f3e"]]);export{ia as default};
