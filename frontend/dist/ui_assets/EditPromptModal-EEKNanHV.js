import{u as S,aB as k,c as n,L as P,k as V,a as C,o as y,w as g,b as e,d as N,t as M,e as U,l as $,K as B,f as m,P as i,p,Y as r,a7 as D,av as E}from"./index-Daq2SOhh.js";import{u as T}from"./admin-TixdI9Gx.js";import{_ as h}from"./GenericModal-DVZopOyZ.js";import{_ as A}from"./IconUploader-Drug6WYg.js";const q={class:"flex items-start gap-4"},I={class:"flex-grow space-y-4"},F={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H={class:"p-3 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 text-blue-800 dark:text-blue-200"},K={class:"flex items-center"},j={__name:"EditPromptModal",setup(L){const s=S(),u=T(),c=k(),d=n(()=>s.modalData("editPrompt")),f=n(()=>{var a;return((a=d.value)==null?void 0:a.isSystemPrompt)||!1}),v=n(()=>{var a,t;return(t=(a=d.value)==null?void 0:a.prompt)==null?void 0:t.id}),b=()=>({name:"",content:"",category:"",author:"",description:"",icon:null}),o=P(b());V(d,a=>{a&&s.isModalOpen("editPrompt")&&(o.value={...b(),...a.prompt||{}})},{immediate:!0,deep:!0});const w=n(()=>{const a=v.value?"Edit":"New",t=f.value?"System":"Personal";return`${a} ${t} Prompt`});async function x(){if(!o.value.name||!o.value.content){s.addNotification("Name and Content are required.","warning");return}try{const{id:a,...t}=o.value;f.value?a?await u.updateSystemPrompt(a,t):await u.createSystemPrompt(t):a?await c.updatePrompt(a,t):await c.createPrompt(t),s.closeModal("editPrompt")}catch{}}return(a,t)=>(y(),C(h,{"modal-name":"editPrompt",title:w.value,"max-width-class":"max-w-4xl"},{body:g(()=>[o.value?(y(),U("form",{key:0,onSubmit:B(x,["prevent"]),class:"space-y-4"},[e("div",q,[m(A,{modelValue:o.value.icon,"onUpdate:modelValue":t[0]||(t[0]=l=>o.value.icon=l),"default-icon-component":"IconTicket"},null,8,["modelValue"]),e("div",I,[e("div",F,[e("div",null,[t[7]||(t[7]=e("label",{for:"prompt-name",class:"block text-sm font-medium"},[p("Name "),e("span",{class:"text-red-500"},"*")],-1)),i(e("input",{id:"prompt-name","onUpdate:modelValue":t[1]||(t[1]=l=>o.value.name=l),type:"text",class:"input-field mt-1",required:""},null,512),[[r,o.value.name]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"prompt-category",class:"block text-sm font-medium"},"Category",-1)),i(e("input",{id:"prompt-category","onUpdate:modelValue":t[2]||(t[2]=l=>o.value.category=l),type:"text",class:"input-field mt-1",placeholder:"e.g., Writing, Coding"},null,512),[[r,o.value.category]])])]),e("div",null,[t[9]||(t[9]=e("label",{for:"prompt-author",class:"block text-sm font-medium"},"Author",-1)),i(e("input",{id:"prompt-author","onUpdate:modelValue":t[3]||(t[3]=l=>o.value.author=l),type:"text",class:"input-field mt-1"},null,512),[[r,o.value.author]])])])]),e("div",null,[t[10]||(t[10]=e("label",{for:"prompt-description",class:"block text-sm font-medium"},"Description",-1)),i(e("textarea",{id:"prompt-description","onUpdate:modelValue":t[4]||(t[4]=l=>o.value.description=l),rows:"2",class:"input-field mt-1"},null,512),[[r,o.value.description]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"prompt-content",class:"block text-sm font-medium"},[p("Content "),e("span",{class:"text-red-500"},"*")],-1)),m(D,{modelValue:o.value.content,"onUpdate:modelValue":t[5]||(t[5]=l=>o.value.content=l),class:"mt-1 h-64"},null,8,["modelValue"])]),e("div",H,[e("div",K,[m(E,{class:"h-5 w-5 mr-2"}),t[12]||(t[12]=e("h4",{class:"font-bold"},"Placeholder Help",-1))]),t[13]||(t[13]=e("div",{class:"mt-2 text-xs space-y-1"},[e("p",null,[e("code",{class:"font-mono bg-blue-200 dark:bg-blue-800/50 px-1 rounded"},"@<name>@"),p(": Simple text replacement.")]),e("p",null,"For advanced options with a user-friendly form:"),e("pre",{class:"whitespace-pre-wrap font-mono text-xs bg-blue-100 dark:bg-blue-900/40 p-2 rounded"},`@<name>@
title (optional): Display Title
type (optional): str | text | int | float | bool
options (optional, only use if you want to fix the value to a restricted subset): comma, separated, list
default (optional): default value
help (optional): A helpful tip for the user.
@</name>@`)],-1))])],32)):$("",!0)]),footer:g(()=>[e("button",{onClick:t[6]||(t[6]=l=>N(s).closeModal("editPrompt")),class:"btn btn-secondary"},"Cancel"),e("button",{onClick:x,class:"btn btn-primary"},M(v.value?"Save Changes":"Create"),1)]),_:1},8,["title"]))}};export{j as default};
