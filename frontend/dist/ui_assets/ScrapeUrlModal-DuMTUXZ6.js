import{_,c as b,o as i,a as t,u as N,aS as D,b as M,r as o,S as q,av as B,f as V,w as I,A as K,h as k,G as U,M as j,t as H,n as h,g as p,bn as T,J as v,i as C,K as m,O as R}from"./index-D2Id9a0s.js";import{_ as Y}from"./GenericModal-_6JiAudK.js";const E={},z={viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};function O(S,r){return i(),b("svg",z,r[0]||(r[0]=[t("path",{d:"M12.0002 0.75C5.79019 0.75 0.750195 5.79 0.750195 12C0.750195 18.21 5.79019 23.25 12.0002 23.25C18.2102 23.25 23.2502 18.21 23.2502 12C23.2502 5.79 18.2102 0.75 12.0002 0.75ZM15.0002 18.75L12.7502 12.75L10.5002 18.75H8.25019L6.00019 7.5H8.25019L9.37519 15.75L11.6252 9H13.8752L16.1252 15.75L17.2502 7.5H19.5002L17.2502 18.75H15.0002Z"},null,-1)]))}const $=_(E,[["render",O]]),Q={},Z={viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};function F(S,r){return i(),b("svg",Z,r[0]||(r[0]=[t("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"},null,-1)]))}const W=_(Q,[["render",F]]),G={class:"space-y-4 p-1"},J={class:"flex border-b border-gray-200 dark:border-gray-700 mb-4"},P={key:0,class:"space-y-4"},X={class:"relative mt-1"},ee={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},te={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},le={class:"flex flex-col justify-end pb-1"},re={class:"relative inline-flex items-center cursor-pointer"},ae={key:1,class:"space-y-4"},se={class:"relative mt-1"},oe={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},ie={key:2,class:"space-y-4"},ne={class:"relative mt-1"},ue={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},de={class:"flex justify-end gap-3"},pe=["disabled"],fe={__name:"ScrapeUrlModal",setup(S){const r=N(),L=D(),A=M(()=>r.modalData("scrapeUrl")),y=M(()=>{var f;return(f=A.value)==null?void 0:f.discussionId}),n=o(""),x=o(0),g=o(!1),s=o(!1),l=o("url"),u=o(""),d=o(""),w=o("");q(()=>r.isModalOpen("scrapeUrl"),async f=>{if(f){n.value="",x.value=0,g.value=!1,u.value="",d.value="",w.value="",await B();const e=r.modalData("scrapeUrl");l.value=(e==null?void 0:e.mode)||"url"}});async function c(){if(y.value){if(l.value==="url"){if(!n.value.trim()){r.addNotification("URL is required.","warning");return}s.value=!0;try{await L.importArtefactFromUrl(y.value,n.value.trim(),x.value,g.value),r.closeModal("scrapeUrl")}finally{s.value=!1}}else if(l.value==="wikipedia"){if(!u.value.trim()){r.addNotification("Search query is required.","warning");return}s.value=!0;try{await L.importWikipediaArtefact(y.value,u.value.trim()),r.closeModal("scrapeUrl")}finally{s.value=!1}}else if(l.value==="youtube"){if(!d.value.trim()){r.addNotification("Video URL is required.","warning");return}s.value=!0;try{await L.importYoutubeTranscript(y.value,d.value.trim(),w.value.trim()),r.closeModal("scrapeUrl")}finally{s.value=!1}}}}return(f,e)=>(i(),V(Y,{modalName:"scrapeUrl",title:l.value==="url"?"Scrape URL":l.value==="wikipedia"?"Import Wikipedia":"Import YouTube Transcript",maxWidthClass:"max-w-lg"},{body:I(()=>[t("div",G,[t("div",J,[t("button",{onClick:e[0]||(e[0]=a=>l.value="url"),class:h(["flex-1 pb-2 text-sm font-medium text-center border-b-2 transition-colors flex items-center justify-center gap-2",l.value==="url"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"])},[p(T,{class:"w-4 h-4"}),e[10]||(e[10]=U(" Web "))],2),t("button",{onClick:e[1]||(e[1]=a=>l.value="wikipedia"),class:h(["flex-1 pb-2 text-sm font-medium text-center border-b-2 transition-colors flex items-center justify-center gap-2",l.value==="wikipedia"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"])},[p($,{class:"w-4 h-4"}),e[11]||(e[11]=U(" Wikipedia "))],2),t("button",{onClick:e[2]||(e[2]=a=>l.value="youtube"),class:h(["flex-1 pb-2 text-sm font-medium text-center border-b-2 transition-colors flex items-center justify-center gap-2",l.value==="youtube"?"border-red-500 text-red-600 dark:text-red-400":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"])},[p(W,{class:"w-4 h-4"}),e[12]||(e[12]=U(" YouTube "))],2)]),l.value==="url"?(i(),b("div",P,[e[18]||(e[18]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300"}," Extract content from a website and save it as an artefact. ",-1)),t("div",null,[e[13]||(e[13]=t("label",{for:"scrape-url",class:"label"},"Target URL",-1)),t("div",X,[t("div",ee,[p(T,{class:"h-4 w-4 text-gray-400"})]),v(t("input",{id:"scrape-url","onUpdate:modelValue":e[3]||(e[3]=a=>n.value=a),type:"url",class:"input-field pl-10",placeholder:"https://example.com/article",onKeyup:C(c,["enter"])},null,544),[[m,n.value]])])]),t("div",te,[t("div",null,[e[14]||(e[14]=t("label",{for:"scrape-depth",class:"label"},"Scraping Depth",-1)),v(t("input",{id:"scrape-depth","onUpdate:modelValue":e[4]||(e[4]=a=>x.value=a),type:"number",min:"0",max:"5",class:"input-field mt-1"},null,512),[[m,x.value,void 0,{number:!0}]]),e[15]||(e[15]=t("p",{class:"text-[10px] text-gray-500 mt-1"},"0: This page only.",-1))]),t("div",le,[t("label",re,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=a=>g.value=a),class:"sr-only peer"},null,512),[[R,g.value]]),e[16]||(e[16]=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1)),e[17]||(e[17]=t("span",{class:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-300"},"AI Processing",-1))])])])])):k("",!0),l.value==="wikipedia"?(i(),b("div",ae,[e[20]||(e[20]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300"}," Search for a Wikipedia article to import. ",-1)),t("div",null,[e[19]||(e[19]=t("label",{for:"wiki-query",class:"label"},"Search Query",-1)),t("div",se,[t("div",oe,[p($,{class:"h-4 w-4 text-gray-400"})]),v(t("input",{id:"wiki-query","onUpdate:modelValue":e[6]||(e[6]=a=>u.value=a),type:"text",class:"input-field pl-10",placeholder:"e.g. Artificial Intelligence",onKeyup:C(c,["enter"])},null,544),[[m,u.value]])])])])):k("",!0),l.value==="youtube"?(i(),b("div",ie,[e[24]||(e[24]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300"}," Extract transcript from a YouTube video. ",-1)),t("div",null,[e[21]||(e[21]=t("label",{for:"youtube-url",class:"label"},"Video URL",-1)),t("div",ne,[t("div",ue,[p(W,{class:"h-4 w-4 text-red-500"})]),v(t("input",{id:"youtube-url","onUpdate:modelValue":e[7]||(e[7]=a=>d.value=a),type:"url",class:"input-field pl-10",placeholder:"https://www.youtube.com/watch?v=...",onKeyup:C(c,["enter"])},null,544),[[m,d.value]])])]),t("div",null,[e[22]||(e[22]=t("label",{for:"youtube-lang",class:"label"},"Language Code (Optional)",-1)),v(t("input",{id:"youtube-lang","onUpdate:modelValue":e[8]||(e[8]=a=>w.value=a),type:"text",class:"input-field mt-1",placeholder:"e.g. en, fr, es",onKeyup:C(c,["enter"])},null,544),[[m,w.value]]),e[23]||(e[23]=t("p",{class:"text-[10px] text-gray-500 mt-1"}," Leave empty for auto-detect (English priority). ",-1))])])):k("",!0)])]),footer:I(()=>[t("div",de,[t("button",{onClick:e[9]||(e[9]=a=>K(r).closeModal("scrapeUrl")),type:"button",class:"btn btn-secondary"},"Cancel"),t("button",{onClick:c,type:"button",class:"btn btn-primary",disabled:s.value||l.value==="url"&&!n.value.trim()||l.value==="wikipedia"&&!u.value.trim()||l.value==="youtube"&&!d.value.trim()},[s.value?(i(),V(j,{key:0,class:"w-4 h-4 mr-2 animate-spin"})):k("",!0),U(" "+H(s.value?"Importing...":"Import"),1)],8,pe)])]),_:1},8,["title"]))}};export{fe as default};
