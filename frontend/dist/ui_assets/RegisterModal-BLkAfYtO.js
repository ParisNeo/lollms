import{a4 as z,e as n,o as r,b as e,i as V,u as A,L as d,c as y,a as B,w as L,f as P,K as k,g as w,a0 as p,ac as f,h as x,t as S}from"./index-CLx4cEXd.js";import{_ as U}from"./GenericModal-CKsoYsNa.js";const q={},N={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function j(_,u){return r(),n("svg",N,u[0]||(u[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM3.75 19.125A9.75 9.75 0 0110 12h.75a9.75 9.75 0 0110 7.125v.75H3.75v-.75z"},null,-1)]))}const E=z(q,[["render",j]]),T={class:"text-center mb-6"},$={class:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400 mb-3"},D={class:"mt-1"},H=["disabled"],R={class:"mt-1"},F=["disabled"],I={class:"mt-1"},J=["disabled"],K={key:0,class:"text-xs text-red-500 mt-1 flex items-center"},W={class:"mt-1"},G=["disabled"],O={key:0,class:"text-xs text-red-500 mt-1 flex items-center"},Q={key:0,class:"rounded-md bg-red-50 dark:bg-red-900/20 p-3"},X={class:"flex"},Y={class:"ml-3"},Z={class:"text-sm font-medium text-red-800 dark:text-red-200"},ee={class:"pt-2"},te=["disabled"],se={key:0,class:"flex items-center"},ae={key:1},le={class:"text-sm text-center text-gray-600 dark:text-gray-400 pt-2 border-t dark:border-gray-700 mt-6"},de={__name:"RegisterModal",setup(_){const u=V(),m=A(),c=d(""),v=d(""),l=d(""),i=d(""),a=d(!1),o=d(""),h=y(()=>l.value===i.value),b=y(()=>l.value.length>=8),C=()=>{m.closeModal("register"),m.openModal("login")},M=async()=>{var g,t;if(o.value="",!c.value||!v.value||!l.value||!i.value){o.value="All fields are required.";return}if(!b.value){o.value="Password must be at least 8 characters long.";return}if(!h.value){o.value="Passwords do not match.";return}a.value=!0;try{await u.register({username:c.value,email:v.value,password:l.value}),m.closeModal("register"),m.openModal("login")}catch(s){o.value=((t=(g=s.response)==null?void 0:g.data)==null?void 0:t.detail)||"An unexpected error occurred during registration."}finally{a.value=!1}};return(g,t)=>(r(),B(U,{modalName:"register",title:"Create Account",maxWidthClass:"max-w-md"},{body:L(()=>[e("div",T,[e("div",$,[P(E,{class:"w-6 h-6"})]),t[4]||(t[4]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Join the Community",-1)),t[5]||(t[5]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Fill in the form below to get started.",-1))]),e("form",{onSubmit:k(M,["prevent"]),class:"space-y-4"},[e("div",null,[t[6]||(t[6]=e("label",{for:"reg-username",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Username",-1)),e("div",D,[p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),type:"text",id:"reg-username",required:"",disabled:a.value,class:"input-field w-full",placeholder:"Choose a username",autocomplete:"username"},null,8,H),[[f,c.value]])])]),e("div",null,[t[7]||(t[7]=e("label",{for:"reg-email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Email Address",-1)),e("div",R,[p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),type:"email",id:"reg-email",required:"",disabled:a.value,class:"input-field w-full",placeholder:"your@email.com",autocomplete:"email"},null,8,F),[[f,v.value]])])]),e("div",null,[t[9]||(t[9]=e("label",{for:"reg-password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Password",-1)),e("div",I,[p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value=s),type:"password",id:"reg-password",required:"",disabled:a.value,class:"input-field w-full",placeholder:"Create a password (min. 8 chars)",autocomplete:"new-password"},null,8,J),[[f,l.value]])]),l.value&&!b.value?(r(),n("p",K,t[8]||(t[8]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),x(" Too short (min 8 characters) ")]))):w("",!0)]),e("div",null,[t[11]||(t[11]=e("label",{for:"reg-confirm-password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Confirm Password",-1)),e("div",W,[p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>i.value=s),type:"password",id:"reg-confirm-password",required:"",disabled:a.value,class:"input-field w-full",placeholder:"Confirm your password",autocomplete:"new-password"},null,8,G),[[f,i.value]])]),i.value&&!h.value?(r(),n("p",O,t[10]||(t[10]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),x(" Passwords do not match ")]))):w("",!0)]),o.value?(r(),n("div",Q,[e("div",X,[t[12]||(t[12]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",Y,[e("h3",Z,S(o.value),1)])])])):w("",!0),e("div",ee,[e("button",{type:"submit",class:"btn btn-primary w-full justify-center py-2.5 text-sm font-semibold shadow-sm hover:shadow transition-all",disabled:a.value},[a.value?(r(),n("span",se,t[13]||(t[13]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" Creating Account... ")]))):(r(),n("span",ae,"Create Account"))],8,te)]),e("div",le,[t[14]||(t[14]=x(" Already have an account? ")),e("a",{onClick:k(C,["prevent"]),href:"#",class:"font-semibold text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 ml-1 transition-colors"}," Sign in ")])],32)]),_:1}))}};export{de as default};
