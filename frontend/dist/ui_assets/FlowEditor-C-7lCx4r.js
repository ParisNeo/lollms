import{a2 as pe,ad as Ne,u as Ce,L as f,c as R,k as te,j as ve,e as r,o as n,b as s,l as m,f as $,m as w,a6 as ge,t as h,aD as ye,J as U,F as D,n as V,T as j,a7 as G,aC as Me,aq as Se,aA as De,aB as Ve,cD as Te,c_ as Oe,Z as Ee,g as Ue,ag as Pe,a as W,O as Re,K as _,au as je,R as Je,am as fe,ap as Fe,d as Ae,ar as He,a4 as ne}from"./index-IMwO7oGA.js";import Le from"./NodeCreatorModal-63rAZUsY.js";import{json as Ye}from"./index-BhY_U96p.js";const Xe={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4"},ze={class:"bg-white dark:bg-gray-900 rounded-xl shadow-2xl w-full max-w-4xl h-[85vh] flex flex-col border dark:border-gray-700 overflow-hidden animate-in fade-in zoom-in-95 duration-200"},Be={class:"p-4 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800/80"},qe={class:"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2"},We={key:0,class:"text-xs text-gray-500 mt-1"},Ge={class:"flex items-center gap-2"},Ke={class:"flex border-b dark:border-gray-700 bg-gray-100 dark:bg-gray-900"},Ze={class:"flex-grow flex flex-col min-h-0 overflow-y-auto p-6 bg-gray-50 dark:bg-gray-900"},Qe={key:0,class:"space-y-6"},et={key:0,class:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 rounded-lg text-sm"},tt={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ot={class:"block text-xs font-bold uppercase text-gray-500 mb-2"},st={class:"text-gray-300 font-normal"},lt=["onUpdate:modelValue"],at=["onUpdate:modelValue","step"],nt={key:2,class:"flex items-center gap-2"},rt=["onClick"],ut={class:"text-sm"},dt=["onUpdate:modelValue"],it={key:2,class:"mt-8 border-t dark:border-gray-700 pt-6"},ct={class:"text-lg font-bold mb-4 flex items-center gap-2"},gt={key:0,class:"text-gray-500 italic"},ft={class:"grid grid-cols-1 gap-4 mt-2"},pt={class:"px-4 py-2 bg-gray-100 dark:bg-gray-800 border-b dark:border-gray-700 font-bold text-sm flex justify-between"},vt={class:"text-xs text-gray-500 font-mono"},yt={class:"p-4 overflow-auto max-h-60 bg-gray-50 dark:bg-gray-900/50 font-mono text-xs"},bt={key:1,class:"h-full flex flex-col space-y-4"},xt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 h-full"},ht={class:"flex flex-col"},mt={class:"flex-grow border dark:border-gray-700 rounded-lg overflow-hidden relative"},wt={class:"flex flex-col"},kt={class:"flex-grow bg-black text-green-400 p-4 rounded-lg font-mono text-xs overflow-auto border dark:border-gray-700"},_t={key:0},$t={key:1,class:"text-gray-600 italic"},It={class:"p-4 border-t dark:border-gray-700 bg-white dark:bg-gray-800 flex justify-between items-center"},Nt={class:"flex items-center gap-2"},Ct={key:0,class:"flex items-center gap-2 text-blue-500 text-sm font-bold animate-pulse"},Mt={key:1,class:"text-red-500 text-sm font-bold flex items-center gap-1"},St=["disabled"],Dt={__name:"FlowRunnerModal",props:{flowData:{type:Object,required:!0},flowId:{type:String,required:!0},flowName:{type:String,default:"Untitled Flow"}},emits:["close"],setup(P,{emit:re}){const I=P,J=pe(),oe=Ne(),X=Ce(),v=f("auto"),p=f(!1),b=f(null),y=f(null),T=f(null),g=f({}),C=f(""),M=[Ye(),Oe],N=R(()=>{const c=I.flowData.nodes||[],u=I.flowData.edges||[],l=[];return c.forEach(i=>{(i.inputs||[]).forEach(k=>{var Q;if(!u.some(O=>O.target===i.id&&O.targetHandle===k)){const O=J.nodeDefinitions.find(E=>E.name===i.type),q=O==null?void 0:O.inputs.find(E=>E.name===k),ee=(q==null?void 0:q.type)||"string";if(g.value[i.id]||(g.value[i.id]={}),g.value[i.id][k]===void 0){const E=(Q=i.data)==null?void 0:Q[k];g.value[i.id][k]=E!==void 0?E:z(ee)}l.push({key:`${i.id}-${k}`,nodeId:i.id,nodeLabel:i.label||i.id,inputName:k,type:ee,value:g.value[i.id][k]})}})}),l}),x=R(()=>{const c=I.flowData.nodes||[],u=I.flowData.edges||[];return c.filter(l=>{const i=l.outputs||[];return i.length===0?!0:!i.some(k=>u.some(H=>H.source===l.id&&H.sourceHandle===k))})}),K=R(()=>x.value.length>0?x.value:I.flowData.nodes);function z(c){return c==="int"||c==="float"?0:c==="boolean"?!1:""}function F(){const c={flow_id:I.flowId,inputs:g.value};C.value=JSON.stringify(c,null,2)}te(g,F,{deep:!0});async function B(){if(!p.value){p.value=!0,y.value=null,T.value=null,b.value=null;try{let c={};if(v.value==="auto")c=g.value;else try{c=JSON.parse(C.value).inputs||{}}catch{X.addNotification("Invalid JSON in Service Mode","error"),p.value=!1;return}const u=await J.executeFlow(I.flowId,c);if(u&&u.id)b.value=u.id,A(b.value);else throw new Error("Failed to start task")}catch(c){console.error(c),T.value="Failed to start flow execution.",p.value=!1}}}function A(c){const u=te(()=>oe.tasks.find(l=>l.id===c),l=>{l&&(l.status==="completed"?(y.value=typeof l.result=="string"?JSON.parse(l.result):l.result,p.value=!1,u()):(l.status==="failed"||l.status==="cancelled")&&(T.value=l.error||"Task failed or cancelled.",p.value=!1,u()))},{immediate:!0,deep:!0})}function se(c){if(!y.value)return null;const u=y.value[c];return typeof u=="object"?JSON.stringify(u,null,2):u}function Z(){X.copyToClipboard(C.value,"Service payload copied")}return ve(()=>{N.value,F()}),(c,u)=>(n(),r("div",Xe,[s("div",ze,[s("div",Be,[s("div",null,[s("h3",qe,[$(ge,{class:"w-6 h-6 text-green-500"}),w(" Run Flow: "+h(P.flowName),1)]),b.value?(n(),r("p",We,"Task ID: "+h(b.value),1)):m("",!0)]),s("div",Ge,[s("button",{onClick:u[0]||(u[0]=l=>c.$emit("close")),class:"text-gray-400 hover:text-red-500 transition-colors p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full"},[$(ye,{class:"w-6 h-6"})])])]),s("div",Ke,[s("button",{onClick:u[1]||(u[1]=l=>v.value="auto"),class:U(["flex-1 py-3 text-sm font-medium transition-colors border-b-2",v.value==="auto"?"border-blue-500 text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-800":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"])},"Auto UI",2),s("button",{onClick:u[2]||(u[2]=l=>v.value="service"),class:U(["flex-1 py-3 text-sm font-medium transition-colors border-b-2",v.value==="service"?"border-purple-500 text-purple-600 dark:text-purple-400 bg-white dark:bg-gray-800":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"])},"Service Mode",2)]),s("div",Ze,[v.value==="auto"?(n(),r("div",Qe,[N.value.length===0?(n(),r("div",et," This flow takes no external inputs. Click Run to execute. ")):(n(),r("div",tt,[(n(!0),r(D,null,V(N.value,l=>(n(),r("div",{key:l.key,class:"bg-white dark:bg-gray-800 p-4 rounded-lg border dark:border-gray-700 shadow-sm"},[s("label",ot,[w(h(l.nodeLabel)+" ",1),s("span",st,"("+h(l.inputName)+")",1)]),l.type==="string"&&l.value&&l.value.length>50?j((n(),r("textarea",{key:0,"onUpdate:modelValue":i=>g.value[l.nodeId][l.inputName]=i,class:"input-field w-full h-24",placeholder:"Enter text..."},null,8,lt)),[[G,g.value[l.nodeId][l.inputName]]]):l.type==="int"||l.type==="float"?j((n(),r("input",{key:1,type:"number","onUpdate:modelValue":i=>g.value[l.nodeId][l.inputName]=i,class:"input-field w-full",step:l.type==="float"?"any":"1"},null,8,at)),[[G,g.value[l.nodeId][l.inputName],void 0,{number:!0}]]):l.type==="boolean"?(n(),r("div",nt,[s("button",{onClick:i=>g.value[l.nodeId][l.inputName]=!g.value[l.nodeId][l.inputName],class:U(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",g.value[l.nodeId][l.inputName]?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"])},[s("span",{class:U(["translate-x-0 pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",g.value[l.nodeId][l.inputName]?"translate-x-5":"translate-x-0"])},null,2)],10,rt),s("span",ut,h(g.value[l.nodeId][l.inputName]?"True":"False"),1)])):j((n(),r("input",{key:3,"onUpdate:modelValue":i=>g.value[l.nodeId][l.inputName]=i,class:"input-field w-full",placeholder:"Enter value..."},null,8,dt)),[[G,g.value[l.nodeId][l.inputName]]])]))),128))])),y.value?(n(),r("div",it,[s("h4",ct,[$(Me,{class:"w-5 h-5 text-green-500"}),u[4]||(u[4]=w(" Execution Results"))]),x.value.length===0?(n(),r("div",gt,"No explicit output nodes found. Showing all terminal results:")):m("",!0),s("div",ft,[(n(!0),r(D,null,V(K.value,l=>(n(),r("div",{key:l.id,class:"bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-700 overflow-hidden shadow-sm"},[s("div",pt,[s("span",null,h(l.label),1),s("span",vt,h(l.id),1)]),s("div",yt,[s("pre",null,h(se(l.id)),1)])]))),128))])])):m("",!0)])):m("",!0),v.value==="service"?(n(),r("div",bt,[s("div",xt,[s("div",ht,[u[5]||(u[5]=s("label",{class:"text-xs font-bold text-gray-500 uppercase mb-2"},"Request Payload (JSON)",-1)),s("div",mt,[$(Se,{modelValue:C.value,"onUpdate:modelValue":u[3]||(u[3]=l=>C.value=l),extensions:M,class:"h-full"},null,8,["modelValue"]),s("button",{onClick:Z,class:"absolute top-2 right-2 p-1 bg-white/10 hover:bg-white/20 rounded text-gray-400 hover:text-white",title:"Copy"},[$(De,{class:"w-4 h-4"})])]),u[6]||(u[6]=s("div",{class:"mt-2 text-xs text-gray-500"},[w(" Endpoint: "),s("code",{class:"bg-gray-200 dark:bg-gray-800 px-1 rounded"},"POST /api/flows/execute")],-1))]),s("div",wt,[u[7]||(u[7]=s("label",{class:"text-xs font-bold text-gray-500 uppercase mb-2"},"Response Output",-1)),s("div",kt,[y.value?(n(),r("pre",_t,h(JSON.stringify(y.value,null,2)),1)):(n(),r("div",$t,"Run the flow to see output..."))])])])])):m("",!0)]),s("div",It,[s("div",Nt,[p.value?(n(),r("div",Ct,[$(Ve,{class:"w-4 h-4 animate-spin"}),u[8]||(u[8]=w(" Running... "))])):m("",!0),T.value?(n(),r("div",Mt,[$(Te,{class:"w-4 h-4"}),u[9]||(u[9]=w(" Execution Failed "))])):m("",!0)]),s("button",{onClick:B,class:"btn btn-primary px-8 py-2.5 shadow-lg flex items-center gap-2",disabled:p.value},[$(ge,{class:"w-5 h-5"}),u[10]||(u[10]=w(" Run Flow "))],8,St)])])]))}},Vt={class:"relative w-full h-full flex overflow-hidden"},Tt={class:"w-60 bg-white dark:bg-gray-800 border-r dark:border-gray-700 flex flex-col z-10 flex-shrink-0"},Ot={class:"p-3 border-b dark:border-gray-700 flex justify-between items-center"},Et={key:0,class:"p-4 text-center text-gray-400 text-xs italic"},Ut={class:"p-2 space-y-2 overflow-y-auto custom-scrollbar flex-grow"},Pt=["onDblclick","onDragend","title"],Rt={class:"flex items-center justify-between"},jt={class:"text-xs font-bold truncate pr-2"},Jt={class:"flex items-center gap-1"},Ft=["onClick"],At={key:0,class:"text-[9px] text-gray-400 mt-1 line-clamp-1"},Ht={class:"absolute top-0 left-0 overflow-visible pointer-events-none w-full h-full",style:{width:"1px",height:"1px"}},Lt=["d","onClick"],Yt=["d"],Xt=["onMousedown"],zt={class:"px-2 py-1 border-b dark:border-gray-700/50 flex justify-between items-center bg-gray-50/50 dark:bg-gray-900/20 cursor-grab active:cursor-grabbing"},Bt={class:"text-xs font-bold truncate select-none"},qt=["onClick"],Wt={class:"p-2 space-y-2 relative"},Gt=["onMousedown","onMouseup","title"],Kt=["title"],Zt=["onUpdate:modelValue"],Qt=["label"],eo=["value"],to=["onUpdate:modelValue"],oo=["onUpdate:modelValue","step"],so=["onUpdate:modelValue"],lo={class:"text-[10px] text-gray-500 mr-1 truncate select-none"},ao=["onMousedown","onMouseup","title"],no={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4"},ro={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-lg w-full p-6 animate-in fade-in zoom-in-95 border dark:border-gray-700"},uo={class:"mt-6 flex justify-end"},io={__name:"FlowEditor",props:{flow:{type:Object,required:!0}},setup(P,{expose:re}){const I=P,J=pe(),oe=Ue(),X=Pe(),v=f([]),p=f([]),b=f(1),y=f({x:0,y:0}),T=f(!1),g=f(!1),C=f(null),M=f({x:0,y:0}),N=f(!1),x=f(null),K=f({x:0,y:0}),z=f(!1),F=f(!1),B=f(null),A=f(!1),se=R(()=>oe.isAdmin);te(()=>I.flow,t=>{t&&t.data?(v.value=JSON.parse(JSON.stringify(t.data.nodes||[])),p.value=JSON.parse(JSON.stringify(t.data.edges||[]))):(v.value=[],p.value=[])},{immediate:!0}),te([v,p],()=>{I.flow&&(I.flow.data={nodes:v.value,edges:p.value})},{deep:!0}),ve(()=>{J.fetchNodeDefinitions(),X.fetchAvailableLollmsModels(),localStorage.getItem("flow_tutorial_seen")||(A.value=!0,localStorage.setItem("flow_tutorial_seen","true"))});const Z=R(()=>{const t={};return J.nodeDefinitions.forEach(o=>{t[o.name]=o}),t}),c=R(()=>J.nodeDefinitions.map(t=>({...t,type:t.name,color:t.color||"bg-gray-100 border-gray-500"})));function u(t){const o={string:"bg-gray-400",int:"bg-green-500",float:"bg-green-400",boolean:"bg-orange-500",image:"bg-pink-500",node_ref:"bg-indigo-500",list:"bg-cyan-500",model_selection:"bg-purple-400",any:"bg-white border-2 border-gray-400"};return o[t]||o.any}function l(t,o){const e=Z.value[t];if(!e)return"any";const a=e.inputs.find(d=>d.name===o);return a?a.type:"any"}function i(t,o){const e=Z.value[t];if(!e)return"any";const a=e.outputs.find(d=>d.name===o);return a?a.type:"any"}function le(t,o){return p.value.some(e=>e.target===t&&e.targetHandle===o)}function k(t){B.value=JSON.parse(JSON.stringify(t)),z.value=!0}function H(t){const o=(-y.value.x+(window.innerWidth/2-200))/b.value,e=(-y.value.y+window.innerHeight/2)/b.value;v.value.push({id:`node_${Date.now()}`,type:t.type,label:t.label,x:o>0?o:50,y:e>0?e:50,data:{},inputs:t.inputs.map(a=>a.name),outputs:t.outputs.map(a=>a.name),color:t.color})}function Q(t){v.value=v.value.filter(o=>o.id!==t),p.value=p.value.filter(o=>o.source!==t&&o.target!==t)}function O(t){(t.button===1||t.button===0&&t.target.classList.contains("flow-canvas"))&&(T.value=!0,M.value={x:t.clientX,y:t.clientY})}function q(t){const o=t.currentTarget.getBoundingClientRect();if(K.value={x:(t.clientX-o.left-y.value.x)/b.value,y:(t.clientY-o.top-y.value.y)/b.value},T.value)y.value.x+=t.clientX-M.value.x,y.value.y+=t.clientY-M.value.y,M.value={x:t.clientX,y:t.clientY};else if(g.value&&C.value){const e=v.value.find(a=>a.id===C.value);e&&(e.x+=(t.clientX-M.value.x)/b.value,e.y+=(t.clientY-M.value.y)/b.value,M.value={x:t.clientX,y:t.clientY})}}function ee(){T.value=!1,g.value=!1,C.value=null,N.value&&(N.value=!1,x.value=null)}function E(t){t.preventDefault();const o=t.deltaY>0?-.1:.1;b.value=Math.min(Math.max(.1,b.value+o),5)}function be(t,o){t.button===0&&(t.stopPropagation(),g.value=!0,C.value=o,M.value={x:t.clientX,y:t.clientY})}function ue(t,o,e,a){t.stopPropagation(),N.value=!0,x.value={nodeId:o,handleId:e,type:a}}function de(t,o,e,a){if(t.stopPropagation(),!N.value||!x.value)return;const d=x.value;if(d.nodeId!==o&&d.type!==a){const S=d.type==="output"?d:{nodeId:o,handleId:e},L=d.type==="input"?d:{nodeId:o,handleId:e};if(d.type===a)return;p.value.find(Y=>Y.source===S.nodeId&&Y.sourceHandle===S.handleId&&Y.target===L.nodeId&&Y.targetHandle===L.handleId)||p.value.push({id:`e_${Date.now()}`,source:S.nodeId,sourceHandle:S.handleId,target:L.nodeId,targetHandle:L.handleId})}N.value=!1,x.value=null}function xe(t){p.value.splice(t,1)}function ae(t,o,e){const a=v.value.find(Ie=>Ie.id===t);if(!a)return{x:0,y:0};const d=a.inputs||[],S=a.outputs||[],L=e==="input"?d.indexOf(o):S.indexOf(o),ie=192,Y=29,we=8,ce=24,ke=Y+we+L*(ce+8)+ce/2,_e=e==="input"?a.x:a.x+ie,$e=a.y+ke;return{x:_e,y:$e}}function he(t){const o=ae(t.source,t.sourceHandle,"output"),e=ae(t.target,t.targetHandle,"input"),a=Math.abs(e.x-o.x)*.5;return`M ${o.x} ${o.y} C ${o.x+a} ${o.y}, ${e.x-a} ${e.y}, ${e.x} ${e.y}`}const me=R(()=>{if(!N.value||!x.value)return"";const t=ae(x.value.nodeId,x.value.handleId,x.value.type),o=K.value,e=Math.abs(o.x-t.x)*.5;return`M ${t.x} ${t.y} C ${t.x+(x.value.type==="output"?e:-e)} ${t.y}, ${o.x-(x.value.type==="output"?e:-e)} ${o.y}, ${o.x} ${o.y}`});return re({openRunner:()=>F.value=!0}),(t,o)=>(n(),r("div",Vt,[s("div",Tt,[s("div",Ot,[o[8]||(o[8]=s("span",{class:"font-bold text-xs uppercase text-gray-500 tracking-wider"},"Node Palette",-1)),s("button",{onClick:o[0]||(o[0]=e=>A.value=!0),class:"text-blue-500 hover:text-blue-600 transition-colors"},[$(Re,{class:"w-4 h-4"})])]),c.value.length===0?(n(),r("div",Et,o[9]||(o[9]=[w(" No nodes defined."),s("br",null,null,-1),w("Admins can create nodes. ")]))):m("",!0),s("div",Ut,[(n(!0),r(D,null,V(c.value,e=>(n(),r("div",{key:e.id,class:U(["group p-2 rounded border dark:border-gray-600 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-all active:scale-95 border-l-4 shadow-sm relative overflow-hidden",e.color.split(" ").find(a=>a.startsWith("border-"))]),onDblclick:a=>H(e),draggable:"true",onDragend:a=>H(e),title:e.description},[s("div",Rt,[s("span",jt,h(e.label),1),s("div",Jt,[se.value?(n(),r("button",{key:0,onClick:_(a=>k(e),["stop"]),class:"text-gray-400 hover:text-blue-500 p-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity"},[$(je,{class:"w-3.5 h-3.5"})],8,Ft)):m("",!0),$(Je,{class:"w-3.5 h-3.5 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})])]),e.description?(n(),r("div",At,h(e.description),1)):m("",!0)],42,Pt))),128))]),o[10]||(o[10]=s("div",{class:"p-2 text-[9px] text-gray-400 text-center border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"}," Drag or Double-Click to Add ",-1))]),s("div",{class:"flex-grow relative bg-gray-100 dark:bg-gray-900 flow-canvas overflow-hidden cursor-grab active:cursor-grabbing pattern-grid",onMousedown:O,onMousemove:q,onMouseup:ee,onWheel:E},[s("div",{class:"transform-origin-0-0 w-full h-full",style:fe({transform:`translate(${y.value.x}px, ${y.value.y}px) scale(${b.value})`})},[(n(),r("svg",Ht,[s("g",null,[(n(!0),r(D,null,V(p.value,(e,a)=>(n(),r("path",{key:e.id,d:he(e),class:"stroke-gray-400 dark:stroke-gray-500 stroke-[3px] fill-none pointer-events-auto hover:stroke-blue-500 cursor-pointer",onClick:_(d=>xe(a),["stop"])},null,8,Lt))),128)),N.value?(n(),r("path",{key:0,d:me.value,class:"stroke-blue-400 stroke-[3px] fill-none","stroke-dasharray":"5,5"},null,8,Yt)):m("",!0)])])),(n(!0),r(D,null,V(v.value,e=>(n(),r("div",{key:e.id,class:U(["absolute w-48 rounded-lg shadow-lg border-2 bg-white dark:bg-gray-800 flex flex-col",e.color]),style:fe({transform:`translate(${e.x}px, ${e.y}px)`}),onMousedown:_(a=>be(a,e.id),["stop"])},[s("div",zt,[s("span",Bt,h(e.label),1),s("button",{onClick:_(a=>Q(e.id),["stop"]),class:"text-gray-400 hover:text-red-500 rounded"},[$(ye,{class:"w-3 h-3"})],8,qt)]),s("div",Wt,[(n(!0),r(D,null,V(e.inputs,a=>(n(),r("div",{key:a,class:"flex items-center relative h-6"},[s("div",{class:U(["w-3.5 h-3.5 rounded-full border-2 border-white dark:border-gray-800 absolute -left-[1.1rem] cursor-crosshair hover:scale-125 shadow-sm transition-transform",u(l(e.type,a))]),onMousedown:_(d=>ue(d,e.id,a,"input"),["stop"]),onMouseup:_(d=>de(d,e.id,a,"input"),["stop"]),title:l(e.type,a)},null,42,Gt),s("span",{class:"text-[10px] text-gray-500 ml-1 truncate flex-1 select-none",title:a},h(a),9,Kt),le(e.id,a)?m("",!0):(n(),r(D,{key:0},[l(e.type,a)==="model_selection"?j((n(),r("select",{key:0,"onUpdate:modelValue":d=>e.data[a]=d,class:"ml-auto w-24 h-5 text-[9px] border rounded px-0 bg-gray-50 dark:bg-gray-900 focus:ring-1 focus:ring-blue-500 focus:outline-none",onMousedown:o[1]||(o[1]=_(()=>{},["stop"]))},[(n(!0),r(D,null,V(Ae(X).availableLLMModelsGrouped,d=>(n(),r("optgroup",{key:d.label,label:d.label},[(n(!0),r(D,null,V(d.items,S=>(n(),r("option",{key:S.id,value:S.id},h(S.name),9,eo))),128))],8,Qt))),128))],40,Zt)),[[Fe,e.data[a]]]):l(e.type,a)==="boolean"?j((n(),r("input",{key:1,type:"checkbox","onUpdate:modelValue":d=>e.data[a]=d,class:"ml-auto w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",onMousedown:o[2]||(o[2]=_(()=>{},["stop"]))},null,40,to)),[[He,e.data[a]]]):l(e.type,a)==="int"||l(e.type,a)==="float"?j((n(),r("input",{key:2,type:"number","onUpdate:modelValue":d=>e.data[a]=d,step:l(e.type,a)==="float"?"any":"1",class:"ml-auto w-16 h-5 text-[9px] border rounded px-1 bg-gray-50 dark:bg-gray-900 focus:ring-1 focus:ring-blue-500 focus:outline-none",placeholder:"0",onMousedown:o[3]||(o[3]=_(()=>{},["stop"]))},null,40,oo)),[[G,e.data[a],void 0,{number:!0}]]):j((n(),r("input",{key:3,"onUpdate:modelValue":d=>e.data[a]=d,class:"ml-auto w-20 h-5 text-[9px] border rounded px-1 bg-gray-50 dark:bg-gray-900 focus:ring-1 focus:ring-blue-500 focus:outline-none",placeholder:"Val",onMousedown:o[4]||(o[4]=_(()=>{},["stop"]))},null,40,so)),[[G,e.data[a]]])],64))]))),128)),(n(!0),r(D,null,V(e.outputs,a=>(n(),r("div",{key:a,class:"flex items-center justify-end relative h-6"},[s("span",lo,h(a),1),s("div",{class:U(["w-3.5 h-3.5 rounded-full border-2 border-white dark:border-gray-800 absolute -right-[1.1rem] cursor-crosshair hover:scale-125 shadow-sm transition-transform",u(i(e.type,a))]),onMousedown:_(d=>ue(d,e.id,a,"output"),["stop"]),onMouseup:_(d=>de(d,e.id,a,"output"),["stop"]),title:i(e.type,a)},null,42,ao)]))),128))])],46,Xt))),128))],4)],32),(n(),W(ne,{to:"body"},[z.value?(n(),W(Le,{key:0,nodeToEdit:B.value,onClose:o[5]||(o[5]=e=>{z.value=!1,B.value=null})},null,8,["nodeToEdit"])):m("",!0)])),(n(),W(ne,{to:"body"},[F.value?(n(),W(Dt,{key:0,flowData:P.flow.data,flowId:P.flow.id,flowName:P.flow.name,onClose:o[6]||(o[6]=e=>F.value=!1)},null,8,["flowData","flowId","flowName"])):m("",!0)])),(n(),W(ne,{to:"body"},[A.value?(n(),r("div",no,[s("div",ro,[o[11]||(o[11]=s("h3",{class:"text-xl font-bold mb-4 text-gray-800 dark:text-gray-100"},"Welcome to Flow Studio",-1)),o[12]||(o[12]=s("div",{class:"space-y-4 text-sm text-gray-600 dark:text-gray-300"},[s("p",null,"Build powerful AI workflows visually."),s("ul",{class:"list-disc pl-5 space-y-1"},[s("li",null,[s("strong",null,"Add Nodes:"),w(" Drag items from the left palette onto the canvas.")]),s("li",null,[s("strong",null,"Connect:"),w(" Drag from an output circle (right) to an input circle (left). Match colors for data types!")]),s("li",null,[s("strong",null,"Configure:"),w(" Type values directly into input fields or use selectors on nodes. If a link is connected, the widget hides.")]),s("li",null,[s("strong",null,"Run:"),w(' Click "Run Flow" in the top bar to test your flow with Auto-UI or as a Service.')]),s("li",null,[s("strong",null,"Admins:"),w(' Can define custom node logic using Python by clicking the Pencil icon or "Define Node".')])])],-1)),s("div",uo,[s("button",{onClick:o[7]||(o[7]=e=>A.value=!1),class:"btn btn-primary px-6"},"Got it")])])])):m("",!0)]))]))}},vo=Ee(io,[["__scopeId","data-v-574baf5a"]]);export{vo as default};
