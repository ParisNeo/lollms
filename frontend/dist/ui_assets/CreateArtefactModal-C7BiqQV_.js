import{u as y,aS as _,b as u,r,S as w,f,o as m,w as v,a as e,A as g,h as C,G as h,M as N,t as S,J as A,g as p,C as D,K as M,aJ as V}from"./index-D2Id9a0s.js";import{_ as k}from"./GenericModal-_6JiAudK.js";const I={class:"space-y-4 p-1 h-full flex flex-col"},T={class:"relative mt-1"},U={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},q={class:"flex-grow flex flex-col min-h-[300px]"},B={class:"flex-grow border border-gray-300 dark:border-gray-600 rounded-md overflow-hidden relative"},L={class:"flex justify-end gap-3"},$=["disabled"],G={__name:"CreateArtefactModal",setup(J){const a=y(),d=_(),b=u(()=>a.modalData("createArtefact")),c=u(()=>{var i;return((i=b.value)==null?void 0:i.discussionId)||d.currentDiscussionId}),s=r(""),l=r(""),o=r(!1);w(()=>a.isModalOpen("createArtefact"),i=>{i&&(s.value="Untitled Document.md",l.value="")});async function x(){if(!c.value){a.addNotification("No discussion selected.","error");return}if(!s.value.trim()){a.addNotification("Title is required.","warning");return}if(!l.value.trim()){a.addNotification("Content is required.","warning");return}o.value=!0;try{await d.createManualArtefact(c.value,s.value.trim(),l.value),a.closeModal("createArtefact")}finally{o.value=!1}}return(i,t)=>(m(),f(k,{modalName:"createArtefact",title:"Create New Document",maxWidthClass:"max-w-3xl"},{body:v(()=>[e("div",I,[e("div",null,[t[3]||(t[3]=e("label",{for:"artefact-title",class:"label"},"Document Title",-1)),e("div",T,[e("div",U,[p(D,{class:"h-4 w-4 text-gray-400"})]),A(e("input",{id:"artefact-title","onUpdate:modelValue":t[0]||(t[0]=n=>s.value=n),type:"text",class:"input-field pl-10",placeholder:"e.g. My Notes.md",required:""},null,512),[[M,s.value]])])]),e("div",q,[t[4]||(t[4]=e("label",{class:"label mb-1"},"Content",-1)),e("div",B,[p(V,{modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=n=>l.value=n),class:"h-full absolute inset-0",placeholder:"Start typing..."},null,8,["modelValue"])])])])]),footer:v(()=>[e("div",L,[e("button",{onClick:t[2]||(t[2]=n=>g(a).closeModal("createArtefact")),type:"button",class:"btn btn-secondary"},"Cancel"),e("button",{onClick:x,type:"button",class:"btn btn-primary",disabled:o.value||!s.value.trim()||!l.value.trim()},[o.value?(m(),f(N,{key:0,class:"w-4 h-4 mr-2 animate-spin"})):C("",!0),h(" "+S((o.value,"Create & Load")),1)],8,$)])]),_:1}))}};export{G as default};
