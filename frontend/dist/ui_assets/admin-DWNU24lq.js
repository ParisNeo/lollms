const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["ui_assets/index-DjgpTDIL.js","ui_assets/index-_J_9VB3l.css"])))=>i.map(i=>d[i]);
import{ae as Gs,u as js,R as qs,L as i,af as Fa,m as La,V as Vs,N as e,J as Pa}from"./index-DjgpTDIL.js";function Za(o,c){try{const g=localStorage.getItem(o);if(g){const T=JSON.parse(g);return{...c,...T}}}catch{localStorage.removeItem(o)}return c}const Js=(o,c)=>{if(c==="boolean")return typeof o=="string"?o.toLowerCase()==="true":!!o;if(c==="integer"){const g=parseInt(o,10);return isNaN(g)?null:g}if(c==="float"){const g=parseFloat(o);return isNaN(g)?null:g}return o},Ks=Gs("admin",()=>{const o=js(),c=qs(),{on:g}=Vs(),T=i(null),F=i(!1),Ia=i([]),L=i(!1),P=i(null),S=i(!1),Z=i([]),I=i(!1),R=i(null),M=i(!1),l=i([]),U=i(!1),C=i([]),d=i([]),x=i(!1),O=i([]),u=i([]),E=i(!1),D=i([]),p=i([]),G=i(!1),j=i([]),f=i([]),q=i(!1),V=i([]),J=i([]),y=i([]),Q=i(!1),v=i([]),K=i(!1),w=i([]),W=i(!1),b=i([]),H=i(!1),X=i({items:[],total:0,pages:1,categories:[]}),Y=i(!1),aa=i({items:[],total:0,pages:1,categories:[]}),ta=i(!1),ea=i({items:[],total:0,pages:1,categories:[]}),sa=i(!1),na=i({items:[],total:0,pages:1,categories:[]}),ia=i(!1),$=i([]),oa=i(!1),Ma=i(null),ca=i(!1),ra=i([]),la=i(!1),da=i(null),ua=i(!1),k=i(null),pa=i(!1),fa=i([]),ga=i(!1),B=i([]),ma=i(!1),ya=i([]),va=i(!1),wa=i([]),ha=i(!1),_a=i(!1),ba=i(!1),Ta=i([]),Sa=i(!1),$a=i([]),Ba=i(!1),Ua=i([]),za=i(!1),Ca=Fa(Za("lollms-app-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"last_update_date",sortOrder:"desc",currentPage:1,pageSize:24})),xa=Fa(Za("lollms-mcp-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"last_update_date",sortOrder:"desc",currentPage:1,pageSize:24})),Oa=Fa(Za("lollms-prompt-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"name",sortOrder:"asc",currentPage:1,pageSize:24}));La(Ca,a=>{localStorage.setItem("lollms-app-filters",JSON.stringify(a))},{deep:!0}),La(xa,a=>{localStorage.setItem("lollms-mcp-filters",JSON.stringify(a))},{deep:!0}),La(Oa,a=>{localStorage.setItem("lollms-prompt-filters",JSON.stringify(a))},{deep:!0});async function tt(a){var s;if(!a||!["completed","failed","cancelled"].includes(a.status))return;const t=(a.name||"").toLowerCase();if((t.includes("app")||t.includes("mcp"))&&(z(!0),A(!0)),t.includes("prompt")&&Ra({},!0),t.includes("personality")&&ja({},!0),t.includes("purge unused temporary files")&&a.status==="completed"){const n=((s=a.result)==null?void 0:s.message)||"Purge completed successfully.";o.addNotification(n,"success",6e3)}t.includes("generate self-signed certificate")&&a.status==="completed"&&(m(!0),o.addNotification("Certificate generated successfully. Reloading settings...","success",6e3)),t.includes("content")&&a.status==="completed"&&o.addNotification("Moderation task completed.","success",6e3),t.includes("generate fun facts")&&a.status==="completed"&&(o.addNotification("Fun Facts Generated!","success"),h(!0),_(!0)),t.includes("install requirement")&&a.status==="completed"&&(Va(),o.addNotification("Requirement installed successfully.","success"))}g("task:completed",tt);async function et(a){try{const t=await e.post("/api/admin/system/force-all-users-config",a);return o.addNotification(t.data.message,"success"),!0}catch(t){return console.error(t),!1}}async function st(){F.value=!0;try{const a=await e.get("/api/admin/stats");T.value=a.data}catch{T.value=null}finally{F.value=!1}}async function nt(){la.value=!0;try{const a=await e.get("/api/admin/ws-connections");ra.value=a.data}catch{ra.value=[]}finally{la.value=!1}}async function it(){if(!k.value){pa.value=!0;try{const a=await e.get("/api/admin/global-generation-stats");k.value=a.data}catch{k.value=null}finally{pa.value=!1}}}async function Aa(){ca.value=!0;try{const a=await e.get("/api/admin/system-status");Ma.value=a.data}finally{ca.value=!1}}async function ot(a=!1){if(!(!a&&$a.value.length>0)){Ba.value=!0;try{const t=await e.get("/api/admin/system/logs");$a.value=t.data}catch{o.addNotification("Failed to fetch system logs.","error")}finally{Ba.value=!1}}}async function ct(){if(!da.value){ua.value=!0;try{const a=await e.get("/api/admin/server-info");da.value=a.data}finally{ua.value=!1}}}async function rt(){ga.value=!0;try{const a=await e.get("/api/admin/model-usage-stats");fa.value=a.data||[]}catch(a){console.error("Failed to fetch model usage stats:",a),fa.value=[]}finally{ga.value=!1}}async function m(a=!1){if(!(!a&&Z.value.length>0)){I.value=!0;try{const t=await e.get("/api/admin/settings");Z.value=t.data.map(s=>({...s,value:Js(s.value,s.type)}))}finally{I.value=!1}}}async function lt(a){await e.put("/api/admin/settings",{configs:a}),await m(!0),o.addNotification("Settings updated.","success")}async function dt(a=!1){if(!(!a&&R.value)){M.value=!0;try{const t=await e.get("/api/admin/ai-bot-settings");R.value=t.data}finally{M.value=!1}}}async function ut(a){const t=await e.put("/api/admin/ai-bot-settings",a);R.value=t.data,o.addNotification("AI Bot user settings updated.","success")}async function pt(a=!1){if(!(!a&&l.value.length>0)){U.value=!0;try{const t=await e.get("/api/admin/bindings");l.value=t.data}finally{U.value=!1}}}async function ft(a=!1){if(!a&&C.value.length>0)return;const t=await e.get("/api/admin/bindings/available_types");C.value=t.data}async function gt(a){const t=await e.post("/api/admin/bindings",a);l.value.push(t.data),o.addNotification(`Binding '${t.data.alias}' created.`,"success")}async function mt(a,t){const s=await e.put(`/api/admin/bindings/${a}`,t),n=l.value.findIndex(r=>r.id===a);n!==-1&&(l.value[n]=s.data),o.addNotification(`Binding '${s.data.alias}' updated.`,"success")}async function yt(a){await e.delete(`/api/admin/bindings/${a}`),l.value=l.value.filter(t=>t.id!==a),o.addNotification("Binding deleted.","success")}async function vt(a=!1){if(!(!a&&d.value.length>0)){x.value=!0;try{const t=await e.get("/api/admin/tti-bindings");d.value=t.data}finally{x.value=!1}}}async function wt(a=!1){if(!a&&O.value.length>0)return;const t=await e.get("/api/admin/tti-bindings/available_types");O.value=t.data}async function ht(a){const t=await e.post("/api/admin/tti-bindings",a);d.value.push(t.data),o.addNotification(`TTI Binding '${t.data.alias}' created.`,"success")}async function _t(a,t){const s=await e.put(`/api/admin/tti-bindings/${a}`,t),n=d.value.findIndex(r=>r.id===a);n!==-1&&(d.value[n]=s.data),o.addNotification(`TTI Binding '${s.data.alias}' updated.`,"success")}async function bt(a){await e.delete(`/api/admin/tti-bindings/${a}`),d.value=d.value.filter(t=>t.id!==a),o.addNotification("TTI Binding deleted.","success")}async function Tt(a=!1){if(!(!a&&u.value.length>0)){E.value=!0;try{const t=await e.get("/api/admin/tts-bindings");u.value=t.data}finally{E.value=!1}}}async function St(a=!1){if(!a&&D.value.length>0)return;const t=await e.get("/api/admin/tts-bindings/available_types");D.value=t.data}async function $t(a){const t=await e.post("/api/admin/tts-bindings",a);u.value.push(t.data),o.addNotification(`TTS Binding '${t.data.alias}' created.`,"success")}async function Bt(a,t){const s=await e.put(`/api/admin/tts-bindings/${a}`,t),n=u.value.findIndex(r=>r.id===a);n!==-1&&(u.value[n]=s.data),o.addNotification(`TTS Binding '${s.data.alias}' updated.`,"success")}async function zt(a){await e.delete(`/api/admin/tts-bindings/${a}`),u.value=u.value.filter(t=>t.id!==a),o.addNotification("TTS Binding deleted.","success")}async function At(a=!1){if(!(!a&&p.value.length>0)){G.value=!0;try{const t=await e.get("/api/admin/stt-bindings");p.value=t.data}finally{G.value=!1}}}async function Rt(a=!1){if(!a&&j.value.length>0)return;const t=await e.get("/api/admin/stt-bindings/available_types");j.value=t.data}async function kt(a){const t=await e.post("/api/admin/stt-bindings",a);p.value.push(t.data),o.addNotification(`STT Binding '${t.data.alias}' created.`,"success")}async function Nt(a,t){const s=await e.put(`/api/admin/stt-bindings/${a}`,t),n=p.value.findIndex(r=>r.id===a);n!==-1&&(p.value[n]=s.data),o.addNotification(`STT Binding '${s.data.alias}' updated.`,"success")}async function Ft(a){await e.delete(`/api/admin/stt-bindings/${a}`),p.value=p.value.filter(t=>t.id!==a),o.addNotification("STT Binding deleted.","success")}async function Lt(a=!1){if(!(!a&&f.value.length>0)){q.value=!0;try{const t=await e.get("/api/admin/rag-bindings");f.value=t.data}catch(t){console.error(t)}finally{q.value=!1}}}async function Pt(a=!1){if(!(!a&&V.value.length>0))try{const t=await e.get("/api/admin/rag-bindings/available_types");V.value=t.data}catch(t){console.error(t)}}async function Zt(a){const t=await e.post("/api/admin/rag-bindings",a);f.value.push(t.data),o.addNotification(`RAG Binding '${t.data.alias}' created.`,"success")}async function It(a,t){const s=await e.put(`/api/admin/rag-bindings/${a}`,t),n=f.value.findIndex(r=>r.id===a);n!==-1&&(f.value[n]=s.data),o.addNotification(`RAG Binding '${s.data.alias}' updated.`,"success")}async function Mt(a){await e.delete(`/api/admin/rag-bindings/${a}`),f.value=f.value.filter(t=>t.id!==a),o.addNotification("RAG Binding deleted.","success")}async function Ut(a){return(await e.get(`/api/admin/bindings/${a}/models`)).data}async function Ct(a,t){return(await e.post(`/api/admin/bindings/${a}/context-size`,{model_name:t})).data.ctx_size}async function xt(a,t){const s=await e.put(`/api/admin/bindings/${a}/alias`,t),n=l.value.findIndex(r=>r.id===a);n!==-1&&(l.value[n]=s.data)}async function Ot(a,t){const s=await e.delete(`/api/admin/bindings/${a}/alias`,{data:{original_model_name:t}}),n=l.value.findIndex(r=>r.id===a);n!==-1&&(l.value[n]=s.data)}async function Et(a,t,s={}){return(await e.post(`/api/admin/bindings/${a}/execute_command`,{command_name:t,parameters:s})).data}async function Dt(a){return(await e.get(`/api/admin/tti-bindings/${a}/models`)).data}async function Gt(a,t){const s=await e.put(`/api/admin/tti-bindings/${a}/alias`,t),n=d.value.findIndex(r=>r.id===a);n!==-1&&(d.value[n]=s.data)}async function jt(a,t){const s=await e.delete(`/api/admin/tti-bindings/${a}/alias`,{data:{original_model_name:t}}),n=d.value.findIndex(r=>r.id===a);n!==-1&&(d.value[n]=s.data)}async function qt(a,t,s={}){return(await e.post(`/api/admin/tti-bindings/${a}/execute_command`,{command_name:t,parameters:s})).data}async function Vt(a){return(await e.get(`/api/admin/tts-bindings/${a}/models`)).data}async function Jt(a,t){const s=await e.put(`/api/admin/tts-bindings/${a}/alias`,t),n=u.value.findIndex(r=>r.id===a);n!==-1&&(u.value[n]=s.data)}async function Qt(a,t){const s=await e.delete(`/api/admin/tts-bindings/${a}/alias`,{data:{original_model_name:t}}),n=u.value.findIndex(r=>r.id===a);n!==-1&&(u.value[n]=s.data)}async function Kt(a,t,s={}){return(await e.post(`/api/admin/tts-bindings/${a}/execute_command`,{command_name:t,parameters:s})).data}async function Wt(a){return(await e.get(`/api/admin/stt-bindings/${a}/models`)).data}async function Ht(a,t){const s=await e.put(`/api/admin/stt-bindings/${a}/alias`,t),n=p.value.findIndex(r=>r.id===a);n!==-1&&(p.value[n]=s.data)}async function Xt(a,t){const s=await e.delete(`/api/admin/stt-bindings/${a}/alias`,{data:{original_model_name:t}}),n=p.value.findIndex(r=>r.id===a);n!==-1&&(p.value[n]=s.data)}async function Yt(a,t,s={}){return(await e.post(`/api/admin/stt-bindings/${a}/execute_command`,{command_name:t,parameters:s})).data}async function ae(a){return(await e.get(`/api/admin/rag-bindings/${a}/models`)).data}async function te(a,t){const s=await e.put(`/api/admin/rag-bindings/${a}/alias`,t),n=f.value.findIndex(r=>r.id===a);n!==-1&&(f.value[n]=s.data)}async function ee(a,t){const s=await e.delete(`/api/admin/rag-bindings/${a}/alias`,{data:{original_model_name:t}}),n=f.value.findIndex(r=>r.id===a);n!==-1&&(f.value[n]=s.data)}async function se(a){return(await e.get(`/api/admin/rag-bindings/models-for-type/${a}`)).data}async function ne(a){await e.post("/api/admin/rag/aliases",a),await m(!0),o.addNotification(`Alias '${a.alias_name}' saved.`,"success")}async function ie(a){await e.delete("/api/admin/rag/aliases",{data:{alias_name:a}}),await m(!0),o.addNotification(`Alias '${a}' deleted.`,"success")}async function oe(a=!1){if(!(!a&&J.value.length>0))try{const t=await e.get("/api/admin/rag/available-vectorizers");J.value=t.data}catch(t){console.error(t)}}async function ce(a=!1){if(!(!a&&y.value.length>0)){Q.value=!0;try{const t=await e.get("/api/apps_zoo/repositories");y.value=t.data}finally{Q.value=!1}}}async function re(a){const t=await e.post("/api/apps_zoo/repositories",a);y.value.push(t.data)}async function le(a){await e.delete(`/api/apps_zoo/repositories/${a}`),y.value=y.value.filter(t=>t.id!==a)}async function Ea(a){const t=await e.post(`/api/apps_zoo/repositories/${a}/pull`);c.addTask(t.data)}async function de(){for(const a of y.value)await Ea(a.id)}async function ue(a=!1){if(!(!a&&v.value.length>0)){K.value=!0;try{const t=await e.get("/api/mcps_zoo/repositories");v.value=t.data}finally{K.value=!1}}}async function pe(a){const t=await e.post("/api/mcps_zoo/repositories",a);v.value.push(t.data)}async function fe(a){await e.delete(`/api/mcps_zoo/repositories/${a}`),v.value=v.value.filter(t=>t.id!==a)}async function Da(a){const t=await e.post(`/api/mcps_zoo/repositories/${a}/pull`);c.addTask(t.data)}async function ge(){for(const a of v.value)await Da(a.id)}async function me(a=!1){if(!(!a&&w.value.length>0)){W.value=!0;try{const t=await e.get("/api/prompts_zoo/repositories");w.value=t.data}finally{W.value=!1}}}async function ye(a){const t=await e.post("/api/prompts_zoo/repositories",a);w.value.push(t.data)}async function ve(a){await e.delete(`/api/prompts_zoo/repositories/${a}`),w.value=w.value.filter(t=>t.id!==a)}async function Ga(a){const t=await e.post(`/api/prompts_zoo/repositories/${a}/pull`);c.addTask(t.data)}async function we(){for(const a of w.value)await Ga(a.id)}async function he(a=!1){if(!(!a&&b.value.length>0)){H.value=!0;try{const t=await e.get("/api/personalities_zoo/repositories");b.value=t.data}catch(t){console.error(t)}finally{H.value=!1}}}async function _e(a){const t=await e.post("/api/personalities_zoo/repositories",a);b.value.push(t.data)}async function be(a){await e.delete(`/api/personalities_zoo/repositories/${a}`),b.value=b.value.filter(t=>t.id!==a)}async function Te(a){const t=await e.post(`/api/personalities_zoo/repositories/${a}/pull`);c.addTask(t.data)}async function z(a=!1){if(!(!a&&X.value.items.length>0)){Y.value=!0;try{const[t,s]=await Promise.all([e.get("/api/apps_zoo/categories"),e.get("/api/apps_zoo/available")]);X.value={...s.data,categories:t.data}}finally{Y.value=!1}}}async function Se(a){const t=await e.post("/api/apps_zoo/install",a);c.addTask(t.data)}async function $e(a,t){return(await e.get("/api/apps_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function A(a=!1){if(!(!a&&aa.value.items.length>0)){ta.value=!0;try{const[t,s]=await Promise.all([e.get("/api/mcps_zoo/categories"),e.get("/api/mcps_zoo/available")]);aa.value={...s.data,categories:t.data}}finally{ta.value=!1}}}async function Be(a){const t=await e.post("/api/mcps_zoo/install",a);c.addTask(t.data)}async function ze(a,t){return(await e.get("/api/mcps_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function Ra(a={},t=!1){if(!(!t&&ea.value.items.length>0)){sa.value=!0;try{const[s,n]=await Promise.all([e.get("/api/prompts_zoo/categories"),e.get("/api/prompts_zoo/available",{params:a})]);ea.value={...n.data,categories:s.data}}finally{sa.value=!1}}}async function Ae(a){const t=await e.post("/api/prompts_zoo/install",a);c.addTask(t.data)}async function Re(a,t){return(await e.get("/api/prompts_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function ja(a={},t=!1){if(!(!t&&na.value.items.length>0)){ia.value=!0;try{const[s,n]=await Promise.all([e.get("/api/personalities_zoo/categories"),e.get("/api/personalities_zoo/available",{params:a})]);na.value={...n.data,categories:s.data}}catch(s){console.error(s)}finally{ia.value=!1}}}async function ke(a){const t=await e.post("/api/personalities_zoo/install",a);c.addTask(t.data)}async function Ne(a,t){return(await e.get("/api/personalities_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function Fe(a){return(await e.get(`/api/admin/bindings/${a}/zoo`)).data}async function Le(a,t){const s=await e.post(`/api/admin/bindings/${a}/zoo/install`,{index:t});return c.addTask(s.data),s.data}async function Pe(a){return(await e.get(`/api/admin/tti-bindings/${a}/zoo`)).data}async function Ze(a,t){const s=await e.post(`/api/admin/tti-bindings/${a}/zoo/install`,{index:t});return c.addTask(s.data),s.data}async function Ie(a){return(await e.get(`/api/admin/tts-bindings/${a}/zoo`)).data}async function Me(a,t){const s=await e.post(`/api/admin/tts-bindings/${a}/zoo/install`,{index:t});return c.addTask(s.data),s.data}async function Ue(a){return(await e.get(`/api/admin/stt-bindings/${a}/zoo`)).data}async function Ce(a,t){const s=await e.post(`/api/admin/stt-bindings/${a}/zoo/install`,{index:t});return c.addTask(s.data),s.data}async function xe(a){const{usePromptsStore:t}=await Pa(async()=>{const{usePromptsStore:n}=await import("./index-DjgpTDIL.js").then(r=>r.eI);return{usePromptsStore:n}},__vite__mapDeps([0,1])),s=await e.post("/api/prompts_zoo/installed",a);return await t().fetchPrompts(),s.data}async function Oe(a,t){const{usePromptsStore:s}=await Pa(async()=>{const{usePromptsStore:n}=await import("./index-DjgpTDIL.js").then(r=>r.eI);return{usePromptsStore:n}},__vite__mapDeps([0,1]));await e.put(`/api/prompts_zoo/installed/${a}`,t),await s().fetchPrompts()}async function Ee(a){const{usePromptsStore:t}=await Pa(async()=>{const{usePromptsStore:s}=await import("./index-DjgpTDIL.js").then(n=>n.eI);return{usePromptsStore:s}},__vite__mapDeps([0,1]));await e.delete(`/api/prompts_zoo/installed/${a}`),await t().fetchPrompts(),await Ra({},!0)}async function De(a){const t=await e.post(`/api/prompts_zoo/installed/${a}/update`);c.addTask(t.data)}async function Ge(a){const t=await e.post("/api/prompts_zoo/generate_from_prompt",{prompt:a});return c.addTask(t.data),t.data}async function qa(a=!1){if(!(!a&&$.value.length>0)){oa.value=!0;try{const t=await e.get("/api/apps_zoo/installed");$.value=t.data}finally{oa.value=!1}}}async function je(a=null){const t=a?{port:a}:{};return(await e.get("/api/apps_zoo/get-next-available-port",{params:t})).data.port}async function qe(a){const t=await e.post(`/api/apps_zoo/installed/${a}/start`);c.addTask(t.data)}async function Ve(a){const t=await e.post(`/api/apps_zoo/installed/${a}/stop`);c.addTask(t.data)}async function Je(a){const t=await e.post(`/api/apps_zoo/installed/${a}/restart`);c.addTask(t.data)}async function Qe(a){const t=await e.post(`/api/apps_zoo/installed/${a}/update`);c.addTask(t.data)}async function Ke(a){await e.delete(`/api/apps_zoo/installed/${a}`),await z(!0),await A(!0),o.addNotification("Item uninstalled.","success")}async function We(a,t){await e.put(`/api/apps_zoo/installed/${a}`,t),await z(!0),await A(!0)}async function He(a){return(await e.get(`/api/apps_zoo/installed/${a}/logs`)).data.log_content}async function Xe(a){return(await e.get(`/api/apps_zoo/installed/${a}/config-schema`)).data}async function Ye(a){return(await e.get(`/api/apps_zoo/installed/${a}/config`)).data}async function as(a,t){await e.put(`/api/apps_zoo/installed/${a}/config`,t)}async function ts(a){return(await e.get(`/api/apps_zoo/installed/${a}/env`)).data}async function es(a,t){await e.put(`/api/apps_zoo/installed/${a}/env`,{content:t}),o.addNotification(".env file saved.","success")}async function ss(a){await e.delete(`/api/apps/${a}`),await z(!0),o.addNotification("App registration removed.","success")}async function ns(a){await e.delete(`/api/mcps/${a}`),await A(!0),o.addNotification("MCP registration removed.","success")}async function is(){const a=await e.post("/api/apps_zoo/sync-installs");c.addTask(a.data)}async function os(a){const t=await e.post("/api/apps_zoo/purge-broken",{item_type:a.item_type||"app",folder_name:a.folder_name});c.addTask(t.data)}async function cs(a){const t=await e.post("/api/apps_zoo/fix-broken",{item_type:a.item_type||"app",folder_name:a.folder_name});c.addTask(t.data)}function rs(a){if(!$.value)return;const t=$.value.find(s=>s.id===a.id);t?(a.status&&(t.status=a.status),a.is_installed!==void 0&&(t.is_installed=a.is_installed)):qa(!0)}async function h(a=!1){if(!(!a&&B.value.length>0)){ma.value=!0;try{const t=await e.get("/api/admin/fun-facts");B.value=t.data}finally{ma.value=!1}}}async function _(a=!1){if(!(!a&&ya.value.length>0)){va.value=!0;try{const t=await e.get("/api/admin/fun-facts/categories");ya.value=t.data}finally{va.value=!1}}}async function ls(a){await e.post("/api/admin/fun-facts",a),await h(!0)}async function ds(a,t){await e.put(`/api/admin/fun-facts/${a}`,t),await h(!0)}async function us(a){await e.delete(`/api/admin/fun-facts/${a}`),B.value=B.value.filter(t=>t.id!==a)}async function ps(a){await e.post("/api/admin/fun-facts/categories",a),await _(!0)}async function fs(a,t){await e.put(`/api/admin/fun-facts/categories/${a}`,t),await _(!0)}async function gs(a){await e.delete(`/api/admin/fun-facts/categories/${a}`),await Promise.all([_(!0),h(!0)])}async function ms(){const a=await e.get("/api/admin/fun-facts/export",{responseType:"blob"}),t=URL.createObjectURL(new Blob([a.data])),s=document.createElement("a");s.href=t,s.download="fun_facts_export.json",s.click(),URL.revokeObjectURL(t)}async function ys(a,t){const s=await e.get(`/api/admin/fun-facts/categories/${a}/export`,{responseType:"blob"}),n=URL.createObjectURL(new Blob([s.data])),r=document.createElement("a");r.href=n,r.download=`fun_facts_${t}.json`,r.click(),URL.revokeObjectURL(n)}async function vs(a){const t={fun_facts:a},s=await e.post("/api/admin/fun-facts/import",t);await Promise.all([h(!0),_(!0)]),o.addNotification(`Imported ${s.data.facts_created} facts and ${s.data.categories_created} new categories.`,"success")}async function ws(a){const t=new FormData;t.append("file",a);const s=await e.post("/api/admin/fun-facts/categories/import",t);await Promise.all([h(!0),_(!0)]),o.addNotification(`Imported ${s.data.facts_created} facts for category.`,"success")}async function hs(a,t){let s;typeof a=="object"?s=a:s={content:a,category:t,source_type:"topic"};const n=await e.post("/api/admin/fun-facts/generate-from-prompt",s);return c.addTask(n.data),n.data}async function ka(a=!1){if(!(!a&&wa.value.length>0)){ha.value=!0;try{const t=await e.get("/api/admin/news-articles");wa.value=t.data}finally{ha.value=!1}}}async function _s(a,t){await e.put(`/api/admin/news-articles/${a}`,t),await ka(!0),o.addNotification("Article updated.","success")}async function bs(a){await e.post("/api/admin/news-articles/batch-delete",{article_ids:a}),await ka(!0),o.addNotification(`${a.length} article(s) deleted.`,"success")}async function Na(a={}){L.value=!0;try{const t=await e.get("/api/admin/users",{params:a});Ia.value=t.data}finally{L.value=!1}}async function Ts(a){await e.post(`/api/admin/users/${a}/activate`),o.addNotification("User activated.","success"),Na()}async function Ss(a){try{return(await e.get(`/api/admin/users/${a}/stats`)).data}catch{return null}}async function $s(a){await e.post("/api/admin/users/batch-update-settings",a),await Na()}async function Bs(a,t,s,n,r){const Ds=await e.post("/api/admin/email-users",{subject:a,body:t,user_ids:s,background_color:n,send_as_text:r});return c.addTask(Ds.data),!0}async function zs(a,t,s,n){ba.value=!0;try{return(await e.post("/api/admin/enhance-email",{subject:a,body:t,background_color:s,prompt:n})).data}finally{ba.value=!1}}async function As(a){const t=new FormData;t.append("file",a);const s=await e.post("/api/admin/upload-logo",t);await m(!0),o.addNotification(s.data.message,"success")}async function Rs(){await e.delete("/api/admin/remove-logo"),await m(!0),o.addNotification("Custom logo removed.","success")}async function ks(a,t){const s=new FormData;s.append("file",a),s.append("file_type",t);const n=await e.post("/api/admin/upload-ssl-file",s,{headers:{"Content-Type":"multipart/form-data"}});return await m(!0),n.data.path}async function Ns(){var a,t;try{const s=await e.post("/api/admin/generate-cert");return c.addTask(s.data),o.addNotification("Certificate generation task started. Check tasks for progress.","info"),s.data}catch(s){const n=((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.detail)||"Failed to start certificate task.";throw o.addNotification(n,"error"),s}}async function Fs(){try{const a=await e.get("/api/admin/download-cert",{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([a.data])),s=document.createElement("a");s.href=t,s.setAttribute("download","lollms_cert.pem"),document.body.appendChild(s),s.click(),s.remove()}catch{o.addNotification("Failed to download certificate.","error")}}async function Ls(a){try{const t=await e.get("/api/admin/download-trust-script",{params:{script_type:a},responseType:"blob"}),s=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=s;const r=a==="windows"?"bat":"sh";n.setAttribute("download",`install_lollms_cert.${r}`),document.body.appendChild(n),n.click(),n.remove()}catch(t){console.error(t),o.addNotification("Failed to download trust script.","error")}}async function Ps(a){_a.value=!0;const t=new FormData;t.append("file",a);try{await e.post("/api/admin/import-openwebui",t)}finally{_a.value=!1}}async function Zs(a=!1){if(!(!a&&Ta.value.length>0)){Sa.value=!0;try{const t=await e.get("/api/admin/available-models");Ta.value=t.data}finally{Sa.value=!1}}}async function Is(a){const t=await e.post("/api/admin/bindings/generate_icon",{prompt:a});return c.addTask(t.data),t.data}async function Ms(){const a=await e.post("/api/admin/rss-feeds/scrape");return c.addTask(a.data),a.data}async function Us(){const a=await e.post("/api/admin/refresh-zoo-cache");return c.addTask(a.data),a.data}async function Cs(a=null){const t={};return a&&(t.status_filter=a),(await e.get("/api/admin/moderation/queue",{params:t})).data}async function xs(a,t){await e.post(`/api/admin/moderation/${a}/${t}/approve`)}async function Os(a,t){await e.delete(`/api/admin/moderation/${a}/${t}`)}async function Va(){za.value=!0;try{const a=await e.get("/api/admin/system/requirements");Ua.value=a.data}finally{za.value=!1}}async function Es(a,t){const s=await e.post("/api/admin/system/requirements/install",{name:a,version:t});c.addTask(s.data)}async function N(){S.value=!0;try{const a=await e.get("/api/admin/services/dashboard");P.value=a.data}finally{S.value=!1}}async function Ja(){await e.post("/api/admin/services/reset-usage"),await N(),o.addNotification("Usage statistics reset.","success")}async function Qa(a){const t=await e.post("/api/admin/backup/create",{password:a});return c.addTask(t.data),t.data}async function Ka(){try{const a=await e.post("/api/admin/system/analyze-logs");return c.addTask(a.data),a.data}catch(a){throw o.addNotification("Failed to start log analysis.","error"),a}}async function Wa(){const a=await e.post("/api/admin/purge-unused-uploads");c.addTask(a.data)}async function Ha(){const a=await e.post("/api/admin/trigger-moderation");c.addTask(a.data)}async function Xa(){const a=await e.post("/api/admin/trigger-full-remoderation");c.addTask(a.data)}async function Ya(a){await e.post("/api/admin/broadcast",{message:a})}async function at(a){await e.post("/api/admin/system/kill-process",{pid:a}),o.addNotification(`Process ${a} killed.`,"success"),Aa()}return{dashboardStats:T,isLoadingDashboardStats:F,allUsers:Ia,isLoadingUsers:L,serviceStats:P,isLoadingServiceStats:S,globalSettings:Z,isLoadingSettings:I,aiBotSettings:R,isLoadingAiBotSettings:M,bindings:l,isLoadingBindings:U,availableBindingTypes:C,ttiBindings:d,isLoadingTtiBindings:x,availableTtiBindingTypes:O,ttsBindings:u,isLoadingTtsBindings:E,availableTtsBindingTypes:D,sttBindings:p,isLoadingSttBindings:G,availableSttBindingTypes:j,ragBindings:f,isLoadingRagBindings:q,availableRagBindingTypes:V,availableRagVectorizers:J,zooRepositories:y,isLoadingZooRepositories:Q,mcpZooRepositories:v,isLoadingMcpZooRepositories:K,promptZooRepositories:w,isLoadingPromptZooRepositories:W,personalityZooRepositories:b,isLoadingPersonalityZooRepositories:H,zooApps:X,isLoadingZooApps:Y,zooMcps:aa,isLoadingZooMcps:ta,zooPrompts:ea,isLoadingZooPrompts:sa,zooPersonalities:na,isLoadingZooPersonalities:ia,installedApps:$,isLoadingInstalledApps:oa,systemStatus:Ma,isLoadingSystemStatus:ca,connectedUsers:ra,isLoadingConnectedUsers:la,serverInfo:da,isLoadingServerInfo:ua,globalGenerationStats:k,isLoadingGlobalGenerationStats:pa,modelUsageStats:fa,isLoadingModelUsageStats:ga,funFacts:B,isLoadingFunFacts:ma,funFactCategories:ya,isLoadingFunFactCategories:va,newsArticles:wa,isLoadingNewsArticles:ha,isImporting:_a,isEnhancingEmail:ba,adminAvailableLollmsModels:Ta,isLoadingLollmsModels:Sa,appFilters:Ca,mcpFilters:xa,promptFilters:Oa,systemLogs:$a,isLoadingSystemLogs:Ba,systemRequirements:Ua,isLoadingRequirements:za,forceAllUsersConfig:et,fetchDashboardStats:st,fetchConnectedUsers:nt,broadcastMessage:Ya,createBackup:Qa,analyzeSystemLogs:Ka,fetchServiceDashboard:N,resetServiceUsage:Ja,fetchSystemStatus:Aa,killProcess:at,fetchModelUsageStats:rt,fetchServerInfo:ct,purgeUnusedUploads:Wa,fetchAllUsers:Na,activateUser:Ts,fetchUserStats:Ss,batchUpdateUsers:$s,fetchGlobalGenerationStats:it,fetchGlobalSettings:m,updateGlobalSettings:lt,fetchAiBotSettings:dt,updateAiBotSettings:ut,triggerBatchModeration:Ha,triggerFullRemoderation:Xa,uploadWelcomeLogo:As,removeWelcomeLogo:Rs,uploadSslFile:ks,importOpenWebUIData:Ps,fetchAdminAvailableLollmsModels:Zs,generateIconForModel:Is,fetchBindings:pt,fetchAvailableBindingTypes:ft,addBinding:gt,updateBinding:mt,deleteBinding:yt,fetchBindingModels:Ut,getModelCtxSize:Ct,saveModelAlias:xt,deleteModelAlias:Ot,executeBindingCommand:Et,fetchTtiBindings:vt,fetchAvailableTtiBindingTypes:wt,addTtiBinding:ht,updateTtiBinding:_t,deleteTtiBinding:bt,fetchTtiBindingModels:Dt,saveTtiModelAlias:Gt,deleteTtiModelAlias:jt,executeTtiBindingCommand:qt,fetchTtsBindings:Tt,fetchAvailableTtsBindingTypes:St,addTtsBinding:$t,updateTtsBinding:Bt,deleteTtsBinding:zt,fetchTtsBindingModels:Vt,saveTtsModelAlias:Jt,deleteTtsModelAlias:Qt,executeTtsBindingCommand:Kt,fetchSttBindings:At,fetchAvailableSttBindingTypes:Rt,addSttBinding:kt,updateSttBinding:Nt,deleteSttBinding:Ft,fetchSttBindingModels:Wt,saveSttModelAlias:Ht,deleteSttModelAlias:Xt,executeSttBindingCommand:Yt,fetchRagBindings:Lt,fetchAvailableRagBindingTypes:Pt,addRagBinding:Zt,updateRagBinding:It,deleteRagBinding:Mt,fetchRagBindingModels:ae,saveRagModelAlias:te,deleteRagModelAlias:ee,fetchRagModelsForType:se,addOrUpdateRagAlias:ne,deleteRagAlias:ie,fetchAvailableRagVectorizers:oe,fetchZooRepositories:ce,addZooRepository:re,deleteZooRepository:le,pullZooRepository:Ea,pullAllZooRepositories:de,fetchMcpZooRepositories:ue,addMcpZooRepository:pe,deleteMcpZooRepository:fe,pullMcpZooRepository:Da,pullAllMcpZooRepositories:ge,fetchPromptZooRepositories:me,addPromptZooRepository:ye,deletePromptZooRepository:ve,pullPromptZooRepository:Ga,pullAllPromptZooRepositories:we,fetchPersonalityZooRepositories:he,addPersonalityZooRepository:_e,deletePersonalityZooRepository:be,pullPersonalityZooRepository:Te,fetchZooApps:z,installZooApp:Se,fetchAppReadme:$e,fetchZooMcps:A,installZooMcp:Be,fetchMcpReadme:ze,fetchZooPrompts:Ra,installZooPrompt:Ae,fetchPromptReadme:Re,fetchZooPersonalities:ja,installZooPersonality:ke,fetchPersonalityReadme:Ne,createSystemPrompt:xe,updateSystemPrompt:Oe,deleteSystemPrompt:Ee,updateSystemPromptFromZoo:De,generateSystemPrompt:Ge,fetchInstalledApps:qa,fetchNextAvailablePort:je,startApp:qe,stopApp:Ve,restartApp:Je,updateApp:Qe,uninstallApp:Ke,updateInstalledApp:We,fetchAppLog:He,fetchAppConfigSchema:Xe,fetchAppConfig:Ye,updateAppConfig:as,fetchAppEnv:ts,updateAppEnv:es,deleteRegisteredApp:ss,deleteRegisteredMcp:ns,syncInstallations:is,purgeBrokenInstallation:os,fixBrokenInstallation:cs,handleAppStatusUpdate:rs,fetchFunFacts:h,fetchFunFactCategories:_,createFunFact:ls,updateFunFact:ds,deleteFunFact:us,createFunFactCategory:ps,updateFunFactCategory:fs,deleteFunFactCategory:gs,exportFunFacts:ms,exportCategory:ys,importFunFacts:vs,importCategoryFromFile:ws,generateFunFacts:hs,fetchNewsArticles:ka,updateNewsArticle:_s,deleteBatchNewsArticles:bs,fetchSystemLogs:ot,sendEmailToUsers:Bs,enhanceEmail:zs,triggerRssScraping:Ms,refreshZooCache:Us,generateSelfSignedCert:Ns,downloadCertificate:Fs,downloadTrustScript:Ls,fetchBindingZoo:Fe,installLlmFromZoo:Le,fetchTtiBindingZoo:Pe,installTtiFromZoo:Ze,fetchTtsBindingZoo:Ie,installTtsFromZoo:Me,fetchSttBindingZoo:Ue,installSttFromZoo:Ce,fetchModerationQueue:Cs,approveContent:xs,deleteContent:Os,fetchRequirements:Va,installRequirement:Es}});export{Ks as u};
