import{u as x,h as m,r as u,l as M,c as g,o as w,w as f,a as o,i as k,t as C,f as p,v as b,b as E}from"./index-BztlMlxc.js";import{useMemoriesStore as S}from"./memories-YD3_LxPd.js";import{_ as T}from"./GenericModal-DF57XP4_.js";const N=["disabled"],B={__name:"MemoryEditorModal",setup(U){const r=x(),d=S(),c=m(()=>r.modalData("memoryEditor")),v=m(()=>{var t;return(t=c.value)==null?void 0:t.memory}),s=m(()=>!!v.value),a=u(""),l=u(""),n=u(!1);M(c,t=>{t&&t.memory?(a.value=t.memory.title||"",l.value=t.memory.content||""):(a.value="",l.value="")},{immediate:!0});async function y(){if(!a.value.trim()||!l.value.trim()){r.addNotification("Title and content are required.","warning");return}n.value=!0;try{s.value?await d.updateMemory(v.value.id,{title:a.value,content:l.value}):await d.addMemory({title:a.value,content:l.value}),r.closeModal("memoryEditor")}catch{}finally{n.value=!1}}return(t,e)=>(w(),g(T,{modalName:"memoryEditor",title:s.value?"Edit Memory":"New Memory",maxWidthClass:"max-w-2xl"},{body:f(()=>[o("form",{onSubmit:E(y,["prevent"]),class:"space-y-4 p-1"},[o("div",null,[e[3]||(e[3]=o("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"Title",-1)),p(o("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>a.value=i),type:"text",class:"input-field w-full",placeholder:"Memory Title (e.g. User Preferences)",required:"",autofocus:""},null,512),[[b,a.value]])]),o("div",null,[e[4]||(e[4]=o("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"Content",-1)),p(o("textarea",{"onUpdate:modelValue":e[1]||(e[1]=i=>l.value=i),rows:"6",class:"input-field w-full resize-y",placeholder:"Memory content...",required:""},null,512),[[b,l.value]])])],32)]),footer:f(()=>[o("button",{onClick:e[2]||(e[2]=i=>k(r).closeModal("memoryEditor")),class:"btn btn-secondary"},"Cancel"),o("button",{onClick:y,class:"btn btn-primary",disabled:n.value},C(s.value?"Save Changes":"Create Memory"),9,N)]),_:1},8,["title"]))}};export{B as default};
