import{u as k,R as T,az as Z,r as u,b as S,d as B,S as z,c as a,o as l,a as s,t as d,J as F,K as M,g as v,M as N,F as C,j,h,G as L,ar as I}from"./index-D2Id9a0s.js";import{u as V}from"./admin-C3UVXmf5.js";const R={class:"flex flex-col h-[600px]"},$={class:"mb-4 flex items-center justify-between"},q={class:"font-semibold text-lg"},A=["disabled"],D={class:"mb-4 relative"},U={key:0,class:"flex-grow flex items-center justify-center"},E={class:"text-center"},G={key:1,class:"flex-grow flex items-center justify-center text-gray-500"},J={key:2,class:"flex-grow overflow-y-auto space-y-3 pr-2"},K={class:"flex-grow"},O={class:"font-bold text-gray-900 dark:text-white"},H={class:"text-sm text-gray-600 dark:text-gray-300 mt-1"},P={class:"flex flex-wrap gap-2 mt-2 text-xs text-gray-500 dark:text-gray-400"},Q={key:0,class:"bg-gray-100 dark:bg-gray-600 px-2 py-0.5 rounded"},W={key:1,class:"bg-gray-100 dark:bg-gray-600 px-2 py-0.5 rounded"},X={class:"flex-shrink-0 flex items-center"},Y=["onClick","disabled"],ne={__name:"BindingZoo",props:{binding:{type:Object,required:!0},bindingType:{type:String,required:!0}},setup(y){const e=y,b=k(),o=V(),x=T(),{tasks:ee}=Z(x),r=u([]),c=u(!1),g=u(null),f=u(""),w=S(()=>{if(!f.value)return r.value;const n=f.value.toLowerCase();return r.value.filter(i=>i.name.toLowerCase().includes(n))});async function p(){c.value=!0;try{let n=[];e.bindingType==="llm"?n=await o.fetchBindingZoo(e.binding.id):e.bindingType==="tti"?n=await o.fetchTtiBindingZoo(e.binding.id):e.bindingType==="tts"?n=await o.fetchTtsBindingZoo(e.binding.id):e.bindingType==="stt"?n=await o.fetchSttBindingZoo(e.binding.id):e.bindingType==="ttv"?n=await o.fetchTtvBindingZoo(e.binding.id):e.bindingType==="ttm"&&(n=await o.fetchTtmBindingZoo(e.binding.id)),r.value=n||[]}catch(n){console.error(n),b.addNotification("Failed to fetch zoo models.","error")}finally{c.value=!1}}async function _(n,i){if(g.value===null){g.value=i;try{let t;e.bindingType==="llm"?t=await o.installLlmFromZoo(e.binding.id,i):e.bindingType==="tti"?t=await o.installTtiFromZoo(e.binding.id,i):e.bindingType==="tts"?t=await o.installTtsFromZoo(e.binding.id,i):e.bindingType==="stt"?t=await o.installSttFromZoo(e.binding.id,i):e.bindingType==="ttv"?t=await o.installTtvFromZoo(e.binding.id,i):e.bindingType==="ttm"&&(t=await o.installTtmFromZoo(e.binding.id,i)),t&&b.addNotification(`Installing ${n.name}...`,"info")}catch(t){console.error(t),b.addNotification("Installation failed to start.","error")}finally{g.value=null}}}return B(()=>{p()}),z(()=>e.binding,()=>{r.value=[],p()}),(n,i)=>(l(),a("div",R,[s("div",$,[s("h3",q,"Models Zoo: "+d(y.binding.alias),1),s("button",{onClick:p,class:"text-blue-600 hover:underline text-sm",disabled:c.value},"Refresh",8,A)]),s("div",D,[F(s("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=t=>f.value=t),placeholder:"Search zoo...",class:"input-field w-full pl-8"},null,512),[[M,f.value]]),i[1]||(i[1]=s("div",{class:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none text-gray-400"},[s("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),c.value?(l(),a("div",U,[s("div",E,[v(N,{class:"w-8 h-8 text-blue-500 mx-auto mb-2"}),i[2]||(i[2]=s("p",null,"Loading zoo...",-1))])])):r.value.length===0?(l(),a("div",G," No models found in zoo for this binding. ")):(l(),a("div",J,[(l(!0),a(C,null,j(w.value,(t,m)=>(l(),a("div",{key:m,class:"bg-white dark:bg-gray-700/50 p-4 rounded-lg border border-gray-200 dark:border-gray-600 flex flex-col sm:flex-row gap-4"},[s("div",K,[s("h4",O,d(t.name),1),s("p",H,d(t.description),1),s("div",P,[t.size?(l(),a("span",Q,"Size: "+d(t.size),1)):h("",!0),t.type?(l(),a("span",W,"Type: "+d(t.type),1)):h("",!0)])]),s("div",X,[s("button",{onClick:te=>_(t,m),class:"btn btn-primary btn-sm flex items-center gap-2",disabled:g.value!==null},[v(I,{class:"w-4 h-4"}),i[3]||(i[3]=L(" Install "))],8,Y)])]))),128))]))]))}};export{ne as default};
