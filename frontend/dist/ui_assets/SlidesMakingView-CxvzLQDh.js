import{a4 as ce,L as i,m as le,l as pt,W as Ge,e as o,o as s,b as t,t as m,N as he,cr as xt,Q as mt,u as yt,R as ht,i as kt,T as wt,c as _,f as n,a as C,w as Y,g as x,aD as ee,an as _t,F as T,r as D,n as S,ad as te,z as H,d0 as ie,a9 as Ve,a2 as me,dj as Ct,h as G,Y as ae,ax as ye,D as Re,aE as ze,K as P,aK as St,aw as At,az as de,d1 as Tt,av as $t,G as It,aF as ue,M as Lt,a0 as L,au as De,ac as V,d2 as Vt,aa as Rt,ap as Ne}from"./index-CZ57W16T.js";import{_ as zt}from"./AuthenticatedVideo-DDkCPbHe.js";import{I as Dt}from"./IconVideoCamera-wqxu-7mN.js";const Nt={class:"w-full flex items-center gap-2"},jt={key:0,class:"flex-grow h-8 bg-gray-200 dark:bg-gray-700 animate-pulse rounded-lg flex items-center px-4"},Gt=["src"],Mt={key:2,class:"flex-grow h-8 bg-red-50 dark:bg-red-900/20 rounded-lg flex items-center px-4 border border-red-200 dark:border-red-800"},Ut={class:"text-[10px] font-bold text-red-500 uppercase tracking-widest"},Et={__name:"AuthenticatedAudio",props:{src:{type:String,required:!0}},setup(R){const b=R,v=i(null),h=i(!0),M=i(!1),be=i(null);let $=null;async function K(){if(!b.src){h.value=!1;return}h.value=!0,M.value=!1,$&&(URL.revokeObjectURL($),$=null);try{const g=await he.get(b.src,{responseType:"blob",timeout:3e4});$=URL.createObjectURL(g.data),v.value=$}catch(g){console.error("Failed to fetch authenticated audio:",g),M.value=!0}finally{h.value=!1}}function ve(g){console.error("Audio playback error:",g),M.value=!0}return le(()=>b.src,K),pt(K),Ge(()=>{$&&URL.revokeObjectURL($)}),(g,U)=>(s(),o("div",Nt,[h.value?(s(),o("div",jt,U[0]||(U[0]=[t("span",{class:"text-[10px] font-bold text-gray-400 uppercase tracking-widest"},"Loading Audio...",-1)]))):v.value&&!M.value?(s(),o("audio",{key:1,ref_key:"audioRef",ref:be,controls:"",src:v.value,class:"w-full h-8",onError:ve},null,40,Gt)):(s(),o("div",Mt,[t("span",Ut,m(M.value?"Audio Access Error":"No Audio Data"),1)]))]))}},Pt=ce(Et,[["__scopeId","data-v-950450fa"]]),Ot={},Bt={width:"50px",height:"50px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ft(R,b){return s(),o("svg",Bt,b[0]||(b[0]=[xt('<path d="M13 8.92226L7.92226 3.84453C6.79623 2.71849 4.97056 2.71849 3.84453 3.84453C2.71849 4.97056 2.71849 6.79623 3.84453 7.92226L16.0777 20.1555C17.2038 21.2815 19.0294 21.2815 20.1555 20.1555C21.2815 19.0294 21.2815 17.2038 20.1555 16.0777L17.0777 13" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path><path d="M6 10L10 6" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path><path d="M16.1 2.30719C16.261 1.8976 16.8385 1.8976 16.9994 2.30719L17.4298 3.40247C17.479 3.52752 17.5776 3.62651 17.7022 3.67583L18.7934 4.1078C19.2015 4.26934 19.2015 4.849 18.7934 5.01054L17.7022 5.44252C17.5776 5.49184 17.479 5.59082 17.4298 5.71587L16.9995 6.81115C16.8385 7.22074 16.261 7.22074 16.1 6.81116L15.6697 5.71587C15.6205 5.59082 15.5219 5.49184 15.3973 5.44252L14.3061 5.01054C13.898 4.849 13.898 4.26934 14.3061 4.1078L15.3973 3.67583C15.5219 3.62651 15.6205 3.52752 15.6697 3.40247L16.1 2.30719Z" stroke="#1C274C"></path><path d="M19.9672 9.12945C20.1281 8.71987 20.7057 8.71987 20.8666 9.12945L21.0235 9.5288C21.0727 9.65385 21.1713 9.75284 21.2959 9.80215L21.6937 9.95965C22.1018 10.1212 22.1018 10.7009 21.6937 10.8624L21.2959 11.0199C21.1713 11.0692 21.0727 11.1682 21.0235 11.2932L20.8666 11.6926C20.7057 12.1022 20.1281 12.1022 19.9672 11.6926L19.8103 11.2932C19.7611 11.1682 19.6625 11.0692 19.5379 11.0199L19.14 10.8624C18.732 10.7009 18.732 10.1212 19.14 9.95965L19.5379 9.80215C19.6625 9.75284 19.7611 9.65385 19.8103 9.5288L19.9672 9.12945Z" stroke="#1C274C"></path><path d="M5.1332 15.3072C5.29414 14.8976 5.87167 14.8976 6.03261 15.3072L6.18953 15.7065C6.23867 15.8316 6.33729 15.9306 6.46188 15.9799L6.85975 16.1374C7.26783 16.2989 7.26783 16.8786 6.85975 17.0401L6.46188 17.1976C6.33729 17.2469 6.23867 17.3459 6.18953 17.471L6.03261 17.8703C5.87167 18.2799 5.29414 18.2799 5.1332 17.8703L4.97628 17.471C4.92714 17.3459 4.82852 17.2469 4.70393 17.1976L4.30606 17.0401C3.89798 16.8786 3.89798 16.2989 4.30606 16.1374L4.70393 15.9799C4.82852 15.9306 4.92714 15.8316 4.97628 15.7065L5.1332 15.3072Z" stroke="#1C274C"></path>',5)]))}const Wt=ce(Ot,[["render",Ft]]),Ht={},Kt={width:"50px",height:"50px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function Zt(R,b){return s(),o("svg",Kt,b[0]||(b[0]=[t("title",null,null,-1),t("g",{id:"Complete"},[t("g",{id:"bubble-square"},[t("path",{d:"M7.7,18.3H19.4a2.1,2.1,0,0,0,2.1-2.1V4.6a2.1,2.1,0,0,0-2.1-2.1H4.6A2.1,2.1,0,0,0,2.5,4.6V21.5Z",fill:"none",stroke:"#000000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})])],-1)]))}const je=ce(Ht,[["render",Zt]]),qt={class:"flex flex-col h-full overflow-hidden bg-gray-100 dark:bg-gray-950 relative"},Jt={key:0,class:"absolute inset-0 z-50 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md flex flex-col p-10"},Xt={class:"max-w-4xl mx-auto w-full flex flex-col h-full animate-in fade-in zoom-in-95 duration-500"},Qt={class:"flex items-center justify-between mb-8"},Yt={class:"flex items-center gap-6"},ea={class:"p-4 bg-blue-600 rounded-3xl shadow-xl shadow-blue-500/20"},ta={class:"text-2xl font-black text-gray-900 dark:text-white uppercase tracking-tighter"},aa={class:"text-sm font-bold text-blue-500 opacity-80 uppercase tracking-widest"},la={class:"text-4xl font-black text-blue-600 font-mono"},sa={class:"w-full bg-gray-200 dark:bg-gray-800 h-3 rounded-full overflow-hidden mb-10 shadow-inner"},oa={class:"flex-grow flex flex-col min-h-0 bg-black rounded-3xl shadow-2xl border border-gray-800 overflow-hidden"},na={class:"text-gray-700 shrink-0 select-none"},ra={class:"flex flex-col items-center"},ia={class:"text-sm font-bold text-gray-800 dark:text-gray-100"},da={class:"flex items-center gap-2 text-[10px] text-gray-500 dark:text-gray-400"},ua={class:"uppercase tracking-wide font-medium"},ca={class:"flex items-center gap-1"},ba={class:"relative group/lang mr-2"},va=["value"],ga=["value"],fa=["disabled"],pa={class:"flex-grow flex flex-col md:flex-row overflow-hidden relative"},xa={key:0,class:"flex-grow flex items-center justify-center text-center"},ma={class:"max-w-xs animate-in fade-in zoom-in duration-700"},ya={class:"w-full md:w-64 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 flex flex-col flex-shrink-0"},ha={class:"p-3 text-[10px] font-black uppercase text-gray-400 tracking-tighter border-b dark:border-gray-800 flex justify-between items-center"},ka={class:"flex gap-1"},wa={class:"flex-grow overflow-y-auto custom-scrollbar p-3 space-y-3 max-h-[50%] border-b dark:border-gray-800 bg-gray-50 dark:bg-gray-950"},_a=["onClick"],Ca={key:1,class:"w-full h-full bg-gray-200 dark:bg-gray-800 flex items-center justify-center text-gray-400"},Sa={class:"absolute bottom-1 left-2 right-2 text-left pointer-events-none"},Aa={class:"text-white text-[10px] font-black truncate uppercase tracking-tighter"},Ta={class:"absolute top-1 left-1 bg-black/50 text-white text-[8px] px-1.5 py-0.5 rounded font-mono"},$a={class:"p-3 text-[10px] font-black uppercase text-gray-400 tracking-tighter border-b dark:border-gray-800 flex justify-between items-center"},Ia=["onClick"],La={class:"truncate flex-grow"},Va={class:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 bg-white/50 dark:bg-black/50 rounded px-1 backdrop-blur-sm"},Ra=["onClick"],za=["onClick"],Da=["onClick"],Na={class:"flex-grow overflow-y-auto custom-scrollbar p-6 bg-gray-50/50 dark:bg-gray-950 relative"},ja={class:"max-w-6xl mx-auto space-y-6 pb-20"},Ga={key:0,class:"relative group/video"},Ma={class:"bg-white dark:bg-gray-900 p-4 rounded-xl shadow-sm border dark:border-gray-800 flex items-center gap-3"},Ua={class:"flex-grow"},Ea=["value"],Pa=["disabled"],Oa={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Ba={class:"lg:col-span-2 flex flex-col gap-3"},Fa={class:"aspect-video bg-black rounded-2xl relative group overflow-hidden shadow-lg border dark:border-gray-800 w-full"},Wa={class:"absolute top-3 left-3 z-10 flex gap-1"},Ha=["src"],Ka={key:1,class:"w-full h-full bg-gray-200 dark:bg-gray-800 flex items-center justify-center text-gray-400"},Za={class:"absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity"},qa={class:"absolute bottom-3 left-3 bg-black/60 text-white text-[10px] px-2 py-1 rounded-full font-mono pointer-events-none"},Ja={key:0,class:"w-full overflow-x-auto custom-scrollbar"},Xa={class:"flex gap-2 pb-2"},Qa=["onClick"],Ya=["onClick"],el={class:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-[9px] px-1.5 py-0.5 truncate font-mono"},tl={class:"bg-white dark:bg-gray-900 rounded-2xl p-5 border dark:border-gray-800 shadow-sm flex flex-col"},al={class:"flex-grow space-y-4 overflow-y-auto max-h-[300px] custom-scrollbar pr-2"},ll=["value","onChange"],sl={class:"bg-white dark:bg-gray-900 rounded-2xl p-5 border dark:border-gray-800 shadow-sm relative group/notes"},ol={class:"flex items-center justify-between mb-2"},nl={class:"flex items-center gap-2"},rl={class:"flex items-center gap-2"},il=["disabled"],dl=["disabled"],ul=["value"],cl={key:0,class:"mt-2 bg-gray-100 dark:bg-gray-800 rounded p-2 flex items-center gap-2"},bl={key:0,class:"absolute top-0 right-0 h-full w-80 bg-white dark:bg-gray-900 border-l border-gray-200 dark:border-gray-800 shadow-2xl z-50 flex flex-col"},vl={class:"p-4 border-b dark:border-gray-800 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50"},gl={class:"flex items-center gap-2"},fl={key:0,class:"flex flex-col gap-1"},pl={class:"p-3 rounded-2xl text-xs max-w-[90%] bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"},xl={class:"flex items-center gap-2"},ml={class:"p-4 border-t dark:border-gray-800 flex gap-2"},yl=["onKeyup","disabled"],hl=["disabled"],kl={class:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col overflow-hidden border dark:border-gray-800"},wl={class:"p-4 border-b dark:border-gray-800 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50"},_l={class:"font-black text-sm uppercase tracking-widest flex items-center gap-2"},Cl={class:"p-8 overflow-y-auto custom-scrollbar min-h-[450px]"},Sl={key:0,class:"space-y-6"},Al={class:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto p-2 border rounded-xl dark:border-gray-800"},Tl=["onClick"],$l={class:"truncate"},Il={key:1,class:"space-y-6"},Ll={class:"grid grid-cols-3 gap-4"},Vl=["onClick"],Rl={class:"text-xs font-black truncate"},zl={key:2,class:"space-y-4"},Dl={key:0},Nl={class:"p-4 border-t dark:border-gray-800 flex justify-between gap-3 bg-gray-50 dark:bg-gray-900/50"},jl={key:1},Gl={class:"flex gap-2"},Ml=["disabled"],Ul=["disabled"],El={key:0,class:"fixed inset-0 z-[100] bg-gray-900/60 backdrop-blur-sm p-6 flex items-center justify-center"},Pl={class:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-4xl h-full max-h-[80vh] flex flex-col overflow-hidden border dark:border-gray-800"},Ol={class:"p-4 border-b dark:border-gray-800 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50"},Bl={class:"flex-grow p-6 flex flex-col gap-4 overflow-hidden"},Fl={class:"flex-grow flex flex-col"},Wl={class:"p-4 border-t dark:border-gray-800 flex justify-end gap-3"},Hl={class:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden border dark:border-gray-800 flex flex-col"},Kl={class:"p-4 border-b dark:border-gray-800 bg-gray-50 dark:bg-gray-800/50 flex justify-between items-center"},Zl={class:"font-black text-sm uppercase tracking-widest text-blue-600"},ql={class:"p-6 space-y-4"},Jl={class:"flex items-center justify-between"},Xl={class:"flex items-center gap-2"},Ql={key:0,class:"px-2 py-0.5 bg-green-100 text-green-700 rounded text-[10px] font-bold"},Yl={key:1,class:"text-[10px] text-gray-400 italic"},es=["disabled"],ts={class:"p-4 border-t dark:border-gray-800 flex justify-end gap-2 bg-gray-50 dark:bg-gray-900/50"},as=["disabled"],ls={class:"p-4 border-t dark:border-gray-800 bg-white dark:bg-gray-900 flex gap-4 shadow-2xl z-20"},ss=["disabled"],os={__name:"SlidesMakingView",props:{notebook:{type:Object,required:!0}},setup(R){const b=R,v=mt(),h=yt(),M=ht(),be=kt(),{tasks:$}=wt(M),K=_(()=>be.user),ve=i(0),g=i(0);i(null);const U=i(null),se=i(null),Z=i(!1),oe=i(""),E=i(!1);i(!1);const ke=i(!1);i(!0);const O=i("image"),q=i(""),B=i(null),y=_(()=>{if(B.value){const e=$.value.find(c=>c.id===B.value);if(e)return e}const a=$.value.find(e=>(e.name.includes(b.notebook.title)||e.description.includes(b.notebook.id))&&(e.status==="running"||e.status==="pending"));return a&&a.id!==B.value&&(B.value=a.id),a});le(y,a=>{a&&(a.status==="completed"||a.status==="failed")&&setTimeout(()=>{B.value===a.id&&(B.value=null)},2e3)});const k=i([]),w=i(null),F=i(!1),A=i(1),ne=i(!1),u=i({topic:"",title:"",layout:"TitleImageBody",bullets:[],image_prompt:"",selected_artefacts:[],author:""}),W=i(!1),re=i("images"),z=i(""),ge=i(!1),J=i(!1);let I=null;const Me=[{code:"en",name:"English"},{code:"fr",name:"French"},{code:"es",name:"Spanish"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"zh",name:"Chinese"},{code:"ja",name:"Japanese"},{code:"ru",name:"Russian"},{code:"ar",name:"Arabic"}],Ue=_(()=>(b.notebook.tabs||[]).filter(a=>a.type==="slides")),f=_(()=>Ue.value[ve.value]),N=_(()=>{if(!f.value||!f.value.content)return{slides_data:[],mode:"hybrid",summary:""};try{return JSON.parse(f.value.content)}catch{return{slides_data:[],mode:"hybrid",summary:""}}}),r=_(()=>N.value.slides_data[g.value]||null),we=_(()=>!r.value||!r.value.images||r.value.images.length===0?null:r.value.images[r.value.selected_image_index]||r.value.images[0]),Ee=_(()=>{var e;if(!((e=r.value)!=null&&e.html_content))return null;const a=new Blob([r.value.html_content],{type:"text/html"});return URL.createObjectURL(a)});le(()=>{var a;return(a=r.value)==null?void 0:a.html_content},a=>{a&&(O.value="html")});const Pe=_(()=>y.value&&y.value.name.includes("Summary")),Oe=_(()=>y.value&&y.value.name==="AI Task: generate_notes"),_e=_(()=>y.value&&y.value.name==="AI Task: generate_slide_title"),Be=_(()=>y.value&&y.value.name==="AI Task: generate_audio"),Fe=[{value:"TitleImageBody",label:"Standard (Text + Image)",desc:"Split screen with content and visual."},{value:"ImageOnly",label:"Big Visual (Image only)",desc:"High-impact full-screen image focus."},{value:"TextOnly",label:"Bullet Points (Text only)",desc:"Detailed factual information layout."},{value:"TitleOnly",label:"Hero / Title",desc:"Minimalist title for section breaks."},{value:"TwoColumn",label:"Comparison / Dual",desc:"Two columns for contrast or comparison."}];le(()=>{var a,e;return(e=(a=y.value)==null?void 0:a.logs)==null?void 0:e.length},()=>{Ne(()=>{U.value&&(U.value.scrollTop=U.value.scrollHeight)})}),le(()=>{var a,e;return(e=(a=r.value)==null?void 0:a.messages)==null?void 0:e.length},()=>{Ne(()=>{se.value&&(se.value.scrollTop=se.value.scrollHeight)})});async function fe(a){if(!f.value)return;const e=b.notebook.tabs.findIndex(c=>c.id===f.value.id);e!==-1&&(b.notebook.tabs[e].content=JSON.stringify(a),await v.saveActive())}async function We(a){b.notebook.language=a,await v.saveActive()}async function He(){await v.generateTitle()}async function Ce(){const a=(q.value||"").trim();!a||!f.value||(await v.processWithAi(a,[],"generate_slides_text",f.value.id,!1,k.value),q.value="")}async function Se(){const a=(oe.value||"").trim();if(!(!a||E.value)){E.value=!0;try{await v.sendSlideMessage(f.value.id,r.value.id,a,k.value),oe.value=""}finally{E.value=!1}}}function Ke(a){const e=k.value.indexOf(a);e===-1?k.value.push(a):k.value.splice(e,1)}function Ze(a){w.value={originalName:a.filename,name:a.filename,content:a.content}}function qe(a){h.openModal("artefactViewer",{artefact:{title:a.filename,content:a.content}})}async function Je(a){await v.deleteArtefact(a)}async function Xe(){if(w.value)try{await v.updateArtefact(w.value.originalName,w.value.name,w.value.content),w.value=null}catch(a){console.error(a)}}const Ae=_(()=>k.value.length>0);function Te(){u.value={topic:"",title:"",layout:"TitleImageBody",bullets:[],image_prompt:"",selected_artefacts:[...k.value],author:K.value?K.value.username:""},A.value=1,F.value=!0}function Qe(a){const e=u.value.selected_artefacts.indexOf(a);e===-1?u.value.selected_artefacts.push(a):u.value.selected_artefacts.splice(e,1)}async function Ye(){const a=(u.value.topic||"").trim();if(a){ne.value=!0;try{const e=await v.brainstormSlide(a,u.value.layout,u.value.selected_artefacts,u.value.author);Object.assign(u.value,e),A.value=3}finally{ne.value=!1}}}async function et(){F.value=!1,await v.processWithAi(JSON.stringify(u.value),[],"add_full_slide",f.value.id,!1,u.value.selected_artefacts)}function tt(){h.openModal("artefactImportWizard",{notebookId:b.notebook.id})}function $e(a){r.value&&(re.value=a,a==="refine_image"?z.value=r.value.last_edit_prompt||r.value.image_prompt||"":z.value=r.value.last_prompt||r.value.image_prompt||"",W.value=!0)}async function at(){const a=(z.value||"").trim();if(a){ge.value=!0;try{const e=await v.enhancePrompt(a,Ae.value?`Using ${k.value.length} selected artefacts.`:"");z.value=e}finally{ge.value=!1}}}const pe=i("text, words, blurry, deformed, low quality, watermark");async function lt(){const a=(z.value||"").trim(),e=(pe.value||"").trim();if(!a)return;const c={...N.value};re.value==="refine_image"?c.slides_data[g.value].last_edit_prompt=a:c.slides_data[g.value].last_prompt=a,c.slides_data[g.value].negative_prompt=e,await fe(c);const p=`SLIDE_INDEX:${g.value}|${a}|${e}`;await v.processWithAi(p,[],re.value,f.value.id,!1,k.value),W.value=!1}async function Ie(){await v.generateSummary()}async function st(a){const e={...N.value};e.slides_data[g.value].selected_image_index=a,await fe(e)}async function ot(a){(await h.showConfirmation({title:"Delete Variant",message:"Remove image version?",confirmText:"Delete"})).confirmed&&await v.deleteSlideImage(f.value.id,r.value.id,a)}async function X(a,e){const c={...N.value};c.slides_data[g.value][a]=e,await fe(c)}async function nt(){const a=N.value.slides_data.map(e=>{var c,p;return{src:((p=(c=e.images)==null?void 0:c[e.selected_image_index||0])==null?void 0:p.path)||"",title:e.title}}).filter(e=>!!e.src);a.length!==0&&h.openSlideshow({slides:a,title:b.notebook.title,startIndex:g.value})}function rt(a){if(J.value){I&&I.stop(),J.value=!1;return}const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){h.addNotification("Speech recognition not supported.","error");return}I=new e,I.lang=b.notebook.language==="zh"?"zh-CN":b.notebook.language||"en-US",I.continuous=!0,I.onstart=()=>{J.value=!0},I.onresult=c=>{for(let p=c.resultIndex;p<c.results.length;++p)if(c.results[p].isFinal){const Q=(c.results[p][0].transcript||"").trim();if(Q){const l=r.value[a]||"";X(a,l+(l?" ":"")+Q)}}},I.start()}async function xe(a){ke.value=!0;try{const e=await he.get(`/api/notebooks/${b.notebook.id}/export`,{params:{format:a},responseType:"blob"}),c=window.URL.createObjectURL(new Blob([e.data])),p=document.createElement("a");p.href=c,p.setAttribute("download",`${b.notebook.title||"presentation"}.${a}`),document.body.appendChild(p),p.click(),document.body.removeChild(p)}finally{ke.value=!1}}async function it(){const{confirmed:a}=await h.showConfirmation({title:"Generate Video",message:"Render video using slide images and TTS voice-over?",confirmText:"Generate"});if(a)try{await he.post(`/api/notebooks/${b.notebook.id}/generate_video`)}catch{h.addNotification("Failed to start.","error")}}async function dt(){const{confirmed:a}=await h.showConfirmation({title:"Delete Video?",message:"This action cannot be undone.",confirmText:"Delete"});a&&await v.deleteGeneratedAsset("video",f.value.id)}async function ut(){const{confirmed:a,value:e}=await h.showConfirmation({title:"Generate Notes",message:"AI will analyze slide context to write a script. Instructions:",confirmText:"Generate",inputType:"text"});a&&await v.generateSlideNotes(g.value,e||"",f.value.id)}async function ct(){await v.generateSlideTitle(g.value,"",f.value.id)}async function bt(){await v.generateSlideAudio(g.value,f.value.id)}async function vt(){const{confirmed:a}=await h.showConfirmation({title:"Delete Audio?",message:"Remove generated voice-over?",confirmText:"Delete"});a&&await v.deleteGeneratedAsset("audio",f.value.id,r.value.id)}async function gt(){const{confirmed:a,value:e}=await h.showConfirmation({title:"Generate Graphic",message:'Create an HTML/SVG graphic for this slide. Describe the desired visual (e.g., "A bar chart showing growth"):',confirmText:"Generate",inputType:"text"});a&&await v.processWithAi(`SLIDE_INDEX:${g.value}| ${e||"Create a relevant visual"}`,[],"generate_slide_html",f.value.id,!1,k.value)}return Ge(()=>{I&&J.value&&I.stop()}),(a,e)=>{var c,p,Q;return s(),o("div",qt,[n(te,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Y(()=>[y.value?(s(),o("div",Jt,[t("div",Xt,[t("div",Qt,[t("div",Yt,[t("div",ea,[n(ee,{class:"w-10 h-10 animate-spin text-white"})]),t("div",null,[t("h2",ta,m(y.value.name),1),t("p",aa,m(y.value.description),1)])]),t("div",la,m(y.value.progress)+"%",1)]),t("div",sa,[t("div",{class:"h-full bg-blue-600 transition-all duration-500 progress-bar-animated",style:_t({width:y.value.progress+"%"})},null,4)]),t("div",oa,[e[34]||(e[34]=t("div",{class:"px-6 py-3 bg-gray-900 border-b border-gray-800 flex items-center justify-between"},[t("span",{class:"text-[10px] font-black uppercase text-gray-500 tracking-widest"},"Presentation Production Terminal"),t("div",{class:"flex gap-1.5"},[t("div",{class:"w-2 h-2 rounded-full bg-red-500/50"}),t("div",{class:"w-2 h-2 rounded-full bg-yellow-500/50"}),t("div",{class:"w-2 h-2 rounded-full bg-green-500/50"})])],-1)),t("div",{ref_key:"logsContainerRef",ref:U,class:"flex-grow overflow-y-auto p-6 font-mono text-xs text-gray-400 space-y-1.5 custom-scrollbar"},[(s(!0),o(T,null,D(y.value.logs,(l,d)=>(s(),o("div",{key:d,class:"flex gap-4"},[t("span",na,"["+m(new Date(l.timestamp).toLocaleTimeString())+"]",1),t("span",{class:S({"text-red-400 font-bold":l.level==="ERROR","text-blue-400":l.level==="INFO","text-yellow-400":l.level==="WARNING"})},m(l.message),3)]))),128))],512)])])])):x("",!0)]),_:1}),(s(),C(Ve,{to:"#global-header-title-target"},[t("div",ra,[t("div",{class:"flex items-center gap-2 group cursor-pointer",onClick:He,title:"Click to auto-title"},[t("span",ia,m(R.notebook.title),1),n(H,{class:"w-3 h-3 text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity"})]),t("div",da,[n(ie,{class:"w-3 h-3"}),t("span",ua,m((c=f.value)==null?void 0:c.title),1)])])])),(s(),C(Ve,{to:"#global-header-actions-target"},[t("div",ca,[t("div",ba,[t("select",{value:R.notebook.language,onChange:e[0]||(e[0]=l=>We(l.target.value)),class:"bg-gray-100 dark:bg-gray-800 border-none rounded-lg text-[10px] font-black uppercase tracking-widest px-2 py-1 outline-none cursor-pointer focus:ring-1 ring-blue-500 transition-all"},[(s(),o(T,null,D(Me,l=>t("option",{key:l.code,value:l.code},m(l.code),9,ga)),64))],40,va)]),t("button",{onClick:e[1]||(e[1]=l=>xe("pptx")),class:"btn-icon-flat text-orange-600",title:"Export PPTX"},[n(ie,{class:"w-4 h-4"})]),t("button",{onClick:e[2]||(e[2]=l=>xe("pdf")),class:"btn-icon-flat text-red-600",title:"Export PDF"},[n(me,{class:"w-4 h-4"})]),t("button",{onClick:e[3]||(e[3]=l=>xe("zip")),class:"btn-icon-flat text-blue-600",title:"Export ZIP"},[n(Ct,{class:"w-4 h-4"})]),t("button",{onClick:it,class:"btn-icon-flat text-pink-500",title:"Gen Video"},[n(Dt,{class:"w-4 h-4"})]),e[36]||(e[36]=t("div",{class:"w-px h-4 bg-gray-300 dark:bg-gray-700 mx-1"},null,-1)),t("button",{onClick:Ie,class:"btn-icon-flat",title:"Summary",disabled:Pe.value},[n(H,{class:"w-4 h-4 text-purple-500"})],8,fa),t("button",{onClick:e[4]||(e[4]=l=>Z.value=!Z.value),class:S(["btn-icon-flat relative",{"bg-blue-50 dark:bg-blue-900/20 text-blue-500":Z.value}])},[n(je,{class:"w-4 h-4"})],2),t("button",{onClick:nt,class:"btn-primary-flat"},[n(ie,{class:"w-4 h-4"}),e[35]||(e[35]=t("span",{class:"hidden sm:inline ml-1"},"Play",-1))])])])),t("div",pa,[r.value?(s(),o(T,{key:1},[t("div",ya,[t("div",ha,[e[39]||(e[39]=t("span",null,"Slides",-1)),t("div",ka,[t("button",{onClick:Ie,class:"p-1 text-purple-500 hover:bg-purple-50 rounded",title:"Update Summary"},[n(H,{class:"w-4 h-4"})]),t("button",{onClick:Te,class:"p-1 text-blue-500 hover:bg-blue-50 rounded",title:"Add Slide"},[n(ae,{class:"w-4 h-4"})])])]),t("div",wa,[(s(!0),o(T,null,D(N.value.slides_data,(l,d)=>{var j;return s(),o("button",{key:l.id,onClick:Le=>g.value=d,class:S(["w-full relative rounded-xl overflow-hidden border-2 transition-all block p-0 aspect-video",g.value===d?"border-blue-500 ring-2 ring-blue-500/20":"border-transparent hover:border-gray-300"])},[(j=l.images)!=null&&j.length?(s(),C(ye,{key:0,src:l.images[l.selected_image_index||0].path,"img-class":"object-cover",class:"w-full h-full"},null,8,["src"])):(s(),o("div",Ca,[n(Re,{class:"w-8 h-8 opacity-20"})])),e[40]||(e[40]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-80"},null,-1)),t("div",Sa,[t("p",Aa,m(l.title),1)]),t("div",Ta,m(d+1),1)],10,_a)}),128))]),t("div",$a,[e[41]||(e[41]=t("span",null,"Artefacts",-1)),t("button",{onClick:tt,class:"p-1 text-green-500 hover:bg-green-50 rounded"},[n(ae,{class:"w-3 h-3"})])]),(s(!0),o(T,null,D(R.notebook.artefacts,l=>(s(),o("div",{key:l.filename,onClick:d=>Ke(l.filename),class:S(["flex items-center gap-2 p-2 rounded-lg text-[10px] cursor-pointer group",k.value.includes(l.filename)?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-bold":"text-gray-500 hover:bg-gray-50 dark:hover:bg-gray-800"])},[k.value.includes(l.filename)?(s(),C(ze,{key:0,class:"w-3 h-3 flex-shrink-0 text-green-500"})):(s(),C(me,{key:1,class:"w-3 h-3 flex-shrink-0 opacity-50"})),t("span",La,m(l.filename),1),t("div",Va,[t("button",{onClick:P(d=>qe(l),["stop"]),class:"p-1 hover:text-blue-500",title:"View"},[n(St,{class:"w-3 h-3"})],8,Ra),t("button",{onClick:P(d=>Ze(l),["stop"]),class:"p-1 hover:text-orange-500",title:"Edit"},[n(At,{class:"w-3 h-3"})],8,za),t("button",{onClick:P(d=>Je(l.filename),["stop"]),class:"p-1 hover:text-red-500",title:"Delete"},[n(de,{class:"w-3 h-3"})],8,Da)])],10,Ia))),128))]),t("div",Na,[t("div",ja,[N.value.video_src?(s(),o("div",Ga,[n(zt,{src:N.value.video_src},null,8,["src"]),t("button",{onClick:dt,class:"absolute top-4 right-4 btn btn-danger btn-sm opacity-0 group-hover/video:opacity-100 transition-opacity z-10 shadow-xl"},[n(de,{class:"w-4 h-4 mr-1"}),e[42]||(e[42]=G(" Delete Video"))])])):x("",!0),t("div",Ma,[t("div",Ua,[e[43]||(e[43]=t("label",{class:"text-[10px] font-black uppercase text-gray-400 block mb-1"},"Slide Title",-1)),t("input",{value:r.value.title,onChange:e[5]||(e[5]=l=>X("title",l.target.value)),class:"text-xl md:text-2xl font-bold bg-transparent border-none outline-none w-full text-gray-900 dark:text-white"},null,40,Ea)]),t("button",{onClick:ct,class:"btn btn-secondary btn-sm h-10 w-10 p-0 rounded-full",disabled:_e.value},[_e.value?(s(),C(ee,{key:0,class:"w-5 h-5 animate-spin"})):(s(),C(H,{key:1,class:"w-5 h-5 text-blue-500"}))],8,Pa)]),t("div",Oa,[t("div",Ba,[t("div",Fa,[t("div",Wa,[t("button",{onClick:e[6]||(e[6]=l=>O.value="image"),class:S(["px-2 py-1 text-[10px] font-bold rounded uppercase transition-colors",O.value==="image"?"bg-white text-black":"bg-black/50 text-white hover:bg-black/80"])},"Image",2),r.value.html_content?(s(),o("button",{key:0,onClick:e[7]||(e[7]=l=>O.value="html"),class:S(["px-2 py-1 text-[10px] font-bold rounded uppercase transition-colors",O.value==="html"?"bg-white text-black":"bg-black/50 text-white hover:bg-black/80"])},"Graphic",2)):x("",!0)]),O.value==="html"&&r.value.html_content?(s(),o("iframe",{key:0,src:Ee.value,class:"w-full h-full border-none bg-white"},null,8,Ha)):(s(),o(T,{key:1},[we.value?(s(),C(ye,{key:0,src:we.value.path,"img-class":"object-contain",class:"w-full h-full"},null,8,["src"])):(s(),o("div",Ka,[n(Re,{class:"w-8 h-8 opacity-20"})]))],64)),t("div",Za,[t("button",{onClick:gt,class:"p-2 bg-black/60 rounded-lg text-white hover:bg-blue-600",title:"Generate Graphic"},[n(Tt,{class:"w-4 h-4"})]),t("button",{onClick:e[8]||(e[8]=l=>$e("refine_image")),class:"p-2 bg-black/60 rounded-lg text-white hover:bg-purple-600",title:"Edit Image"},[n(Wt,{class:"w-4 h-4"})]),t("button",{onClick:e[9]||(e[9]=l=>$e("images")),class:"p-2 bg-black/60 rounded-lg text-white hover:bg-green-600",title:"New Variant"},[n($t,{class:"w-4 h-4"})])]),t("div",qa,m(r.value.layout),1)]),((Q=(p=r.value)==null?void 0:p.images)==null?void 0:Q.length)>0?(s(),o("div",Ja,[t("div",Xa,[(s(!0),o(T,null,D(r.value.images,(l,d)=>(s(),o("div",{key:d,onClick:j=>st(d),class:S(["relative h-20 w-32 flex-shrink-0 rounded-lg overflow-hidden cursor-pointer border-2 transition-all group/thumb bg-black",d===(r.value.selected_image_index||0)?"border-blue-500 ring-2 ring-blue-500/30":"border-gray-800 hover:border-gray-500 opacity-60 hover:opacity-100"])},[n(ye,{src:l.path,class:"w-full h-full object-cover"},null,8,["src"]),t("button",{onClick:P(j=>ot(d),["stop"]),class:"absolute top-1 right-1 p-1 bg-red-600 text-white rounded-md opacity-0 group-hover/thumb:opacity-100 transition-opacity shadow-sm hover:bg-red-500",title:"Delete Version"},[n(de,{class:"w-3 h-3"})],8,Ya),t("div",el,m(d===(r.value.selected_image_index||0)?"Active":`Ver ${d+1}`),1)],10,Qa))),128))])])):x("",!0)]),t("div",tl,[e[46]||(e[46]=t("h3",{class:"text-xs font-black uppercase text-gray-400 mb-4"},"Slide Content",-1)),t("div",al,[(s(!0),o(T,null,D(r.value.bullets||[],(l,d)=>(s(),o("div",{key:d,class:"flex items-start gap-2"},[e[44]||(e[44]=t("span",{class:"text-lg font-bold text-blue-500 mt-0.5"},"â€¢",-1)),t("textarea",{value:l,onChange:j=>X("bullets",r.value.bullets.map((Le,ft)=>ft===d?j.target.value:Le)),class:"flex-grow bg-transparent border-b border-dashed border-gray-200 dark:border-gray-700 outline-none text-sm resize-none"},null,40,ll)]))),128)),t("button",{onClick:e[10]||(e[10]=l=>X("bullets",[...r.value.bullets||[],""])),class:"flex items-center gap-2 text-xs font-bold text-blue-500 mt-2"},[n(ae,{class:"w-3 h-3"}),e[45]||(e[45]=G(" Add Point"))])])])]),t("div",sl,[t("div",ol,[t("div",nl,[e[47]||(e[47]=t("h3",{class:"text-xs font-black uppercase tracking-widest text-gray-400"},"Speaker Notes",-1)),t("button",{onClick:e[11]||(e[11]=l=>rt("notes")),class:S(["p-1 rounded-full transition-all",J.value?"text-red-600 bg-red-100":"text-blue-500"])},[n(It,{class:"w-4 h-4"})],2)]),t("div",rl,[t("button",{onClick:bt,class:"btn btn-secondary btn-sm",disabled:Be.value},"Audio",8,il),t("button",{onClick:ut,class:"btn btn-secondary btn-sm",disabled:Oe.value},"Generate Text",8,dl)])]),t("textarea",{value:r.value.notes,onChange:e[12]||(e[12]=l=>X("notes",l.target.value)),class:"input-field w-full h-24 resize-none text-sm mb-2",placeholder:"Presenter script..."},null,40,ul),r.value.audio_src?(s(),o("div",cl,[n(Pt,{src:r.value.audio_src},null,8,["src"]),t("button",{onClick:vt,class:"text-red-500 p-1 flex-shrink-0"},[n(de,{class:"w-4 h-4"})])])):x("",!0)])])])],64)):(s(),o("div",xa,[t("div",ma,[n(ie,{class:"w-16 h-16 mx-auto mb-4 text-gray-300 opacity-20"}),e[38]||(e[38]=t("p",{class:"text-sm text-gray-400 font-bold uppercase tracking-widest mb-6"},"Empty Presentation Deck",-1)),t("button",{onClick:Te,class:"btn btn-secondary w-full rounded-2xl border-2 shadow-lg hover:shadow-blue-500/10 transition-all"},[n(ae,{class:"w-4 h-4 mr-2"}),e[37]||(e[37]=G(" Initialize Studio "))])])]))]),n(te,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:Y(()=>{var l;return[Z.value?(s(),o("div",bl,[t("div",vl,[t("div",gl,[n(je,{class:"w-4 h-4 text-blue-500"}),e[48]||(e[48]=t("h3",{class:"font-black text-xs uppercase tracking-widest"},"Intelligence",-1))]),t("button",{onClick:e[13]||(e[13]=d=>Z.value=!1),class:"btn-icon-flat"},[n(ue,{class:"w-5 h-5"})])]),t("div",{class:"flex-grow overflow-y-auto p-4 space-y-4 custom-scrollbar",ref_key:"messagesContainerRef",ref:se},[(s(!0),o(T,null,D((l=r.value)==null?void 0:l.messages,(d,j)=>(s(),o("div",{key:j,class:S(["flex flex-col gap-1",{"items-end":d.role==="user"}])},[t("div",{class:S(["p-3 rounded-2xl text-xs max-w-[90%]",d.role==="user"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"])},[n(Lt,{content:d.content},null,8,["content"])],2)],2))),128)),E.value?(s(),o("div",fl,[t("div",pl,[t("div",xl,[n(ee,{class:"w-4 h-4 animate-spin text-blue-500"}),e[49]||(e[49]=t("span",null,"Thinking...",-1))])])])):x("",!0)],512),t("div",ml,[L(t("textarea",{"onUpdate:modelValue":e[14]||(e[14]=d=>oe.value=d),onKeyup:De(P(Se,["exact"]),["enter"]),class:"input-field w-full text-xs h-20 resize-none",placeholder:"Ask AI...",disabled:E.value},null,40,yl),[[V,oe.value]]),t("button",{onClick:Se,class:"btn btn-primary h-20",disabled:E.value},[E.value?(s(),C(ee,{key:0,class:"w-4 h-4 animate-spin"})):(s(),C(Vt,{key:1,class:"w-4 h-4"}))],8,hl)])])):x("",!0)]}),_:1}),n(te,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:Y(()=>[F.value?(s(),o("div",{key:0,class:"fixed inset-0 z-[100] bg-gray-900/60 backdrop-blur-sm p-6 flex items-center justify-center",onClick:e[23]||(e[23]=P(l=>F.value=!1,["self"]))},[t("div",kl,[t("div",wl,[t("h3",_l,[n(ae,{class:"w-4 h-4"}),e[50]||(e[50]=G(" New Slide"))]),t("button",{onClick:e[15]||(e[15]=l=>F.value=!1),class:"btn-icon-flat"},[n(ue,{class:"w-5 h-5"})])]),t("div",Cl,[A.value===1?(s(),o("div",Sl,[t("div",null,[e[51]||(e[51]=t("label",{class:"text-[10px] font-black uppercase text-blue-500 mb-2 block tracking-widest"},"1. Topic",-1)),L(t("textarea",{"onUpdate:modelValue":e[16]||(e[16]=l=>u.value.topic=l),class:"input-field w-full h-24 font-bold text-lg",placeholder:"Slide topic..."},null,512),[[V,u.value.topic]])]),t("div",null,[e[52]||(e[52]=t("label",{class:"text-[10px] font-black uppercase text-blue-500 mb-2 block tracking-widest"},"Author (Optional)",-1)),L(t("input",{"onUpdate:modelValue":e[17]||(e[17]=l=>u.value.author=l),class:"input-field w-full",placeholder:"Author Name"},null,512),[[V,u.value.author]])]),t("div",null,[e[53]||(e[53]=t("label",{class:"text-[10px] font-black uppercase text-gray-500 mb-2 block tracking-widest"},"2. Context Sources",-1)),t("div",Al,[(s(!0),o(T,null,D(R.notebook.artefacts,l=>(s(),o("button",{key:l.filename,onClick:d=>Qe(l.filename),class:S(["p-2 rounded-lg text-[10px] flex items-center gap-2 text-left transition-all border",u.value.selected_artefacts.includes(l.filename)?"bg-green-50 border-green-500 text-green-700":"border-transparent hover:bg-gray-50 text-gray-500"])},[u.value.selected_artefacts.includes(l.filename)?(s(),C(ze,{key:0,class:"w-3 h-3 flex-shrink-0"})):(s(),C(me,{key:1,class:"w-3 h-3 opacity-30 flex-shrink-0"})),t("span",$l,m(l.filename),1)],10,Tl))),128))])])])):x("",!0),A.value===2?(s(),o("div",Il,[e[54]||(e[54]=t("label",{class:"text-[10px] font-black uppercase text-blue-500 mb-4 block tracking-widest"},"3. Architecture",-1)),t("div",Ll,[(s(),o(T,null,D(Fe,l=>t("button",{key:l.value,onClick:d=>u.value.layout=l.value,class:S(["p-4 rounded-xl border-2 transition-all text-left flex flex-col gap-3",u.value.layout===l.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-100 dark:border-gray-800"])},[t("p",Rl,m(l.label),1)],10,Vl)),64))])])):x("",!0),A.value===3?(s(),o("div",zl,[t("div",null,[e[55]||(e[55]=t("label",{class:"text-[10px] font-black text-gray-500 mb-1 block"},"Title",-1)),L(t("input",{"onUpdate:modelValue":e[18]||(e[18]=l=>u.value.title=l),class:"input-field w-full font-bold"},null,512),[[V,u.value.title]])]),u.value.layout!=="TextOnly"?(s(),o("div",Dl,[e[56]||(e[56]=t("label",{class:"text-[10px] font-black text-gray-500 mb-1 block"},"Visual Strategy",-1)),L(t("textarea",{"onUpdate:modelValue":e[19]||(e[19]=l=>u.value.image_prompt=l),class:"input-field w-full h-20 text-xs italic resize-none"},null,512),[[V,u.value.image_prompt]])])):x("",!0)])):x("",!0)]),t("div",Nl,[A.value>1?(s(),o("button",{key:0,onClick:e[20]||(e[20]=l=>A.value--),class:"btn btn-secondary"},"Back")):(s(),o("div",jl)),t("div",Gl,[t("button",{onClick:e[21]||(e[21]=l=>F.value=!1),class:"btn btn-secondary"},"Cancel"),A.value===1?(s(),o("button",{key:0,onClick:e[22]||(e[22]=l=>A.value=2),class:"btn btn-primary",disabled:!u.value.topic},"Next",8,Ml)):x("",!0),A.value===2?(s(),o("button",{key:1,onClick:Ye,class:"btn btn-primary",disabled:ne.value},[ne.value?(s(),C(ee,{key:0,class:"w-4 h-4 mr-2 animate-spin"})):x("",!0),e[57]||(e[57]=G("Brainstorm"))],8,Ul)):x("",!0),A.value===3?(s(),o("button",{key:2,onClick:et,class:"btn btn-primary"},"Add")):x("",!0)])])])])):x("",!0)]),_:1}),n(te,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:Y(()=>[w.value?(s(),o("div",El,[t("div",Pl,[t("div",Ol,[e[58]||(e[58]=t("h3",{class:"font-black text-sm uppercase tracking-widest"},"Edit Source",-1)),t("button",{onClick:e[24]||(e[24]=l=>w.value=null),class:"btn-icon-flat"},[n(ue,{class:"w-5 h-5"})])]),t("div",Bl,[t("div",null,[e[59]||(e[59]=t("label",{class:"text-[10px] font-bold uppercase text-gray-500 mb-1 block"},"Title",-1)),L(t("input",{"onUpdate:modelValue":e[25]||(e[25]=l=>w.value.name=l),class:"input-field w-full font-bold"},null,512),[[V,w.value.name]])]),t("div",Fl,[e[60]||(e[60]=t("label",{class:"text-[10px] font-bold uppercase text-gray-500 mb-1 block"},"Content",-1)),L(t("textarea",{"onUpdate:modelValue":e[26]||(e[26]=l=>w.value.content=l),class:"flex-grow input-field w-full font-mono text-xs resize-none"},null,512),[[V,w.value.content]])])]),t("div",Wl,[t("button",{onClick:e[27]||(e[27]=l=>w.value=null),class:"btn btn-secondary"},"Cancel"),t("button",{onClick:Xe,class:"btn btn-primary"},[n(Rt,{class:"w-4 h-4 mr-2"}),e[61]||(e[61]=G(" Save"))])])])])):x("",!0)]),_:1}),n(te,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:Y(()=>[W.value?(s(),o("div",{key:0,class:"fixed inset-0 z-[100] bg-gray-900/60 backdrop-blur-sm p-6 flex items-center justify-center",onClick:e[32]||(e[32]=P(l=>W.value=!1,["self"]))},[t("div",Hl,[t("div",Kl,[t("h3",Zl,m(re.value==="refine_image"?"Refine Image":"New Variant"),1),t("button",{onClick:e[28]||(e[28]=l=>W.value=!1),class:"btn-icon-flat"},[n(ue,{class:"w-5 h-5"})])]),t("div",ql,[t("div",null,[e[62]||(e[62]=t("label",{class:"text-[10px] font-bold uppercase text-gray-500 mb-1 block"},"Prompt",-1)),L(t("textarea",{"onUpdate:modelValue":e[29]||(e[29]=l=>z.value=l),class:"input-field w-full h-32 resize-none",placeholder:"Describe the image..."},null,512),[[V,z.value]])]),t("div",null,[e[63]||(e[63]=t("label",{class:"text-[10px] font-bold uppercase text-red-500 mb-1 block"},"Negative Prompt (Avoid)",-1)),L(t("textarea",{"onUpdate:modelValue":e[30]||(e[30]=l=>pe.value=l),class:"input-field w-full h-16 resize-none border-red-100 dark:border-red-900/30",placeholder:"e.g. text, letters, blurry, deformed..."},null,512),[[V,pe.value]])]),t("div",Jl,[t("div",Xl,[e[64]||(e[64]=t("span",{class:"text-xs font-bold text-gray-500"},"Research Context:",-1)),Ae.value?(s(),o("span",Ql,m(k.value.length)+" Active",1)):(s(),o("span",Yl,"None selected"))]),t("button",{onClick:at,class:"btn btn-secondary btn-sm",disabled:ge.value||!(z.value||"").trim()},[n(H,{class:"w-3 h-3 mr-1"}),e[65]||(e[65]=G(" Enhance Prompt"))],8,es)])]),t("div",ts,[t("button",{onClick:e[31]||(e[31]=l=>W.value=!1),class:"btn btn-secondary"},"Cancel"),t("button",{onClick:lt,class:"btn btn-primary",disabled:!(z.value||"").trim()},"Generate",8,as)])])])):x("",!0)]),_:1}),t("div",ls,[L(t("input",{"onUpdate:modelValue":e[33]||(e[33]=l=>q.value=l),onKeyup:De(Ce,["enter"]),placeholder:"Describe additional slides or deck refinements...",class:"input-field flex-grow h-12 rounded-2xl"},null,544),[[V,q.value]]),t("button",{onClick:Ce,class:"btn btn-primary px-8 h-12 rounded-2xl",disabled:!(q.value||"").trim()||y.value},[n(H,{class:"w-4 h-4 mr-2"}),e[66]||(e[66]=G(" Go "))],8,ss)])])}}},ds=ce(os,[["__scopeId","data-v-62ebf684"]]);export{ds as default};
