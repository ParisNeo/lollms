import{u as C,b as v,r,S as _,f,o as u,w as m,a as s,A as w,h as g,G as E,M as h,t as S,c as k,J as A,g as M,K as N}from"./index-BzYhVBtc.js";import{u as V}from"./admin-D4vFb8Ht.js";import{_ as B}from"./GenericModal-CJPUG58e.js";const $={class:"relative bg-gray-900 text-white font-mono text-sm p-4 rounded-md h-96"},D={key:0,class:"absolute inset-0 bg-gray-900/80 flex items-center justify-center"},j={class:"flex justify-end gap-3"},L=["disabled"],G={__name:"AppEnvConfigModal",setup(T){const i=C(),c=V(),b=v(()=>i.modalData("appEnvConfig")),a=v(()=>{var e;return(e=b.value)==null?void 0:e.app}),t=r(""),o=r(!1),l=r(!1);async function y(){if(!(!a.value||o.value)){o.value=!0;try{t.value=await c.fetchAppEnv(a.value.id)}catch(e){t.value=`# Failed to load .env file:
# ${e.message}`}finally{o.value=!1}}}_(()=>i.isModalOpen("appEnvConfig"),e=>{e&&a.value?y():t.value=""},{immediate:!0});async function x(){if(a.value){l.value=!0;try{await c.updateAppEnv(a.value.id,t.value),i.closeModal("appEnvConfig")}catch{}finally{l.value=!1}}}return(e,n)=>{var p;return u(),f(B,{modalName:"appEnvConfig",title:`.env Configuration: ${((p=a.value)==null?void 0:p.name)||""}`,maxWidthClass:"max-w-4xl"},{body:m(()=>[n[2]||(n[2]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Edit the environment variables for this application. Changes will be applied on the next start of the application. ",-1)),s("div",$,[o.value?(u(),k("div",D,[M(h,{class:"w-8 h-8"})])):g("",!0),A(s("textarea",{"onUpdate:modelValue":n[0]||(n[0]=d=>t.value=d),class:"w-full h-full bg-transparent border-none focus:ring-0 resize-none p-0 text-sm",placeholder:"Loading .env content...",spellcheck:"false"},null,512),[[N,t.value]])])]),footer:m(()=>[s("div",j,[s("button",{onClick:n[1]||(n[1]=d=>w(i).closeModal("appEnvConfig")),type:"button",class:"btn btn-secondary"},"Cancel"),s("button",{onClick:x,type:"button",class:"btn btn-primary",disabled:o.value||l.value},[l.value?(u(),f(h,{key:0,class:"w-5 h-5 mr-2"})):g("",!0),E(" "+S(l.value?"Saving...":"Save Changes"),1)],8,L)])]),_:1},8,["title"])}}};export{G as default};
