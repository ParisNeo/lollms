import{a as x,y as k,r as A,c as m,o as N,g as o,d as n,f as e,h as S,A as p,k as D,V as C,t as d,l as v,i as b,C as _,F as V,B as M,K as T}from"./index-Dja0BxAz.js";import{useAdminStore as B}from"./admin-DrWr55jq.js";const E={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},L={class:"p-6 border-b dark:border-gray-700 flex justify-between items-center"},I={key:0,class:"p-6 text-center"},U={key:1,class:"p-6 text-center text-gray-500"},F={key:2,class:"overflow-x-auto"},P={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},$={class:"bg-gray-50 dark:bg-gray-700/50"},j={scope:"col",class:"px-6 py-3"},K={class:"divide-y divide-gray-200 dark:divide-gray-700"},R={class:"px-6 py-4"},q=["value"],z=["title"],G={class:"table-cell text-sm"},H={class:"table-cell text-sm"},J={class:"table-cell text-right space-x-2"},O=["onClick"],Y={__name:"NewsManagement",setup(Q){const c=B(),r=x(),{newsArticles:u,isLoadingNewsArticles:y}=k(c),s=A([]),i=m(()=>[...u.value].sort((l,t)=>new Date(t.publication_date)-new Date(l.publication_date)));N(()=>{c.fetchNewsArticles()});const h=m({get:()=>i.value.length>0&&s.value.length===i.value.length,set:l=>{s.value=l?i.value.map(t=>t.id):[]}});function f(l){r.openModal("newsArticleEditor",{article:l})}async function w(){if(s.value.length===0)return;(await r.showConfirmation({title:`Delete ${s.value.length} Article(s)?`,message:"This action cannot be undone.",confirmText:"Delete"})).confirmed&&(await c.deleteBatchNewsArticles(s.value),s.value=[])}return(l,t)=>(n(),o("div",E,[e("div",L,[t[2]||(t[2]=e("h3",{class:"text-xl font-semibold"},"News Article Management",-1)),s.value.length>0?(n(),o("button",{key:0,onClick:w,class:"btn btn-danger btn-sm"},[p(C,{class:"w-4 h-4 mr-2"}),D(" Delete Selected ("+d(s.value.length)+") ",1)])):S("",!0)]),v(y)?(n(),o("div",I,"Loading articles...")):v(u).length===0?(n(),o("div",U,"No news articles found in the database.")):(n(),o("div",F,[e("table",P,[e("thead",$,[e("tr",null,[e("th",j,[b(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>h.value=a),class:"h-4 w-4 rounded"},null,512),[[_,h.value]])]),t[3]||(t[3]=e("th",{scope:"col",class:"table-header"},"Title",-1)),t[4]||(t[4]=e("th",{scope:"col",class:"table-header"},"Source",-1)),t[5]||(t[5]=e("th",{scope:"col",class:"table-header"},"Published",-1)),t[6]||(t[6]=e("th",{scope:"col",class:"relative py-3.5 px-4"},[e("span",{class:"sr-only"},"Actions")],-1))])]),e("tbody",K,[(n(!0),o(V,null,M(i.value,a=>(n(),o("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("td",R,[b(e("input",{type:"checkbox",value:a.id,"onUpdate:modelValue":t[1]||(t[1]=g=>s.value=g),class:"h-4 w-4 rounded"},null,8,q),[[_,s.value]])]),e("td",{class:"table-cell font-medium max-w-sm truncate",title:a.title},d(a.title),9,z),e("td",G,d(a.source_name),1),e("td",H,d(new Date(a.publication_date).toLocaleString()),1),e("td",J,[e("button",{onClick:g=>f(a),class:"btn-icon",title:"Edit Article"},[p(T,{class:"w-4 h-4"})],8,O)])]))),128))])])]))]))}};export{Y as default};
