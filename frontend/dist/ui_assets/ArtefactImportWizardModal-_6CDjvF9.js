import{_ as j,c as n,o as s,a as e,B as Z,u as ee,b as U,r as d,f as I,w as te,F as g,j as f,C as le,D as ae,E as se,n as V,G as W,v as oe,t as i,h as c,g as p,H as $,m as S,J as x,i as T,K as h,L as ne,M as K,N as re,O as ie,A as ue}from"./index-C3WkowhT.js";import{_ as de}from"./GenericModal-CcN9sQBb.js";import{I as ce}from"./IconVideoCamera-CmhTCTEL.js";const pe={},ve={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function be(P,u){return s(),n("svg",ve,u[0]||(u[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"},null,-1)]))}const ge=j(pe,[["render",be]]),fe={},xe={width:"50px",height:"50px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _e(P,u){return s(),n("svg",xe,u[0]||(u[0]=[e("path",{d:"M8 12H9M16 12H12",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"},null,-1),e("path",{d:"M16 8H15M12 8H8",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"},null,-1),e("path",{d:"M8 16H13",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"},null,-1),e("path",{d:"M3 14V10C3 6.22876 3 4.34315 4.17157 3.17157C5.34315 2 7.22876 2 11 2H13C16.7712 2 18.6569 2 19.8284 3.17157C20.4816 3.82476 20.7706 4.69989 20.8985 6M21 10V14C21 17.7712 21 19.6569 19.8284 20.8284C18.6569 22 16.7712 22 13 22H11C7.22876 22 5.34315 22 4.17157 20.8284C3.51839 20.1752 3.22937 19.3001 3.10149 18",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"},null,-1)]))}const me=j(fe,[["render",_e]]),he={class:"flex flex-col h-[500px]"},ke={class:"flex border-b dark:border-gray-700 overflow-x-auto no-scrollbar bg-gray-50 dark:bg-gray-800/50 p-1"},ye=["onClick"],we={class:"flex-grow p-6 overflow-y-auto custom-scrollbar"},Ce={key:0,class:"space-y-4"},Ie={class:"flex flex-wrap gap-2"},Se={class:"truncate max-w-[200px]"},Ae=["onClick"],Me={key:1,class:"space-y-4"},Ve={class:"flex gap-2"},$e={class:"space-y-2"},De={class:"truncate pr-4 font-medium"},Ue=["onClick"],We={key:2,class:"space-y-4"},Te={class:"flex gap-2"},je={class:"space-y-2"},Pe={class:"truncate pr-4 font-bold"},ze=["onClick"],Fe={key:3,class:"space-y-4"},Ne={class:"flex gap-2"},Be=["value"],He={class:"space-y-2"},Ke={class:"truncate pr-4 font-bold text-red-700 dark:text-red-400"},Le={class:"flex items-center gap-3"},Ee={class:"text-[9px] font-black uppercase px-2 py-1 bg-white dark:bg-gray-800 rounded border border-red-200"},Re=["onClick"],Ye={key:4,class:"space-y-4"},Ge={class:"flex gap-2"},Oe=["disabled"],Xe={key:0,class:"space-y-2 max-h-80 overflow-y-auto custom-scrollbar border-t dark:border-gray-700 pt-2"},Je={class:"flex justify-between items-start gap-2"},qe={class:"flex items-start gap-2 flex-grow"},Qe=["checked","onChange"],Ze={class:"font-bold text-gray-900 dark:text-white leading-tight"},et={class:"text-[10px] text-gray-500 mt-0.5"},tt={class:"mt-2 pl-6 flex items-center justify-between"},lt={class:"flex items-center gap-2 cursor-pointer select-none"},at={class:"relative inline-block w-8 h-4 align-middle select-none transition duration-200 ease-in"},st=["onUpdate:modelValue"],ot=["href"],nt={key:1,class:"border-t dark:border-gray-700 pt-2"},rt={class:"text-[10px] uppercase font-bold text-gray-500 mb-1"},it={class:"space-y-1 max-h-32 overflow-y-auto custom-scrollbar"},ut={class:"truncate pr-2 font-medium"},dt={key:0,class:"text-[9px] bg-blue-200 text-blue-800 px-1 rounded ml-1"},ct=["onClick"],pt={key:5,class:"space-y-4 h-full flex flex-col"},vt={class:"p-6 border-t dark:border-gray-700 flex justify-end items-center gap-3 bg-gray-50 dark:bg-gray-800/30"},bt=["disabled"],gt={__name:"ArtefactImportWizardModal",setup(P){const u=Z(),k=ee(),L=U(()=>k.modalData("artefactImportWizard")),E=U(()=>{var o;return(o=L.value)==null?void 0:o.notebookId}),v=d("files"),A=d(!1),M=d(!1),D=d(""),m=d([]),b=d([]),a=d({urls:[],wikipedia_urls:[],youtube_configs:[],files:[],manual_title:"",manual_content:""}),R=[{code:"en",name:"English"},{code:"fr",name:"French"},{code:"es",name:"Spanish"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"zh",name:"Chinese"},{code:"ja",name:"Japanese"},{code:"ru",name:"Russian"}],y=d(""),w=d(""),_=d({url:"",lang:"en"}),z=d(null),F=()=>{y.value.trim()&&(a.value.urls.push(y.value.trim()),y.value="")},N=()=>{w.value.trim()&&(a.value.wikipedia_urls.push(w.value.trim()),w.value="")},Y=()=>{_.value.url.trim()&&(a.value.youtube_configs.push({..._.value}),_.value.url="")},G=o=>{a.value.files.push(...Array.from(o.target.files)),o.target.value=""};async function B(){const o=D.value.trim();if(o){M.value=!0,m.value=[];try{const l=await u.searchArxiv(o);m.value=l.map(t=>({...t,selected:!1,ingest_full:!1}))}catch(l){console.error(l)}finally{M.value=!1}}}function H(o){o.selected=!o.selected,O()}function O(){b.value=m.value.filter(o=>o.selected).map(o=>({entry_id:o.entry_id,title:o.title,authors:o.authors,summary:o.summary,pdf_url:o.pdf_url,ingest_full:o.ingest_full}))}function X(o){return b.value.some(l=>l.entry_id===o)}const J=U(()=>a.value.urls.length>0||a.value.wikipedia_urls.length>0||a.value.youtube_configs.length>0||a.value.files.length>0||a.value.manual_title.trim()&&a.value.manual_content.trim()||b.value.length>0);async function q(){if(E.value){A.value=!0;try{(a.value.urls.length||a.value.wikipedia_urls.length||a.value.youtube_configs.length)&&await u.importSources({urls:a.value.urls,wikipedia_urls:a.value.wikipedia_urls,youtube_configs:a.value.youtube_configs});for(const o of a.value.files)await u.uploadSource(o,!0);a.value.manual_title&&a.value.manual_content&&await u.createManualArtefact(a.value.manual_title,a.value.manual_content),b.value.length>0&&await u.importSources({arxiv_selected:b.value}),k.addNotification("Knowledge import tasks started.","success"),k.closeModal("artefactImportWizard")}catch{k.addNotification("Import failed.","error")}finally{A.value=!1}}}const Q=[{id:"files",label:"Documents",icon:le},{id:"web",label:"Links",icon:ge},{id:"wiki",label:"Wikipedia",icon:ae},{id:"youtube",label:"YouTube",icon:ce},{id:"arxiv",label:"Arxiv",icon:me},{id:"manual",label:"Manual Text",icon:se}];return(o,l)=>(s(),I(de,{modalName:"artefactImportWizard",title:"Knowledge Import Wizard",maxWidthClass:"max-w-2xl"},{body:te(()=>[e("div",he,[e("div",ke,[(s(),n(g,null,f(Q,t=>e("button",{key:t.id,onClick:r=>v.value=t.id,class:V(["flex items-center gap-2 px-4 py-2 text-[10px] font-black uppercase tracking-widest transition-all rounded-lg",v.value===t.id?"bg-white dark:bg-gray-700 text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"])},[(s(),I(oe(t.icon),{class:"w-4 h-4"})),W(" "+i(t.label),1)],10,ye)),64))]),e("div",we,[v.value==="files"?(s(),n("div",Ce,[e("div",{onClick:l[0]||(l[0]=t=>z.value.click()),class:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-3xl p-12 text-center cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/10 transition-all group"},[p($,{class:"w-12 h-12 mx-auto text-gray-300 group-hover:text-blue-500 mb-4 transition-colors"}),l[9]||(l[9]=e("p",{class:"text-sm font-black uppercase tracking-tighter text-gray-500"},"Drop Documents Here",-1)),l[10]||(l[10]=e("p",{class:"text-[10px] text-gray-400 mt-1 uppercase tracking-widest"},"PDF, DOCX, PPTX, TXT, MD",-1)),e("input",{type:"file",ref_key:"fileInput",ref:z,onChange:G,multiple:"",class:"hidden"},null,544)]),e("div",Ie,[(s(!0),n(g,null,f(a.value.files,(t,r)=>(s(),n("div",{key:r,class:"px-3 py-1.5 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-xl text-[10px] font-bold flex items-center gap-2 border border-purple-100 dark:border-purple-800"},[e("span",Se,i(t.name),1),e("button",{onClick:C=>a.value.files.splice(r,1),class:"hover:text-red-500"},[p(S,{class:"w-3 h-3"})],8,Ae)]))),128))])])):c("",!0),v.value==="web"?(s(),n("div",Me,[e("div",Ve,[x(e("input",{"onUpdate:modelValue":l[1]||(l[1]=t=>y.value=t),onKeyup:T(F,["enter"]),placeholder:"Enter link (https://...)",class:"input-field flex-grow"},null,544),[[h,y.value]]),e("button",{onClick:F,class:"btn btn-secondary"},[p($,{class:"w-5 h-5"})])]),e("div",$e,[(s(!0),n(g,null,f(a.value.urls,(t,r)=>(s(),n("div",{key:r,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-xs border dark:border-gray-700"},[e("span",De,i(t),1),e("button",{onClick:C=>a.value.urls.splice(r,1),class:"text-red-500 hover:scale-110 transition-transform"},[p(S,{class:"w-4 h-4"})],8,Ue)]))),128))])])):c("",!0),v.value==="wiki"?(s(),n("div",We,[l[11]||(l[11]=e("div",{class:"p-4 bg-blue-50 dark:bg-blue-900/10 rounded-2xl border border-blue-100 dark:border-blue-900/30 text-[10px] text-blue-700 dark:text-blue-300 font-bold uppercase tracking-widest"}," Ground your notebook with full Wikipedia articles. ",-1)),e("div",Te,[x(e("input",{"onUpdate:modelValue":l[2]||(l[2]=t=>w.value=t),onKeyup:T(N,["enter"]),placeholder:"Article Title or Wiki URL...",class:"input-field flex-grow"},null,544),[[h,w.value]]),e("button",{onClick:N,class:"btn btn-secondary"},[p($,{class:"w-5 h-5"})])]),e("div",je,[(s(!0),n(g,null,f(a.value.wikipedia_urls,(t,r)=>(s(),n("div",{key:r,class:"flex items-center justify-between p-3 bg-gray-100 dark:bg-gray-850 rounded-xl text-xs border-l-4 border-gray-400"},[e("span",Pe,i(t),1),e("button",{onClick:C=>a.value.wikipedia_urls.splice(r,1),class:"text-red-500 hover:scale-110"},[p(S,{class:"w-4 h-4"})],8,ze)]))),128))])])):c("",!0),v.value==="youtube"?(s(),n("div",Fe,[e("div",Ne,[x(e("input",{"onUpdate:modelValue":l[3]||(l[3]=t=>_.value.url=t),placeholder:"YouTube Video URL...",class:"input-field flex-grow"},null,512),[[h,_.value.url]]),x(e("select",{"onUpdate:modelValue":l[4]||(l[4]=t=>_.value.lang=t),class:"input-field w-32"},[(s(),n(g,null,f(R,t=>e("option",{key:t.code,value:t.code},i(t.name),9,Be)),64))],512),[[ne,_.value.lang]]),e("button",{onClick:Y,class:"btn btn-secondary"},[p($,{class:"w-5 h-5"})])]),e("div",He,[(s(!0),n(g,null,f(a.value.youtube_configs,(t,r)=>(s(),n("div",{key:r,class:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/10 rounded-xl text-xs border-l-4 border-red-500"},[e("span",Ke,i(t.url),1),e("div",Le,[e("span",Ee,i(t.lang),1),e("button",{onClick:C=>a.value.youtube_configs.splice(r,1),class:"text-red-500 hover:scale-110"},[p(S,{class:"w-4 h-4"})],8,Re)])]))),128))])])):c("",!0),v.value==="arxiv"?(s(),n("div",Ye,[l[12]||(l[12]=e("div",{class:"p-4 bg-orange-50 dark:bg-orange-900/10 rounded-2xl border border-orange-100 dark:border-orange-900/30 text-[10px] text-orange-700 dark:text-orange-300 font-bold uppercase tracking-widest"}," Search and import research papers from Arxiv. ",-1)),e("div",Ge,[x(e("input",{"onUpdate:modelValue":l[5]||(l[5]=t=>D.value=t),onKeyup:T(B,["enter"]),placeholder:"Search Arxiv (e.g. 'transformer attention')...",class:"input-field flex-grow"},null,544),[[h,D.value]]),e("button",{onClick:B,class:"btn btn-secondary",disabled:M.value},[M.value?(s(),I(K,{key:0,class:"w-4 h-4 animate-spin"})):(s(),I(re,{key:1,class:"w-4 h-4"}))],8,Oe)]),m.value.length>0?(s(),n("div",Xe,[(s(!0),n(g,null,f(m.value,t=>(s(),n("div",{key:t.entry_id,class:"p-3 bg-white dark:bg-gray-700 rounded-lg text-xs shadow-sm border border-transparent hover:border-blue-300 transition-colors"},[e("div",Je,[e("div",qe,[e("input",{type:"checkbox",checked:X(t.entry_id),onChange:r=>H(t),class:"mt-1 rounded text-blue-600 focus:ring-blue-500"},null,40,Qe),e("div",null,[e("p",Ze,i(t.title),1),e("p",et,i(t.authors.slice(0,2).join(", "))+i(t.authors.length>2?" et al.":"")+" • "+i(t.published),1)])])]),e("div",tt,[e("label",lt,[e("div",at,[x(e("input",{type:"checkbox","onUpdate:modelValue":r=>t.ingest_full=r,class:V(["toggle-checkbox absolute block w-4 h-4 rounded-full bg-white border-4 appearance-none cursor-pointer",t.ingest_full?"right-0 border-blue-600":"left-0 border-gray-300"])},null,10,st),[[ie,t.ingest_full]]),e("div",{class:V(["toggle-label block overflow-hidden h-4 rounded-full cursor-pointer bg-gray-300",t.ingest_full?"bg-blue-600":""])},null,2)]),e("span",{class:V(["text-[10px] font-bold uppercase",t.ingest_full?"text-blue-600":"text-gray-400"])},i(t.ingest_full?"Full PDF":"Abstract"),3)]),e("a",{href:t.pdf_url,target:"_blank",class:"text-blue-500 hover:underline text-[10px]"},"View PDF ↗",8,ot)])]))),128))])):c("",!0),b.value.length>0?(s(),n("div",nt,[e("p",rt,"Selected Papers ("+i(b.value.length)+")",1),e("ul",it,[(s(!0),n(g,null,f(b.value,t=>(s(),n("li",{key:t.entry_id,class:"flex justify-between items-center text-xs bg-blue-50 dark:bg-blue-900/20 px-2 py-1.5 rounded"},[e("span",ut,[W(i(t.title)+" ",1),t.ingest_full?(s(),n("span",dt,"PDF")):c("",!0)]),e("button",{onClick:r=>H(m.value.find(C=>C.entry_id===t.entry_id)),class:"text-red-500 hover:text-red-700"},[p(S,{class:"w-3 h-3"})],8,ct)]))),128))])])):c("",!0)])):c("",!0),v.value==="manual"?(s(),n("div",pt,[x(e("input",{"onUpdate:modelValue":l[6]||(l[6]=t=>a.value.manual_title=t),placeholder:"Artefact Title (e.g. Brainstorming Notes)",class:"input-field font-bold"},null,512),[[h,a.value.manual_title]]),x(e("textarea",{"onUpdate:modelValue":l[7]||(l[7]=t=>a.value.manual_content=t),placeholder:"Paste or type content here...",class:"flex-grow input-field text-sm leading-relaxed min-h-[200px] resize-none"},null,512),[[h,a.value.manual_content]])])):c("",!0)]),e("div",vt,[e("button",{onClick:l[8]||(l[8]=t=>ue(k).closeModal("artefactImportWizard")),class:"btn btn-secondary px-6"},"Cancel"),e("button",{onClick:q,disabled:!J.value||A.value,class:"btn btn-primary px-10 relative shadow-lg shadow-blue-500/20 font-black uppercase text-xs tracking-widest"},[A.value?(s(),I(K,{key:0,class:"w-4 h-4 mr-2 animate-spin"})):c("",!0),l[13]||(l[13]=W(" Start Ingestion "))],8,bt)])])]),_:1}))}},mt=j(gt,[["__scopeId","data-v-5af828e2"]]);export{mt as default};
