import{u as k,W as b,s as p,o as h,w as v,d as u,l as d,e as t,H as c,z as l,Q as n,X as f,f as S,Z as w,g as M,h as C,a7 as R}from"./index-BT_1XIF6.js";const N={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},V={class:"border-t border-gray-200 dark:border-gray-700"},G={class:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4"},U={class:"border-t border-gray-200 dark:border-gray-700 pt-6"},T={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4"},z={class:"border-t border-gray-200 dark:border-gray-700 pt-6 space-y-4"},O={class:"relative flex items-start"},A={class:"flex h-6 items-center"},D={key:0,class:"pl-9"},L={class:"flex justify-end pt-4"},H=["disabled"],J={key:0},K={key:1},F={__name:"RAGSettings",setup(B){const m=k(),{user:s}=b(m),a=p({rag_top_k:10,max_rag_len:8e4,rag_n_hops:0,rag_min_sim_percent:50,rag_use_graph:!1,rag_graph_response_type:"chunks_summary",default_rag_chunk_size:1024,default_rag_chunk_overlap:256,default_rag_metadata_mode:"none"}),o=p(!1),i=p(!1);let x={};const y=()=>{s.value&&(a.value={rag_top_k:s.value.rag_top_k??10,max_rag_len:s.value.max_rag_len??8e4,rag_n_hops:s.value.rag_n_hops??0,rag_min_sim_percent:s.value.rag_min_sim_percent??50,rag_use_graph:s.value.rag_use_graph||!1,rag_graph_response_type:s.value.rag_graph_response_type||"chunks_summary",default_rag_chunk_size:s.value.default_rag_chunk_size||1024,default_rag_chunk_overlap:s.value.default_rag_chunk_overlap||256,default_rag_metadata_mode:s.value.default_rag_metadata_mode||"none"},x=JSON.parse(JSON.stringify(a.value)),i.value=!1)};h(y),v(s,y,{deep:!0}),v(a,g=>{i.value=JSON.stringify(g)!==JSON.stringify(x)},{deep:!0});async function _(){o.value=!0;try{await m.updateUserPreferences(a.value)}catch{}finally{o.value=!1}}return(g,e)=>(d(),u("div",N,[e[29]||(e[29]=t("div",{class:"px-4 py-5 sm:p-6"},[t("h2",{class:"text-xl font-bold leading-6 text-gray-900 dark:text-white"},"RAG Parameters"),t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-400"}," Configure Retrieval-Augmented Generation (RAG) behavior and defaults for new data stores. ")],-1)),t("div",V,[t("form",{onSubmit:c(_,["prevent"]),class:"p-4 sm:p-6 space-y-6"},[t("div",null,[e[17]||(e[17]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Query Configuration",-1)),t("div",G,[t("div",null,[e[9]||(e[9]=t("label",{for:"ragTopK",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Top K",-1)),l(t("input",{type:"number",id:"ragTopK","onUpdate:modelValue":e[0]||(e[0]=r=>a.value.rag_top_k=r),class:"input-field mt-1",step:"1",min:"1",placeholder:"e.g., 10"},null,512),[[n,a.value.rag_top_k,void 0,{number:!0}]]),e[10]||(e[10]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Number of top matching chunks to retrieve.",-1))]),t("div",null,[e[11]||(e[11]=t("label",{for:"maxRagLen",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Max RAG Length",-1)),l(t("input",{type:"number",id:"maxRagLen","onUpdate:modelValue":e[1]||(e[1]=r=>a.value.max_rag_len=r),class:"input-field mt-1",step:"1",min:"1",placeholder:"e.g., 80000"},null,512),[[n,a.value.max_rag_len,void 0,{number:!0}]]),e[12]||(e[12]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Max context length in characters.",-1))]),t("div",null,[e[13]||(e[13]=t("label",{for:"ragNHops",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"RAG Hops",-1)),l(t("input",{type:"number",id:"ragNHops","onUpdate:modelValue":e[2]||(e[2]=r=>a.value.rag_n_hops=r),class:"input-field mt-1",step:"1",min:"0",placeholder:"e.g., 0"},null,512),[[n,a.value.rag_n_hops,void 0,{number:!0}]]),e[14]||(e[14]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Number of context expansion hops.",-1))]),t("div",null,[e[15]||(e[15]=t("label",{for:"ragMinSim",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Min Similarity %",-1)),l(t("input",{type:"number",id:"ragMinSim","onUpdate:modelValue":e[3]||(e[3]=r=>a.value.rag_min_sim_percent=r),class:"input-field mt-1",step:"1",min:"1",max:"100",placeholder:"e.g., 50"},null,512),[[n,a.value.rag_min_sim_percent,void 0,{number:!0}]]),e[16]||(e[16]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Minimum similarity score required.",-1))])])]),t("div",U,[e[25]||(e[25]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"New Data Store Defaults",-1)),t("div",T,[t("div",null,[e[18]||(e[18]=t("label",{for:"defaultChunkSize",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Default Chunk Size",-1)),l(t("input",{type:"number",id:"defaultChunkSize","onUpdate:modelValue":e[4]||(e[4]=r=>a.value.default_rag_chunk_size=r),class:"input-field mt-1",step:"1",min:"1"},null,512),[[n,a.value.default_rag_chunk_size,void 0,{number:!0}]]),e[19]||(e[19]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Tokens/chars per chunk.",-1))]),t("div",null,[e[20]||(e[20]=t("label",{for:"defaultChunkOverlap",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Default Chunk Overlap",-1)),l(t("input",{type:"number",id:"defaultChunkOverlap","onUpdate:modelValue":e[5]||(e[5]=r=>a.value.default_rag_chunk_overlap=r),class:"input-field mt-1",step:"1",min:"0"},null,512),[[n,a.value.default_rag_chunk_overlap,void 0,{number:!0}]]),e[21]||(e[21]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Overlap between chunks.",-1))]),t("div",null,[e[23]||(e[23]=t("label",{for:"defaultMetadataMode",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Default Metadata Mode",-1)),l(t("select",{id:"defaultMetadataMode","onUpdate:modelValue":e[6]||(e[6]=r=>a.value.default_rag_metadata_mode=r),class:"input-field mt-1"},e[22]||(e[22]=[t("option",{value:"none"},"None",-1),t("option",{value:"manual"},"Manual Entry",-1),t("option",{value:"auto-generate"},"Auto-generate",-1),t("option",{value:"rewrite-chunk"},"Rewrite Chunk",-1)]),512),[[f,a.value.default_rag_metadata_mode]]),e[24]||(e[24]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Default metadata strategy.",-1))])])]),t("div",z,[t("div",O,[t("div",A,[l(t("input",{id:"useGraph","onUpdate:modelValue":e[7]||(e[7]=r=>a.value.rag_use_graph=r),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-blue-600 focus:ring-blue-600 dark:focus:ring-blue-600 dark:ring-offset-gray-800"},null,512),[[w,a.value.rag_use_graph]])]),e[26]||(e[26]=t("div",{class:"ml-3 text-sm leading-6"},[t("label",{for:"useGraph",class:"font-medium text-gray-900 dark:text-gray-300"},"Use Knowledge Graph"),t("p",{class:"text-gray-500 dark:text-gray-400"},"Leverage graph data for richer context if available.")],-1))]),S(R,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:M(()=>[a.value.rag_use_graph?(d(),u("div",D,[e[28]||(e[28]=t("label",{for:"graphResponseType",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Graph Response Type",-1)),l(t("select",{id:"graphResponseType","onUpdate:modelValue":e[8]||(e[8]=r=>a.value.rag_graph_response_type=r),class:"input-field max-w-xs"},e[27]||(e[27]=[t("option",{value:"chunks_summary"},"Chunks Summary",-1),t("option",{value:"graph_only"},"Graph Only",-1),t("option",{value:"full"},"Full Response",-1)]),512),[[f,a.value.rag_graph_response_type]])])):C("",!0)]),_:1})]),t("div",L,[t("button",{type:"submit",class:"btn btn-primary",disabled:o.value||!i.value},[o.value?(d(),u("span",J,"Saving...")):(d(),u("span",K,"Save Settings"))],8,H)])],32)])]))}};export{F as default};
