import{u as x,r as f,b as h,d as _,S as b,c as o,o as r,a as n,A as S,p as w,F as C,j as B,J as L,t as m,n as v,aD as j}from"./index-BzYhVBtc.js";import{u as D}from"./admin-D4vFb8Ht.js";const N={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},U={key:0,class:"p-6 text-center"},A={key:0,class:"text-center text-gray-500"},E={key:1,class:"space-y-4"},F={class:"flex-grow flex flex-col pr-4"},J={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},M=["onClick"],O=["type","id","onUpdate:modelValue"],V={class:"mt-8 pt-5 border-t border-gray-200 dark:border-gray-700"},G={class:"flex justify-end"},z=["disabled"],H={__name:"BuildersSettings",setup(T){const l=D();x();const s=f({}),d=f(!1),c=f(!1);let p="{}";const i=h(()=>l.globalSettings.filter(e=>e.category==="Builders").sort((e,a)=>e.key.localeCompare(a.key)));function g(){if(i.value.length>0){const e={};i.value.forEach(a=>{a.type==="boolean"?e[a.key]=y(a.value):e[a.key]=a.value}),s.value=e,p=JSON.stringify(s.value),c.value=!1}}function y(e){return typeof e=="boolean"?e:typeof e=="string"?e.toLowerCase()==="true":!!e}_(()=>{l.globalSettings.length===0?l.fetchGlobalSettings():g()}),b(()=>l.globalSettings,g,{deep:!0}),b(s,e=>{c.value=JSON.stringify(e)!==p},{deep:!0});async function k(){d.value=!0;const e={};for(const a in s.value)i.value.some(t=>t.key===a)&&(e[a]=s.value[a]);try{await l.updateGlobalSettings(e)}finally{d.value=!1}}return(e,a)=>(r(),o("div",N,[a[0]||(a[0]=n("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[n("h3",{class:"text-xl font-semibold leading-6 text-gray-900 dark:text-white"}," Builders & Export Settings "),n("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Configure executables for code compilation and enable/disable message export formats. ")],-1)),S(l).isLoadingSettings?(r(),o("div",U,"Loading settings...")):(r(),o("form",{key:1,onSubmit:w(k,["prevent"]),class:"p-6"},[i.value.length===0?(r(),o("div",A," No builder settings found. ")):(r(),o("div",E,[(r(!0),o(C,null,B(i.value,t=>(r(),o("div",{key:t.key,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[n("span",F,[n("span",J,m(t.description||t.key.replace(/_/g," ").replace(/\b\w/g,u=>u.toUpperCase())),1)]),t.type==="boolean"?(r(),o("button",{key:0,onClick:u=>s.value[t.key]=!s.value[t.key],type:"button",class:v([y(s.value[t.key])?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"])},[n("span",{class:v([y(s.value[t.key])?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)],10,M)):L((r(),o("input",{key:1,type:t.type==="string"||t.type==="text"?"text":"number",id:t.key,"onUpdate:modelValue":u=>s.value[t.key]=u,class:"input-field w-full sm:max-w-xs"},null,8,O)),[[j,s.value[t.key]]])]))),128))])),n("div",V,[n("div",G,[n("button",{type:"submit",class:"btn btn-primary",disabled:d.value||!c.value},m(d.value?"Saving...":"Save Changes"),9,z)])])],32))]))}};export{H as default};
