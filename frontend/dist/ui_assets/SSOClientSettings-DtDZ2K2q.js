import{a as m,r as b,c as x,o as S,w as _,g as n,d as r,f as s,l as w,j as C,F as v,B as O,h as j,t as u,p as y,i as B,$ as D}from"./index-GJY6etPD.js";import{useAdminStore as L}from"./admin-CVB73vxO.js";const N={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},V={key:0,class:"p-6 text-center"},F={key:0,class:"text-center text-gray-500"},M={key:1,class:"space-y-6"},U={key:0,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},$={class:"flex-grow flex flex-col pr-4"},A={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},E=["onClick"],G={key:0,class:"mt-4"},I={class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},J={class:"flex-grow flex flex-col pr-4"},z={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},T=["onClick"],q={key:1,class:"mt-4"},H=["for"],K=["type","id","onUpdate:modelValue","placeholder"],P={class:"mt-8 pt-5 border-t border-gray-200 dark:border-gray-700"},Q={class:"flex justify-end"},R=["disabled"],Z={__name:"SSOClientSettings",setup(W){const l=L();m();const a=b({}),c=b(!1),f=b(!1);let g="{}";const i=x(()=>l.globalSettings.filter(t=>t.category==="SSO Client").sort((t,o)=>t.key==="sso_client_enabled"?-1:o.key==="sso_client_enabled"?1:t.key.localeCompare(o.key)));function k(){if(i.value.length>0){const t={};i.value.forEach(o=>{o.type==="boolean"?t[o.key]=d(o.value):t[o.key]=o.value}),a.value=t,g=JSON.stringify(a.value),f.value=!1}}function d(t){return typeof t=="boolean"?t:typeof t=="string"?t.toLowerCase()==="true":!!t}S(()=>{l.globalSettings.length===0?l.fetchGlobalSettings():k()}),_(()=>l.globalSettings,k,{deep:!0}),_(a,t=>{f.value=JSON.stringify(t)!==g},{deep:!0});async function h(){c.value=!0;const t={};for(const o in a.value)i.value.some(e=>e.key===o)&&(t[o]=a.value[o]);try{await l.updateGlobalSettings(t)}finally{c.value=!1}}return(t,o)=>(r(),n("div",N,[o[0]||(o[0]=s("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[s("h3",{class:"text-xl font-semibold leading-6 text-gray-900 dark:text-white"}," SSO Client Settings (OIDC) "),s("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Configure lollms to use an external OpenID Connect provider for user authentication. ")],-1)),w(l).isLoadingSettings?(r(),n("div",V,"Loading settings...")):(r(),n("form",{key:1,onSubmit:C(h,["prevent"]),class:"p-6 space-y-6"},[i.value.length===0?(r(),n("div",F," Could not load SSO settings. ")):(r(),n("div",M,[(r(!0),n(v,null,O(i.value,e=>(r(),n("div",{key:e.key},[e.key==="sso_client_enabled"?(r(),n("div",U,[s("span",$,[s("span",A,u(e.description),1)]),s("button",{onClick:p=>a.value[e.key]=!a.value[e.key],type:"button",class:y([d(a.value[e.key])?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out"])},[s("span",{class:y([d(a.value[e.key])?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)],10,E)])):a.value.sso_client_enabled?(r(),n(v,{key:1},[e.type==="boolean"?(r(),n("div",G,[s("div",I,[s("span",J,[s("span",z,u(e.description),1)]),s("button",{onClick:p=>a.value[e.key]=!a.value[e.key],type:"button",class:y([d(a.value[e.key])?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out"])},[s("span",{class:y([d(a.value[e.key])?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)],10,T)])])):(r(),n("div",q,[s("label",{for:e.key,class:"block text-sm font-medium"},u(e.description),9,H),B(s("input",{type:e.key.includes("secret")?"password":"text",id:e.key,"onUpdate:modelValue":p=>a.value[e.key]=p,class:"input-field mt-1 w-full",placeholder:e.key.includes("secret")?"********":"",autocomplete:"off"},null,8,K),[[D,a.value[e.key]]])]))],64)):j("",!0)]))),128))])),s("div",P,[s("div",Q,[s("button",{type:"submit",class:"btn btn-primary",disabled:c.value||!f.value},u(c.value?"Saving...":"Save Changes"),9,R)])])],32))]))}};export{Z as default};
