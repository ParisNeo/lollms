import{a as N,ai as _,c as p,r as d,w as h,b as M,d as c,e as g,f as o,l as B,t as b,i as y,v as D,z as V,g as x,B as C,F,j as L}from"./index-GJY6etPD.js";import{_ as T}from"./GenericModal-Cz02a-9C.js";const U=["value"],j={class:"flex justify-end gap-2"},E=["disabled"],I={__name:"NoteGroupModal",setup($){const v=N(),m=_(),G=p(()=>v.modalData("noteGroup")),a=d(null),u=d(""),r=d(null),s=d(!1);h(G,e=>{e?(a.value=e.group,u.value=e.group?e.group.name:"",r.value=e.group?e.group.parent_id:e.parentGroup?e.parentGroup.id:null):(a.value=null,u.value="",r.value=null)},{immediate:!0});const w=p(()=>a.value?"Edit Note Group":"New Note Group"),f=p(()=>u.value.trim().length>0),S=p(()=>{const e=(t,l="")=>{let i=[];for(const n of t)a.value&&n.id===a.value.id||(i.push({value:n.id,text:l+n.name}),n.children&&n.children.length>0&&(i=i.concat(e(n.children,l+"- "))));return i};return[{value:null,text:"None (Top Level)"},...e(m.notesTree.groups)]});async function k(){if(!(!f.value||s.value)){s.value=!0;try{a.value?await m.updateGroup(a.value.id,u.value,r.value):await m.createGroup(u.value,r.value),v.closeModal("noteGroup")}finally{s.value=!1}}}return(e,t)=>(c(),M(T,{modalName:"noteGroup",title:w.value},{body:g(()=>[o("form",{onSubmit:L(k,["prevent"]),id:"note-group-form",class:"space-y-4 p-6"},[o("div",null,[t[3]||(t[3]=o("label",{for:"group-name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Group Name",-1)),y(o("input",{type:"text",id:"group-name","onUpdate:modelValue":t[0]||(t[0]=l=>u.value=l),class:"mt-1 input-field w-full",placeholder:"e.g., Research",required:"",autofocus:""},null,512),[[D,u.value]])]),o("div",null,[t[4]||(t[4]=o("label",{for:"parent-group",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Parent Group",-1)),y(o("select",{id:"parent-group","onUpdate:modelValue":t[1]||(t[1]=l=>r.value=l),class:"mt-1 input-field w-full"},[(c(!0),x(F,null,C(S.value,l=>(c(),x("option",{key:l.value,value:l.value},b(l.text),9,U))),128))],512),[[V,r.value]])])],32)]),footer:g(()=>[o("div",j,[o("button",{type:"button",onClick:t[2]||(t[2]=l=>B(v).closeModal("noteGroup")),class:"btn btn-secondary"}," Cancel "),o("button",{type:"submit",form:"note-group-form",disabled:!f.value||s.value,class:"btn btn-primary"},b(s.value?"Saving...":"Save"),9,E)])]),_:1},8,["title"]))}};export{I as default};
