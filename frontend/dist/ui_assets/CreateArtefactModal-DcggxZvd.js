import{u as y,al as _,c as u,N as r,m as w,a as f,o as m,w as v,b as e,d as g,g as h,h as C,aB as N,t as D,W as A,f as p,Y as S,ak as V,aq as k}from"./index-BkSnPnj7.js";import{_ as M}from"./GenericModal-CyWgHpU9.js";const I={class:"space-y-4 p-1 h-full flex flex-col"},T={class:"relative mt-1"},q={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},B={class:"flex-grow flex flex-col min-h-[300px]"},U={class:"flex-grow border border-gray-300 dark:border-gray-600 rounded-md overflow-hidden relative"},L={class:"flex justify-end gap-3"},$=["disabled"],O={__name:"CreateArtefactModal",setup(W){const a=y(),d=_(),b=u(()=>a.modalData("createArtefact")),c=u(()=>{var i;return((i=b.value)==null?void 0:i.discussionId)||d.currentDiscussionId}),s=r(""),l=r(""),o=r(!1);w(()=>a.isModalOpen("createArtefact"),i=>{i&&(s.value="Untitled Document.md",l.value="")});async function x(){if(!c.value){a.addNotification("No discussion selected.","error");return}if(!s.value.trim()){a.addNotification("Title is required.","warning");return}if(!l.value.trim()){a.addNotification("Content is required.","warning");return}o.value=!0;try{await d.createManualArtefact(c.value,s.value.trim(),l.value),a.closeModal("createArtefact")}finally{o.value=!1}}return(i,t)=>(m(),f(M,{modalName:"createArtefact",title:"Create New Document",maxWidthClass:"max-w-3xl"},{body:v(()=>[e("div",I,[e("div",null,[t[3]||(t[3]=e("label",{for:"artefact-title",class:"label"},"Document Title",-1)),e("div",T,[e("div",q,[p(S,{class:"h-4 w-4 text-gray-400"})]),A(e("input",{id:"artefact-title","onUpdate:modelValue":t[0]||(t[0]=n=>s.value=n),type:"text",class:"input-field pl-10",placeholder:"e.g. My Notes.md",required:""},null,512),[[V,s.value]])])]),e("div",B,[t[4]||(t[4]=e("label",{class:"label mb-1"},"Content",-1)),e("div",U,[p(k,{modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=n=>l.value=n),class:"h-full absolute inset-0",placeholder:"Start typing..."},null,8,["modelValue"])])])])]),footer:v(()=>[e("div",L,[e("button",{onClick:t[2]||(t[2]=n=>g(a).closeModal("createArtefact")),type:"button",class:"btn btn-secondary"},"Cancel"),e("button",{onClick:x,type:"button",class:"btn btn-primary",disabled:o.value||!s.value.trim()||!l.value.trim()},[o.value?(m(),f(N,{key:0,class:"w-4 h-4 mr-2 animate-spin"})):h("",!0),C(" "+D((o.value,"Create & Load")),1)],8,$)])]),_:1}))}};export{O as default};
