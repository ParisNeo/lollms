import{u as y,L as i,e as n,o as d,b as t,J as h,K as u,f as k,ao as _,t as c,d as f}from"./index-IMwO7oGA.js";import{u as I}from"./admin-pNfXmtNC.js";const w={class:"space-y-8"},D={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},S={class:"p-6"},N={class:"space-y-6"},U={class:"text-center"},B={key:0,class:"mt-4 text-sm text-gray-600 dark:text-gray-300"},C={class:"font-semibold"},F={class:"text-xs text-gray-500"},M={key:1,class:"mt-4 flex text-sm leading-6 text-gray-600 dark:text-gray-400"},O={class:"flex justify-end"},P=["disabled"],j={__name:"ImportTools",setup(T){const l=I(),o=y(),p=i(null),a=i(null),r=i(!1);function g(s){const e=s.target.files;e.length>0&&(e[0].name==="webui.db"?a.value=e[0]:(o.addNotification("Invalid file. Please select 'webui.db'.","error"),a.value=null))}function b(){var s;(s=p.value)==null||s.click()}function m(s){r.value=!1;const e=s.dataTransfer.files;e.length>0&&(e[0].name==="webui.db"?a.value=e[0]:(o.addNotification("Invalid file. Please select 'webui.db'.","error"),a.value=null))}async function v(){if(!a.value){o.addNotification("Please select a file to import.","warning");return}try{await l.importOpenWebUIData(a.value),a.value=null}catch{}}return(s,e)=>(d(),n("div",w,[t("div",D,[e[5]||(e[5]=t("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-xl font-semibold leading-6 text-gray-900 dark:text-white"}," Data Import "),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Import data from other compatible applications. ")],-1)),t("div",S,[t("div",N,[e[4]||(e[4]=t("div",null,[t("h4",{class:"text-base font-medium text-gray-800 dark:text-gray-200"},"Import from Open-WebUI"),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Migrate users and discussions from an Open-WebUI instance by uploading its `webui.db` database file. The migration will run in the background. ")],-1)),t("div",null,[t("input",{type:"file",ref_key:"fileInput",ref:p,onChange:g,accept:".db",class:"hidden"},null,544),t("div",{onClick:b,onDragover:e[0]||(e[0]=u(x=>r.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=u(x=>r.value=!1,["prevent"])),onDrop:u(m,["prevent"]),class:h(["mt-2 flex justify-center rounded-lg border-2 border-dashed px-6 py-10 transition-colors",r.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"])},[t("div",U,[k(_,{class:"mx-auto h-12 w-12 text-gray-400"}),a.value?(d(),n("div",B,[t("p",C,c(a.value.name),1),t("p",F,c((a.value.size/1024/1024).toFixed(2))+" MB",1)])):(d(),n("p",M,e[2]||(e[2]=[t("span",{class:"font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-500"},"Upload a file",-1),t("span",{class:"pl-1"},"or drag and drop",-1)]))),e[3]||(e[3]=t("p",{class:"text-xs leading-5 text-gray-600 dark:text-gray-400"},"webui.db file only",-1))])],34)]),t("div",O,[t("button",{onClick:v,disabled:!a.value||f(l).isImporting,class:"btn btn-primary"},c(f(l).isImporting?"Importing...":"Start Import"),9,P)])])])])]))}};export{j as default};
