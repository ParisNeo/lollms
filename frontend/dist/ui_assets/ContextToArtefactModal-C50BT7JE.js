import{a as _,s as C,c as d,r as c,w as k,b as M,d as n,e as b,f as t,l as U,t as y,g as p,h as g,i as v,ad as S,p as h,v as D,z as N,F as V,B,j as I}from"./index-Dja0BxAz.js";import{_ as j}from"./GenericModal-C0Arp-Jb.js";const q={class:"space-y-2"},z={class:"flex items-center gap-4"},E={class:"flex items-center"},F={class:"flex items-center"},L=["disabled"],$={key:0},O={key:1},P=["value"],R={class:"flex justify-end gap-3"},Y=["disabled"],J={__name:"ContextToArtefactModal",setup(Z){const o=_(),A=C(),f=d(()=>o.modalData("contextToArtefact")),T=d(()=>{var l;return(l=f.value)==null?void 0:l.discussionId}),m=d(()=>{var l;return((l=f.value)==null?void 0:l.artefacts)||[]}),s=c("new"),i=c(""),r=c(null),u=c(!1);k(f,l=>{l&&o.isModalOpen("contextToArtefact")&&(s.value="new",i.value="",r.value=null)},{immediate:!0});const w=d(()=>s.value==="new"?i.value.trim():r.value);async function x(){if(!w.value){o.addNotification("Please provide a name for the new artefact or select one to update.","warning");return}u.value=!0;try{await A.exportContextAsArtefact({discussionId:T.value,title:w.value}),o.closeModal("contextToArtefact")}finally{u.value=!1}}return(l,e)=>(n(),M(j,{"modal-name":"contextToArtefact",title:"Save Context as Artefact","max-width-class":"max-w-lg"},{body:b(()=>[t("form",{onSubmit:I(x,["prevent"]),class:"space-y-6"},[e[9]||(e[9]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300"},' This will save the current content of the "Discussion Data Zone" as a new artefact. You can create a new artefact or update an existing one, which will create a new version. ',-1)),t("div",q,[t("div",z,[t("label",E,[v(t("input",{type:"radio","onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),value:"new",class:"radio-input"},null,512),[[S,s.value]]),e[5]||(e[5]=t("span",{class:"ml-2"},"Create New Artefact",-1))]),t("label",F,[v(t("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=a=>s.value=a),value:"update",class:"radio-input",disabled:m.value.length===0},null,8,L),[[S,s.value]]),t("span",{class:h(["ml-2",{"opacity-50":m.value.length===0}])},"Update Existing",2)])])]),s.value==="new"?(n(),p("div",$,[e[6]||(e[6]=t("label",{for:"new-artefact-title",class:"label"},"New Artefact Name",-1)),v(t("input",{id:"new-artefact-title","onUpdate:modelValue":e[2]||(e[2]=a=>i.value=a),type:"text",class:"input-field mt-1",required:""},null,512),[[D,i.value]])])):g("",!0),s.value==="update"?(n(),p("div",O,[e[8]||(e[8]=t("label",{for:"update-artefact-title",class:"label"},"Select Artefact to Update",-1)),v(t("select",{id:"update-artefact-title","onUpdate:modelValue":e[3]||(e[3]=a=>r.value=a),class:"input-field mt-1",required:""},[e[7]||(e[7]=t("option",{value:null,disabled:""},"Select an artefact...",-1)),(n(!0),p(V,null,B(m.value,a=>(n(),p("option",{key:a.title,value:a.title},y(a.title),9,P))),128))],512),[[N,r.value]])])):g("",!0)],32)]),footer:b(()=>[t("div",R,[t("button",{onClick:e[4]||(e[4]=a=>U(o).closeModal("contextToArtefact")),type:"button",class:"btn btn-secondary"},"Cancel"),t("button",{onClick:x,type:"button",class:"btn btn-primary",disabled:u.value||!w.value},y(u.value?"Saving...":"Save Artefact"),9,Y)])]),_:1}))}};export{J as default};
