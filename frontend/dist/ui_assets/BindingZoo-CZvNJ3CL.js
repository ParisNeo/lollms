import{u as w,ad as T,an as S,L as g,c as Z,j as B,k as z,e as a,o as l,b as i,t as d,T as N,a7 as C,f as x,aB as F,F as L,n as M,l as v,m as j,ao as I}from"./index-IMwO7oGA.js";import{u as V}from"./admin-pNfXmtNC.js";const $={class:"flex flex-col h-[600px]"},q={class:"mb-4 flex items-center justify-between"},A={class:"font-semibold text-lg"},D=["disabled"],R={class:"mb-4 relative"},U={key:0,class:"flex-grow flex items-center justify-center"},E={class:"text-center"},O={key:1,class:"flex-grow flex items-center justify-center text-gray-500"},G={key:2,class:"flex-grow overflow-y-auto space-y-3 pr-2"},H={class:"flex-grow"},J={class:"font-bold text-gray-900 dark:text-white"},K={class:"text-sm text-gray-600 dark:text-gray-300 mt-1"},P={class:"flex flex-wrap gap-2 mt-2 text-xs text-gray-500 dark:text-gray-400"},Q={key:0,class:"bg-gray-100 dark:bg-gray-600 px-2 py-0.5 rounded"},W={key:1,class:"bg-gray-100 dark:bg-gray-600 px-2 py-0.5 rounded"},X={class:"flex-shrink-0 flex items-center"},Y=["onClick","disabled"],oe={__name:"BindingZoo",props:{binding:{type:Object,required:!0},bindingType:{type:String,required:!0}},setup(b){const e=b,p=w(),n=V(),h=T(),{tasks:ee}=S(h),r=g([]),c=g(!1),u=g(null),f=g(""),_=Z(()=>{if(!f.value)return r.value;const o=f.value.toLowerCase();return r.value.filter(s=>s.name.toLowerCase().includes(o))});async function y(){c.value=!0;try{let o=[];e.bindingType==="llm"?o=await n.fetchBindingZoo(e.binding.id):e.bindingType==="tti"?o=await n.fetchTtiBindingZoo(e.binding.id):e.bindingType==="tts"?o=await n.fetchTtsBindingZoo(e.binding.id):e.bindingType==="stt"&&(o=await n.fetchSttBindingZoo(e.binding.id)),r.value=o||[]}catch(o){console.error(o),p.addNotification("Failed to fetch zoo models.","error")}finally{c.value=!1}}async function k(o,s){if(u.value===null){u.value=s;try{let t;e.bindingType==="llm"?t=await n.installLlmFromZoo(e.binding.id,s):e.bindingType==="tti"?t=await n.installTtiFromZoo(e.binding.id,s):e.bindingType==="tts"?t=await n.installTtsFromZoo(e.binding.id,s):e.bindingType==="stt"&&(t=await n.installSttFromZoo(e.binding.id,s)),t&&p.addNotification(`Installing ${o.name}...`,"info")}catch(t){console.error(t),p.addNotification("Installation failed to start.","error")}finally{u.value=null}}}return B(()=>{y()}),z(()=>e.binding,()=>{r.value=[],y()}),(o,s)=>(l(),a("div",$,[i("div",q,[i("h3",A,"Models Zoo: "+d(b.binding.alias),1),i("button",{onClick:y,class:"text-blue-600 hover:underline text-sm",disabled:c.value},"Refresh",8,D)]),i("div",R,[N(i("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>f.value=t),placeholder:"Search zoo...",class:"input-field w-full pl-8"},null,512),[[C,f.value]]),s[1]||(s[1]=i("div",{class:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none text-gray-400"},[i("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),c.value?(l(),a("div",U,[i("div",E,[x(F,{class:"w-8 h-8 text-blue-500 mx-auto mb-2"}),s[2]||(s[2]=i("p",null,"Loading zoo...",-1))])])):r.value.length===0?(l(),a("div",O," No models found in zoo for this binding. ")):(l(),a("div",G,[(l(!0),a(L,null,M(_.value,(t,m)=>(l(),a("div",{key:m,class:"bg-white dark:bg-gray-700/50 p-4 rounded-lg border border-gray-200 dark:border-gray-600 flex flex-col sm:flex-row gap-4"},[i("div",H,[i("h4",J,d(t.name),1),i("p",K,d(t.description),1),i("div",P,[t.size?(l(),a("span",Q,"Size: "+d(t.size),1)):v("",!0),t.type?(l(),a("span",W,"Type: "+d(t.type),1)):v("",!0)])]),i("div",X,[i("button",{onClick:te=>k(t,m),class:"btn btn-primary btn-sm flex items-center gap-2",disabled:u.value!==null},[x(I,{class:"w-4 h-4"}),s[3]||(s[3]=j(" Install "))],8,Y)])]))),128))]))]))}};export{oe as default};
