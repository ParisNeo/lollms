import{ad as ae,e as r,o,b as e,u as se,ct as oe,g as re,a2 as ne,L as m,c as S,V as ie,cs as W,aD as ue,C as de,cu as ce,a as I,w as z,d as pe,p as k,f as c,l as b,ax as ve,t as p,J as v,F as x,m as y,H as be,P as u,Y as g,aA as H,a6 as me,Q as T,am as O,O as R,aI as xe,as as U,co as ye}from"./index-Daq2SOhh.js";import{_ as ge}from"./GenericModal-DVZopOyZ.js";import{I as $}from"./IconArrowRight-Cf2Tl5tI.js";const fe={},ke={width:"50px",height:"50px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function he(E,f){return o(),r("svg",ke,f[0]||(f[0]=[e("path",{d:"M17 17H17.01M15.6 14H18C18.9319 14 19.3978 14 19.7654 14.1522C20.2554 14.3552 20.6448 14.7446 20.8478 15.2346C21 15.6022 21 16.0681 21 17C21 17.9319 21 18.3978 20.8478 18.7654C20.6448 19.2554 20.2554 19.6448 19.7654 19.8478C19.3978 20 18.9319 20 18 20H6C5.06812 20 4.60218 20 4.23463 19.8478C3.74458 19.6448 3.35523 19.2554 3.15224 18.7654C3 18.3978 3 17.9319 3 17C3 16.0681 3 15.6022 3.15224 15.2346C3.35523 14.7446 3.74458 14.3552 4.23463 14.1522C4.60218 14 5.06812 14 6 14H8.4M12 15V4M12 4L15 7M12 4L9 7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const _e=ae(fe,[["render",he]]),we={class:"min-h-[400px]"},Ce={class:"flex items-center justify-center mb-6"},Se={class:"flex items-center text-sm"},Ne={key:0,class:"space-y-4"},Te={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},Me=["onClick"],Ie={class:"flex items-start justify-between mb-3"},Ue={key:0,class:"text-[10px] uppercase font-bold text-red-400 bg-red-50 dark:bg-red-900/20 px-2 py-0.5 rounded"},$e={class:"font-bold text-gray-900 dark:text-gray-100 mb-1"},Ve={class:"text-xs text-gray-500 dark:text-gray-400 leading-relaxed"},Fe={key:1,class:"space-y-6"},Ae={class:"grid grid-cols-1 gap-6"},Be={class:"space-y-4"},De={key:0,class:"border-t dark:border-gray-700 pt-4"},Pe={class:"font-bold text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2"},je={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Le={class:"space-y-4"},We={class:"space-y-2"},ze=["value"],He={class:"ml-3"},Oe={class:"block text-sm font-medium"},Re={class:"block text-xs text-gray-500"},Ee={class:"space-y-4"},Ye={class:"flex flex-wrap gap-2"},Ge=["value"],Ke=["value"],Qe={class:"mt-2"},Xe={key:2,class:"space-y-4 h-full flex flex-col"},qe={class:"flex justify-between items-center mb-2"},Je={class:"text-xs font-bold bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-2 py-1 rounded"},Ze={class:"flex border-b border-gray-200 dark:border-gray-700"},et={class:"flex-grow py-4"},tt={class:"space-y-4"},lt={class:"flex gap-2"},at={class:"space-y-1 max-h-48 overflow-y-auto"},st={class:"truncate max-w-[300px] flex items-center gap-2"},ot=["onClick"],rt={key:0,class:"text-xs text-gray-400 italic text-center py-2"},nt={class:"space-y-4"},it={class:"flex gap-2"},ut={class:"space-y-1 max-h-48 overflow-y-auto"},dt={class:"truncate max-w-[300px] flex items-center gap-2"},ct=["onClick"],pt={key:0,class:"text-xs text-gray-400 italic text-center py-2"},vt={class:"space-y-4"},bt={class:"space-y-1 max-h-48 overflow-y-auto"},mt={class:"truncate max-w-[300px] font-medium"},xt=["onClick"],yt={class:"h-full"},gt={class:"flex justify-between w-full"},ft={key:1,class:"flex-grow"},kt={class:"flex gap-2"},ht=["disabled"],St={__name:"NotebookWizardModal",setup(E){const f=se(),h=oe(),Y=re(),{user:V}=ne(Y),i=m(0),_=m(!1),F=m(null),w=m(""),C=m(""),d=m("web"),N=S(()=>{var s;return!!((s=V.value)!=null&&s.lollms_model_name)}),G=S(()=>{var s;return!!((s=V.value)!=null&&s.tti_binding_model_name)}),l=m({type:"generic",title:"",prompt:"",files:[],urls:[],youtube_urls:[],raw_text:"",structure:[],slideFormat:"16:9",slideStyle:"corporate",slideMode:"image_only",customStyle:"",numSlides:8}),A=S(()=>[{id:"generic",name:"Empty Notebook",desc:"Standard multi-tab scratchpad.",icon:ie,available:!0},{id:"data_analysis",name:"Data Analysis",desc:"Extract specific information and build knowledge from documents.",icon:W,available:N.value},{id:"book_building",name:"Book Building",desc:"Structure, write, and compile chapters for a book or report.",icon:ue,available:N.value},{id:"slides_making",name:"Slides Making",desc:"Generate slide decks with visuals.",icon:de,available:N.value&&G.value},{id:"benchmarks",name:"Benchmarks",desc:"Test and compare LLMs with input data.",icon:ce,available:N.value}]),M=[{value:"16:9",label:"Widescreen (16:9)",width:1920,height:1080},{value:"4:3",label:"Standard (4:3)",width:1024,height:768},{value:"1:1",label:"Square (1:1)",width:1080,height:1080}],K=[{value:"image_only",label:"Visual (All-Image)",desc:"AI generates full-slide images with embedded text/layout. Best for artistic decks."},{value:"hybrid",label:"Hybrid (Templates)",desc:"AI fills standard layouts (Title, Bullets, Images). Editable and clean."},{value:"text_only",label:"Text Outline",desc:"Simple bullet points and headers. No image generation."}],B=[{value:"corporate",label:"Corporate",prompt:"clean, professional, minimalist, blue and white color scheme, vector flat art"},{value:"creative",label:"Creative",prompt:"colorful, artistic, abstract shapes, vibrant gradients, modern design"},{value:"dark_tech",label:"Dark Tech",prompt:"dark mode, neon accents, futuristic, cyberpunk aesthetic, high contrast"},{value:"hand_drawn",label:"Hand Drawn",prompt:"sketch style, pencil texture, pastel colors, organic lines, playful"},{value:"nature",label:"Nature",prompt:"earth tones, green and brown, natural textures, soft lighting, eco-friendly feel"},{value:"custom",label:"Custom...",prompt:""}];function Q(s){A.value.find(a=>a.id===s).available&&(l.value.type=s,s==="generic"?j():i.value=1)}function X(){F.value.click()}function q(s){l.value.files.push(...Array.from(s.target.files)),s.target.value=""}function D(){w.value.trim()&&(l.value.urls.push(w.value.trim()),w.value="")}function P(){C.value.trim()&&(l.value.youtube_urls.push(C.value.trim()),C.value="")}function J(s){l.value.files.splice(s,1)}function Z(s){l.value.urls.splice(s,1)}function ee(s){l.value.youtube_urls.splice(s,1)}const te=S(()=>{if(l.value.type!=="slides_making")return"";const s=B.find(a=>a.value===l.value.slideStyle);let t=s?s.prompt:"";return(l.value.slideStyle==="custom"||l.value.customStyle&&l.value.slideStyle!=="custom")&&(t&&(t+=", "),t+=l.value.customStyle),t}),le=S(()=>l.value.files.length+l.value.urls.length+l.value.youtube_urls.length+(l.value.raw_text?1:0));async function j(){!l.value.title&&l.value.type!=="generic"?l.value.title=l.value.prompt.slice(0,30)||"New Notebook":l.value.title||(l.value.title="New Notebook"),_.value=!0;try{h.activeNotebook=null;const s={topic:l.value.prompt};if(l.value.type==="slides_making"){const a=M.find(n=>n.value===l.value.slideFormat);s.format=a||M[0],s.style_prompt=te.value,s.slide_mode=l.value.slideMode}const t=await h.createStructuredNotebook({title:l.value.title,type:l.value.type,urls:l.value.urls,youtube_urls:l.value.youtube_urls,raw_text:l.value.raw_text,metadata:s,initialPrompt:l.value.prompt});if(h.activeNotebook=t,l.value.files.length>0&&await Promise.all(l.value.files.map(a=>h.uploadSource(a,!0))),l.value.type!=="generic"&&l.value.prompt){let a="text",n=l.value.prompt;l.value.type==="slides_making"?(a="generate_slides_text",n=`Create a presentation with approximately ${l.value.numSlides||8} slides about: "${l.value.prompt}".`):l.value.type==="data_analysis"?a="analyze_data":l.value.type==="book_building"?a="generate_outline":l.value.type==="benchmarks"&&(a="generate_test_cases"),await h.processWithAi(n,[],a,null)}f.closeModal("notebookWizard"),i.value=0,l.value={type:"generic",title:"",prompt:"",files:[],urls:[],youtube_urls:[],raw_text:"",structure:[],slideFormat:"16:9",slideStyle:"corporate",slideMode:"image_only",customStyle:"",numSlides:8}}catch(s){console.error(s),f.addNotification("Failed to create notebook.","error")}finally{_.value=!1}}return(s,t)=>(o(),I(ge,{"modal-name":"notebookWizard",title:"Create New Notebook","max-width-class":"max-w-4xl"},{body:z(()=>[e("div",we,[e("div",Ce,[e("div",Se,[e("span",{class:v(["font-bold cursor-pointer",i.value>=0?"text-blue-600":"text-gray-400"]),onClick:t[0]||(t[0]=a=>i.value=0)},"Type",2),c($,{class:"w-4 h-4 mx-2 text-gray-400"}),e("span",{class:v(["font-bold cursor-pointer",i.value>=1?"text-blue-600":"text-gray-400"]),onClick:t[1]||(t[1]=a=>i.value=1)},"Details",2),c($,{class:"w-4 h-4 mx-2 text-gray-400"}),e("span",{class:v(["font-bold cursor-pointer",i.value>=2?"text-blue-600":"text-gray-400"]),onClick:t[2]||(t[2]=a=>i.value=2)},"Sources",2)])]),i.value===0?(o(),r("div",Ne,[t[20]||(t[20]=e("p",{class:"text-gray-500 dark:text-gray-400 text-sm text-center mb-6"},"Select a template to get started.",-1)),e("div",Te,[(o(!0),r(x,null,y(A.value,a=>(o(),r("div",{key:a.id,onClick:n=>Q(a.id),class:v(["group relative p-4 border rounded-xl transition-all duration-200",[a.available?"cursor-pointer hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800":"cursor-not-allowed opacity-60 border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-900"]])},[e("div",Ie,[(o(),I(be(a.icon),{class:"w-8 h-8 text-gray-400 group-hover:text-blue-500 transition-colors"})),a.available?b("",!0):(o(),r("span",Ue,"Unavailable"))]),e("h3",$e,p(a.name),1),e("p",Ve,p(a.desc),1)],10,Me))),128))])])):b("",!0),i.value===1?(o(),r("div",Fe,[e("div",Ae,[e("div",Be,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium mb-1"},"Notebook Title",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>l.value.title=a),type:"text",class:"input-field w-full",placeholder:"e.g., Q3 Report"},null,512),[[g,l.value.title]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium mb-1"},"Topic / Goal",-1)),u(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=a=>l.value.prompt=a),class:"input-field w-full h-32 resize-none",placeholder:"Describe what you want to achieve..."},null,512),[[g,l.value.prompt]])])])]),l.value.type==="slides_making"?(o(),r("div",De,[e("h4",Pe,[c(W,{class:"w-4 h-4"}),t[23]||(t[23]=k(" Slide Settings "))]),e("div",je,[e("div",Le,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-2"},"Generation Mode",-1)),e("div",We,[(o(),r(x,null,y(K,a=>e("label",{key:a.value,class:v(["flex items-start p-2 border rounded cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",l.value.slideMode===a.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/10":"border-gray-200 dark:border-gray-700"])},[u(e("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=n=>l.value.slideMode=n),value:a.value,class:"mt-1 text-blue-600 focus:ring-blue-500"},null,8,ze),[[H,l.value.slideMode]]),e("div",He,[e("span",Oe,p(a.label),1),e("span",Re,p(a.desc),1)])],2)),64))])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-2"},"Target Slide Count",-1)),u(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=a=>l.value.numSlides=a),min:"1",max:"50",class:"input-field w-full text-sm",placeholder:"e.g. 10"},null,512),[[g,l.value.numSlides,void 0,{number:!0}]])])]),e("div",Ee,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-2"},"Format",-1)),e("div",Ye,[(o(),r(x,null,y(M,a=>e("label",{key:a.value,class:v(["cursor-pointer border rounded px-3 py-2 text-xs flex items-center gap-2 hover:border-blue-400 transition-colors",l.value.slideFormat===a.value?"bg-blue-50 border-blue-500 text-blue-700":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600"])},[u(e("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=n=>l.value.slideFormat=n),value:a.value,class:"hidden"},null,8,Ge),[[H,l.value.slideFormat]]),k(" "+p(a.label),1)],2)),64))])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-2"},"Visual Style",-1)),u(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>l.value.slideStyle=a),class:"input-field w-full text-sm"},[(o(),r(x,null,y(B,a=>e("option",{key:a.value,value:a.value},p(a.label),9,Ke)),64))],512),[[me,l.value.slideStyle]]),e("div",Qe,[u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>l.value.customStyle=a),type:"text",class:"input-field w-full text-xs",placeholder:"Additional style keywords (e.g. 'purple and gold, energetic')..."},null,512),[[g,l.value.customStyle]])])])])])])):b("",!0)])):b("",!0),i.value===2?(o(),r("div",Xe,[e("div",qe,[t[28]||(t[28]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Add knowledge sources for the AI.",-1)),e("div",Je," Total Sources: "+p(le.value),1)]),e("div",Ze,[e("button",{onClick:t[10]||(t[10]=a=>d.value="web"),class:v(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",d.value==="web"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700"])},"Web & Wiki",2),e("button",{onClick:t[11]||(t[11]=a=>d.value="youtube"),class:v(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",d.value==="youtube"?"border-red-500 text-red-600 dark:text-red-400":"border-transparent text-gray-500 hover:text-gray-700"])},"YouTube",2),e("button",{onClick:t[12]||(t[12]=a=>d.value="files"),class:v(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",d.value==="files"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700"])},"Files",2),e("button",{onClick:t[13]||(t[13]=a=>d.value="text"),class:v(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",d.value==="text"?"border-green-500 text-green-600 dark:text-green-400":"border-transparent text-gray-500 hover:text-gray-700"])},"Raw Text",2)]),e("div",et,[u(e("div",tt,[e("div",lt,[u(e("input",{"onUpdate:modelValue":t[14]||(t[14]=a=>w.value=a),onKeyup:O(D,["enter"]),type:"text",class:"input-field flex-grow text-sm",placeholder:"https://wikipedia.org/wiki/..."},null,544),[[g,w.value]]),e("button",{onClick:D,class:"btn btn-primary px-3"},[c(R,{class:"w-4 h-4"})])]),e("div",at,[(o(!0),r(x,null,y(l.value.urls,(a,n)=>(o(),r("div",{key:n,class:"flex items-center justify-between text-xs bg-gray-100 dark:bg-gray-700 p-2 rounded"},[e("span",st,[c(xe,{class:"w-3 h-3 text-blue-500"}),k(" "+p(a),1)]),e("button",{onClick:L=>Z(n),class:"text-red-500 hover:text-red-700"},[c(U,{class:"w-3 h-3"})],8,ot)]))),128)),l.value.urls.length===0?(o(),r("p",rt,"No URLs added.")):b("",!0)])],512),[[T,d.value==="web"]]),u(e("div",nt,[e("div",it,[u(e("input",{"onUpdate:modelValue":t[15]||(t[15]=a=>C.value=a),onKeyup:O(P,["enter"]),type:"text",class:"input-field flex-grow text-sm",placeholder:"..."},null,544),[[g,C.value]]),e("button",{onClick:P,class:"btn btn-primary px-3 bg-red-600 hover:bg-red-700 border-red-600"},[c(R,{class:"w-4 h-4"})])]),e("div",ut,[(o(!0),r(x,null,y(l.value.youtube_urls,(a,n)=>(o(),r("div",{key:n,class:"flex items-center justify-between text-xs bg-gray-100 dark:bg-gray-700 p-2 rounded"},[e("span",dt,[c(ye,{class:"w-3 h-3 text-red-500"}),k(" "+p(a),1)]),e("button",{onClick:L=>ee(n),class:"text-red-500 hover:text-red-700"},[c(U,{class:"w-3 h-3"})],8,ct)]))),128)),l.value.youtube_urls.length===0?(o(),r("p",pt,"No videos added.")):b("",!0)])],512),[[T,d.value==="youtube"]]),u(e("div",vt,[e("div",{class:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 flex flex-col items-center justify-center text-gray-500 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer",onClick:X},[c(_e,{class:"w-8 h-8 mb-2"}),t[29]||(t[29]=e("span",{class:"text-sm font-medium"},"Click to upload files",-1)),t[30]||(t[30]=e("span",{class:"text-xs text-gray-400"},"PDF, DOCX, PPTX (Docling conversion enabled)",-1)),e("input",{type:"file",ref_key:"fileInput",ref:F,onChange:q,multiple:"",class:"hidden"},null,544)]),e("div",bt,[(o(!0),r(x,null,y(l.value.files,(a,n)=>(o(),r("div",{key:n,class:"flex items-center justify-between text-xs bg-gray-100 dark:bg-gray-700 p-2 rounded"},[e("span",mt,p(a.name),1),e("button",{onClick:L=>J(n),class:"text-red-500 hover:text-red-700"},[c(U,{class:"w-3 h-3"})],8,xt)]))),128))])],512),[[T,d.value==="files"]]),u(e("div",yt,[u(e("textarea",{"onUpdate:modelValue":t[16]||(t[16]=a=>l.value.raw_text=a),class:"input-field w-full h-48 resize-none font-mono text-xs",placeholder:"Paste any raw text context here..."},null,512),[[g,l.value.raw_text]])],512),[[T,d.value==="text"]])])])):b("",!0)])]),footer:z(()=>[e("div",gt,[i.value>0?(o(),r("button",{key:0,onClick:t[17]||(t[17]=a=>i.value--),class:"btn btn-secondary"},"Back")):(o(),r("div",ft)),e("div",kt,[e("button",{onClick:t[18]||(t[18]=a=>pe(f).closeModal("notebookWizard")),class:"btn btn-secondary"},"Cancel"),i.value<2?(o(),r("button",{key:0,onClick:t[19]||(t[19]=a=>i.value++),class:"btn btn-primary"},[t[31]||(t[31]=k(" Next ")),c($,{class:"w-4 h-4 ml-2"})])):(o(),r("button",{key:1,onClick:j,class:"btn btn-primary",disabled:_.value},[_.value?(o(),I(ve,{key:0,class:"w-4 h-4 mr-2 animate-spin"})):b("",!0),k(" "+p(_.value?"Creating...":"Create Notebook"),1)],8,ht))])])]),_:1}))}};export{St as default};
