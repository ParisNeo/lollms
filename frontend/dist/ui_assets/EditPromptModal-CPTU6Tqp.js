import{u as V,N as P,e as x,o as d,b as t,t as C,n as h,a as $,D as N,g as I,aF as D,c as g,m as M,w as S,d as z,K as E,f as w,W as v,h as k,ak as y,aq as F,Q as A}from"./index-BPMLm_gj.js";import{u as B}from"./admin-B6RZjI8U.js";import{_ as R}from"./GenericModal-C7cA7oG9.js";const T={class:"label"},q={class:"mt-1 flex items-center gap-4"},W=["src"],j={class:"space-y-2"},L={__name:"IconUploader",props:{modelValue:{type:String,default:null},label:{type:String,default:"Icon"},size:{type:Number,default:16}},emits:["update:modelValue"],setup(n,{emit:s}){const u=s,p=V(),i=P(null);function c(){var a;(a=i.value)==null||a.click()}function f(a){const r=a.target.files[0];if(!r)return;if(!r.type.startsWith("image/")){p.addNotification("Please select a valid image file.","warning");return}const m=new FileReader;m.onload=l=>{const e=new Image;e.onload=()=>{const o=document.createElement("canvas"),U=o.getContext("2d");o.width=128,o.height=128,U.drawImage(e,0,0,128,128),u("update:modelValue",o.toDataURL("image/png"))},e.src=l.target.result},m.readAsDataURL(r)}function b(){u("update:modelValue",null)}return(a,r)=>(d(),x("div",null,[t("label",T,C(n.label),1),t("div",q,[t("div",{class:h(["flex-shrink-0 bg-gray-100 dark:bg-gray-700 rounded-lg border border-gray-300 dark:border-gray-600 flex items-center justify-center",`h-${n.size} w-${n.size}`])},[n.modelValue?(d(),x("img",{key:0,src:n.modelValue,alt:"Icon preview",class:"h-full w-full object-cover rounded-lg"},null,8,W)):(d(),$(N,{key:1,class:h(["text-gray-400",`h-${n.size/2} w-${n.size/2}`])},null,8,["class"]))],2),t("div",j,[t("input",{type:"file",ref_key:"fileInput",ref:i,onChange:f,accept:"image/*",class:"hidden"},null,544),t("button",{type:"button",onClick:c,class:"btn btn-secondary text-sm"},"Upload Image"),n.modelValue?(d(),x("button",{key:0,type:"button",onClick:b,class:"btn btn-danger-outline text-sm"},"Remove")):I("",!0)])])]))}},H={class:"flex items-start gap-4"},K={class:"flex-grow space-y-4"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Q={class:"p-3 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 text-blue-800 dark:text-blue-200"},G={class:"flex items-center"},Z={__name:"EditPromptModal",setup(n){const s=V(),u=B(),p=D(),i=g(()=>s.modalData("editPrompt")),c=g(()=>{var l;return((l=i.value)==null?void 0:l.isSystemPrompt)||!1}),f=g(()=>{var l,e;return(e=(l=i.value)==null?void 0:l.prompt)==null?void 0:e.id}),b=()=>({name:"",content:"",category:"",author:"",description:"",icon:null}),a=P(b());M(i,l=>{l&&s.isModalOpen("editPrompt")&&(a.value={...b(),...l.prompt||{}})},{immediate:!0,deep:!0});const r=g(()=>{const l=f.value?"Edit":"New",e=c.value?"System":"Personal";return`${l} ${e} Prompt`});async function m(){if(!a.value.name||!a.value.content){s.addNotification("Name and Content are required.","warning");return}try{const{id:l,...e}=a.value;c.value?l?await u.updateSystemPrompt(l,e):await u.createSystemPrompt(e):l?await p.updatePrompt(l,e):await p.createPrompt(e),s.closeModal("editPrompt")}catch{}}return(l,e)=>(d(),$(R,{"modal-name":"editPrompt",title:r.value,"max-width-class":"max-w-4xl"},{body:S(()=>[a.value?(d(),x("form",{key:0,onSubmit:E(m,["prevent"]),class:"space-y-4"},[t("div",H,[w(L,{modelValue:a.value.icon,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.icon=o),"default-icon-component":"IconTicket"},null,8,["modelValue"]),t("div",K,[t("div",O,[t("div",null,[e[7]||(e[7]=t("label",{for:"prompt-name",class:"block text-sm font-medium"},[k("Name "),t("span",{class:"text-red-500"},"*")],-1)),v(t("input",{id:"prompt-name","onUpdate:modelValue":e[1]||(e[1]=o=>a.value.name=o),type:"text",class:"input-field mt-1",required:""},null,512),[[y,a.value.name]])]),t("div",null,[e[8]||(e[8]=t("label",{for:"prompt-category",class:"block text-sm font-medium"},"Category",-1)),v(t("input",{id:"prompt-category","onUpdate:modelValue":e[2]||(e[2]=o=>a.value.category=o),type:"text",class:"input-field mt-1",placeholder:"e.g., Writing, Coding"},null,512),[[y,a.value.category]])])]),t("div",null,[e[9]||(e[9]=t("label",{for:"prompt-author",class:"block text-sm font-medium"},"Author",-1)),v(t("input",{id:"prompt-author","onUpdate:modelValue":e[3]||(e[3]=o=>a.value.author=o),type:"text",class:"input-field mt-1"},null,512),[[y,a.value.author]])])])]),t("div",null,[e[10]||(e[10]=t("label",{for:"prompt-description",class:"block text-sm font-medium"},"Description",-1)),v(t("textarea",{id:"prompt-description","onUpdate:modelValue":e[4]||(e[4]=o=>a.value.description=o),rows:"2",class:"input-field mt-1"},null,512),[[y,a.value.description]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"prompt-content",class:"block text-sm font-medium"},[k("Content "),t("span",{class:"text-red-500"},"*")],-1)),w(F,{modelValue:a.value.content,"onUpdate:modelValue":e[5]||(e[5]=o=>a.value.content=o),class:"mt-1 h-64"},null,8,["modelValue"])]),t("div",Q,[t("div",G,[w(A,{class:"h-5 w-5 mr-2"}),e[12]||(e[12]=t("h4",{class:"font-bold"},"Placeholder Help",-1))]),e[13]||(e[13]=t("div",{class:"mt-2 text-xs space-y-1"},[t("p",null,[t("code",{class:"font-mono bg-blue-200 dark:bg-blue-800/50 px-1 rounded"},"@<name>@"),k(": Simple text replacement.")]),t("p",null,"For advanced options with a user-friendly form:"),t("pre",{class:"whitespace-pre-wrap font-mono text-xs bg-blue-100 dark:bg-blue-900/40 p-2 rounded"},`@<name>@
title (optional): Display Title
type (optional): str | text | int | float | bool
options (optional, only use if you want to fix the value to a restricted subset): comma, separated, list
default (optional): default value
help (optional): A helpful tip for the user.
@</name>@`)],-1))])],32)):I("",!0)]),footer:S(()=>[t("button",{onClick:e[6]||(e[6]=o=>z(s).closeModal("editPrompt")),class:"btn btn-secondary"},"Cancel"),t("button",{onClick:m,class:"btn btn-primary"},C(f.value?"Save Changes":"Create"),1)]),_:1},8,["title"]))}};export{Z as default};
