import{u as C,a as M,r,c as x,b as A,d,e as h,f as e,k as P,l as V,m as S,g as i,h as w,i as p,v,t as U,j as q}from"./index-Dja0BxAz.js";import{_ as B}from"./GenericModal-C0Arp-Jb.js";const L={class:"flex justify-center mb-6"},N=["src"],j=["disabled"],D=["disabled"],E=["disabled"],R={key:0,class:"text-xs text-red-500 mt-1"},z=["disabled"],T={key:0,class:"text-xs text-red-500 mt-1"},H={key:0,class:"text-red-600 text-sm text-center p-2 bg-red-100 dark:bg-red-900/50 rounded-md",role:"alert"},W={class:"pt-2"},$=["disabled"],F={key:0,class:"flex items-center"},G={key:1},O={__name:"RegisterModal",setup(I){const y=C(),u=M(),m=r(""),c=r(""),l=r(""),n=r(""),a=r(!1),o=r(""),g=x(()=>l.value===n.value),b=x(()=>l.value.length>=8),k=()=>{u.closeModal("register"),u.openModal("login")},_=async()=>{var f,s;if(o.value="",!m.value||!c.value||!l.value||!n.value){o.value="All fields are required.";return}if(!b.value){o.value="Password must be at least 8 characters long.";return}if(!g.value){o.value="Passwords do not match.";return}a.value=!0;try{await y.register({username:m.value,email:c.value,password:l.value}),u.closeModal("register"),u.openModal("login")}catch(t){o.value=((s=(f=t.response)==null?void 0:f.data)==null?void 0:s.detail)||"An unexpected error occurred during registration."}finally{a.value=!1}};return(f,s)=>(d(),A(B,{modalName:"register",title:"Create an Account",maxWidthClass:"max-w-md"},{body:h(()=>[e("div",L,[e("img",{src:V(S),alt:"Application Logo",class:"h-16 w-auto"},null,8,N)]),e("form",{onSubmit:q(_,["prevent"]),class:"space-y-4"},[e("div",null,[s[4]||(s[4]=e("label",{for:"reg-username",class:"block text-sm font-medium"},"Username",-1)),p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>m.value=t),type:"text",id:"reg-username",required:"",disabled:a.value,class:"input-field mt-1 w-full",placeholder:"Choose a username",autocomplete:"username"},null,8,j),[[v,m.value]])]),e("div",null,[s[5]||(s[5]=e("label",{for:"reg-email",class:"block text-sm font-medium"},"Email Address",-1)),p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>c.value=t),type:"email",id:"reg-email",required:"",disabled:a.value,class:"input-field mt-1 w-full",placeholder:"your@email.com",autocomplete:"email"},null,8,D),[[v,c.value]])]),e("div",null,[s[6]||(s[6]=e("label",{for:"reg-password",class:"block text-sm font-medium"},"Password",-1)),p(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>l.value=t),type:"password",id:"reg-password",required:"",disabled:a.value,class:"input-field mt-1 w-full",placeholder:"Create a password (min. 8 characters)",autocomplete:"new-password"},null,8,E),[[v,l.value]]),l.value&&!b.value?(d(),i("p",R," Password must be at least 8 characters. ")):w("",!0)]),e("div",null,[s[7]||(s[7]=e("label",{for:"reg-confirm-password",class:"block text-sm font-medium"},"Confirm Password",-1)),p(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>n.value=t),type:"password",id:"reg-confirm-password",required:"",disabled:a.value,class:"input-field mt-1 w-full",placeholder:"Confirm your password",autocomplete:"new-password"},null,8,z),[[v,n.value]]),n.value&&!g.value?(d(),i("p",T," Passwords do not match. ")):w("",!0)]),o.value?(d(),i("div",H,U(o.value),1)):w("",!0),e("div",W,[e("button",{type:"submit",class:"btn btn-primary w-full flex justify-center items-center",disabled:a.value},[a.value?(d(),i("span",F,s[8]||(s[8]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",null,"Creating Account...",-1)]))):(d(),i("span",G,"Register"))],8,$)])],32)]),footer:h(()=>[e("div",{class:"text-center text-sm"},[e("p",null,[s[9]||(s[9]=P(" Already have an account? ")),e("button",{onClick:k,class:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300"}," Log in here ")])])]),_:1}))}};export{O as default};
