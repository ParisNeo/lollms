import{c as r,o as n,a as t,n as h,_ as ve,aU as Fe,ay as He,u as Xe,Y as qe,aS as Ze,R as Je,az as R,r as g,b as f,S as de,d as Ye,e as Ke,f as D,J as S,O as Qe,t as p,A as u,z as ce,g as i,aN as et,aL as ue,X as tt,aM as pe,ar as at,H as st,h as x,M as L,ae as Y,aV as ot,U as K,p as w,m as me,K as W,aW as G,F as _,j as I,w as lt,T as nt,a6 as it,Q as rt,aB as dt,G as ct,V as ge,k as be,E as ut,I as pt}from"./index-D2Id9a0s.js";const mt={__name:"IconChevronUp",props:{class:{type:String,default:"w-6 h-6"}},setup(O){return(d,C)=>(n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",class:h(O.class),fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},C[0]||(C[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"},null,-1)]),2))}},gt={},bt={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function vt(O,d){return n(),r("svg",bt,d[0]||(d[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.776 48.776 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"},null,-1)]))}const ht=ve(gt,[["render",vt]]),ft={class:"flex items-center gap-2 sm:gap-3 pointer-events-auto bg-gray-100 dark:bg-gray-800/80 px-3 py-1.5 rounded-lg border dark:border-gray-700/50 backdrop-blur-sm max-w-[200px] sm:max-w-md transition-all"},xt={class:"flex items-center gap-2 min-w-0"},wt={class:"font-bold text-gray-800 dark:text-gray-200 text-xs uppercase tracking-widest truncate"},yt={class:"text-[10px] font-mono text-gray-400 bg-gray-200 dark:bg-gray-700 px-1.5 rounded-md hidden sm:inline-block"},kt={class:"flex items-center gap-1 sm:gap-2 pointer-events-auto"},_t={key:0,class:"flex items-center gap-1 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded-lg border border-blue-100 dark:border-blue-800 mr-2 animate-in fade-in slide-in-from-right-4"},Ct={class:"text-[10px] font-black text-blue-700 dark:text-blue-300 uppercase mr-2 hidden sm:inline"},St={key:1,class:"flex items-center gap-1 mr-2"},It={class:"btn-icon p-1.5 text-gray-500 hover:text-blue-600 cursor-pointer",title:"Upload Images"},jt=["disabled"],Mt={class:"hidden sm:inline"},At={key:0,class:"absolute inset-0 bg-blue-500/20 border-4 border-dashed border-blue-500 rounded-lg z-50 flex items-center justify-center m-4 pointer-events-none"},$t={class:"flex-grow min-h-0 flex relative overflow-hidden"},Dt={class:"flex-grow p-4 space-y-6 overflow-y-auto custom-scrollbar"},Tt={class:"flex items-center justify-between lg:hidden mb-4 border-b dark:border-gray-700 pb-2"},Pt={class:"space-y-4"},Vt={class:"flex justify-between items-center mb-1"},zt=["disabled"],Et={class:"relative"},Nt=["disabled"],Ut={key:0,class:"absolute inset-0 flex items-center justify-center bg-white/40 dark:bg-black/40 backdrop-blur-sm rounded"},Rt=["onClick"],Lt={class:"text-[10px] font-black text-gray-400 uppercase tracking-widest"},Wt={class:"grid grid-cols-3 gap-1.5 animate-in fade-in slide-in-from-top-1"},Gt=["onClick","title"],Ot={class:"text-lg mb-0.5"},Bt={class:"text-[8px] font-bold truncate w-full text-center leading-tight uppercase"},Ft={class:"flex justify-between items-center mb-1"},Ht=["disabled"],Xt={class:"pt-4 border-t dark:border-gray-700 space-y-4"},qt={class:"space-y-2"},Zt={class:"grid grid-cols-3 sm:flex sm:flex-wrap gap-2"},Jt=["onClick"],Yt={class:"text-[10px] font-black uppercase"},Kt={class:"grid grid-cols-2 gap-4"},Qt={class:"flex-grow flex flex-col min-w-0 h-full relative"},ea={class:"flex-grow overflow-y-auto p-4 custom-scrollbar bg-gray-50 dark:bg-gray-900"},ta={key:0,class:"sticky top-0 z-20 mb-6 bg-white/90 dark:bg-gray-800/90 backdrop-blur-md rounded-2xl border border-blue-200 dark:border-blue-900 shadow-xl overflow-hidden"},aa={class:"flex justify-between items-center px-4 py-2 border-b border-gray-100 dark:border-gray-700/50"},sa={class:"text-[10px] font-black uppercase tracking-widest text-blue-600 dark:text-blue-400 flex items-center gap-2"},oa={class:"flex gap-3 overflow-x-auto p-3 custom-scrollbar"},la=["onClick"],na={class:"absolute inset-0 bg-white/60 dark:bg-black/60 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity backdrop-blur-sm"},ia={key:0,class:"mb-8 grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 animate-in fade-in zoom-in-95"},ra={class:"text-[10px] font-black text-blue-600 uppercase"},da={class:"absolute bottom-0 left-0 right-0 h-1.5 bg-gray-100 dark:bg-gray-700"},ca={key:1,class:"h-64 flex flex-col items-center justify-center opacity-40"},ua={key:2,class:"h-full flex flex-col items-center justify-center text-gray-400 opacity-40"},pa={key:3,class:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-6 pb-20"},ma=["onClick"],ga={class:"text-white text-[10px] font-medium line-clamp-2 drop-shadow-lg mb-2 opacity-90"},ba={class:"flex items-center justify-between pt-2 border-t border-white/20"},va={class:"text-[9px] text-gray-400 font-black uppercase tracking-tighter"},ha={class:"flex gap-1.5"},fa=["onClick"],xa=["onClick"],wa=["onClick"],ya=["onClick"],ka={__name:"ImageStudioView",setup(O){const d=Fe(),C=He(),y=Xe(),Q=qe(),ee=Ze(),te=Je(),ae=rt(),{images:b,isLoading:he,isGenerating:B,prompt:m,negativePrompt:v,imageSize:T,nImages:P,seed:j,generationParams:fe,selectedAlbumId:se,albums:F}=R(d),{user:xe}=R(Q),{imageGenerationTasks:we,imageGenerationTasksCount:H}=R(te),{currentModelVisionSupport:_a}=R(ee);g(!0);const V=g("None"),k=g(!1),M=g(384),X=g(!1),z=g({"Art Style":!1,"Artist Style":!0,Enhancements:!0,Technical:!0}),ye=f(()=>({width:window.innerWidth>=1024?`${M.value}px`:void 0,minWidth:window.innerWidth>=1024?"320px":void 0})),ke=f(()=>{if(se.value){const e=F.value.find(s=>s.id===se.value);return e?e.name:"Unknown Album"}return"All Images"}),c=g([]),E=f(()=>c.value.length>0),_e=f(()=>b.value.filter(e=>c.value.includes(e.id))),oe=f({get:()=>b.value.length>0&&c.value.length===b.value.length,set:e=>{c.value=e?b.value.map(s=>s.id):[]}});function Ce(e){X.value=!0;const s=e.clientX,a=M.value,o=re=>{X.value&&(M.value=Math.max(320,Math.min(a+(re.clientX-s),700)))},l=()=>{X.value=!1,localStorage.setItem("lollms_image_studio_sidebar_width",M.value),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",l)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",l)}const Se={"Art Style":[{name:"Photo",emoji:"ðŸ“¸",prompt:"photorealistic, RAW photo, 8k uhd, high detailed",negative:"cartoon, anime, illustration, blurred"},{name:"Cinematic",emoji:"ðŸŽ¬",prompt:"cinematic lighting, dramatic, epic scale, highly detailed",negative:"grainy, simple, low res"},{name:"Anime",emoji:"ðŸŽŒ",prompt:"anime style, vibrant colors, cell shaded, high quality 2d",negative:"3d, realistic, blurry"},{name:"Digital Art",emoji:"ðŸŽ¨",prompt:"digital art, sharp focus, intricate detail, artstation style",negative:"hand drawn, blurry"},{name:"Oil Paint",emoji:"ðŸ–¼ï¸",prompt:"oil painting, thick brushstrokes, textured canvas, classical art",negative:"photography, smooth, plastic"},{name:"Watercolor",emoji:"ðŸ–Œï¸",prompt:"watercolor painting, soft edges, paper texture, elegant",negative:"dark, heavy, photography"},{name:"Cyberpunk",emoji:"ðŸŒƒ",prompt:"cyberpunk aesthetic, neon lights, futuristic city, rainy night",negative:"nature, pastoral"},{name:"Comic",emoji:"ðŸ—¯ï¸",prompt:"comic book style, bold lines, halftone dots, vibrant",negative:"photorealistic"}],"Artist Style":[{name:"Van Gogh",emoji:"ðŸŒ»",prompt:"in the style of Vincent Van Gogh, post-impressionism, swirling colors",negative:""},{name:"Dali",emoji:"â³",prompt:"in the style of Salvador Dali, surrealism, melting objects, dreamlike",negative:""},{name:"Ghibli",emoji:"ðŸŒ³",prompt:"Studio Ghibli style, Hayao Miyazaki, lush environments, whimsical",negative:""},{name:"Picasso",emoji:"ðŸ§Š",prompt:"cubism style, Pablo Picasso, abstract geometry, fragmented",negative:""},{name:"Shinkai",emoji:"âœ¨",prompt:"Makoto Shinkai style, breathtaking sky, detailed light, emotional",negative:""}],Enhancements:[{name:"Hyperreal",emoji:"ðŸ’Ž",prompt:"hyperrealistic, insanely detailed, micro texture, masterpiece",negative:"ugly, deformed"},{name:"HDR",emoji:"ðŸŒˆ",prompt:"high dynamic range, rich colors, deep contrast",negative:"flat, dull"},{name:"Retro 8-bit",emoji:"ðŸ•¹ï¸",prompt:"8-bit style, pixel art, low resolution game aesthetic",negative:"high definition, smooth"},{name:"Macro",emoji:"ðŸ”",prompt:"macro photography, shallow depth of field, extreme close-up",negative:"wide angle"}],Thematic:[{name:"Horror",emoji:"ðŸŽƒ",prompt:"horror aesthetic, dark, eerie, macabre, halloween theme",negative:"bright, cheerful"},{name:"Minecraft",emoji:"ðŸ§±",prompt:"minecraft style, blocky, voxel art, cubic shapes",negative:"curved lines"},{name:"Steampunk",emoji:"âš™ï¸",prompt:"steampunk aesthetic, copper, brass, Victorian industrial",negative:"modern"}]},Ie=[{name:"1:1",value:"1024x1024",style:{width:"16px",height:"16px"}},{name:"16:9",value:"1344x768",style:{width:"22px",height:"12px"}},{name:"9:16",value:"768x1344",style:{width:"12px",height:"22px"}},{name:"4:3",value:"1152x896",style:{width:"20px",height:"15px"}},{name:"3:2",value:"1216x832",style:{width:"21px",height:"14px"}}],A=g(!1),q=g(!1),Z=f(()=>A.value||q.value),N=g(!1),J=f(()=>{var e;return(e=xe.value)==null?void 0:e.tti_binding_model_name});f(()=>{const e=C.availableTtiModels.find(a=>a.id===J.value);return e!=null&&e.binding_params?(E.value?e.binding_params.edit_parameters||[]:e.binding_params.generation_parameters||[]).filter(a=>!["prompt","negative_prompt","image","mask","width","height","n","seed","size"].includes(a.name)):[]});function je(e){V.value===e.name?V.value="None":(V.value=e.name,e.name!=="None"&&(m.value=m.value.trim()?`${m.value}, ${e.prompt}`:e.prompt,e.negative&&(v.value=v.value.trim()?`${v.value}, ${e.negative}`:e.negative)))}de(H,(e,s)=>{s>0&&e===0&&setTimeout(()=>d.fetchImages(),1e3)}),Ye(()=>{const e=localStorage.getItem("lollms_image_studio_sidebar_width");e&&(M.value=parseInt(e,10)),d.fetchImages(),C.availableTtiModels.length===0&&C.fetchAvailableTtiModels(),window.addEventListener("paste",ie)}),Ke(()=>{window.removeEventListener("paste",ie)});function le(e){const s=c.value.indexOf(e);s>-1?c.value.splice(s,1):c.value.push(e)}function $(e){return c.value.includes(e)}async function Me(){if(!m.value.trim()||!J.value)return;k.value=!1;const e={prompt:m.value,negative_prompt:v.value,model:J.value,seed:j.value,...fe.value};if(E.value){const[s,a]=T.value.split("x").map(Number);await d.editImage({...e,image_ids:c.value,width:s,height:a})}else await d.generateImage({...e,size:T.value,n:P.value})}async function Ae(e,s={}){var o;if(e!=="negative_prompt"&&!m.value.trim())return;(e==="prompt"||e==="both")&&(A.value=!0),(e==="negative_prompt"||e==="both")&&(q.value=!0);const a={prompt:m.value,negative_prompt:v.value,target:e,model:(o=Q.user)==null?void 0:o.lollms_model_name,instructions:s.instructions||"",mode:s.mode||"description"};try{const l=await d.enhanceImagePrompt(a);l!=null&&l.id?$e(l.id,e):U(e)}catch{U(e)}}function $e(e,s){const a=de(()=>te.tasks.find(o=>o.id===e),o=>{if(o)if(o.status==="completed"){let l=typeof o.result=="string"?JSON.parse(o.result):o.result;l&&(l.prompt&&(d.prompt=l.prompt),l.negative_prompt&&(d.negativePrompt=l.negative_prompt)),U(s),a()}else["failed","cancelled"].includes(o.status)&&(U(s),a())},{deep:!0,immediate:!0})}function U(e){(e==="prompt"||e==="both")&&(A.value=!1),(e==="negative_prompt"||e==="both")&&(q.value=!1)}function ne(e){y.openModal("enhancePrompt",{onConfirm:s=>Ae(e,s)})}function De(){ae.push("/image-studio/edit/new")}function Te(e){m.value=e.prompt,v.value=e.negative_prompt,j.value=e.seed}function Pe(e){ae.push(`/image-studio/edit/${e.id}`)}function Ve(e,s){y.openImageViewer({imageList:b.value.map(a=>({...a,src:`/api/image-studio/${a.id}/file`})),startIndex:s})}async function ze(e){e.target.files.length&&await d.uploadImages(Array.from(e.target.files))}async function Ee(){await y.showConfirmation({title:"Delete Images?"})&&(await Promise.all(c.value.map(e=>d.deleteImage(e))),c.value=[])}async function Ne(){const{confirmed:e,value:s}=await y.showConfirmation({title:"Move to Discussion",inputType:"select",inputOptions:ee.sortedDiscussions.map(a=>({text:a.title,value:a.id}))});e&&s&&(await Promise.all(c.value.map(a=>d.moveImageToDiscussion(a,s))),c.value=[])}async function Ue(){const{confirmed:e,value:s}=await y.showConfirmation({title:"Move to Album",inputType:"select",inputOptions:[{text:"Ungrouped",value:""},...F.value.map(a=>({text:a.name,value:a.id}))]});if(e){const a=s===""?null:s;await Promise.all(c.value.map(o=>d.moveImageToAlbum(o,a))),c.value=[]}}async function Re(e){const{confirmed:s,value:a}=await y.showConfirmation({title:"Move to Album",inputType:"select",inputOptions:[{text:"Ungrouped",value:""},...F.value.map(o=>({text:o.name,value:o.id}))]});if(s){const o=a===""?null:a;await d.moveImageToAlbum(e,o)}}function Le(e){e.preventDefault(),N.value=!0}function We(e){e.currentTarget.contains(e.relatedTarget)||(N.value=!1)}async function Ge(e){e.preventDefault(),N.value=!1;const s=Array.from(e.dataTransfer.files).filter(a=>a.type.startsWith("image/"));s.length&&await d.uploadImages(s)}async function ie(e){const s=(e.clipboardData||window.clipboardData).items,a=[];for(const o of s)if(o.kind==="file"&&o.type.startsWith("image/")){const l=o.getAsFile();l&&a.push(new File([l],`pasted_${Date.now()}.png`,{type:l.type}))}a.length&&(e.preventDefault(),await d.uploadImages(a))}function Oe(){y.openModal("cameraCapture")}function Be(){d.fetchImages()}return(e,s)=>(n(),r(_,null,[(n(),D(ce,{to:"#global-header-title-target"},[t("div",ft,[t("div",xt,[S(t("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=a=>oe.value=a),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer flex-shrink-0",title:"Select All"},null,512),[[Qe,oe.value]]),t("h2",wt,p(ke.value),1),t("span",yt,p(u(b).length),1)])])])),(n(),D(ce,{to:"#global-header-actions-target"},[t("div",kt,[E.value?(n(),r("div",_t,[t("span",Ct,p(c.value.length)+" Selected",1),t("button",{onClick:Ne,class:"btn-icon p-1.5 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-800/50",title:"Send to Chat"},[i(et,{class:"w-4 h-4"})]),t("button",{onClick:Ue,class:"btn-icon p-1.5 text-purple-600 hover:bg-purple-100 dark:hover:bg-purple-800/50",title:"Move to Album"},[i(ue,{class:"w-4 h-4"})]),t("button",{onClick:Ee,class:"btn-icon p-1.5 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/50",title:"Delete Selected"},[i(tt,{class:"w-4 h-4"})]),s[11]||(s[11]=t("div",{class:"h-4 w-px bg-blue-200 dark:bg-blue-800 mx-1"},null,-1))])):(n(),r("div",St,[t("button",{onClick:Be,class:"btn-icon p-1.5 text-gray-500 hover:text-blue-600",title:"Refresh"},[i(pe,{class:"w-5 h-5"})]),t("label",It,[i(at,{class:"w-5 h-5"}),t("input",{type:"file",onChange:ze,class:"hidden",accept:"image/*",multiple:""},null,32)]),t("button",{onClick:Oe,class:"btn-icon p-1.5 text-gray-500 hover:text-blue-600",title:"Camera"},[i(ht,{class:"w-5 h-5"})]),t("button",{onClick:De,class:"btn-icon p-1.5 text-gray-500 hover:text-blue-600",title:"New Canvas"},[i(st,{class:"w-5 h-5"})])])),t("button",{onClick:Me,class:"btn btn-primary whitespace-nowrap shadow-md",disabled:u(B)||Z.value},[u(B)?(n(),D(L,{key:0,class:"w-5 h-5 mr-1 sm:mr-2 animate-spin"})):x("",!0),t("span",Mt,p(E.value?"Apply Edit":"Generate"),1),u(B)?x("",!0):(n(),D(Y,{key:1,class:"w-5 h-5 sm:hidden"}))],8,jt),t("button",{onClick:s[1]||(s[1]=a=>k.value=!k.value),class:"lg:hidden btn btn-secondary p-2 ml-1",title:"Settings"},[i(ot,{class:"w-5 h-5"})])])])),t("div",{class:"h-full flex flex-col bg-gray-50 dark:bg-gray-900 overflow-hidden relative",onDragover:w(Le,["prevent"]),onDragleave:w(We,["prevent"]),onDrop:w(Ge,["prevent"])},[N.value?(n(),r("div",At,s[12]||(s[12]=[t("p",{class:"text-xl sm:text-2xl font-bold text-blue-600 text-center"},"Drop images to upload",-1)]))):x("",!0),t("div",$t,[t("aside",{class:h(["absolute inset-y-0 left-0 z-30 bg-white dark:bg-gray-800 border-r dark:border-gray-700 transform transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 flex flex-col flex-shrink-0 shadow-lg",k.value?"translate-x-0":"-translate-x-full"]),style:K(ye.value)},[t("div",{onMousedown:w(Ce,["prevent"]),class:"hidden lg:block absolute top-0 right-0 bottom-0 w-1.5 cursor-col-resize z-50 hover:bg-blue-500/50 transition-colors"},null,32),t("div",Dt,[t("div",Tt,[s[13]||(s[13]=t("span",{class:"font-black uppercase tracking-widest text-xs text-gray-500"},"Studio Tools",-1)),t("button",{onClick:s[2]||(s[2]=a=>k.value=!1),class:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"},[i(me,{class:"w-6 h-6"})])]),t("div",Pt,[t("div",null,[t("div",Vt,[s[14]||(s[14]=t("label",{for:"prompt",class:"text-[10px] font-black uppercase text-gray-400"},"Positive Prompt",-1)),t("button",{onClick:s[3]||(s[3]=a=>ne("prompt")),class:"text-blue-500 hover:text-blue-600 p-1 rounded",disabled:Z.value,title:"Enhance Prompt"},[i(Y,{class:"w-4 h-4"})],8,zt)]),t("div",Et,[S(t("textarea",{id:"prompt","onUpdate:modelValue":s[4]||(s[4]=a=>G(m)?m.value=a:null),rows:"4",class:"input-field w-full resize-none !text-sm",disabled:A.value,placeholder:"What do you want to see?"},null,8,Nt),[[W,u(m)]]),A.value?(n(),r("div",Ut,[i(L,{class:"w-6 h-6 text-blue-500 animate-spin"})])):x("",!0)])]),(n(),r(_,null,I(Se,(a,o)=>t("div",{key:o,class:"space-y-2 border-t dark:border-gray-700 pt-3"},[t("div",{class:"flex items-center justify-between cursor-pointer group",onClick:l=>z.value[o]=!z.value[o]},[t("span",Lt,p(o),1),i(mt,{class:h(["w-3 h-3 text-gray-400 transition-transform",{"rotate-180":z.value[o]}])},null,8,["class"])],8,Rt),S(t("div",Wt,[(n(!0),r(_,null,I(a,l=>(n(),r("button",{key:l.name,onClick:re=>je(l),class:h(["flex flex-col items-center p-1.5 rounded-lg border dark:border-gray-700 transition-all hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20",V.value===l.name?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 ring-1 ring-blue-500":"bg-gray-50 dark:bg-gray-900/30"]),title:l.name},[t("span",Ot,p(l.emoji),1),t("span",Bt,p(l.name),1)],10,Gt))),128))],512),[[dt,!z.value[o]]])])),64)),t("div",null,[t("div",Ft,[s[15]||(s[15]=t("label",{for:"negative-prompt",class:"text-[10px] font-black uppercase text-gray-400"},"Negative Prompt",-1)),t("button",{onClick:s[5]||(s[5]=a=>ne("negative_prompt")),class:"text-red-500 hover:text-red-600 p-1",disabled:Z.value,title:"Enhance Negative Prompt"},[i(Y,{class:"w-4 h-4"})],8,Ht)]),S(t("textarea",{id:"negative-prompt","onUpdate:modelValue":s[6]||(s[6]=a=>G(v)?v.value=a:null),rows:"2",class:"input-field w-full resize-none !text-xs opacity-80",placeholder:"Avoid..."},null,512),[[W,u(v)]])])]),t("div",Xt,[t("div",qt,[s[16]||(s[16]=t("label",{class:"text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Aspect Ratio",-1)),t("div",Zt,[(n(),r(_,null,I(Ie,a=>t("button",{key:a.name,onClick:o=>T.value=a.value,class:h(["p-2 rounded-xl border dark:border-gray-700 flex flex-col items-center transition-all hover:bg-gray-100 dark:hover:bg-gray-700 flex-1 min-w-[60px]",u(T)===a.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"bg-gray-50 dark:bg-gray-900/30 text-gray-500"])},[t("div",{class:"border-2 border-current rounded mb-1",style:K(a.style)},null,4),t("span",Yt,p(a.name),1)],10,Jt)),64))])]),t("div",Kt,[t("div",null,[s[17]||(s[17]=t("label",{class:"label text-[10px] font-bold text-gray-400 uppercase"},"Count",-1)),S(t("input",{type:"number","onUpdate:modelValue":s[7]||(s[7]=a=>G(P)?P.value=a:null),min:"1",max:"10",class:"input-field mt-1 !text-xs"},null,512),[[W,u(P),void 0,{number:!0}]])]),t("div",null,[s[18]||(s[18]=t("label",{class:"label text-[10px] font-bold text-gray-400 uppercase"},"Seed",-1)),S(t("input",{"onUpdate:modelValue":s[8]||(s[8]=a=>G(j)?j.value=a:null),type:"number",class:"input-field mt-1 !text-xs font-mono",placeholder:"-1"},null,512),[[W,u(j),void 0,{number:!0}]])])])])])],6),k.value?(n(),r("div",{key:0,onClick:s[9]||(s[9]=a=>k.value=!1),class:"absolute inset-0 bg-black/40 z-20 lg:hidden backdrop-blur-sm"})):x("",!0),t("main",Qt,[t("div",ea,[i(nt,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 -translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-4"},{default:lt(()=>[c.value.length>0?(n(),r("div",ta,[t("div",aa,[t("h3",sa,[i(ge,{class:"w-4 h-4"}),ct(" Selected Items ("+p(c.value.length)+") ",1)]),t("button",{onClick:s[10]||(s[10]=a=>c.value=[]),class:"text-[10px] font-bold text-red-500 hover:text-red-600 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded transition-colors uppercase"}," Clear Selection ")]),t("div",oa,[(n(!0),r(_,null,I(_e.value,a=>(n(),r("div",{key:"sel-"+a.id,onClick:o=>le(a.id),class:"relative w-20 h-20 flex-shrink-0 group cursor-pointer border-2 border-blue-500 rounded-xl overflow-hidden shadow-sm hover:scale-105 transition-transform",title:"Click to Deselect"},[i(be,{src:`/api/image-studio/${a.id}/file`,class:"w-full h-full object-cover"},null,8,["src"]),t("div",na,[i(me,{class:"w-6 h-6 text-gray-800 dark:text-white"})])],8,la))),128))])])):x("",!0)]),_:1}),u(H)>0?(n(),r("div",ia,[(n(!0),r(_,null,I(u(we),a=>(n(),r("div",{key:a.id,class:"relative aspect-square rounded-[2rem] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm flex flex-col items-center justify-center p-6 overflow-hidden"},[s[19]||(s[19]=t("div",{class:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-purple-500/5 animate-pulse"},null,-1)),i(L,{class:"w-8 h-8 text-blue-500 mb-4 animate-spin"}),t("p",ra,p(a.progress)+"% Complete",1),t("div",da,[t("div",{class:"h-full bg-gradient-to-r from-blue-500 to-indigo-600",style:K({width:a.progress+"%"})},null,4)])]))),128))])):x("",!0),u(he)&&u(b).length===0?(n(),r("div",ca,[i(L,{class:"w-12 h-12 mb-4 text-blue-500 animate-spin"}),s[20]||(s[20]=t("p",{class:"text-xs font-black uppercase tracking-widest"},"Gathering images...",-1))])):u(b).length===0&&u(H)===0?(n(),r("div",ua,[i(it,{class:"w-20 h-20 mb-6"}),s[21]||(s[21]=t("p",{class:"text-xl font-black uppercase tracking-widest"},"No Creations Yet",-1))])):(n(),r("div",pa,[(n(!0),r(_,null,I(u(b),(a,o)=>(n(),r("div",{key:a.id,onClick:l=>le(a.id),class:h(["relative aspect-square rounded-[1.5rem] overflow-hidden group cursor-pointer border-2 transition-all duration-300 bg-gray-200 dark:bg-gray-800",$(a.id)?"border-blue-500 ring-4 ring-blue-500/10 scale-[0.98]":"border-transparent hover:border-gray-300 dark:hover:border-gray-700 hover:shadow-xl"])},[i(be,{src:`/api/image-studio/${a.id}/file`,class:"w-full h-full object-cover transition-transform duration-700 sm:group-hover:scale-110"},null,8,["src"]),t("div",{class:h(["absolute top-2 left-2 z-10 transition-opacity duration-200",$(a.id)?"opacity-100":"opacity-0 group-hover:opacity-100"])},[t("div",{class:h(["w-5 h-5 rounded-full border border-gray-300 bg-white flex items-center justify-center shadow-sm",{"bg-blue-500 border-blue-500":$(a.id)}])},[$(a.id)?(n(),D(ge,{key:0,class:"w-3.5 h-3.5 text-white"})):x("",!0)],2)],2),t("div",{class:h(["absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent flex flex-col justify-end p-3 transition-opacity duration-300 lg:opacity-0 lg:group-hover:opacity-100",{"!opacity-100":$(a.id)}])},[t("p",ga,p(a.prompt||"No prompt"),1),t("div",ba,[t("span",va,p(a.width)+"x"+p(a.height),1),t("div",ha,[t("button",{onClick:w(l=>Re(a.id),["stop"]),class:"p-2 bg-white/10 hover:bg-yellow-500 rounded-lg text-white backdrop-blur-md transition-all active:scale-90",title:"Move to Album"},[i(ue,{class:"w-4 h-4"})],8,fa),t("button",{onClick:w(l=>Te(a),["stop"]),class:"p-2 bg-white/10 hover:bg-blue-500 rounded-lg text-white backdrop-blur-md transition-all active:scale-90"},[i(pe,{class:"w-4 h-4"})],8,xa),t("button",{onClick:w(l=>Pe(a),["stop"]),class:"p-2 bg-white/10 hover:bg-purple-500 rounded-lg text-white backdrop-blur-md transition-all active:scale-90"},[i(ut,{class:"w-4 h-4"})],8,wa),t("button",{onClick:w(l=>Ve(a,o),["stop"]),class:"p-2 bg-white/10 hover:bg-white/30 rounded-lg text-white backdrop-blur-md transition-all active:scale-90"},[i(pt,{class:"w-4 h-4"})],8,ya)])])],2)],10,ma))),128))]))])])])],32)],64))}},Sa=ve(ka,[["__scopeId","data-v-c71cd9fe"]]);export{Sa as default};
