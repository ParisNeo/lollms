const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["ui_assets/DataStoreGraphManager-BUtjdCXW.js","ui_assets/index-DBRQkGj9.js","ui_assets/index-CPPNo4ww.css","ui_assets/IconPlayCircle-BsF-qc8Y.js"])))=>i.map(i=>d[i]);
import{aj as ct,d as n,l as s,e as t,a0 as mt,X as vt,a1 as pt,u as ft,a2 as $e,K as u,c as O,o as gt,w as ie,a4 as yt,n as S,g as he,k as bt,f as g,h as c,J as ue,O as y,Y as z,j as Z,F as T,i as U,t as i,a6 as qe,m as k,W as ht,cg as xt,ch as kt,ax as P,A as Le,U as wt,ab as _t,as as Pe,H as G,a8 as St,cS as Ct,aA as Ke,az as Ve,aC as Dt,P as zt,a9 as $t,co as Vt,p as Mt,aw as Tt,N as Ft,aa as At,Q as It,E as Ut}from"./index-DBRQkGj9.js";import{u as jt}from"./admin-Ce2ynkZp.js";import{P as Nt}from"./PageViewLayout-Cx7fNfek.js";import{_ as Me}from"./JsonRenderer-BrFWKpAC.js";import{_ as Et}from"./GenericModal-CuRb-XTE.js";/* empty css                                                                 */const Rt={},qt={xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"};function Lt(Oe,de){return s(),n("svg",qt,de[0]||(de[0]=[t("path",{d:"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"},null,-1)]))}const Pt=ct(Rt,[["render",Lt]]),Kt={class:"space-y-1 mt-2"},Ot=["onClick"],Gt={class:"truncate"},Bt={class:"space-y-1 mt-2"},Qt=["onClick"],Ht={class:"truncate"},Wt={class:"relative h-full w-full"},Jt={key:0,class:"p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm h-full overflow-y-auto"},Yt={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Xt=["label"],Zt=["value"],el={key:0,class:"text-xs text-red-500 mt-1"},tl={key:1,class:"p-4 border dark:border-gray-700 rounded-lg space-y-4"},ll={class:"font-medium text-lg"},al={class:"text-sm text-gray-500"},sl={key:0,class:"space-y-4"},nl={key:0},ol=["for"],rl={key:0,class:"text-red-500"},il={class:"relative mt-1"},ul=["type","onUpdate:modelValue","placeholder"],dl=["onClick","title"],cl={class:"flex justify-end gap-3"},ml=["disabled"],vl={key:1,class:"h-full flex items-center justify-center bg-white dark:bg-gray-800 rounded-lg shadow-sm"},pl={class:"text-center"},fl={key:2,class:"text-center py-20 bg-white dark:bg-gray-800 rounded-lg shadow-sm"},gl={key:3,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md h-full overflow-hidden flex flex-col"},yl={class:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-start flex-wrap gap-4"},bl={class:"text-2xl font-bold text-gray-900 dark:text-white"},hl={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},xl={class:"flex items-center text-xs text-gray-500 dark:text-gray-400 mt-2"},kl={class:"mt-2 text-xs font-mono p-2 bg-gray-100 dark:bg-gray-700/50 rounded-md"},wl={key:0,class:"mt-1"},_l={class:"flex items-center space-x-3 flex-shrink-0"},Sl={class:"border-b border-gray-200 dark:border-gray-700 px-6"},Cl={class:"-mb-px flex space-x-6","aria-label":"Tabs"},Dl={class:"p-6 flex-grow overflow-y-auto space-y-8"},zl={key:0,class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6 space-y-4"},$l={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Vl={class:"relative flex items-start pt-7"},Ml={class:"flex h-6 items-center"},Tl={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-4"},Fl={class:"flex justify-center gap-2 flex-wrap"},Al={class:"border rounded-lg p-6 bg-white dark:bg-gray-800 dark:border-gray-600 flex flex-col min-h-[180px]"},Il={class:"text-sm font-semibold mb-3 flex items-center gap-2"},Ul={class:"space-y-3 flex-grow"},jl={class:"flex items-center gap-4"},Nl={class:"flex-grow"},El={class:"self-end"},Rl=["disabled"],ql={key:0},Ll={key:0,class:"mt-4"},Pl={class:"flex items-center gap-4 mt-1"},Kl={class:"flex items-center"},Ol={class:"flex items-center"},Gl={key:1,class:"mt-4"},Bl={class:"text-sm font-medium mb-2"},Ql={class:"list-disc list-inside text-sm space-y-1 max-h-40 overflow-y-auto mb-4 p-2 bg-gray-100 dark:bg-gray-800 rounded-md"},Hl={class:"truncate"},Wl=["onClick"],Jl={key:2,class:"space-y-4 mt-4 max-h-96 overflow-y-auto"},Yl={class:"flex justify-between items-start"},Xl={class:"font-semibold text-sm truncate"},Zl=["onClick"],ea=["onUpdate:modelValue"],ta={key:3,class:"mt-4"},la={class:"text-sm font-medium mb-2"},aa={class:"space-y-1 max-h-40 overflow-y-auto"},sa={class:"truncate"},na=["onClick"],oa={key:1,class:"mt-4 text-center text-sm text-gray-500 italic p-4 border-2 border-dashed rounded-lg dark:border-gray-600"},ra={class:"flex justify-end items-center mt-4"},ia=["disabled"],ua={key:1,class:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700 text-sm"},da={key:2,class:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-700 text-sm"},ca={class:"text-xl font-semibold mb-4"},ma={key:0,class:"flex items-center justify-between bg-gray-50 dark:bg-gray-800/50 p-2 rounded-md mb-2"},va={class:"flex items-center"},pa=["checked","indeterminate"],fa=["disabled"],ga={key:1,class:"text-center py-10"},ya={key:2,class:"text-center py-10 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},ba={key:3,class:"divide-y divide-gray-200 dark:divide-gray-700"},ha=["onChange","checked"],xa={class:"flex-grow min-w-0"},ka={class:"flex items-center gap-2"},wa=["onClick"],_a={key:0,class:"mt-2 text-xs"},Sa={class:"mt-1 p-2 bg-gray-100 dark:bg-gray-700/50 rounded"},Ca={key:0,class:"p-6 flex-grow overflow-y-auto flex flex-col"},Da={class:"flex-shrink-0 space-y-4"},za={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},$a={class:"self-end"},Va=["disabled"],Ma={class:"flex-grow min-h-0 mt-6 border-t dark:border-gray-700 pt-6"},Ta={class:"flex justify-between items-center mb-4"},Fa={class:"text-lg font-semibold"},Aa={key:0,class:"flex items-center gap-2"},Ia={class:"text-sm text-gray-500 font-mono"},Ua={key:0,class:"text-center p-6 text-gray-500"},ja={key:1,class:"p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-md"},Na={key:2,class:"text-center p-6 text-gray-500"},Ea={key:3,class:"text-center p-6 text-gray-500"},Ra={key:4,class:"space-y-4 overflow-y-auto custom-scrollbar h-full pb-10"},qa=["id"],La={class:"flex justify-between items-center text-xs text-gray-500 dark:text-gray-400 mb-2"},Pa=["title"],Ka=["title"],Oa=["innerHTML"],Ga={key:1,class:"p-6 flex-grow overflow-y-auto"},Ba={key:4,class:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm rounded-lg"},Qa={key:0,class:"space-y-4"},Ha={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 flex flex-col gap-2"},Wa={class:"flex justify-between items-start"},Ja={class:"text-lg font-bold text-gray-900 dark:text-white break-all"},Ya={key:0,class:"text-sm text-gray-500 dark:text-gray-400 font-mono mt-1"},Xa={class:"text-right text-xs text-gray-500 dark:text-gray-400 space-y-1 flex-shrink-0 ml-4"},Za={title:"Total characters"},es={class:"font-semibold"},ts={title:"Approximate word count"},ls={class:"font-semibold"},as={title:"Estimated tokens (char/4)"},ss={class:"font-semibold"},ns={key:0,class:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700"},os={class:"text-sm group"},rs={class:"mt-2 p-2 bg-white dark:bg-gray-900 rounded border dark:border-gray-700"},is={class:"relative group"},us={class:"absolute top-2 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity z-10"},ds={class:"p-4 border rounded-lg dark:border-gray-700 bg-white dark:bg-gray-900 overflow-auto max-h-[60vh] whitespace-pre-wrap font-mono text-sm leading-relaxed"},ys={__name:"DataStoresView",setup(Oe){const de=Mt({loader:()=>Ut(()=>import("./DataStoreGraphManager-BUtjdCXW.js"),__vite__mapDeps([0,1,2,3])),loadingComponent:null,delay:200,errorComponent:null,timeout:3e3}),C=mt(),w=vt(),xe=pt();jt();const Ge=ft(),Be=bt(),{user:ce}=$e(Ge),{ownedDataStores:Te,sharedDataStores:Fe,availableVectorizers:Qe}=$e(C),{tasks:He}=$e(xe),$=u(null),D=u(null),F=u("documents"),ee=u(!1),m=u({name:"",description:"",selectedVectorizerKey:null,config:{},chunk_size:1024,chunk_overlap:256}),te=u({}),j=u([]),me=u(!1),h=u([]),ve=u(null),pe=u(null),N=u(null),fe=u(null),E=u(null),le=u(!1),_=u(new Set),J=u(""),ge=u(0),ae=u(!1),se=u(!1),Y=u(""),ke=u(10),we=u(50),A=u([]),X=u(!1),ne=u(""),R=u(""),V=u([]),B=u(-1),b=u(null),Q=u(null),q=u("none"),H=u({}),_e=u(!0),W=u("per-file"),oe=u(`title: 
subject: 
authors: `),Ae=O(()=>j.value.length>0&&_.value.size===j.value.length),We=O(()=>_.value.size>0&&!Ae.value),Se=O(()=>Qe.value),L=O(()=>{if(!m.value.selectedVectorizerKey)return null;const a=m.value.selectedVectorizerKey.split("/");if(a.length<2)return null;const e=a[0],r=a.slice(1).join("/"),l=Se.value.find(o=>o.alias===e);return l?{...l,selectedModelName:r}:null}),Je=O(()=>[...Te.value,...Fe.value].sort((a,e)=>a.name.localeCompare(e.name))),Ie=O(()=>Te.value.sort((a,e)=>a.name.localeCompare(e.name))),d=O(()=>Je.value.find(a=>a.id===$.value)),ye=O(()=>!!N.value||!!fe.value||!!E.value);function Ye(a){if(!a)return"";if(!R.value||V.value.length===0)return a;const e=R.value,r=new RegExp(`(${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return a.replace(r,'<mark class="bg-yellow-200 dark:bg-yellow-700 rounded">$1</mark>')}gt(()=>{C.fetchDataStores(),C.fetchAvailableVectorizers(),xe.fetchTasks(),window.addEventListener("lollms:open-new-datastore",Ce)}),ie(()=>Be.currentRoute.value.query.storeId,a=>{a&&re(a)},{immediate:!0}),yt(()=>{window.removeEventListener("lollms:open-new-datastore",Ce)}),ie(He,a=>{if(!d.value){N.value=null,fe.value=null,E.value=null;return}const e=d.value.name,r=M=>a.filter(v=>v.name.startsWith(M)&&v.name.includes(e)&&(v.status==="running"||v.status==="pending")).sort((v,f)=>new Date(f.created_at)-new Date(v.created_at))[0]||null,l=r("Add files to DataStore:"),o=r("Generate Graph for:")||r("Update Graph for:"),p=r("Scrape URL to DataStore:");(N.value&&!l&&(N.value.status==="running"||N.value.status==="pending")||E.value&&!p&&(E.value.status==="running"||E.value.status==="pending"))&&ze(d.value.id),N.value=l,fe.value=o,E.value=p},{deep:!0}),ie($,a=>{ee.value=!1,_.value.clear(),a?(F.value="documents",ze(a),Y.value="",A.value=[],ne.value=""):j.value=[]},{immediate:!0}),ie(L,a=>{m.value.config={},a&&(m.value.config={...a.vectorizer_config||{}},a.selectedModelName&&(m.value.config.model_name=a.selectedModelName))},{deep:!0}),ie(A,()=>{R.value="",V.value=[],B.value=-1});function re(a){$.value=a}function Ce(){var a,e;ee.value=!0,$.value=null,m.value={name:"",description:"",selectedVectorizerKey:null,config:{},chunk_size:((a=ce.value)==null?void 0:a.default_chunk_size)||1024,chunk_overlap:((e=ce.value)==null?void 0:e.default_chunk_overlap)||256}}async function Xe(){if(!m.value.name.trim()||!L.value){w.addNotification("Name and vectorizer are required.","warning");return}D.value="add_store";try{const a={name:m.value.name,description:m.value.description,vectorizer_name:L.value.vectorizer_name,vectorizer_config:m.value.config||{},chunk_size:m.value.chunk_size,chunk_overlap:m.value.chunk_overlap},e=await C.addDataStore(a);m.value={name:"",description:"",selectedVectorizerKey:null,config:{},chunk_size:1024,chunk_overlap:256},ee.value=!1,await C.fetchDataStores(),e&&e.id&&re(e.id)}finally{D.value=null}}function Ze(a){w.openModal("editDataStore",{store:a})}async function et(a){const{confirmed:e}=await w.showConfirmation({title:`Delete Data Store '${a.name}'?`,message:"This will permanently delete the data store and all its indexed documents.",confirmText:"Delete"});if(e){D.value=`delete_store_${a.id}`;try{await C.deleteDataStore(a.id),$.value===a.id&&($.value=null)}finally{D.value=null}}}function tt(a){w.openModal("shareDataStore",{store:a})}async function lt(a){a.preventDefault(),le.value=!1;const e=a.dataTransfer.items,r=[];function l(v){return new Promise((f,x)=>{v.readEntries(f,x)})}async function o(v){const f=v.createReader();let x=[],I;do I=await l(f),x=x.concat(I);while(I.length>0);return x}async function p(v){if(v.isFile)await new Promise((f,x)=>v.file(I=>{r.push(I),f()},x));else if(v.isDirectory){const f=await o(directoryEntry);for(const x of f)await p(x)}}const M=[];for(let v=0;v<e.length;v++){const f=e[v].webkitGetAsEntry();f&&M.push(p(f))}await Promise.all(M),r.length>0&&je(r)}function Ue(a){je(Array.from(a.target.files))}function je(a){const e=new Set(h.value.map(o=>o.name+o.size)),r=[],l={};for(const o of a){const p=o.name+o.size;e.has(p)||(r.push(o),l[o.name]=`title: 
subject: 
authors: `,e.add(p))}r.length>0&&(h.value=[...h.value,...r],H.value={...H.value,...l}),r.length<a.length&&w.addNotification(`${a.length-r.length} duplicate files skipped.`,"info"),ve.value&&(ve.value.value=""),pe.value&&(pe.value.value="")}function De(a){const e=h.value.splice(a,1);e.length>0&&delete H.value[e[0].name]}async function ze(a){me.value=!0;try{j.value=await C.fetchStoreFiles(a)}finally{me.value=!1}}async function at(){if(!d.value||h.value.length===0){w.addNotification("Please select files to upload.","warning");return}if(ye.value){w.addNotification("A task is already running for this Data Store.","warning");return}ae.value=!0;try{const a=new FormData;if(h.value.forEach(e=>a.append("files",e)),a.append("metadata_option",q.value),a.append("vectorize_with_metadata",_e.value),q.value==="manual"){let e={};const r=l=>{const o={};if(!l)return o;const p=l.split(`
`);for(const M of p){const v=M.split(":");if(v.length>=2){const f=v[0].trim(),x=v.slice(1).join(":").trim();f&&(["authors","tags","keywords"].includes(f.toLowerCase())?o[f]=x.split(",").map(I=>I.trim()).filter(Boolean):o[f]=x)}}return o};try{if(W.value==="all"){const l=oe.value.trim()?r(oe.value):{};for(const o of h.value)e[o.name]=l}else for(const l of h.value){const o=H.value[l.name]||"";e[l.name]=o.trim()?r(o):{}}a.append("manual_metadata_json",JSON.stringify(e))}catch(l){w.addNotification("Invalid metadata format. Please use 'key: value' pairs, with one entry per line.","error"),console.error("Metadata parsing error:",l);return}}await C.uploadFilesToStore({storeId:d.value.id,formData:a}),h.value=[],H.value={},oe.value=`title: 
subject: 
authors: `}finally{ae.value=!1}}async function st(){if(!J.value.trim()){w.addNotification("Please enter a URL.","warning");return}if(ye.value){w.addNotification("A task is already running for this Data Store.","warning");return}se.value=!0;try{const e=(await It.post(`/api/store/${d.value.id}/scrape-url`,{url:J.value,depth:ge.value})).data;w.addNotification(`Scrape task '${e.name}' started.`,"info"),xe.addTask(e),J.value="",ge.value=0}catch(a){console.error("Scrape failed:",a)}finally{se.value=!1}}function be(a){return a&&["owner","read_write","revectorize"].includes(a.permission_level)}function nt(a){_.value.has(a)?_.value.delete(a):_.value.add(a)}function ot(a){a.target.checked?_.value=new Set(j.value.map(e=>e.filename)):_.value.clear()}async function rt(){if(_.value.size===0)return;const{confirmed:a}=await w.showConfirmation({title:`Delete ${_.value.size} file(s)?`,message:"This will permanently remove the selected documents and their data from the data store.",confirmText:"Delete"});if(a){D.value="delete_selected_files";try{const e=Array.from(_.value);await C.deleteFilesFromStore({storeId:d.value.id,filenames:e}),await ze(d.value.id),_.value.clear()}finally{D.value=null}}}async function it(){if(!(!Y.value.trim()||!d.value)){X.value=!0,ne.value="",A.value=[];try{const a=await C.queryDataStore({storeId:d.value.id,query:Y.value,top_k:ke.value,min_similarity_percent:we.value});A.value=a}catch{ne.value="An error occurred during the query."}finally{X.value=!1}}}function Ne(){if(!R.value){V.value=[],B.value=-1,document.querySelectorAll(".current-search-highlight").forEach(r=>r.classList.remove("current-search-highlight"));return}const a=R.value,e=[];A.value.forEach((r,l)=>{const o=r.chunk_text||"",p=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");let M;for(;(M=p.exec(o))!==null;)e.push({chunkIndex:l,matchIndexInText:M.index})}),V.value=e,e.length>0?(B.value=0,Re(e[0])):(B.value=-1,w.addNotification("No matches found in results.","info"),document.querySelectorAll(".current-search-highlight").forEach(r=>r.classList.remove("current-search-highlight")))}function Ee(a){if(V.value.length===0)return;let e=B.value+a;e<0&&(e=V.value.length-1),e>=V.value.length&&(e=0),B.value=e,Re(V.value[e])}function Re(a){var r;const e=document.getElementById(`chunk-${a.chunkIndex}`);if(e){document.querySelectorAll(".current-search-highlight").forEach(o=>o.classList.remove("current-search-highlight"));const l=Array.from(e.querySelectorAll("mark"));if(l.length>0){let o=0;const p=((r=A.value[a.chunkIndex])==null?void 0:r.chunk_text)||"",M=R.value,v=new RegExp(M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");let f=-1;const x=p.split(v);let I=0;for(let K=1;K<x.length;K+=2){if(I===a.matchIndexInText){f=o;break}I+=(x[K-1]?x[K-1].length:0)+x[K].length,o++}if(f!==-1&&l[f]){const K=l[f];K.classList.add("current-search-highlight"),K.scrollIntoView({behavior:"smooth",block:"center"})}else e.scrollIntoView({behavior:"smooth",block:"center"})}else e.scrollIntoView({behavior:"smooth",block:"center"})}}async function ut(a){if(!Q.value){Q.value=a.filename;try{const e=await C.fetchFileContent(d.value.id,a.filename);b.value={filename:a.filename,metadata:a.metadata,content:e},w.openModal("fileContent")}catch{}finally{Q.value=null}}}function dt(){b.value&&b.value.content&&(navigator.clipboard.writeText(b.value.content),w.addNotification("Content copied to clipboard","success"))}return(a,e)=>(s(),S(Nt,{title:"Data Studio","title-icon":Le},{sidebar:he(()=>[t("button",{onClick:Ce,class:"w-full flex items-center space-x-3 text-left px-3 py-2.5 rounded-lg text-sm font-medium text-blue-700 dark:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/50 transition-colors"},[g(Ft,{class:"w-5 h-5 flex-shrink-0"}),e[31]||(e[31]=t("span",null,"New Data Store",-1))]),t("button",{onClick:e[0]||(e[0]=r=>Z(C).fetchDataStores()),class:"w-full flex items-center space-x-3 text-left px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors mt-2"},[g(At,{class:"w-5 h-5 flex-shrink-0"}),e[32]||(e[32]=t("span",null,"Refresh All Stores",-1))]),e[34]||(e[34]=t("h3",{class:"text-sm font-semibold uppercase text-gray-500 dark:text-gray-400 mt-4 px-3"},"Your Stores",-1)),t("ul",Kt,[(s(!0),n(T,null,U(Ie.value,r=>(s(),n("li",{key:r.id},[t("button",{onClick:l=>re(r.id),class:G(["w-full flex items-center justify-between text-left px-3 py-2 rounded-lg text-sm transition-colors group",{"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300":$.value===r.id,"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700":$.value!==r.id}])},[t("span",Gt,i(r.name),1),e[33]||(e[33]=t("span",{class:"ml-2 text-xs px-2 py-0.5 rounded-full bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"},"Owner",-1))],10,Ot)]))),128))]),e[35]||(e[35]=t("h3",{class:"text-sm font-semibold uppercase text-gray-500 dark:text-gray-400 mt-4 px-3"},"Shared With You",-1)),t("ul",Bt,[(s(!0),n(T,null,U(Z(Fe),r=>(s(),n("li",{key:r.id},[t("button",{onClick:l=>re(r.id),class:G(["w-full flex items-center justify-between text-left px-3 py-2 rounded-lg text-sm transition-colors group",{"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300":$.value===r.id,"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700":$.value!==r.id}])},[t("span",Ht,i(r.name),1),t("span",{class:G(["ml-2 text-xs px-2 py-0.5 rounded-full",{"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":r.permission_level==="revectorize","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300":r.permission_level==="read_write","bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300":r.permission_level==="read_query"}])},i(r.permission_level.replace("_"," ")),3)],10,Qt)]))),128))])]),main:he(()=>{var r;return[t("div",Wt,[ee.value?(s(),n("div",Jt,[e[44]||(e[44]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Data Store",-1)),e[45]||(e[45]=t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"A Data Store turns your documents into a queryable knowledge base.",-1)),t("form",{onSubmit:ue(Xe,["prevent"]),class:"mt-6 space-y-6"},[t("div",null,[e[36]||(e[36]=t("label",{for:"new-ds-name",class:"block text-sm font-medium"},"Name",-1)),y(t("input",{id:"new-ds-name","onUpdate:modelValue":e[1]||(e[1]=l=>m.value.name=l),type:"text",class:"input-field mt-1",required:""},null,512),[[z,m.value.name]])]),t("div",null,[e[37]||(e[37]=t("label",{for:"new-ds-desc",class:"block text-sm font-medium"},"Description",-1)),y(t("textarea",{id:"new-ds-desc","onUpdate:modelValue":e[2]||(e[2]=l=>m.value.description=l),rows:"2",class:"input-field mt-1"},null,512),[[z,m.value.description]])]),Z(ce)&&Z(ce).allow_user_chunking_config?(s(),n("div",Yt,[t("div",null,[e[38]||(e[38]=t("label",{for:"new-ds-chunk-size",class:"block text-sm font-medium"},"Chunk Size",-1)),y(t("input",{id:"new-ds-chunk-size","onUpdate:modelValue":e[3]||(e[3]=l=>m.value.chunk_size=l),type:"number",min:"1",class:"input-field mt-1"},null,512),[[z,m.value.chunk_size,void 0,{number:!0}]]),e[39]||(e[39]=t("p",{class:"text-xs text-gray-500 mt-1"},"Number of characters per data chunk.",-1))]),t("div",null,[e[40]||(e[40]=t("label",{for:"new-ds-chunk-overlap",class:"block text-sm font-medium"},"Chunk Overlap",-1)),y(t("input",{id:"new-ds-chunk-overlap","onUpdate:modelValue":e[4]||(e[4]=l=>m.value.chunk_overlap=l),type:"number",min:"0",class:"input-field mt-1"},null,512),[[z,m.value.chunk_overlap,void 0,{number:!0}]]),e[41]||(e[41]=t("p",{class:"text-xs text-gray-500 mt-1"},"Number of overlapping characters between chunks.",-1))])])):c("",!0),t("div",null,[e[43]||(e[43]=t("label",{for:"new-ds-vectorizer",class:"block text-sm font-medium"},"Vectorizer",-1)),y(t("select",{id:"new-ds-vectorizer","onUpdate:modelValue":e[5]||(e[5]=l=>m.value.selectedVectorizerKey=l),class:"input-field mt-1"},[e[42]||(e[42]=t("option",{value:null,disabled:""},"-- Select a Vectorizer Model --",-1)),(s(!0),n(T,null,U(Se.value,l=>(s(),n("optgroup",{key:l.id,label:l.alias||l.vectorizer_name},[(s(!0),n(T,null,U(l.models,o=>(s(),n("option",{key:`${l.id}-${o.value}`,value:`${l.alias}/${o.value}`},i(o.name),9,Zt))),128))],8,Xt))),128))],512),[[qe,m.value.selectedVectorizerKey]]),Se.value.length===0?(s(),n("p",el," No active RAG bindings found. Please configure them in Settings. ")):c("",!0)]),L.value?(s(),n("div",tl,[t("h4",ll,i(L.value.title||L.value.name),1),t("p",al,i(L.value.description),1),((r=L.value.input_parameters)==null?void 0:r.length)>0?(s(),n("div",sl,[(s(!0),n(T,null,U(L.value.input_parameters,l=>(s(),n("div",{key:l.name},[l.name!=="model"?(s(),n("div",nl,[t("label",{for:`param-${l.name}`,class:"block text-sm font-medium"},[k(i(l.name)+" ",1),l.mandatory?(s(),n("span",rl,"*")):c("",!0)],8,ol),t("div",il,[y(t("input",{type:(l.name.includes("key")||l.name.includes("token"))&&!te.value[l.name]?"password":"text","onUpdate:modelValue":o=>m.value.config[l.name]=o,class:"input-field pr-10",placeholder:l.description},null,8,ul),[[ht,m.value.config[l.name]]]),l.name.includes("key")||l.name.includes("token")?(s(),n("button",{key:0,type:"button",onClick:o=>te.value[l.name]=!te.value[l.name],class:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",title:te.value[l.name]?"Hide":"Show"},[te.value[l.name]?(s(),S(xt,{key:0,class:"w-5 h-5"})):(s(),S(kt,{key:1,class:"w-5 h-5"}))],8,dl)):c("",!0)])])):c("",!0)]))),128))])):c("",!0)])):c("",!0),t("div",cl,[t("button",{type:"button",onClick:e[6]||(e[6]=l=>{var o;ee.value=!1,re((o=Ie.value[0])==null?void 0:o.id)}),class:"btn btn-secondary"},"Cancel"),t("button",{type:"submit",class:"btn btn-primary",disabled:D.value==="add_store"},[D.value==="add_store"?(s(),S(P,{key:0,class:"w-5 h-5 mr-2 animate-spin"})):c("",!0),k(" "+i(D.value==="add_store"?"Creating...":"Create Data Store"),1)],8,ml)])],32)])):$.value?d.value?(s(),n("div",gl,[t("div",yl,[t("div",null,[t("h2",bl,i(d.value.name),1),t("p",hl,i(d.value.description||"No description provided."),1),t("div",xl,[e[49]||(e[49]=t("span",{class:"mr-1"},"Owner:",-1)),g(wt,{username:d.value.owner_username,"size-class":"h-4 w-4",class:"mr-1"},null,8,["username"]),t("span",null,i(d.value.owner_username),1)]),t("div",kl,[t("p",null,[e[50]||(e[50]=t("span",{class:"font-semibold"},"Vectorizer:",-1)),k(" "+i(d.value.vectorizer_name),1)]),t("p",null,[e[51]||(e[51]=t("span",{class:"font-semibold"},"Chunking:",-1)),k(" "+i(d.value.chunk_size)+" / "+i(d.value.chunk_overlap),1)]),Object.keys(d.value.vectorizer_config).length>0?(s(),n("details",wl,[e[52]||(e[52]=t("summary",{class:"cursor-pointer text-gray-500"},"View Config",-1)),g(Me,{json:d.value.vectorizer_config,class:"mt-1 text-xs"},null,8,["json"])])):c("",!0)])]),t("div",_l,[d.value.permission_level==="owner"?(s(),n("button",{key:0,onClick:e[7]||(e[7]=l=>tt(d.value)),class:"btn btn-secondary btn-sm"},[g(Pt,{class:"w-4 h-4 mr-2"}),e[53]||(e[53]=k(" Share"))])):c("",!0),be(d.value)?(s(),n("button",{key:1,onClick:e[8]||(e[8]=l=>Ze(d.value)),class:"btn btn-secondary btn-sm"},[g(_t,{class:"w-4 h-4 mr-2"}),e[54]||(e[54]=k(" Edit"))])):c("",!0),d.value.permission_level==="owner"?(s(),n("button",{key:2,onClick:e[9]||(e[9]=l=>et(d.value)),class:"btn btn-danger btn-sm"},[D.value===`delete_store_${d.value.id}`?(s(),S(P,{key:0,class:"w-4 h-4 mr-2 animate-spin"})):(s(),S(Pe,{key:1,class:"w-4 h-4 mr-2"})),e[55]||(e[55]=k(" Delete "))])):c("",!0)])]),t("div",Sl,[t("nav",Cl,[t("button",{onClick:e[10]||(e[10]=l=>F.value="documents"),class:G(["tab-button",F.value==="documents"?"active":"inactive"])},"Documents",2),t("button",{onClick:e[11]||(e[11]=l=>F.value="query"),class:G(["tab-button",F.value==="query"?"active":"inactive"])},"Query",2),t("button",{onClick:e[12]||(e[12]=l=>F.value="graph"),class:G(["tab-button",F.value==="graph"?"active":"inactive"])},"Graph",2)])]),y(t("div",Dl,[be(d.value)?(s(),n("div",zl,[e[70]||(e[70]=t("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"},"Add Documents",-1)),t("div",$l,[t("div",null,[e[57]||(e[57]=t("label",{for:"metadata-option",class:"block text-sm font-medium"},"Metadata Handling",-1)),y(t("select",{id:"metadata-option","onUpdate:modelValue":e[13]||(e[13]=l=>q.value=l),class:"input-field mt-1"},e[56]||(e[56]=[t("option",{value:"none"},"None",-1),t("option",{value:"manual"},"Manual Entry",-1),t("option",{value:"auto-generate"},"Auto-generate for each file",-1),t("option",{value:"rewrite-chunk"},"Rewrite full content with metadata for each chunk",-1)]),512),[[qe,q.value]]),e[58]||(e[58]=t("p",{class:"text-xs text-gray-500 mt-1"},"Choose how to handle metadata for uploaded files.",-1))]),t("div",Vl,[t("div",Ml,[y(t("input",{id:"vectorize-with-metadata","onUpdate:modelValue":e[14]||(e[14]=l=>_e.value=l),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-600"},null,512),[[St,_e.value]])]),e[59]||(e[59]=t("div",{class:"ml-3 text-sm leading-6"},[t("label",{for:"vectorize-with-metadata",class:"font-medium text-gray-900 dark:text-gray-100"},"Vectorize with Metadata"),t("p",{class:"text-gray-500 dark:text-gray-400"},"Include document metadata in the vectorization process for better context.")],-1))])]),t("div",Tl,[t("div",{onDragover:e[17]||(e[17]=ue(l=>le.value=!0,["prevent"])),onDragleave:e[18]||(e[18]=ue(l=>le.value=!1,["prevent"])),onDrop:ue(lt,["prevent"]),class:G(["border-2 border-dashed rounded-lg p-6 text-center transition-colors flex flex-col justify-center min-h-[180px]",{"border-blue-500 bg-blue-50 dark:bg-blue-900/20":le.value,"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500":!le.value}])},[t("input",{type:"file",multiple:"",ref_key:"fileInputRef",ref:ve,onChange:Ue,class:"hidden",accept:".pdf,.docx,.pptx,.xlsx,.msg,.vcf,.txt,.md,.py,.js,.ts,.html,.css,.c,.cpp,.h,.hpp,.cs,.java,.json,.xml,.sh,.vhd,.v,.rb,.php,.go,.rs,.swift,.kt,.yaml,.yml,.sql,.log,.csv"},null,544),t("input",{type:"file",ref_key:"folderInputRef",ref:pe,onChange:Ue,class:"hidden",webkitdirectory:"",directory:"",multiple:""},null,544),e[60]||(e[60]=t("p",{class:"text-gray-600 dark:text-gray-300 font-medium mb-4"},"Drag & drop files here",-1)),t("div",Fl,[t("button",{type:"button",onClick:e[15]||(e[15]=l=>ve.value.click()),class:"btn btn-secondary btn-sm"},"Select File(s)"),t("button",{type:"button",onClick:e[16]||(e[16]=l=>pe.value.click()),class:"btn btn-secondary btn-sm"},"Select Folder")])],34),t("div",Al,[t("h4",Il,[g(Ct,{class:"w-4 h-4"}),e[61]||(e[61]=k(" Add from URL "))]),t("div",Ul,[y(t("input",{type:"text","onUpdate:modelValue":e[19]||(e[19]=l=>J.value=l),placeholder:"https://example.com/docs",class:"input-field text-sm"},null,512),[[z,J.value]]),t("div",jl,[t("div",Nl,[e[62]||(e[62]=t("label",{class:"text-xs text-gray-500 uppercase font-bold"},"Depth",-1)),y(t("input",{type:"number","onUpdate:modelValue":e[20]||(e[20]=l=>ge.value=l),min:"0",max:"5",class:"input-field text-sm mt-1"},null,512),[[z,ge.value,void 0,{number:!0}]])]),t("div",El,[t("button",{onClick:st,class:"btn btn-primary btn-sm w-full",disabled:se.value||ye.value||!J.value},[se.value?(s(),S(P,{key:0,class:"w-4 h-4 mr-1 animate-spin"})):c("",!0),k(" "+i(se.value?"Scraping...":"Scrape & Add"),1)],8,Rl)])]),e[63]||(e[63]=t("p",{class:"text-xs text-gray-500"},"Depth 0 = single page. Depth > 0 follows internal links.",-1))])])]),h.value.length>0?(s(),n("div",ql,[q.value==="manual"?(s(),n("div",Ll,[e[66]||(e[66]=t("label",{class:"block text-sm font-medium"},"Manual Metadata Mode",-1)),t("div",Pl,[t("label",Kl,[y(t("input",{type:"radio","onUpdate:modelValue":e[21]||(e[21]=l=>W.value=l),value:"per-file",class:"radio-input"},null,512),[[Ke,W.value]]),e[64]||(e[64]=t("span",{class:"ml-2"},"Per File",-1))]),t("label",Ol,[y(t("input",{type:"radio","onUpdate:modelValue":e[22]||(e[22]=l=>W.value=l),value:"all",class:"radio-input"},null,512),[[Ke,W.value]]),e[65]||(e[65]=t("span",{class:"ml-2"},"For All Files",-1))])])])):c("",!0),q.value==="manual"&&W.value==="all"?(s(),n("div",Gl,[t("h4",Bl,"Selected Files ("+i(h.value.length)+")",1),t("ul",Ql,[(s(!0),n(T,null,U(h.value,(l,o)=>(s(),n("li",{key:o,class:"flex justify-between items-center"},[t("span",Hl,i(l.name),1),t("button",{onClick:p=>De(o),class:"text-red-500 hover:text-red-700 ml-2",title:"Remove"},[g(Ve,{class:"w-4 h-4"})],8,Wl)]))),128))]),e[67]||(e[67]=t("label",{class:"block text-sm font-medium"},"Metadata for all files (Key: Value format)",-1)),y(t("textarea",{"onUpdate:modelValue":e[23]||(e[23]=l=>oe.value=l),rows:"4",class:"input-field mt-1 font-mono text-xs",placeholder:`title: My Document
subject: AI Research
authors: John Doe, Jane Smith`},null,512),[[z,oe.value]])])):q.value==="manual"&&W.value==="per-file"?(s(),n("div",Jl,[e[69]||(e[69]=t("h4",{class:"text-sm font-medium"},"Enter Metadata for Each File:",-1)),(s(!0),n(T,null,U(h.value,(l,o)=>(s(),n("div",{key:o,class:"p-3 border rounded-lg dark:border-gray-600 space-y-3"},[t("div",Yl,[t("p",Xl,i(l.name),1),t("button",{onClick:p=>De(o),class:"text-red-500 hover:text-red-700",title:"Remove"},[g(Ve,{class:"w-5 h-5"})],8,Zl)]),t("div",null,[e[68]||(e[68]=t("label",{class:"text-xs font-medium"},"Metadata (Key: Value format)",-1)),y(t("textarea",{"onUpdate:modelValue":p=>H.value[l.name]=p,rows:"4",class:"input-field-sm w-full mt-1 font-mono text-xs",placeholder:"title: ..."},null,8,ea),[[z,H.value[l.name]]])])]))),128))])):q.value!=="manual"?(s(),n("div",ta,[t("h4",la,"Selected for Upload ("+i(h.value.length)+")",1),t("ul",aa,[(s(!0),n(T,null,U(h.value,(l,o)=>(s(),n("li",{key:o,class:"flex justify-between items-center bg-gray-100 dark:bg-gray-800 p-2 rounded text-sm"},[t("span",sa,i(l.name)+" ("+i((l.size/1024/1024).toFixed(2))+" MB)",1),t("button",{onClick:p=>De(o),class:"text-red-500 hover:text-red-700 ml-2",title:"Remove"},[g(Ve,{class:"w-4 h-4"})],8,na)]))),128))])])):c("",!0)])):q.value==="manual"?(s(),n("div",oa," Select files to enter their metadata manually. ")):c("",!0),t("div",ra,[t("button",{onClick:at,class:"btn btn-primary",disabled:ye.value||h.value.length===0||ae.value},[ae.value?(s(),S(P,{key:0,class:"w-5 h-5 mr-2 animate-spin"})):(s(),S(Dt,{key:1,class:"w-5 h-5 mr-2"})),k(" "+i(ae.value?"Uploading...":`Add ${h.value.length} File(s)`),1)],8,ia)])])):c("",!0),N.value?(s(),n("div",ua,[e[71]||(e[71]=t("span",{class:"font-semibold text-blue-800 dark:text-blue-300"},"File Uploading:",-1)),k(" "+i(N.value.progress)+"% - "+i(N.value.description),1)])):c("",!0),E.value?(s(),n("div",da,[e[72]||(e[72]=t("span",{class:"font-semibold text-green-800 dark:text-green-300"},"Scraping:",-1)),k(" "+i(E.value.progress)+"% - "+i(E.value.description),1)])):c("",!0),t("div",null,[t("h3",ca,"Indexed Documents ("+i(j.value.length)+")",1),!me.value&&j.value.length>0&&be(d.value)?(s(),n("div",ma,[t("div",va,[t("input",{type:"checkbox",onChange:ot,checked:Ae.value,indeterminate:We.value,id:"select-all-files-checkbox",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,40,pa),e[73]||(e[73]=t("label",{for:"select-all-files-checkbox",class:"ml-2 text-sm select-none cursor-pointer"},"Select All",-1))]),t("button",{onClick:rt,class:"btn btn-danger btn-sm",disabled:_.value.size===0||D.value==="delete_selected_files"},[D.value==="delete_selected_files"?(s(),S(P,{key:0,class:"w-4 h-4 mr-2 animate-spin"})):(s(),S(Pe,{key:1,class:"w-4 h-4 mr-2"})),k(" Delete Selected ("+i(_.value.size)+") ",1)],8,fa)])):c("",!0),me.value?(s(),n("div",ga,e[74]||(e[74]=[t("p",null,"Loading documents...",-1)]))):j.value.length===0?(s(),n("div",ya,e[75]||(e[75]=[t("p",null,"No documents indexed.",-1)]))):(s(),n("ul",ba,[(s(!0),n(T,null,U(j.value,l=>(s(),n("li",{key:l.filename,class:"py-3 flex items-center"},[be(d.value)?(s(),n("input",{key:0,type:"checkbox",onChange:o=>nt(l.filename),checked:_.value.has(l.filename),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-4 flex-shrink-0"},null,40,ha)):c("",!0),t("div",xa,[t("div",ka,[t("span",{class:G(["text-sm font-medium truncate cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors",{"opacity-50 pointer-events-none":Q.value&&Q.value!==l.filename}]),onClick:o=>ut(l)},i(l.filename),11,wa),Q.value===l.filename?(s(),S(P,{key:0,class:"w-4 h-4 text-blue-500 animate-spin flex-shrink-0"})):c("",!0)]),l.metadata&&Object.keys(l.metadata).length>0?(s(),n("details",_a,[e[76]||(e[76]=t("summary",{class:"cursor-pointer text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"},"View Metadata",-1)),t("div",Sa,[g(Me,{json:l.metadata},null,8,["json"])])])):c("",!0)])]))),128))]))])],512),[[zt,F.value==="documents"]]),F.value==="query"?(s(),n("div",Ca,[t("div",Da,[e[80]||(e[80]=t("h3",{class:"text-xl font-semibold"},"Query Data Store",-1)),t("form",{onSubmit:ue(it,["prevent"]),class:"space-y-4"},[t("div",null,[e[77]||(e[77]=t("label",{for:"query-text",class:"block text-sm font-medium"},"Query Text",-1)),y(t("textarea",{id:"query-text","onUpdate:modelValue":e[24]||(e[24]=l=>Y.value=l),rows:"3",class:"input-field mt-1",placeholder:"Enter your question..."},null,512),[[z,Y.value]])]),t("div",za,[t("div",null,[e[78]||(e[78]=t("label",{for:"query-topk",class:"block text-sm font-medium"},"Top K",-1)),y(t("input",{id:"query-topk","onUpdate:modelValue":e[25]||(e[25]=l=>ke.value=l),type:"number",min:"1",class:"input-field mt-1"},null,512),[[z,ke.value,void 0,{number:!0}]])]),t("div",null,[e[79]||(e[79]=t("label",{for:"query-minsim",class:"block text-sm font-medium"},"Min Similarity %",-1)),y(t("input",{id:"query-minsim","onUpdate:modelValue":e[26]||(e[26]=l=>we.value=l),type:"number",min:"0",max:"100",step:"0.1",class:"input-field mt-1"},null,512),[[z,we.value,void 0,{number:!0}]])]),t("div",$a,[t("button",{type:"submit",class:"btn btn-primary w-full",disabled:X.value||!Y.value.trim()},[X.value?(s(),S(P,{key:0,class:"w-5 h-5 mr-2 animate-spin"})):c("",!0),k(" "+i(X.value?"Querying...":"Query"),1)],8,Va)])])],32)]),t("div",Ma,[t("div",Ta,[t("h4",Fa,"Results ("+i(A.value.length)+")",1),A.value.length>0?(s(),n("div",Aa,[y(t("input",{type:"text","onUpdate:modelValue":e[27]||(e[27]=l=>R.value=l),onKeyup:$t(Ne,["enter"]),placeholder:"Search in results...",class:"input-field !py-1.5 !text-sm"},null,544),[[z,R.value]]),t("button",{onClick:Ne,class:"btn btn-secondary btn-sm p-2"},[g(Vt,{class:"w-4 h-4"})]),V.value.length>0?(s(),n(T,{key:0},[t("button",{onClick:e[28]||(e[28]=l=>Ee(-1)),class:"btn btn-secondary btn-sm p-2",title:"Previous match"},"‹"),t("span",Ia,i(B.value+1)+" / "+i(V.value.length),1),t("button",{onClick:e[29]||(e[29]=l=>Ee(1)),class:"btn btn-secondary btn-sm p-2",title:"Next match"},"›")],64)):c("",!0)])):c("",!0)]),X.value?(s(),n("div",Ua,[g(P,{class:"w-8 h-8 mx-auto animate-spin"}),e[81]||(e[81]=t("p",{class:"mt-2"},"Fetching results...",-1))])):ne.value?(s(),n("div",ja,i(ne.value),1)):A.value.length===0?(s(),n("div",Na," No results to display. Run a query to see matching text chunks. ")):R.value&&V.value.length===0?(s(),n("div",Ea," No chunks match your search term. ")):(s(),n("div",Ra,[(s(!0),n(T,null,U(A.value,(l,o)=>(s(),n("div",{key:o,id:`chunk-${o}`,class:"p-4 border rounded-lg dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},[t("div",La,[t("span",{class:"font-mono truncate",title:l.file_path},".../"+i(l.file_path.split(/[/\\]/).pop()),9,Pa),t("span",{class:"font-semibold",title:`Similarity: ${l.similarity_percent}`},i(l.similarity_percent.toFixed(2))+"%",9,Ka)]),t("pre",{class:"whitespace-pre-wrap font-sans text-sm",innerHTML:Ye(l.chunk_text)},null,8,Oa)],8,qa))),128))]))])])):c("",!0),F.value==="graph"?(s(),n("div",Ga,[g(Z(de),{store:d.value,task:fe.value},null,8,["store","task"])])):c("",!0)])):(s(),n("div",fl,e[48]||(e[48]=[t("h3",{class:"text-xl font-semibold text-gray-700 dark:text-gray-200"},"Data Store Not Found",-1),t("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"The selected data store could not be loaded.",-1)]))):(s(),n("div",vl,[t("div",pl,[g(Le,{class:"mx-auto h-12 w-12 text-gray-400"}),e[46]||(e[46]=t("h3",{class:"mt-2 text-xl font-semibold text-gray-900 dark:text-white"},"Select a Data Store",-1)),e[47]||(e[47]=t("p",{class:"mt-1 text-sm text-gray-500"},"Choose a store from the sidebar or create a new one to begin.",-1))])])),Q.value?(s(),n("div",Ba,[g(P,{class:"w-12 h-12 text-blue-600 dark:text-blue-400 mb-4 animate-spin"}),e[82]||(e[82]=t("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"},"Loading file content",-1)),e[83]||(e[83]=t("p",{class:"text-gray-600 dark:text-gray-300"},"Please stand by...",-1))])):c("",!0)]),g(Et,{modalName:"fileContent",title:"Document Viewer",size:"4xl"},{body:he(()=>{var l,o,p;return[b.value?(s(),n("div",Qa,[t("div",Ha,[t("div",Wa,[t("div",null,[t("h3",Ja,i(((l=b.value.metadata)==null?void 0:l.title)||b.value.filename),1),(o=b.value.metadata)!=null&&o.title&&((p=b.value.metadata)==null?void 0:p.title)!==b.value.filename?(s(),n("p",Ya,i(b.value.filename),1)):c("",!0)]),t("div",Xa,[t("div",Za,[t("span",es,i(b.value.content.length.toLocaleString()),1),e[84]||(e[84]=k(" chars"))]),t("div",ts,[t("span",ls,i(b.value.content.split(/\s+/).length.toLocaleString()),1),e[85]||(e[85]=k(" words"))]),t("div",as,[t("span",ss,"~"+i(Math.ceil(b.value.content.length/4).toLocaleString()),1),e[86]||(e[86]=k(" tokens"))])])]),b.value.metadata&&Object.keys(b.value.metadata).length>0?(s(),n("div",ns,[t("details",os,[e[87]||(e[87]=t("summary",{class:"cursor-pointer text-blue-600 dark:text-blue-400 font-medium select-none"},"Show Metadata",-1)),t("div",rs,[g(Me,{json:b.value.metadata},null,8,["json"])])])])):c("",!0)]),t("div",is,[t("div",us,[t("button",{onClick:dt,class:"p-2 bg-white dark:bg-gray-800 border dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",title:"Copy Content"},[g(Tt,{class:"w-4 h-4"})])]),t("div",ds,i(b.value.content),1)])])):c("",!0)]}),footer:he(()=>[t("button",{onClick:e[30]||(e[30]=l=>Z(w).closeModal("fileContent")),class:"btn btn-primary"},"Close")]),_:1})]}),_:1}))}};export{ys as default};
