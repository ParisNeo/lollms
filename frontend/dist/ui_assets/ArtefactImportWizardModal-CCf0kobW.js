import{a4 as K,Q as L,u as Y,c as W,L as c,a as T,o as s,w as E,b as e,e as o,F as b,r as v,a2 as G,aM as R,ax as X,n as H,h as U,H as O,t as p,g as f,f as i,Y as h,aG as w,a0 as m,av as z,an as _,as as J,d as Q,aE as q}from"./index-Htkm6tp6.js";import{_ as Z}from"./GenericModal-Kg280xj0.js";import{I as ee}from"./IconWeb-CPEp36Mi.js";import{I as te}from"./IconVideoCamera-C8nHMPW6.js";const ae={class:"flex flex-col h-[500px]"},le={class:"flex border-b dark:border-gray-700 overflow-x-auto no-scrollbar bg-gray-50 dark:bg-gray-800/50 p-1"},se=["onClick"],oe={class:"flex-grow p-6 overflow-y-auto custom-scrollbar"},re={key:0,class:"space-y-4"},ne={class:"flex flex-wrap gap-2"},ie={class:"truncate max-w-[200px]"},ue=["onClick"],de={key:1,class:"space-y-4"},ce={class:"flex gap-2"},pe={class:"space-y-2"},be={class:"truncate pr-4 font-medium"},ve=["onClick"],fe={key:2,class:"space-y-4"},me={class:"flex gap-2"},ge={class:"space-y-2"},xe={class:"truncate pr-4 font-bold"},ke=["onClick"],_e={key:3,class:"space-y-4"},ye={class:"flex gap-2"},he=["value"],we={class:"space-y-2"},Ce={class:"truncate pr-4 font-bold text-red-700 dark:text-red-400"},Ie={class:"flex items-center gap-3"},We={class:"text-[9px] font-black uppercase px-2 py-1 bg-white dark:bg-gray-800 rounded border border-red-200"},Te=["onClick"],Ve={key:4,class:"space-y-4 h-full flex flex-col"},De={class:"p-6 border-t dark:border-gray-700 flex justify-end items-center gap-3 bg-gray-50 dark:bg-gray-800/30"},Se=["disabled"],Ue={__name:"ArtefactImportWizardModal",setup(ze){const C=L(),g=Y(),M=W(()=>g.modalData("artefactImportWizard")),$=W(()=>{var n;return(n=M.value)==null?void 0:n.notebookId}),u=c("files"),y=c(!1),t=c({urls:[],wikipedia_urls:[],youtube_configs:[],files:[],manual_title:"",manual_content:""}),N=[{code:"en",name:"English"},{code:"fr",name:"French"},{code:"es",name:"Spanish"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"zh",name:"Chinese"},{code:"ja",name:"Japanese"},{code:"ru",name:"Russian"}],x=c(""),k=c(""),d=c({url:"",lang:"en"}),V=c(null),D=()=>{x.value.trim()&&(t.value.urls.push(x.value.trim()),x.value="")},S=()=>{k.value.trim()&&(t.value.wikipedia_urls.push(k.value.trim()),k.value="")},A=()=>{d.value.url.trim()&&(t.value.youtube_configs.push({...d.value}),d.value.url="")},P=n=>{t.value.files.push(...Array.from(n.target.files)),n.target.value=""},B=W(()=>t.value.urls.length>0||t.value.wikipedia_urls.length>0||t.value.youtube_configs.length>0||t.value.files.length>0||t.value.manual_title.trim()&&t.value.manual_content.trim());async function F(){if($.value){y.value=!0;try{(t.value.urls.length||t.value.wikipedia_urls.length||t.value.youtube_configs.length)&&await C.importSources({urls:t.value.urls,wikipedia_urls:t.value.wikipedia_urls,youtube_configs:t.value.youtube_configs});for(const n of t.value.files)await C.uploadSource(n,!0);t.value.manual_title&&t.value.manual_content&&await C.createManualArtefact(t.value.manual_title,t.value.manual_content),g.addNotification("Knowledge import tasks started.","success"),g.closeModal("artefactImportWizard")}catch{g.addNotification("Import failed.","error")}finally{y.value=!1}}}const j=[{id:"files",label:"Documents",icon:G},{id:"web",label:"Links",icon:ee},{id:"wiki",label:"Wikipedia",icon:R},{id:"youtube",label:"YouTube",icon:te},{id:"manual",label:"Manual Text",icon:X}];return(n,l)=>(s(),T(Z,{modalName:"artefactImportWizard",title:"Knowledge Import Wizard",maxWidthClass:"max-w-2xl"},{body:E(()=>[e("div",ae,[e("div",le,[(s(),o(b,null,v(j,a=>e("button",{key:a.id,onClick:r=>u.value=a.id,class:H(["flex items-center gap-2 px-4 py-2 text-[10px] font-black uppercase tracking-widest transition-all rounded-lg",u.value===a.id?"bg-white dark:bg-gray-700 text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"])},[(s(),T(O(a.icon),{class:"w-4 h-4"})),U(" "+p(a.label),1)],10,se)),64))]),e("div",oe,[u.value==="files"?(s(),o("div",re,[e("div",{onClick:l[0]||(l[0]=a=>V.value.click()),class:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-3xl p-12 text-center cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/10 transition-all group"},[i(h,{class:"w-12 h-12 mx-auto text-gray-300 group-hover:text-blue-500 mb-4 transition-colors"}),l[8]||(l[8]=e("p",{class:"text-sm font-black uppercase tracking-tighter text-gray-500"},"Drop Documents Here",-1)),l[9]||(l[9]=e("p",{class:"text-[10px] text-gray-400 mt-1 uppercase tracking-widest"},"PDF, DOCX, PPTX, TXT, MD",-1)),e("input",{type:"file",ref_key:"fileInput",ref:V,onChange:P,multiple:"",class:"hidden"},null,544)]),e("div",ne,[(s(!0),o(b,null,v(t.value.files,(a,r)=>(s(),o("div",{key:r,class:"px-3 py-1.5 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-xl text-[10px] font-bold flex items-center gap-2 border border-purple-100 dark:border-purple-800"},[e("span",ie,p(a.name),1),e("button",{onClick:I=>t.value.files.splice(r,1),class:"hover:text-red-500"},[i(w,{class:"w-3 h-3"})],8,ue)]))),128))])])):f("",!0),u.value==="web"?(s(),o("div",de,[e("div",ce,[m(e("input",{"onUpdate:modelValue":l[1]||(l[1]=a=>x.value=a),onKeyup:z(D,["enter"]),placeholder:"Enter link (https://...)",class:"input-field flex-grow"},null,544),[[_,x.value]]),e("button",{onClick:D,class:"btn btn-secondary"},[i(h,{class:"w-5 h-5"})])]),e("div",pe,[(s(!0),o(b,null,v(t.value.urls,(a,r)=>(s(),o("div",{key:r,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-xs border dark:border-gray-700"},[e("span",be,p(a),1),e("button",{onClick:I=>t.value.urls.splice(r,1),class:"text-red-500 hover:scale-110 transition-transform"},[i(w,{class:"w-4 h-4"})],8,ve)]))),128))])])):f("",!0),u.value==="wiki"?(s(),o("div",fe,[l[10]||(l[10]=e("div",{class:"p-4 bg-blue-50 dark:bg-blue-900/10 rounded-2xl border border-blue-100 dark:border-blue-900/30 text-[10px] text-blue-700 dark:text-blue-300 font-bold uppercase tracking-widest"}," Ground your notebook with full Wikipedia articles. ",-1)),e("div",me,[m(e("input",{"onUpdate:modelValue":l[2]||(l[2]=a=>k.value=a),onKeyup:z(S,["enter"]),placeholder:"Article Title or Wiki URL...",class:"input-field flex-grow"},null,544),[[_,k.value]]),e("button",{onClick:S,class:"btn btn-secondary"},[i(h,{class:"w-5 h-5"})])]),e("div",ge,[(s(!0),o(b,null,v(t.value.wikipedia_urls,(a,r)=>(s(),o("div",{key:r,class:"flex items-center justify-between p-3 bg-gray-100 dark:bg-gray-850 rounded-xl text-xs border-l-4 border-gray-400"},[e("span",xe,p(a),1),e("button",{onClick:I=>t.value.wikipedia_urls.splice(r,1),class:"text-red-500 hover:scale-110"},[i(w,{class:"w-4 h-4"})],8,ke)]))),128))])])):f("",!0),u.value==="youtube"?(s(),o("div",_e,[e("div",ye,[m(e("input",{"onUpdate:modelValue":l[3]||(l[3]=a=>d.value.url=a),placeholder:"YouTube Video URL...",class:"input-field flex-grow"},null,512),[[_,d.value.url]]),m(e("select",{"onUpdate:modelValue":l[4]||(l[4]=a=>d.value.lang=a),class:"input-field w-32"},[(s(),o(b,null,v(N,a=>e("option",{key:a.code,value:a.code},p(a.name),9,he)),64))],512),[[J,d.value.lang]]),e("button",{onClick:A,class:"btn btn-secondary"},[i(h,{class:"w-5 h-5"})])]),e("div",we,[(s(!0),o(b,null,v(t.value.youtube_configs,(a,r)=>(s(),o("div",{key:r,class:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/10 rounded-xl text-xs border-l-4 border-red-500"},[e("span",Ce,p(a.url),1),e("div",Ie,[e("span",We,p(a.lang),1),e("button",{onClick:I=>t.value.youtube_configs.splice(r,1),class:"text-red-500 hover:scale-110"},[i(w,{class:"w-4 h-4"})],8,Te)])]))),128))])])):f("",!0),u.value==="manual"?(s(),o("div",Ve,[m(e("input",{"onUpdate:modelValue":l[5]||(l[5]=a=>t.value.manual_title=a),placeholder:"Artefact Title (e.g. Brainstorming Notes)",class:"input-field font-bold"},null,512),[[_,t.value.manual_title]]),m(e("textarea",{"onUpdate:modelValue":l[6]||(l[6]=a=>t.value.manual_content=a),placeholder:"Paste or type content here...",class:"flex-grow input-field text-sm leading-relaxed min-h-[200px] resize-none"},null,512),[[_,t.value.manual_content]])])):f("",!0)]),e("div",De,[e("button",{onClick:l[7]||(l[7]=a=>Q(g).closeModal("artefactImportWizard")),class:"btn btn-secondary px-6"},"Cancel"),e("button",{onClick:F,disabled:!B.value||y.value,class:"btn btn-primary px-10 relative shadow-lg shadow-blue-500/20 font-black uppercase text-xs tracking-widest"},[y.value?(s(),T(q,{key:0,class:"w-4 h-4 mr-2 animate-spin"})):f("",!0),l[11]||(l[11]=U(" Start Ingestion "))],8,Se)])])]),_:1}))}},Pe=K(Ue,[["__scopeId","data-v-10ebd4eb"]]);export{Pe as default};
