import{K as S,c as v,s as r,o as M,w as g,n as $,l as d,g as h,e as t,H as U,p as _,t as u,j as k,z as b,V as w,d as p,F as V,i as j,m as B,R as A}from"./index-CEXks4lv.js";import{_ as D}from"./GenericModal-Br5hR2Sz.js";const N={class:"p-6 space-y-4"},T={class:"space-y-2"},z={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},F={class:"relative border border-gray-200 dark:border-gray-600 rounded-md"},R={class:"flex items-center p-2 border-b border-gray-200 dark:border-gray-600"},H={class:"max-h-60 overflow-y-auto"},I={key:0,class:"divide-y divide-gray-200 dark:divide-gray-600"},K=["id","value"],O=["for"],W={class:"font-medium"},q={key:1,class:"p-4 text-center text-sm text-gray-500"},G={class:"flex items-center justify-between mb-1"},J={class:"flex items-center gap-2"},P=["value"],Q={class:"flex justify-between items-center w-full"},X=["href"],Y={class:"flex space-x-3"},Z=["disabled"],se={__name:"EmailListModal",setup(ee){const m=S(),C=v(()=>m.modalData("emailList")),a=r([]),o=r([]),n=r(!0),f=r(",");M(()=>{var l;a.value=((l=C.value)==null?void 0:l.users)||[],o.value=a.value.map(e=>e.id)}),g(n,l=>{l?o.value=a.value.map(e=>e.id):o.value=[]}),g(o,l=>{l.length===a.value.length&&l.length>0?n.value=!0:l.length===0&&(n.value=!1)},{deep:!0});const i=v(()=>a.value.filter(l=>o.value.includes(l.id)).map(l=>l.email).filter(Boolean)),y=v(()=>i.value.join(f.value+" ")),x=v(()=>`mailto:?bcc=${i.value.join(",")}`),c=r(!1);function L(){i.value.length!==0&&m.copyToClipboard(y.value).then(l=>{l&&(c.value=!0,setTimeout(()=>{c.value=!1},2e3))})}return(l,e)=>(d(),$(D,{"modal-name":"emailList",title:"Copy Email List",onClose:e[5]||(e[5]=s=>k(m).closeModal("emailList")),maxWidthClass:"max-w-2xl"},{body:h(()=>[t("div",N,[t("div",T,[t("h4",z,"Recipients ("+u(o.value.length)+" / "+u(a.value.length)+")",1),t("div",F,[t("div",R,[b(t("input",{id:"select-all-manual",type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,512),[[w,n.value]]),e[6]||(e[6]=t("label",{for:"select-all-manual",class:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-200"},"Select All",-1))]),t("div",H,[a.value.length>0?(d(),p("div",I,[(d(!0),p(V,null,j(a.value,s=>(d(),p("div",{key:s.id,class:"p-2 flex items-center"},[b(t("input",{id:`manual-user-${s.id}`,type:"checkbox",value:s.id,"onUpdate:modelValue":e[1]||(e[1]=E=>o.value=E),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,8,K),[[w,o.value]]),t("label",{for:`manual-user-${s.id}`,class:"ml-3 text-sm text-gray-600 dark:text-gray-300"},[t("span",W,u(s.username),1),B(" ("+u(s.email)+") ",1)],8,O)]))),128))])):(d(),p("div",q," No users to list. "))])])]),t("div",null,[t("div",G,[e[9]||(e[9]=t("label",{for:"email-list-area",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Selected Emails",-1)),t("div",J,[e[8]||(e[8]=t("label",{for:"separator",class:"text-sm"},"Separator:",-1)),b(t("select",{id:"separator","onUpdate:modelValue":e[2]||(e[2]=s=>f.value=s),class:"input-field !py-1 !px-2 text-sm"},e[7]||(e[7]=[t("option",{value:","},"Comma",-1),t("option",{value:";"},"Semicolon",-1)]),512),[[A,f.value]])])]),t("textarea",{id:"email-list-area",value:y.value,rows:"5",readonly:"",class:"input-field mt-1 font-mono text-xs",placeholder:"Select users to see their emails here..."},null,8,P)])])]),footer:h(()=>[t("div",Q,[t("a",{href:x.value,target:"_blank",class:_(["btn btn-secondary",{"opacity-50 cursor-not-allowed":i.value.length===0}]),onClick:e[3]||(e[3]=U(s=>i.value.length>0&&(l.window.location.href=x.value),["prevent"]))}," Open in Email App ",10,X),e[10]||(e[10]=t("div",{class:"flex-grow"},null,-1)),t("div",Y,[t("button",{type:"button",onClick:L,class:_(["btn",c.value?"btn-success":"btn-secondary"]),disabled:i.value.length===0},u(c.value?"Copied!":"Copy List"),11,Z),t("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=s=>k(m).closeModal("emailList"))}," Done ")])])]),_:1}))}};export{se as default};
