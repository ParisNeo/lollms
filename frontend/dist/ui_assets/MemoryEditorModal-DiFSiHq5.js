import{u as x,b9 as M,b as m,r as u,S as g,f as w,o as S,w as f,a,A as k,t as C,p as E,J as p,K as b}from"./index-C3WkowhT.js";import{_ as T}from"./GenericModal-CcN9sQBb.js";const N=["disabled"],B={__name:"MemoryEditorModal",setup(U){const r=x(),d=M(),c=m(()=>r.modalData("memoryEditor")),y=m(()=>{var t;return(t=c.value)==null?void 0:t.memory}),s=m(()=>!!y.value),o=u(""),l=u(""),n=u(!1);g(c,t=>{t&&t.memory?(o.value=t.memory.title||"",l.value=t.memory.content||""):(o.value="",l.value="")},{immediate:!0});async function v(){if(!o.value.trim()||!l.value.trim()){r.addNotification("Title and content are required.","warning");return}n.value=!0;try{s.value?await d.updateMemory(y.value.id,{title:o.value,content:l.value}):await d.addMemory({title:o.value,content:l.value}),r.closeModal("memoryEditor")}catch{}finally{n.value=!1}}return(t,e)=>(S(),w(T,{modalName:"memoryEditor",title:s.value?"Edit Memory":"New Memory",maxWidthClass:"max-w-2xl"},{body:f(()=>[a("form",{onSubmit:E(v,["prevent"]),class:"space-y-4 p-1"},[a("div",null,[e[3]||(e[3]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"Title",-1)),p(a("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>o.value=i),type:"text",class:"input-field w-full",placeholder:"Memory Title (e.g. User Preferences)",required:"",autofocus:""},null,512),[[b,o.value]])]),a("div",null,[e[4]||(e[4]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"Content",-1)),p(a("textarea",{"onUpdate:modelValue":e[1]||(e[1]=i=>l.value=i),rows:"6",class:"input-field w-full resize-y",placeholder:"Memory content...",required:""},null,512),[[b,l.value]])])],32)]),footer:f(()=>[a("button",{onClick:e[2]||(e[2]=i=>k(r).closeModal("memoryEditor")),class:"btn btn-secondary"},"Cancel"),a("button",{onClick:v,class:"btn btn-primary",disabled:n.value},C(s.value?"Save Changes":"Create Memory"),9,N)]),_:1},8,["title"]))}};export{B as default};
