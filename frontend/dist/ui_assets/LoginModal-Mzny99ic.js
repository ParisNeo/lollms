import{q as S,d as l,l as s,e,u as L,K as V,s as i,c as B,o as j,w as z,T as E,n as I,g as N,f as A,H as v,h as u,z as w,Q as b,t as h,m as g}from"./index-DfxtQ8tA.js";import{_ as T}from"./GenericModal-DVtH5-xu.js";const U={},q={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function D(y,o){return s(),l("svg",q,o[0]||(o[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"},null,-1)]))}const P=S(U,[["render",D]]),$={class:"text-center mb-6"},F={class:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400 mb-3"},H={class:"mt-1"},R=["disabled"],W={class:"mt-1"},K=["disabled"],O={class:"mt-2 text-right"},Q={key:0,class:"rounded-md bg-red-50 dark:bg-red-900/20 p-3"},G={class:"flex"},J={class:"ml-3"},X={class:"text-sm font-medium text-red-800 dark:text-red-200"},Y=["disabled"],Z={key:0,class:"flex items-center"},ee={key:1},te={key:1,class:"relative"},se=["src"],oe={class:"text-sm text-center text-gray-600 dark:text-gray-400 pt-2"},ne={__name:"LoginModal",setup(y){const o=L(),n=V(),c=i(""),m=i(""),a=i(!1),d=i(""),x=i(null),r=B(()=>o.ssoClientConfig);j(()=>{o.ssoClientConfig.enabled||o.fetchSsoClientConfig()});function k(){window.location.href="/api/sso-client/login"}z(()=>n.activeModal,p=>{p==="login"&&E(()=>{var t;(t=x.value)==null||t.focus()})});const _=async()=>{d.value="",a.value=!0;try{await o.login(c.value,m.value)}catch{d.value="Incorrect username or password."}finally{a.value=!1}},C=()=>{n.closeModal("login"),n.openModal("register")},M=()=>{n.closeModal("login"),n.openModal("forgotPassword")};return(p,t)=>(s(),I(T,{modalName:"login",title:"Welcome Back",maxWidthClass:"max-w-md"},{body:N(()=>[e("div",$,[e("div",F,[A(P,{class:"w-6 h-6"})]),t[2]||(t[2]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Sign in to your account",-1)),t[3]||(t[3]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Enter your credentials to access your workspace.",-1))]),e("form",{onSubmit:v(_,["prevent"]),class:"space-y-5"},[e("div",null,[t[4]||(t[4]=e("label",{for:"login-username",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Username or Email",-1)),e("div",H,[w(e("input",{ref_key:"usernameInput",ref:x,"onUpdate:modelValue":t[0]||(t[0]=f=>c.value=f),type:"text",id:"login-username",required:"",disabled:a.value,class:"input-field w-full",placeholder:"Enter username",autocomplete:"username"},null,8,R),[[b,c.value]])])]),e("div",null,[t[5]||(t[5]=e("label",{for:"login-password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Password",-1)),e("div",W,[w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=f=>m.value=f),type:"password",id:"login-password",required:"",disabled:a.value,class:"input-field w-full",placeholder:"Enter password",autocomplete:"current-password"},null,8,K),[[b,m.value]])]),e("div",O,[e("a",{onClick:v(M,["prevent"]),href:"#",class:"text-sm font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 transition-colors"}," Forgot password? ")])]),d.value?(s(),l("div",Q,[e("div",G,[t[6]||(t[6]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",J,[e("h3",X,h(d.value),1)])])])):u("",!0),e("div",null,[e("button",{type:"submit",class:"btn btn-primary w-full justify-center py-2.5 text-sm font-semibold shadow-sm hover:shadow transition-all",disabled:a.value},[a.value?(s(),l("span",Z,t[7]||(t[7]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),g(" Signing in... ")]))):(s(),l("span",ee,"Sign In"))],8,Y)]),r.value.enabled?(s(),l("div",te,t[8]||(t[8]=[e("div",{class:"absolute inset-0 flex items-center"},[e("div",{class:"w-full border-t border-gray-300 dark:border-gray-600"})],-1),e("div",{class:"relative flex justify-center text-sm"},[e("span",{class:"px-2 bg-white dark:bg-gray-800 text-gray-500"},"Or continue with")],-1)]))):u("",!0),r.value.enabled?(s(),l("button",{key:2,onClick:k,type:"button",class:"btn btn-secondary w-full justify-center flex items-center gap-3 py-2.5"},[r.value.icon_url?(s(),l("img",{key:0,src:r.value.icon_url,alt:"",class:"w-5 h-5"},null,8,se)):u("",!0),g(" "+h(r.value.display_name),1)])):u("",!0),e("div",oe,[t[9]||(t[9]=g(" Don't have an account? ")),e("a",{onClick:v(C,["prevent"]),href:"#",class:"font-semibold text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 ml-1 transition-colors"}," Register now ")])],32)]),_:1}))}};export{ne as default};
