import{ag as _,q as o,c as p,o as y,w as f,d as b,l as v,e,h as S,G as h,m as k,p as d,y as x,K as w,t as N}from"./index-DAHZjTJM.js";import{u as F}from"./admin-IeybgfT4.js";const C={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg"},E={class:"space-y-6"},G={class:"toggle-container"},V=["disabled"],B={class:"mt-8 pt-5 border-t border-gray-200 dark:border-gray-700"},M={class:"flex justify-end"},O=["disabled"],R={__name:"NewsFeedSettings",setup(j){const l=F(),s=o({rss_feed_enabled:!1,rss_feed_check_interval_minutes:60}),r=o(!1),n=o(!1);let i="{}";const u=p(()=>l.globalSettings.filter(a=>a.category==="News Feed"));y(()=>{l.globalSettings.length===0?l.fetchGlobalSettings():c()}),f(()=>l.globalSettings,c,{deep:!0}),f(s,a=>{n.value=JSON.stringify(a)!==i},{deep:!0});function c(){const a={};u.value.length>0&&(u.value.forEach(t=>{a[t.key]=t.value}),s.value={...s.value,...a},i=JSON.stringify(s.value),n.value=!1)}async function m(){r.value=!0;try{await l.updateGlobalSettings({...s.value})}finally{r.value=!1}}return(a,t)=>(v(),b("div",C,[t[5]||(t[5]=e("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"text-xl font-semibold leading-6 text-gray-900 dark:text-white"}," News Feed Settings "),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Enable and configure the automatic fetching and processing of RSS feeds. ")],-1)),Object.keys(s.value).length?(v(),b("form",{key:0,onSubmit:h(m,["prevent"]),class:"p-6"},[e("div",E,[e("div",G,[t[2]||(t[2]=e("span",{class:"toggle-label"},[k(" Enable RSS Feed Service "),e("span",{class:"toggle-description"},"Globally enables or disables the automatic checking of RSS feeds.")],-1)),e("button",{onClick:t[0]||(t[0]=g=>s.value.rss_feed_enabled=!s.value.rss_feed_enabled),type:"button",class:d([s.value.rss_feed_enabled?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","toggle-switch"])},[e("span",{class:d([s.value.rss_feed_enabled?"translate-x-5":"translate-x-0","toggle-knob"])},null,2)],2)]),e("div",{class:d({"opacity-50 cursor-not-allowed":!s.value.rss_feed_enabled})},[t[3]||(t[3]=e("label",{for:"rss-interval",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Check Interval (minutes)",-1)),x(e("input",{id:"rss-interval","onUpdate:modelValue":t[1]||(t[1]=g=>s.value.rss_feed_check_interval_minutes=g),type:"number",min:"1",class:"input-field mt-1",disabled:!s.value.rss_feed_enabled},null,8,V),[[w,s.value.rss_feed_check_interval_minutes,void 0,{number:!0}]]),t[4]||(t[4]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"How often the server should check for new articles. A server restart is required for this change to take effect.",-1))],2)]),e("div",B,[e("div",M,[e("button",{type:"submit",class:"btn btn-primary",disabled:r.value||!n.value},N(r.value?"Saving...":"Save Settings"),9,O)])])],32)):S("",!0)]))}},D=_(R,[["__scopeId","data-v-6120a298"]]);export{D as default};
