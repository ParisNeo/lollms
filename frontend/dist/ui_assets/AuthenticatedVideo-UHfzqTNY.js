import{L as r,m as h,l as g,W as x,e as i,o as u,g as f,a0 as y,f as p,b as l,aD as k,a1 as _,aF as w,N as U}from"./index-DltwgrES.js";const L={class:"w-full relative bg-black rounded-2xl overflow-hidden shadow-lg border border-gray-800 group/authvideo"},R={key:0,class:"aspect-video flex flex-col items-center justify-center bg-gray-900"},j=["src"],V={key:1,class:"aspect-video flex flex-col items-center justify-center bg-red-950/20 text-red-500 p-6 text-center"},N={__name:"AuthenticatedVideo",props:{src:{type:String,required:!0}},setup(v){const c=v,n=r(null),a=r(!0),o=r(!1),b=r(null);let e=null;async function d(){if(!c.src){a.value=!1;return}a.value=!0,o.value=!1,e&&(URL.revokeObjectURL(e),e=null);try{const t=await U.get(c.src,{responseType:"blob",timeout:12e4});e=URL.createObjectURL(t.data),n.value=e}catch(t){console.error("Failed to fetch authenticated video:",t),o.value=!0}finally{a.value=!1}}function m(t){console.error("Video playback error:",t),o.value=!0}return h(()=>c.src,d),g(d),x(()=>{e&&URL.revokeObjectURL(e)}),(t,s)=>(u(),i("div",L,[a.value?(u(),i("div",R,[p(k,{class:"w-12 h-12 text-blue-500 animate-spin mb-4"}),s[0]||(s[0]=l("span",{class:"text-xs font-black uppercase tracking-widest text-gray-500"},"Buffering Secure Media...",-1))])):f("",!0),y(l("video",{ref_key:"videoRef",ref:b,controls:"",src:n.value,class:"w-full h-full max-h-[600px] object-contain",onError:m},null,40,j),[[_,!a.value&&n.value&&!o.value]]),o.value?(u(),i("div",V,[p(w,{class:"w-12 h-12 mb-4 opacity-50"}),s[1]||(s[1]=l("p",{class:"font-bold uppercase tracking-tighter"},"Access Denied or File Missing",-1)),s[2]||(s[2]=l("p",{class:"text-[10px] opacity-70 mt-2"},"The secure video stream could not be established.",-1))])):f("",!0)]))}};export{N as _};
