import{Z as fe,e as r,o as s,b as l,cq as Ut,u as jt,cv as Dt,a8 as Bt,ad as Rt,g as Mt,an as Ce,L as m,c as M,k as re,j as Lt,af as Pt,$ as Et,a as _,l as b,d as p,T as x,a7 as $,f as i,y as ne,a4 as We,t as y,J as S,cu as Ot,at as ge,d4 as Ht,a5 as Ze,K as W,F as I,n as T,R as Y,aB as Se,m as N,C as ee,aI as ve,aD as L,ar as pe,av as P,E as be,au as Ie,ap as Z,as as Te,W as zt,aq as Ft,aG as $e,aO as Gt,cw as Jt,M as Ne,ax as Ke,X as Wt,aC as Zt,dj as Kt,G as qt,a9 as Xt}from"./index-IMwO7oGA.js";import{I as Qt}from"./IconArchiveBox-BSpcsnO_.js";import{_ as Yt}from"./IconWrenchScrewdriver-J6ARp7CX.js";import{I as el}from"./IconType-C8xD0_9V.js";const tl={},ll={width:"50px",height:"50px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function al(ie,v){return s(),r("svg",ll,v[0]||(v[0]=[l("path",{d:"M17 17H17.01M17.4 14H18C18.9319 14 19.3978 14 19.7654 14.1522C20.2554 14.3552 20.6448 14.7446 20.8478 15.2346C21 15.6022 21 16.0681 21 17C21 17.9319 21 18.3978 20.8478 18.7654C20.6448 19.2554 20.2554 19.6448 19.7654 19.8478C19.3978 20 18.9319 20 18 20H6C5.06812 20 4.60218 20 4.23463 19.8478C3.74458 19.6448 3.35523 19.2554 3.15224 18.7654C3 18.3978 3 17.9319 3 17C3 16.0681 3 15.6022 3.15224 15.2346C3.35523 14.7446 3.74458 14.3552 4.23463 14.1522C4.60218 14 5.06812 14 6 14H6.6M12 15V4M12 15L9 12M12 15L15 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const sl=fe(tl,[["render",al]]),ol={},rl={width:"50px",height:"50px",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function nl(ie,v){return s(),r("svg",rl,v[0]||(v[0]=[Ut('<path d="M3 1H1V3H3V1Z" fill="currentColor"></path><path d="M3 5H1V7H3V5Z" fill="currentColor"></path><path d="M1 9H3V11H1V9Z" fill="currentColor"></path><path d="M3 13H1V15H3V13Z" fill="currentColor"></path><path d="M15 1H5V3H15V1Z" fill="currentColor"></path><path d="M15 5H5V7H15V5Z" fill="currentColor"></path><path d="M5 9H15V11H5V9Z" fill="currentColor"></path><path d="M15 13H5V15H15V13Z" fill="currentColor"></path>',8)]))}const il=fe(ol,[["render",nl]]),dl={},ul={width:"50px",height:"50px",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function cl(ie,v){return s(),r("svg",ul,v[0]||(v[0]=[l("path",{d:"M1.547 0.309 C 1.258 0.384,1.016 0.529,0.773 0.773 C 0.524 1.022,0.416 1.198,0.316 1.520 L 0.253 1.720 0.253 8.000 L 0.253 14.280 0.316 14.480 C 0.416 14.802,0.524 14.978,0.773 15.227 C 1.022 15.476,1.198 15.584,1.520 15.684 L 1.720 15.747 8.000 15.747 L 14.280 15.747 14.480 15.684 C 14.802 15.584,14.978 15.476,15.227 15.227 C 15.476 14.978,15.584 14.802,15.684 14.480 L 15.747 14.280 15.747 8.000 L 15.747 1.720 15.684 1.520 C 15.584 1.198,15.476 1.022,15.227 0.773 C 14.980 0.525,14.739 0.382,14.441 0.307 C 14.207 0.248,1.774 0.249,1.547 0.309 M14.170 1.830 L 14.240 1.901 14.240 3.324 L 14.240 4.747 8.000 4.747 L 1.760 4.747 1.760 3.324 L 1.760 1.901 1.830 1.830 L 1.901 1.760 8.000 1.760 L 14.099 1.760 14.170 1.830 M4.747 10.267 L 4.747 14.267 3.403 14.267 C 2.665 14.267,2.023 14.259,1.977 14.250 C 1.931 14.241,1.864 14.203,1.827 14.166 L 1.760 14.099 1.760 10.183 L 1.760 6.267 3.253 6.267 L 4.747 6.267 4.747 10.267 M14.240 10.183 L 14.240 14.099 14.173 14.166 C 14.136 14.203,14.069 14.241,14.023 14.250 C 13.977 14.259,12.214 14.267,10.103 14.267 L 6.267 14.267 6.267 10.267 L 6.267 6.267 10.253 6.267 L 14.240 6.267 14.240 10.183 ",stroke:"none","fill-rule":"evenodd",fill:"currentColor"},null,-1)]))}const gl=fe(dl,[["render",cl]]),vl={},pl={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function bl(ie,v){return s(),r("svg",pl,v[0]||(v[0]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"},null,-1)]))}const qe=fe(vl,[["render",bl]]),fl={class:"h-full w-full flex flex-col overflow-hidden bg-white dark:bg-gray-900"},yl={class:"flex items-center gap-2 w-full max-w-md pointer-events-auto"},xl={class:"flex items-center gap-1"},ml={class:"px-2 py-1 text-[10px] font-black uppercase bg-gray-100 dark:bg-gray-800 text-gray-500 rounded mr-2 border dark:border-gray-700"},hl={key:0,class:"flex bg-gray-100 dark:bg-gray-800 rounded p-0.5 mr-2"},kl={key:0,class:"absolute inset-0 bg-blue-500/10 border-4 border-dashed border-blue-500 rounded-lg z-50 flex items-center justify-center m-4 pointer-events-none"},wl={key:1,class:"bg-gray-50 dark:bg-gray-800 border-b dark:border-gray-700 pt-1 px-4 flex-shrink-0"},_l={class:"flex items-center justify-between"},Cl={class:"flex items-center gap-1 overflow-x-auto custom-scrollbar pb-0 no-scrollbar"},Sl=["onClick"],Il=["onClick"],Tl={class:"flex-grow flex min-h-0 relative"},$l={class:"flex-grow flex flex-col min-w-0 border-r dark:border-gray-700 relative"},Nl={key:0,class:"absolute inset-0 z-30 bg-white/95 dark:bg-gray-900/95 flex flex-col backdrop-blur-sm"},Al={class:"p-4 border-b dark:border-gray-700 flex items-center justify-between shadow-sm bg-white dark:bg-gray-800 flex-shrink-0"},Vl={class:"flex items-center gap-3"},Ul={class:"font-bold text-sm text-gray-900 dark:text-gray-100"},jl={class:"text-xs text-gray-500 dark:text-gray-400"},Dl={class:"text-xs font-mono text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded"},Bl={class:"flex-grow overflow-hidden relative"},Rl={class:"text-gray-400 shrink-0"},Ml={key:1,class:"flex-grow overflow-hidden flex flex-col relative h-full"},Ll={key:0,class:"h-full flex overflow-hidden"},Pl={class:"w-64 bg-gray-100 dark:bg-gray-850 border-r dark:border-gray-700 flex flex-col flex-shrink-0"},El={class:"flex-grow overflow-y-auto custom-scrollbar p-2 space-y-2"},Ol=["onDragstart","onDrop"],Hl=["onClick"],zl={class:"flex items-center justify-between mb-1"},Fl={class:"text-[10px] font-bold text-gray-400"},Gl=["onClick"],Jl={class:"text-xs font-bold truncate mb-1"},Wl={class:"h-16 bg-gray-100 dark:bg-gray-900 rounded overflow-hidden flex items-center justify-center"},Zl=["onClick"],Kl={class:"absolute bg-blue-500 text-white rounded-full p-0.5 shadow-sm"},ql={class:"flex-grow bg-gray-200 dark:bg-gray-900 flex flex-col relative overflow-hidden"},Xl={class:"flex-grow flex items-center justify-center p-8 overflow-auto"},Ql={key:0,class:"bg-white dark:bg-gray-800 shadow-2xl rounded-xl w-full max-w-4xl aspect-video p-8 flex flex-col relative group overflow-hidden"},Yl={key:0,class:"absolute inset-0"},ea={key:0,class:"w-full h-full p-6 flex flex-col bg-gray-100 dark:bg-gray-900 absolute inset-0 z-30"},ta={class:"flex justify-between items-center mb-4"},la={class:"text-sm font-bold uppercase text-gray-500"},aa={class:"flex gap-2"},sa=["disabled"],oa=["disabled"],ra=["placeholder"],na={class:"flex justify-between items-center"},ia={key:0,class:"flex items-center gap-2"},da={key:1,class:"flex-grow"},ua={class:"flex gap-2"},ca={key:1,class:"flex items-center justify-center h-full text-gray-400 italic flex-col gap-2 bg-gray-100 dark:bg-gray-900"},ga={class:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover/imgview:opacity-100 transition-opacity"},va={class:"absolute bottom-4 right-4 flex gap-2 opacity-0 group-hover/imgview:opacity-100 transition-opacity"},pa={key:2,class:"absolute bottom-16 left-4 w-1/3 h-48 bg-white dark:bg-gray-800 shadow-xl rounded-lg p-3 z-30 flex flex-col animate-fade-in-up border dark:border-gray-700"},ba={class:"flex justify-between items-center mb-2"},fa={class:"flex items-center gap-2"},ya=["title"],xa={key:0,class:"text-[10px] font-bold"},ma=["value"],ha={key:3,class:"absolute bottom-4 left-4 h-16 flex gap-2 overflow-x-auto p-1 bg-white/50 dark:bg-black/20 rounded z-20 backdrop-blur-sm opacity-0 group-hover/imgview:opacity-100 transition-opacity"},ka=["onClick"],wa=["onClick"],_a={key:1,class:"flex-grow flex gap-6 h-full items-center justify-center"},Ca={key:0,class:"w-full h-full flex flex-col justify-center"},Sa={class:"text-center mb-8"},Ia={class:"h-32 w-1/2 mx-auto flex flex-col"},Ta={class:"flex items-center justify-between mb-1"},$a={class:"flex items-center gap-2"},Na=["title"],Aa=["value"],Va={class:"h-32 mt-4 flex-shrink-0 flex flex-col"},Ua={class:"flex items-center justify-between mb-1"},ja={class:"flex items-center gap-2"},Da=["title"],Ba=["value"],Ra={key:0,class:"w-1/2 flex flex-col gap-2 relative"},Ma={class:"relative flex-grow bg-gray-100 dark:bg-gray-900 rounded-lg overflow-hidden border dark:border-gray-700 group/img"},La={key:0,class:"w-full h-full p-4 flex flex-col bg-gray-100 dark:bg-gray-800 absolute inset-0 z-20"},Pa={class:"flex justify-between items-center mb-2"},Ea={class:"flex justify-between items-center"},Oa={class:"flex items-center gap-2"},Ha={key:2,class:"flex items-center justify-center h-full text-gray-400 italic flex-col gap-2"},za={class:"absolute inset-0 bg-black/50 opacity-0 group-hover/img:opacity-100 transition-opacity flex items-center justify-center gap-2"},Fa={key:0,class:"h-16 flex gap-2 overflow-x-auto p-1 bg-white/50 dark:bg-black/20 rounded"},Ga=["onClick"],Ja=["onClick"],Wa={key:1,class:"text-gray-500"},Za={class:"bg-white dark:bg-gray-800 border-t dark:border-gray-700 p-4"},Ka={class:"flex gap-2"},qa={key:0,value:"update_slide_text"},Xa={class:"flex items-center gap-2"},Qa={key:1,class:"h-full flex flex-col bg-gray-50 dark:bg-gray-900"},Ya={class:"p-3 bg-white dark:bg-gray-800 border-b dark:border-gray-700 flex justify-between items-center shadow-sm z-10"},es={class:"flex items-center gap-4"},ts={class:"flex items-center gap-2"},ls={class:"flex-grow overflow-y-auto custom-scrollbar p-6 space-y-8"},as={class:"flex items-center justify-between px-6 py-3 bg-gray-50 dark:bg-gray-900/50 border-b dark:border-gray-700"},ss={class:"flex items-center gap-4"},os={class:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-black text-sm shadow-md"},rs={class:"flex items-center gap-2"},ns=["onUpdate:modelValue"],is=["value"],ds={class:"flex items-center gap-1"},us=["onClick","disabled"],cs=["onClick","disabled"],gs=["onClick"],vs={class:"p-6 grid grid-cols-1 lg:grid-cols-2 gap-8"},ps={class:"space-y-4"},bs=["onUpdate:modelValue"],fs={key:0},ys={class:"flex items-center justify-between mb-1"},xs=["onClick"],ms={class:"space-y-2"},hs=["onUpdate:modelValue"],ks=["onClick"],ws={class:"space-y-4"},_s={key:0},Cs=["onUpdate:modelValue"],Ss=["onUpdate:modelValue"],Is={class:"p-3 rounded-full bg-gray-100 dark:bg-gray-800"},Ts={key:2,class:"h-full flex flex-col"},$s={class:"p-2 border-b dark:border-gray-700 flex justify-between items-center bg-white dark:bg-gray-900 flex-shrink-0"},Ns={class:"flex gap-1 bg-gray-100 dark:bg-gray-800 rounded p-0.5 border dark:border-gray-700"},As={class:"flex-grow overflow-hidden relative"},Vs={key:0,class:"absolute inset-0 overflow-y-auto p-8 custom-scrollbar"},Us={key:3,class:"h-full overflow-y-auto p-4 custom-scrollbar"},js={class:"flex justify-between items-center mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"},Ds={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Bs=["onClick"],Rs={class:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2"},Ms={class:"text-white text-xs truncate"},Ls={key:1,class:"text-center text-gray-500 py-10 flex flex-col items-center"},Ps={key:4,class:"h-full overflow-y-auto p-8 custom-scrollbar bg-gray-100 dark:bg-gray-900"},Es={class:"mb-4"},Os={class:"flex gap-6"},Hs={class:"text-2xl font-bold mb-4 border-b pb-2 dark:border-gray-700"},zs={class:"list-disc pl-5 space-y-2 text-gray-700 dark:text-gray-300"},Fs={key:0,class:"w-1/2 flex flex-col gap-2"},Gs={class:"relative aspect-video bg-gray-200 dark:bg-gray-900 rounded-lg overflow-hidden border dark:border-gray-600"},Js={key:1,class:"flex items-center justify-center h-full text-gray-400 italic"},Ws={key:2,class:"flex-grow flex items-center justify-center text-gray-400"},Zs={key:3,class:"p-3 border-t dark:border-gray-700 bg-white dark:bg-gray-900 flex-shrink-0 z-20"},Ks={class:"flex items-center gap-2 mb-2 overflow-x-auto pb-1 custom-scrollbar"},qs=["onClick"],Xs={class:"flex gap-2 items-center"},Qs={class:"relative flex-grow"},Ys={class:"absolute right-1 top-1 bottom-1 flex items-center"},eo=["value"],to={class:"flex items-center"},lo=["disabled"],ao={class:"w-64 flex-shrink-0 flex flex-col bg-gray-50 dark:bg-gray-900 border-l dark:border-gray-700"},so={class:"p-3 border-b dark:border-gray-700 flex justify-between items-center flex-shrink-0"},oo={class:"flex gap-1"},ro={class:"flex-grow overflow-y-auto p-2 space-y-2 custom-scrollbar"},no={class:"flex items-center justify-between mb-2"},io={class:"flex items-center gap-2 min-w-0"},uo=["title"],co={class:"flex items-center"},go=["onClick"],vo=["onClick"],po=["onClick"],bo={key:0,class:"text-center py-10 text-[10px] uppercase font-bold text-gray-400 opacity-50 italic px-4"},fo={key:3,class:"h-full flex flex-col items-center justify-center text-gray-500 dark:text-gray-400"},yo={class:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl p-6 relative"},xo={class:"grid grid-cols-2 gap-4"},mo=["onClick"],ho={class:"p-2 rounded-full bg-gray-100 dark:bg-gray-700 text-blue-500 group-hover:bg-white dark:group-hover:bg-gray-800 mb-3"},ko={class:"font-bold text-gray-800 dark:text-gray-200"},wo={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},_o={class:"flex-grow flex items-center justify-center relative"},Co={class:"w-full h-full flex items-center justify-center p-10 select-none"},So={key:0,class:"w-full h-full flex items-center justify-center"},Io={key:1,class:"text-4xl text-gray-500 font-bold"},To={key:1,class:"text-center max-w-4xl"},$o={class:"text-6xl font-bold mb-4"},No={key:2,class:"w-full max-w-7xl grid grid-cols-2 gap-12 items-center"},Ao={class:"text-5xl font-bold mb-8 text-blue-400"},Vo={class:"text-3xl space-y-4 text-gray-300 text-left list-disc list-inside"},Uo={key:0,class:"col-span-1 flex justify-center"},jo={class:"absolute bottom-8 left-1/2 -translate-x-1/2 flex gap-4 opacity-0 hover:opacity-100 transition-opacity bg-gray-900/80 px-6 py-3 rounded-full backdrop-blur"},Do=["disabled"],Bo={class:"font-mono text-xl"},Ro=["disabled"],Oo={__name:"NotebookStudioView",setup(ie){const v=jt(),d=Dt(),Ae=Bt(),Xe=Rt(),Qe=Mt(),{on:Ye,off:et}=Pt(),{activeNotebook:c}=Ce(d),{tasks:tt}=Ce(Xe),{user:Ve}=Ce(Qe),C=m(""),de=m(!1),Ue=m(null),je=m(null),De=m(null),te=m(!0),A=m(null),K=m(new Set),k=m(""),ue=m(null),q=m(!1),E=m(!1),O=m("designer"),h=m(0),j=m(!1),B=m(""),D=m(!1),le=m(!1),X=m(!1),U=m(!1),H=m("browser");let R=null,z=null,ye=[];const xe=M(()=>{var a;return!!((a=Ve.value)!=null&&a.stt_binding_model_name)}),ae=m(!1),ce=m(-1),me=M(()=>{var a;return!!((a=Ve.value)!=null&&a.tti_binding_model_name)}),V=M(()=>{var a;return((a=c.value)==null?void 0:a.type)==="slides_making"}),Be=M(()=>{var t;const a=((t=c.value)==null?void 0:t.type)||"generic",e=[];return a==="data_analysis"?(e.push({value:"analyze_data",label:"Analyze Data"}),e.push({value:"generate_visualization_code",label:"Generate Plot Code"})):a==="book_building"?(e.push({value:"generate_outline",label:"Generate Outline"}),e.push({value:"write_chapter",label:"Write Chapter"})):a==="slides_making"?(e.push({value:"presentation_outline",label:"Slide Outline"}),e.push({value:"generate_slides_text",label:"Generate Slides"})):a==="benchmarks"&&e.push({value:"generate_test_cases",label:"Gen Test Cases"}),e.push({value:"text",label:"Free Text Gen"}),me.value&&e.push({value:"images",label:"Generate Images"}),e}),Re=[{id:"title_body",label:"Title & Bullets",description:"Standard layout with a title and bullet points.",layout:"TitleBody",icon:il,def:{title:"Slide Title",bullets:["• Point 1","• Point 2"],images:[],speech:""}},{id:"hybrid",label:"Hybrid (Text + Visual)",description:"Split layout with text on the left and visual on the right.",layout:"TitleImageBody",icon:ee,def:{title:"Visual Slide",bullets:["• Explain the visual"],images:[],image_prompt:"Describe image",speech:""}},{id:"image_only",label:"Full Image",description:"Immersive full-screen visual. Text is embedded or minimal.",layout:"ImageOnly",icon:ee,def:{title:"Image Slide",bullets:[],images:[],image_prompt:"Full screen image of...",speech:""}},{id:"title_only",label:"Section Header",description:"Large centered title for section breaks.",layout:"TitleOnly",icon:el,def:{title:"New Section",bullets:[],images:[],speech:""}}],F=M(()=>c.value?tt.value.find(a=>(a.name.includes(`Notebook ${c.value.id}`)||a.name.includes(c.value.id))&&(a.status==="running"||a.status==="pending")):null),g=M(()=>!c.value||!c.value.tabs?null:c.value.tabs.find(a=>a.id===A.value)||c.value.tabs[0]),f=M(()=>{if(!g.value)return{};if(g.value.type==="slides"||V.value)try{return typeof g.value.content=="string"?JSON.parse(g.value.content):g.value.content}catch{return{mode:"text",slides_data:[]}}return{}}),n=M(()=>{var a;return(a=f.value)!=null&&a.slides_data?f.value.slides_data[h.value]:null}),he=M(()=>{const a=n.value;return a&&a.images&&a.images.length>0});re(c,a=>{a&&a.tabs&&a.tabs.length>0?(!A.value||!a.tabs.find(e=>e.id===A.value))&&(A.value=a.tabs[a.tabs.length-1].id):a&&(!a.tabs||a.tabs.length===0)&&d.addTab()},{immediate:!0}),re(()=>{var a,e;return(e=(a=c.value)==null?void 0:a.tabs)==null?void 0:e.length},(a,e)=>{a>e&&F.value&&(A.value=c.value.tabs[a-1].id)}),re(()=>{var a,e;return(e=(a=F.value)==null?void 0:a.logs)==null?void 0:e.length},()=>{Xt(()=>{ue.value&&(ue.value.scrollTop=ue.value.scrollHeight)})},{deep:!0});function Me(a){c.value&&a.result&&a.result.notebook_id===c.value.id&&d.fetchNotebooks().then(()=>{d.selectNotebook(c.value.id),a.result.new_tab_id&&(A.value=a.result.new_tab_id)})}re(()=>{var e;const a=n.value;return{idx:h.value,imgIdx:a==null?void 0:a.selected_image_index,imagesLen:(e=a==null?void 0:a.images)==null?void 0:e.length}},(a,e)=>{var o;if(e&&a.idx===e.idx&&a.imgIdx===e.imgIdx&&a.imagesLen===e.imagesLen)return;const t=n.value;if(t){const u=(o=t.images)==null?void 0:o[a.imgIdx||0];B.value=(u==null?void 0:u.prompt)||t.image_prompt||""}j.value=!1,D.value=!1,le.value=!1,X.value=!1,_e()},{deep:!0,immediate:!0}),re([()=>{var a;return(a=c.value)==null?void 0:a.type},()=>{var a;return(a=f.value)==null?void 0:a.mode},O,Be],([a,e,t,o])=>{a==="slides_making"&&t==="designer"?e==="image_only"?k.value="images":k.value!=="images"&&k.value!=="update_slide_text"&&k.value!=="edit_image"&&(k.value="update_slide_text"):o&&o.length>0&&(o.some(w=>w.value===k.value)||(k.value=o[0].value))},{immediate:!0});async function lt(){v.openModal("notebookWizard")}async function at(a){a.is_loaded=!a.is_loaded,await d.saveActive()}async function st(a){await v.showConfirmation({title:"Remove Source?"})&&(c.value.artefacts=c.value.artefacts.filter(e=>e.filename!==a),await d.saveActive())}async function ot(a){v.openModal("sourceViewer",{title:a.filename,content:a.content,language:"markdown"})}async function rt(){if(!g.value)return;const{confirmed:a,value:e}=await v.showConfirmation({title:"Send to Chat",message:"Append current tab content to discussion context:",inputType:"select",inputOptions:Object.values(Ae.discussions).map(t=>({text:t.title,value:t.id})),confirmText:"Send"});if(a&&e){const t=g.value.content||(g.value.type==="gallery"?JSON.stringify(g.value.images):"");await Ae.appendToDataZone({discussionId:e,content:t}),v.addNotification("Content sent to chat.","success")}}function nt(){Ue.value.click()}async function it(a){const e=Array.from(a.target.files);!c.value||e.length===0||(v.addNotification(`Uploading ${e.length} source(s)...`,"info"),await Promise.all(e.map(t=>d.uploadSource(t))),a.target.value="")}async function dt(a){de.value=!1;const e=Array.from(a.dataTransfer.files);!c.value||e.length===0||(v.addNotification(`Uploading ${e.length} source(s)...`,"info"),await Promise.all(e.map(t=>d.uploadSource(t))))}async function ut(){if(!c.value)return;const{confirmed:a,value:e}=await v.showConfirmation({title:"Scrape URL",message:"Enter URL:",inputType:"text",confirmText:"Scrape"});a&&e&&await d.scrapeUrl(e)}async function ct(){c.value&&(await d.selectNotebook(c.value.id),v.addNotification("Notebook refreshed.","success"))}async function gt(){if(!g.value)return;const{confirmed:a,value:e}=await v.showConfirmation({title:"Convert to Source",message:"Enter title:",inputType:"text",confirmText:"Convert"});if(a&&e){const t=g.value.content||(g.value.type==="gallery"?JSON.stringify(g.value.images):"");await d.createTextArtefact(e,t)}}function vt(a){A.value=a}async function pt(){d.addTab(),setTimeout(()=>{c.value.tabs.length>0&&(A.value=c.value.tabs[c.value.tabs.length-1].id)},100)}function bt(a){confirm("Delete this tab?")&&(d.removeTab(a),A.value===a&&(A.value=c.value.tabs.length>0?c.value.tabs[0].id:null))}function ft(a){K.value.has(a)?K.value.delete(a):K.value.add(a)}function yt(){d.generateTitle()}function Le(a){v.openImageViewer({imageList:[{src:a,prompt:"Notebook Image"}],startIndex:0})}async function Pe(a){try{const e=await Ne.get(`/api/notebooks/${c.value.id}/export`,{params:{format:a},responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a");o.href=t;const u=a==="json"?"json":"pptx";o.setAttribute("download",`${c.value.title}.${u}`),document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch{v.addNotification("Export failed.","error")}}function Q(){var t;const a=Array.from(K.value),e=q.value||V.value?A.value:null;if(q.value&&!A.value){v.addNotification("No active tab.","warning");return}if(k.value==="images"&&!C.value.trim()&&(!q.value||!((t=g.value)!=null&&t.title))){v.addNotification("Prompt required.","warning");return}if(V.value&&O.value==="designer"){if(!C.value.trim()){v.addNotification("Prompt required.","warning");return}k.value==="images"||k.value==="edit_image"?C.value.startsWith("SLIDE_INDEX:")||(C.value=`SLIDE_INDEX:${h.value}| ${C.value}`):k.value==="update_slide_text"&&(C.value.startsWith("SLIDE_INDEX:")||(C.value=`SLIDE_INDEX:${h.value}| ${C.value}`))}!C.value.trim()&&k.value!=="images"&&k.value!=="generate_slides_text"&&k.value!=="edit_image"||(d.processWithAi(C.value,a,k.value,e,X.value),C.value="",K.value.clear())}function Ee(a,e){q.value=!0,k.value="images",C.value=`Create a high quality visual representation for the slide titled "${e}".`,Q()}function Oe(){B.value.trim()&&(k.value=D.value?"edit_image":"images",C.value=B.value,Q(),j.value=!1,D.value=!1)}function xt(){D.value=!0,j.value=!0}function He(a,e){const t=f.value;t.slides_data&&t.slides_data[a]&&(t.slides_data[a].selected_image_index=e,g.value.content=JSON.stringify(t),d.saveActive())}function ke(a){ce.value=a,ae.value=!0}function mt(a){const e=f.value;e.slides_data||(e.slides_data=[]);const t={id:crypto.randomUUID(),layout:a.layout,title:a.def.title,bullets:[...a.def.bullets],images:[...a.def.images],image_prompt:a.def.image_prompt||"",speech:a.def.speech||"",selected_image_index:0},o=ce.value>=0?ce.value+1:e.slides_data.length;e.slides_data.splice(o,0,t),g.value.content=JSON.stringify(e),d.saveActive(),h.value=o,ae.value=!1,ce.value=-1}function ze(a){const e=f.value;e.slides_data&&(e.slides_data.splice(a,1),g.value.content=JSON.stringify(e),d.saveActive(),h.value>=e.slides_data.length&&(h.value=Math.max(0,e.slides_data.length-1)))}function Fe(a,e){const t=f.value,o=t.slides_data[a];!o||!o.images||(o.images.splice(e,1),o.selected_image_index>=o.images.length?o.selected_image_index=Math.max(0,o.images.length-1):e<o.selected_image_index&&o.selected_image_index--,g.value.content=JSON.stringify(t),d.saveActive())}const se=m(null);function ht(a,e){se.value=a,e.dataTransfer.effectAllowed="move"}function kt(a){if(se.value===null||se.value===a)return;const e=f.value,t=e.slides_data.splice(se.value,1)[0];e.slides_data.splice(a,0,t),g.value.content=JSON.stringify(e),d.saveActive(),h.value=a,se.value=null}function Ge(a,e){const t=f.value,o=a+e;if(o<0||o>=t.slides_data.length)return;const u=t.slides_data.splice(a,1)[0];t.slides_data.splice(o,0,u),g.value.content=JSON.stringify(t),d.saveActive(),h.value=o}function wt(){je.value.click()}async function _t(a){const e=a.target.files[0];e&&(await Je(e),a.target.value="")}async function Ct(a){const e=(a.clipboardData||a.originalEvent.clipboardData).items;let t=!1;for(let o in e){const u=e[o];if(u.kind==="file"&&u.type.startsWith("image/")){const w=u.getAsFile();await Je(w),t=!0}}t&&a.preventDefault()}async function Je(a){if(c.value)try{v.addNotification("Uploading image...","info");const e=new FormData;e.append("file",a);const o=(await Ne.post(`/api/notebooks/${c.value.id}/upload`,e)).data.filename,u=`/api/notebooks/${c.value.id}/assets/${o}`,w=f.value,J=w.slides_data[h.value];J.images||(J.images=[]),J.images.push({path:u,prompt:"Uploaded Image"}),J.selected_image_index=J.images.length-1,g.value.content=JSON.stringify(w),await d.saveActive(),v.addNotification("Image added to slide.","success")}catch(e){v.addNotification("Upload failed.","error"),console.error(e)}}function St(){De.value.click()}async function It(a){const e=a.target.files[0];if(e){E.value=!0;try{const t=await d.describeImage(e);t&&(B.value=t)}finally{E.value=!1,a.target.value=""}}}function Tt(a){if(!a)return null;const e=a.split("/");return e[e.length-1]}async function $t(){var o,u;const a=(u=(o=f.value)==null?void 0:o.slides_data)==null?void 0:u[h.value];if(!a||!a.images||a.images.length===0)return;const e=a.images[a.selected_image_index||0];if(!e||!e.path)return;const t=Tt(e.path);if(t){E.value=!0;try{const w=await d.describeAsset(t);w&&(B.value=w)}finally{E.value=!1}}}function we(){U.value?_e():Nt()}async function Nt(){if(H.value==="browser"){if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){v.addNotification("Browser speech recognition not supported.","error");return}const a=window.SpeechRecognition||window.webkitSpeechRecognition;R=new a,R.continuous=!0,R.interimResults=!0,R.lang="en-US",R.onresult=e=>{let t="";for(let o=e.resultIndex;o<e.results.length;++o)e.results[o].isFinal&&(t+=e.results[o][0].transcript);if(t){const o=(n.value.speech?n.value.speech+" ":"")+t;oe(o)}},R.start(),U.value=!0}else try{const a=await navigator.mediaDevices.getUserMedia({audio:!0});z=new MediaRecorder(a),ye=[],z.ondataavailable=e=>ye.push(e.data),z.onstop=async()=>{const e=new Blob(ye,{type:"audio/wav"}),t=new FormData;t.append("file",e,"recording.wav");try{v.addNotification("Transcribing...","info");const u=(await Ne.post("/api/stt",t)).data.text;if(u){const w=(n.value.speech?n.value.speech+" ":"")+u;oe(w),d.saveActive()}}catch{v.addNotification("Transcription failed.","error")}},z.start(),U.value=!0}catch(a){console.error(a),v.addNotification("Microphone access denied.","error")}}function _e(){H.value==="browser"&&R?(R.stop(),R=null,d.saveActive()):z&&(z.stop(),z.stream.getTracks().forEach(a=>a.stop()),z=null),U.value=!1}function oe(a){if(!n.value)return;n.value.speech=a;const e=f.value;g.value.content=JSON.stringify(e)}function G(){const a=f.value;g.value.content=JSON.stringify(a),d.saveActive()}function At(a){f.value.slides_data[a].bullets.push("• New Point"),G()}function Vt(a,e){f.value.slides_data[a].bullets.splice(e,1),G()}return Lt(()=>{d.fetchNotebooks(),v.setPageTitle({title:""}),Ye("task:completed",Me)}),Et(()=>{v.setPageTitle({title:""}),et("task:completed",Me),_e()}),(a,e)=>(s(),r("div",fl,[p(c)?(s(),_(We,{key:0,to:"#global-header-title-target"},[l("div",yl,[x(l("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>p(c).title=t),onBlur:e[1]||(e[1]=(...t)=>p(d).saveActive&&p(d).saveActive(...t)),class:"flex-grow bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 focus:ring-0 text-center font-bold text-gray-800 dark:text-gray-200 transition-colors px-2 py-1 outline-none truncate"},null,544),[[$,p(c).title]]),l("button",{onClick:yt,class:"p-1.5 rounded-full hover:bg-purple-100 dark:hover:bg-purple-900/30 text-purple-500 transition-colors"},[i(ne,{class:"w-4 h-4"})])])])):b("",!0),p(c)?(s(),_(We,{key:1,to:"#global-header-actions-target"},[l("div",xl,[l("span",ml,y(p(c).type?p(c).type.replace("_"," "):"Generic"),1),V.value?(s(),r("div",hl,[l("button",{onClick:e[2]||(e[2]=t=>O.value="designer"),class:S(["px-2 py-1 text-xs font-bold rounded",O.value==="designer"?"bg-white dark:bg-gray-700 shadow text-blue-600":"text-gray-500"])},"Designer",2),l("button",{onClick:e[3]||(e[3]=t=>O.value="planner"),class:S(["px-2 py-1 text-xs font-bold rounded",O.value==="planner"?"bg-white dark:bg-gray-700 shadow text-purple-600":"text-gray-500"])},"Planner",2)])):b("",!0),l("button",{onClick:e[4]||(e[4]=t=>Pe("pptx")),class:"btn-icon p-2",title:"Export PPTX"},[i(Ot,{class:"w-4 h-4"})]),l("button",{onClick:e[5]||(e[5]=t=>Pe("json")),class:"btn-icon p-2",title:"Export JSON"},[i(sl,{class:"w-4 h-4"})]),l("button",{onClick:ct,class:"btn-icon p-2",title:"Refresh"},[i(ge,{class:"w-4 h-4"})]),V.value?b("",!0):(s(),r("button",{key:1,onClick:gt,class:"btn-icon p-2",title:"Save Source"},[i(Qt,{class:"w-4 h-4"})])),V.value?b("",!0):(s(),r("button",{key:2,onClick:rt,class:"btn-icon p-2",title:"Send Chat"},[i(Ht,{class:"w-4 h-4"})])),l("button",{onClick:e[6]||(e[6]=(...t)=>p(d).saveActive&&p(d).saveActive(...t)),class:"btn-primary-flat p-2",title:"Save"},[i(Ze,{class:"w-4 h-4"})])])])):b("",!0),p(c)?(s(),r("div",{key:2,class:"h-full flex flex-col relative",onDragover:e[58]||(e[58]=W(t=>de.value=!0,["prevent"])),onDragleave:e[59]||(e[59]=t=>de.value=!1),onDrop:W(dt,["prevent"])},[de.value?(s(),r("div",kl,e[66]||(e[66]=[l("p",{class:"text-2xl font-black text-blue-600 uppercase"},"Drop Research Sources Here",-1)]))):b("",!0),V.value?b("",!0):(s(),r("div",wl,[l("div",_l,[l("div",Cl,[(s(!0),r(I,null,T(p(c).tabs,t=>(s(),r("div",{key:t.id,class:S(["group relative flex items-center gap-2 px-4 py-2 rounded-t-lg cursor-pointer transition-colors border-t border-x border-transparent hover:bg-gray-200 dark:hover:bg-gray-700 flex-shrink-0 text-xs font-medium uppercase tracking-wide",A.value===t.id?"bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 text-blue-600 dark:text-blue-400 font-bold shadow-sm":"text-gray-500 hover:text-gray-700"])},[l("span",{onClick:o=>vt(t.id),class:"truncate max-w-[120px]"},y(t.title),9,Sl),l("button",{onClick:W(o=>bt(t.id),["stop"]),class:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500"},[i(L,{class:"w-3 h-3"})],8,Il)],2))),128)),l("button",{onClick:pt,class:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 mb-0.5 flex-shrink-0"},[i(Y,{class:"w-4 h-4"})])])])])),l("div",Tl,[l("div",$l,[F.value?(s(),r("div",Nl,[l("div",Al,[l("div",Vl,[i(Se,{class:"w-5 h-5 text-blue-600 animate-spin"}),l("div",null,[l("h3",Ul,y(F.value.name),1),l("p",jl,y(F.value.description),1)])]),l("div",Dl,y(F.value.progress)+"%",1)]),l("div",Bl,[l("div",{ref_key:"logsContainer",ref:ue,class:"absolute inset-0 overflow-y-auto p-4 font-mono text-xs text-gray-600 dark:text-gray-300 space-y-1"},[(s(!0),r(I,null,T(F.value.logs,(t,o)=>(s(),r("div",{key:o,class:"flex gap-2"},[l("span",Rl,"["+y(new Date(t.timestamp).toLocaleTimeString())+"]",1),l("span",{class:S({"text-red-500":t.level==="ERROR","text-yellow-500":t.level==="WARNING"})},y(t.message),3)]))),128))],512)])])):b("",!0),g.value?(s(),r("div",Ml,[V.value&&O.value==="designer"?(s(),r("div",Ll,[l("div",Pl,[e[69]||(e[69]=l("div",{class:"p-3 border-b dark:border-gray-700 bg-gray-50 dark:bg-gray-800"},[l("h3",{class:"text-xs font-black uppercase text-gray-500 tracking-widest"},"Slides")],-1)),l("div",El,[(s(!0),r(I,null,T(f.value.slides_data,(t,o)=>(s(),r("div",{key:t.id,class:"relative group",draggable:"true",onDragstart:u=>ht(o,u),onDragover:e[7]||(e[7]=W(()=>{},["prevent"])),onDrop:u=>kt(o)},[l("div",{onClick:u=>h.value=o,class:S(["p-2 bg-white dark:bg-gray-800 rounded border-2 cursor-pointer transition-all hover:shadow-md",h.value===o?"border-blue-500 ring-1 ring-blue-500":"border-transparent hover:border-gray-300 dark:hover:border-gray-600"])},[l("div",zl,[l("span",Fl,"#"+y(o+1),1),l("button",{onClick:W(u=>ze(o),["stop"]),class:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500"},[i(Ke,{class:"w-3 h-3"})],8,Gl)]),l("div",Jl,y(t.title),1),l("div",Wl,[t.images&&t.images.length>0?(s(),_(P,{key:0,src:t.images[t.selected_image_index||0].path,class:"w-full h-full object-cover"},null,8,["src"])):(s(),_(ee,{key:1,class:"w-6 h-6 text-gray-300"}))])],10,Hl),l("div",{class:"absolute -bottom-3 left-0 right-0 h-4 opacity-0 hover:opacity-100 flex items-center justify-center z-10 cursor-pointer",onClick:u=>ke(o)},[e[67]||(e[67]=l("div",{class:"h-0.5 w-full bg-blue-500"},null,-1)),l("div",Kl,[i(Y,{class:"w-3 h-3"})])],8,Zl)],40,Ol))),128)),l("button",{onClick:e[8]||(e[8]=t=>{var o;return ke(((o=f.value.slides_data)==null?void 0:o.length)-1)}),class:"w-full py-3 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg text-gray-400 hover:text-blue-500 hover:border-blue-400 transition-colors flex items-center justify-center gap-2"},[i(Y,{class:"w-4 h-4"}),e[68]||(e[68]=N(" Add Slide "))])])]),l("div",ql,[l("div",Xl,[n.value?(s(),r("div",Ql,[n.value.layout==="ImageOnly"?(s(),r("div",Yl,[j.value?(s(),r("div",ea,[l("div",ta,[l("h3",la,y(D.value?"Edit Image (Img2Img)":"Regenerate Image (Txt2Img)"),1),l("div",aa,[l("button",{onClick:St,class:"p-2 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-full",title:"Describe Uploaded Image",disabled:E.value},[E.value?(s(),_(Se,{key:0,class:"w-5 h-5 animate-spin"})):(s(),_(ee,{key:1,class:"w-5 h-5"}))],8,sa),l("input",{type:"file",ref_key:"fileInputDescribe",ref:De,onChange:It,accept:"image/*",class:"hidden"},null,544),he.value&&!D.value?(s(),r("button",{key:0,onClick:$t,class:"p-2 text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-full",title:"Describe Current Image",disabled:E.value},[E.value?(s(),_(Se,{key:0,class:"w-5 h-5 animate-spin"})):(s(),_(ve,{key:1,class:"w-5 h-5"}))],8,oa)):b("",!0),l("button",{onClick:e[9]||(e[9]=t=>j.value=!1),class:"p-2 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-800 rounded-full",title:"Cancel"},[i(L,{class:"w-5 h-5"})])])]),x(l("textarea",{"onUpdate:modelValue":e[10]||(e[10]=t=>B.value=t),class:"flex-grow w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg p-4 resize-none focus:ring-2 focus:ring-blue-500 mb-4 font-mono text-sm",placeholder:D.value?"Describe how to edit the image...":"Describe the image you want to generate..."},null,8,ra),[[$,B.value]]),l("div",na,[D.value?(s(),r("div",da)):(s(),r("div",ia,[x(l("input",{type:"checkbox",id:"direct-prompt","onUpdate:modelValue":e[11]||(e[11]=t=>X.value=t),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,512),[[pe,X.value]]),e[70]||(e[70]=l("label",{for:"direct-prompt",class:"text-sm text-gray-600 dark:text-gray-400 cursor-pointer select-none"},"Use text directly (No AI refinement)",-1))])),l("div",ua,[l("button",{onClick:e[12]||(e[12]=t=>j.value=!1),class:"btn btn-secondary"},"Cancel"),l("button",{onClick:Oe,class:"btn btn-primary"},[i(ne,{class:"w-4 h-4 mr-2"}),N(" "+y(D.value?"Apply Edit":"Generate"),1)])])])])):(s(),r("div",{key:1,class:"w-full h-full relative group/imgview outline-none focus:outline-none",tabindex:"0",onPaste:Ct},[n.value.images&&n.value.images.length>0?(s(),_(P,{key:0,src:n.value.images[n.value.selected_image_index||0].path,class:"w-full h-full object-cover"},null,8,["src"])):(s(),r("div",ca,[i(ee,{class:"w-12 h-12 opacity-50"}),e[71]||(e[71]=l("span",null,"No image. Paste image or generate.",-1))])),l("div",ga,[l("button",{onClick:wt,class:"p-2 rounded-full bg-black/50 text-white hover:bg-black/80 backdrop-blur-md",title:"Upload Image"},[i(Y,{class:"w-5 h-5"})]),l("input",{type:"file",ref_key:"fileInputSlide",ref:je,onChange:_t,accept:"image/*",class:"hidden"},null,544)]),l("div",va,[l("button",{onClick:e[13]||(e[13]=t=>le.value=!le.value),class:"btn btn-secondary btn-sm shadow-lg backdrop-blur-md bg-white/80 dark:bg-black/60"},[i(be,{class:"w-4 h-4 mr-1"}),e[72]||(e[72]=N(" Notes"))]),l("button",{onClick:xt,class:"btn btn-secondary btn-sm shadow-lg backdrop-blur-md bg-white/80 dark:bg-black/60"},[i(Yt,{class:"w-4 h-4 mr-1"}),e[73]||(e[73]=N(" Edit Image"))]),l("button",{onClick:e[14]||(e[14]=t=>{j.value=!0,D.value=!1}),class:"btn btn-secondary btn-sm shadow-lg backdrop-blur-md bg-white/80 dark:bg-black/60"},[i(Ie,{class:"w-4 h-4 mr-1"}),e[74]||(e[74]=N(" Regen Prompt"))]),l("button",{onClick:e[15]||(e[15]=t=>Ee(h.value,n.value.title)),class:"btn btn-primary btn-sm shadow-lg"},[i(ge,{class:"w-4 h-4 mr-1"}),e[75]||(e[75]=N(" Regen"))])]),le.value?(s(),r("div",pa,[l("div",ba,[l("div",fa,[e[77]||(e[77]=l("span",{class:"text-xs font-bold text-gray-500 uppercase"},"Speaker Notes",-1)),l("button",{onClick:we,class:S(["p-1 rounded-full transition-colors flex items-center gap-1",U.value?"bg-red-100 text-red-600 animate-pulse":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500"]),title:U.value?"Stop Recording":"Start Recording"},[i(be,{class:"w-3.5 h-3.5"}),U.value?(s(),r("span",xa,"REC")):b("",!0)],10,ya),xe.value?x((s(),r("select",{key:0,"onUpdate:modelValue":e[16]||(e[16]=t=>H.value=t),class:"text-[10px] bg-transparent border-none p-0 text-gray-400 focus:ring-0 cursor-pointer"},e[76]||(e[76]=[l("option",{value:"browser"},"Browser",-1),l("option",{value:"backend"},"Backend Model",-1)]),512)),[[Z,H.value]]):b("",!0)]),l("button",{onClick:e[17]||(e[17]=t=>le.value=!1)},[i(L,{class:"w-4 h-4 text-gray-400"})])]),l("textarea",{value:n.value.speech,onInput:e[18]||(e[18]=t=>oe(t.target.value)),onBlur:e[19]||(e[19]=(...t)=>p(d).saveActive&&p(d).saveActive(...t)),class:"flex-grow w-full bg-gray-50 dark:bg-gray-900 border-none rounded p-2 text-sm resize-none focus:ring-1 focus:ring-blue-500"},null,40,ma)])):b("",!0),n.value.images&&n.value.images.length>1?(s(),r("div",ha,[(s(!0),r(I,null,T(n.value.images,(t,o)=>(s(),r("div",{key:o,class:"relative group/thumb flex-shrink-0 w-20 h-full"},[l("div",{onClick:u=>He(h.value,o),class:S(["w-full h-full rounded cursor-pointer border-2 transition-colors overflow-hidden",(n.value.selected_image_index||0)===o?"border-blue-500":"border-transparent opacity-60 hover:opacity-100"])},[i(P,{src:t.path,class:"w-full h-full object-cover"},null,8,["src"])],10,ka),l("button",{onClick:W(u=>Fe(h.value,o),["stop"]),class:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center opacity-0 group-hover/thumb:opacity-100 transition-opacity hover:bg-red-600 shadow-sm",title:"Delete Variant"},[i(L,{class:"w-3 h-3"})],8,wa)]))),128))])):b("",!0)],32))])):(s(),r("div",_a,[n.value.layout==="TitleOnly"?(s(),r("div",Ca,[l("div",Sa,[x(l("input",{"onUpdate:modelValue":e[20]||(e[20]=t=>n.value.title=t),onBlur:e[21]||(e[21]=(...t)=>p(d).saveActive&&p(d).saveActive(...t)),class:"text-5xl font-bold w-full bg-transparent border-none focus:ring-0 p-0 text-center text-gray-900 dark:text-gray-100 placeholder-gray-400",placeholder:"Section Title"},null,544),[[$,n.value.title]])]),l("div",Ia,[l("div",Ta,[e[79]||(e[79]=l("label",{class:"text-xs font-bold text-gray-400 uppercase block"},"Speaker Notes",-1)),l("div",$a,[l("button",{onClick:we,class:S(["p-1 rounded-full transition-colors flex items-center gap-1",U.value?"bg-red-100 text-red-600 animate-pulse":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500"]),title:U.value?"Stop Recording":"Start Recording"},[i(be,{class:"w-3.5 h-3.5"})],10,Na),xe.value?x((s(),r("select",{key:0,"onUpdate:modelValue":e[22]||(e[22]=t=>H.value=t),class:"text-[10px] bg-transparent border-none p-0 text-gray-400 focus:ring-0 cursor-pointer"},e[78]||(e[78]=[l("option",{value:"browser"},"Browser",-1),l("option",{value:"backend"},"Backend",-1)]),512)),[[Z,H.value]]):b("",!0)])]),l("textarea",{value:n.value.speech,onInput:e[23]||(e[23]=t=>oe(t.target.value)),onBlur:e[24]||(e[24]=(...t)=>p(d).saveActive&&p(d).saveActive(...t)),class:"w-full h-full bg-gray-50 dark:bg-gray-700/50 border-none rounded p-3 text-sm text-gray-700 dark:text-gray-300 resize-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter speaker notes here..."},null,40,Aa)])])):(s(),r(I,{key:1},[l("div",{class:S(n.value.layout==="TitleImageBody"?"w-1/2 flex flex-col h-full":"w-full flex flex-col h-full")},[x(l("input",{"onUpdate:modelValue":e[25]||(e[25]=t=>n.value.title=t),onBlur:e[26]||(e[26]=(...t)=>p(d).saveActive&&p(d).saveActive(...t)),class:"text-3xl font-bold w-full bg-transparent border-none focus:ring-0 p-0 mb-4 text-gray-900 dark:text-gray-100 placeholder-gray-400",placeholder:"Slide Title"},null,544),[[$,n.value.title]]),x(l("textarea",{"onUpdate:modelValue":e[27]||(e[27]=t=>n.value.bullets=t),onBlur:e[28]||(e[28]=()=>{n.value.bullets=Array.isArray(n.value.bullets)?n.value.bullets:n.value.bullets.split(`
`),p(d).saveActive()}),class:"flex-grow w-full bg-transparent border-none focus:ring-0 p-0 text-lg text-gray-700 dark:text-gray-300 resize-none list-disc",placeholder:`• Point 1
• Point 2`},null,544),[[$,n.value.bullets]]),l("div",Va,[l("div",Ua,[e[81]||(e[81]=l("label",{class:"text-xs font-bold text-gray-400 uppercase block"},"Speaker Notes",-1)),l("div",ja,[l("button",{onClick:we,class:S(["p-1 rounded-full transition-colors flex items-center gap-1",U.value?"bg-red-100 text-red-600 animate-pulse":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500"]),title:U.value?"Stop Recording":"Start Recording"},[i(be,{class:"w-3.5 h-3.5"})],10,Da),xe.value?x((s(),r("select",{key:0,"onUpdate:modelValue":e[29]||(e[29]=t=>H.value=t),class:"text-[10px] bg-transparent border-none p-0 text-gray-400 focus:ring-0 cursor-pointer"},e[80]||(e[80]=[l("option",{value:"browser"},"Browser",-1),l("option",{value:"backend"},"Backend",-1)]),512)),[[Z,H.value]]):b("",!0)])]),l("textarea",{value:n.value.speech,onInput:e[30]||(e[30]=t=>oe(t.target.value)),onBlur:e[31]||(e[31]=(...t)=>p(d).saveActive&&p(d).saveActive(...t)),class:"w-full h-full bg-gray-50 dark:bg-gray-700/50 border-none rounded p-3 text-sm text-gray-700 dark:text-gray-300 resize-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter speaker notes here..."},null,40,Ba)])],2),n.value.layout==="TitleImageBody"?(s(),r("div",Ra,[l("div",Ma,[j.value?(s(),r("div",La,[l("div",Pa,[e[82]||(e[82]=l("h3",{class:"text-xs font-bold uppercase text-gray-500"},"Edit Prompt",-1)),l("button",{onClick:e[32]||(e[32]=t=>j.value=!1),class:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700"},[i(L,{class:"w-4 h-4"})])]),x(l("textarea",{"onUpdate:modelValue":e[33]||(e[33]=t=>B.value=t),class:"flex-grow w-full text-xs bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded p-2 resize-none mb-2 font-mono"},null,512),[[$,B.value]]),l("div",Ea,[l("div",Oa,[x(l("input",{type:"checkbox",id:"direct-prompt-hybrid","onUpdate:modelValue":e[34]||(e[34]=t=>X.value=t),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,512),[[pe,X.value]]),e[83]||(e[83]=l("label",{for:"direct-prompt-hybrid",class:"text-xs text-gray-600 dark:text-gray-400 cursor-pointer select-none"},"Use directly",-1))]),l("button",{onClick:Oe,class:"btn btn-primary btn-sm"},[i(ne,{class:"w-3 h-3 mr-1"}),e[84]||(e[84]=N(" Generate"))])])])):b("",!0),n.value.images&&n.value.images.length>0?(s(),_(P,{key:1,src:n.value.images[n.value.selected_image_index||0].path,class:"w-full h-full object-cover"},null,8,["src"])):(s(),r("div",Ha,[i(ee,{class:"w-12 h-12 opacity-50"}),e[85]||(e[85]=l("span",null,"No visual",-1))])),l("div",za,[l("button",{onClick:e[35]||(e[35]=t=>j.value=!0),class:"btn btn-secondary btn-sm"},[i(Ie,{class:"w-4 h-4 mr-1"}),e[86]||(e[86]=N(" Edit Prompt"))]),l("button",{onClick:e[36]||(e[36]=t=>Ee(h.value,n.value.title)),class:"btn btn-primary btn-sm"},[i(ge,{class:"w-4 h-4 mr-1"}),e[87]||(e[87]=N(" Regen"))]),l("button",{onClick:e[37]||(e[37]=t=>{var o;return Le((o=n.value.images[n.value.selected_image_index||0])==null?void 0:o.path)}),class:"btn btn-secondary btn-sm"},[i(ve,{class:"w-4 h-4"})])])]),n.value.images&&n.value.images.length>1?(s(),r("div",Fa,[(s(!0),r(I,null,T(n.value.images,(t,o)=>(s(),r("div",{key:o,class:"relative group/thumb flex-shrink-0 w-20 h-full"},[l("div",{onClick:u=>He(h.value,o),class:S(["w-full h-full rounded cursor-pointer border-2 transition-colors overflow-hidden",(n.value.selected_image_index||0)===o?"border-blue-500":"border-transparent opacity-60 hover:opacity-100"])},[i(P,{src:t.path,class:"w-full h-full object-cover"},null,8,["src"])],10,Ga),l("button",{onClick:W(u=>Fe(h.value,o),["stop"]),class:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center opacity-0 group-hover/thumb:opacity-100 transition-opacity hover:bg-red-600 shadow-sm",title:"Delete Variant"},[i(L,{class:"w-3 h-3"})],8,Ja)]))),128))])):b("",!0)])):b("",!0)],64))]))])):(s(),r("div",Wa,"Select a slide to edit."))]),l("div",Za,[l("div",Ka,[x(l("select",{"onUpdate:modelValue":e[38]||(e[38]=t=>k.value=t),class:"bg-gray-100 dark:bg-gray-700 border-none rounded px-3 py-2 text-sm font-bold uppercase text-gray-600 dark:text-gray-300"},[f.value.mode!=="image_only"?(s(),r("option",qa,"Update Text")):b("",!0),e[88]||(e[88]=l("option",{value:"images"},"Update Image",-1)),e[89]||(e[89]=l("option",{value:"edit_image"},"Edit Image (Img2Img)",-1))],512),[[Z,k.value]]),x(l("input",{"onUpdate:modelValue":e[39]||(e[39]=t=>C.value=t),onKeyup:Te(Q,["enter"]),placeholder:"Instructions for this slide...",class:"input-field flex-grow"},null,544),[[$,C.value]]),l("div",Xa,[x(l("input",{type:"checkbox",id:"gen-speech","onUpdate:modelValue":e[40]||(e[40]=t=>a.generateSpeakerNotes=t),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,512),[[pe,a.generateSpeakerNotes]]),e[90]||(e[90]=l("label",{for:"gen-speech",class:"text-xs text-gray-600 dark:text-gray-400 cursor-pointer select-none"},"Gen Notes",-1))]),l("button",{onClick:Q,class:"btn btn-primary"},[i(ne,{class:"w-4 h-4 mr-2"}),e[91]||(e[91]=N(" Update Slide"))])])])])])):V.value&&O.value==="planner"?(s(),r("div",Qa,[l("div",Ya,[l("div",es,[e[94]||(e[94]=l("h3",{class:"text-sm font-black uppercase text-gray-500 tracking-widest"},"Presentation Plan",-1)),e[95]||(e[95]=l("div",{class:"h-4 w-px bg-gray-300 dark:bg-gray-700"},null,-1)),l("div",ts,[e[93]||(e[93]=l("label",{class:"text-[10px] font-bold text-gray-400 uppercase"},"Mode:",-1)),x(l("select",{"onUpdate:modelValue":e[41]||(e[41]=t=>f.value.mode=t),onChange:G,class:"text-[10px] font-bold uppercase bg-gray-100 dark:bg-gray-700 border-none rounded px-2 py-1"},e[92]||(e[92]=[l("option",{value:"text"},"Standard (Text Focus)",-1),l("option",{value:"hybrid"},"Hybrid (Visual focus)",-1),l("option",{value:"image_only"},"Full Visual",-1)]),544),[[Z,f.value.mode]])])]),l("button",{onClick:e[42]||(e[42]=(...t)=>p(d).saveActive&&p(d).saveActive(...t)),class:"btn-primary-flat btn-sm"},[i(Ze,{class:"w-4 h-4 mr-1"}),e[96]||(e[96]=N(" Save Changes"))])]),l("div",ls,[(s(!0),r(I,null,T(f.value.slides_data,(t,o)=>(s(),r("div",{key:t.id,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border-l-4 border-l-blue-500 overflow-hidden transition-all hover:shadow-xl"},[l("div",as,[l("div",ss,[l("div",os,"#"+y(o+1),1),l("div",rs,[i(gl,{class:"w-4 h-4 text-gray-400"}),x(l("select",{"onUpdate:modelValue":u=>t.layout=u,onChange:G,class:"text-xs font-bold uppercase bg-transparent border-none focus:ring-0 p-0 cursor-pointer hover:text-blue-500"},[(s(),r(I,null,T(Re,u=>l("option",{key:u.id,value:u.layout},y(u.label),9,is)),64))],40,ns),[[Z,t.layout]])])]),l("div",ds,[l("button",{onClick:u=>Ge(o,-1),disabled:o===0,class:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 disabled:opacity-30"},[i(qe,{class:"w-4 h-4"})],8,us),l("button",{onClick:u=>Ge(o,1),disabled:o===f.value.slides_data.length-1,class:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 disabled:opacity-30"},[i(qe,{class:"w-4 h-4 rotate-180"})],8,cs),l("button",{onClick:u=>ze(o),class:"p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-red-500"},[i(Ke,{class:"w-4 h-4"})],8,gs)])]),l("div",vs,[l("div",ps,[l("div",null,[e[97]||(e[97]=l("label",{class:"text-[10px] font-black uppercase text-gray-400 tracking-widest mb-1 block"},"Slide Title",-1)),x(l("input",{"onUpdate:modelValue":u=>t.title=u,onBlur:G,class:"w-full bg-gray-50 dark:bg-gray-900 border-none rounded-lg px-4 py-2 font-bold text-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:"Title..."},null,40,bs),[[$,t.title]])]),t.layout!=="ImageOnly"&&t.layout!=="TitleOnly"?(s(),r("div",fs,[l("div",ys,[e[98]||(e[98]=l("label",{class:"text-[10px] font-black uppercase text-gray-400 tracking-widest block"},"Bullet Points",-1)),l("button",{onClick:u=>At(o),class:"text-[10px] font-bold text-blue-500 hover:underline"},"+ Add Point",8,xs)]),l("div",ms,[(s(!0),r(I,null,T(t.bullets,(u,w)=>(s(),r("div",{key:w,class:"flex gap-2 group/bullet"},[x(l("input",{"onUpdate:modelValue":J=>t.bullets[w]=J,onBlur:G,class:"flex-grow bg-gray-50 dark:bg-gray-900 border-none rounded px-3 py-1.5 text-sm text-gray-700 dark:text-gray-300"},null,40,hs),[[$,t.bullets[w]]]),l("button",{onClick:J=>Vt(o,w),class:"opacity-0 group-hover/bullet:opacity-100 text-red-400 hover:text-red-500 transition-opacity"},[i(L,{class:"w-4 h-4"})],8,ks)]))),128))])])):b("",!0)]),l("div",ws,[t.layout!=="TitleOnly"?(s(),r("div",_s,[e[99]||(e[99]=l("label",{class:"text-[10px] font-black uppercase text-gray-400 tracking-widest mb-1 block"},"Visual Prompt",-1)),x(l("textarea",{"onUpdate:modelValue":u=>t.image_prompt=u,onBlur:G,class:"w-full bg-gray-50 dark:bg-gray-900 border-none rounded-lg px-4 py-2 text-xs font-mono text-gray-600 dark:text-gray-400 h-24 resize-none focus:ring-2 focus:ring-blue-500",placeholder:"Visual description for AI..."},null,40,Cs),[[$,t.image_prompt]])])):b("",!0),l("div",null,[e[100]||(e[100]=l("label",{class:"text-[10px] font-black uppercase text-gray-400 tracking-widest mb-1 block"},"Speaker Notes",-1)),x(l("textarea",{"onUpdate:modelValue":u=>t.speech=u,onBlur:G,class:"w-full bg-blue-50/50 dark:bg-blue-900/10 border-none rounded-lg px-4 py-2 text-sm text-gray-700 dark:text-gray-300 h-24 resize-none focus:ring-2 focus:ring-blue-500",placeholder:"What to say on this slide..."},null,40,Ss),[[$,t.speech]])])])])]))),128)),l("button",{onClick:e[43]||(e[43]=t=>{var o;return ke(((o=f.value.slides_data)==null?void 0:o.length)-1)}),class:"w-full py-8 border-4 border-dashed border-gray-200 dark:border-gray-800 rounded-2xl text-gray-400 hover:text-blue-500 hover:border-blue-400 hover:bg-blue-50/30 dark:hover:bg-blue-900/10 transition-all flex flex-col items-center justify-center gap-3"},[l("div",Is,[i(Y,{class:"w-8 h-8"})]),e[101]||(e[101]=l("span",{class:"font-black uppercase tracking-widest"},"Append New Slide",-1))])])])):b("",!0),!V.value&&g.value.type==="markdown"?(s(),r("div",Ts,[l("div",$s,[x(l("input",{"onUpdate:modelValue":e[44]||(e[44]=t=>g.value.title=t),onBlur:e[45]||(e[45]=(...t)=>p(d).saveActive&&p(d).saveActive(...t)),class:"bg-transparent border-none text-sm font-bold text-gray-700 dark:text-gray-300 focus:ring-0 px-2 w-full",placeholder:"Tab Title"},null,544),[[$,g.value.title]]),l("div",Ns,[l("button",{onClick:e[46]||(e[46]=t=>te.value=!0),class:S(["p-1 rounded",te.value?"bg-white dark:bg-gray-600 text-blue-600 shadow-sm":"text-gray-500"])},[i(ve,{class:"w-4 h-4"})],2),l("button",{onClick:e[47]||(e[47]=t=>te.value=!1),class:S(["p-1 rounded",te.value?"text-gray-500":"bg-white dark:bg-gray-600 text-blue-600 shadow-sm"])},[i(Ie,{class:"w-4 h-4"})],2)])]),l("div",As,[te.value?(s(),r("div",Vs,[(s(),_(zt,{content:g.value.content,key:g.value.id+g.value.content.length,class:"prose dark:prose-invert max-w-none"},null,8,["content"]))])):(s(),_(Ft,{key:1,modelValue:g.value.content,"onUpdate:modelValue":e[48]||(e[48]=t=>g.value.content=t),onBlur:p(d).saveActive,class:"h-full"},null,8,["modelValue","onBlur"]))])])):!V.value&&g.value.type==="gallery"?(s(),r("div",Us,[l("div",js,[x(l("input",{"onUpdate:modelValue":e[49]||(e[49]=t=>g.value.title=t),onBlur:e[50]||(e[50]=(...t)=>p(d).saveActive&&p(d).saveActive(...t)),class:"bg-transparent border-none text-lg font-bold p-0 focus:ring-0 w-full",placeholder:"Gallery Title"},null,544),[[$,g.value.title]]),me.value?(s(),r("button",{key:0,onClick:e[51]||(e[51]=(...t)=>a.handleRegenerateImages&&a.handleRegenerateImages(...t)),class:"btn-secondary btn-sm flex-shrink-0",title:"Regenerate Images"},[i(ge,{class:"w-4 h-4 mr-1"}),e[102]||(e[102]=N(" Regenerate"))])):b("",!0)]),g.value.images&&g.value.images.length>0?(s(),r("div",Ds,[(s(!0),r(I,null,T(g.value.images,(t,o)=>(s(),r("div",{key:o,class:"relative group aspect-square rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 border dark:border-gray-700 cursor-pointer",onClick:u=>Le(t.path)},[i(P,{src:t.path,class:"w-full h-full object-cover"},null,8,["src"]),l("div",Rs,[l("p",Ms,y(t.prompt),1)])],8,Bs))),128))])):(s(),r("div",Ls,[e[103]||(e[103]=l("p",null,"No images generated.",-1)),me.value?(s(),r("button",{key:0,onClick:e[52]||(e[52]=(...t)=>a.handleRegenerateImages&&a.handleRegenerateImages(...t)),class:"mt-2 text-blue-500 hover:underline"},"Generate Images")):b("",!0)]))])):!V.value&&g.value.type==="slides"&&f.value.slides_data?(s(),r("div",Ps,[l("div",Es,[x(l("input",{"onUpdate:modelValue":e[53]||(e[53]=t=>g.value.title=t),onBlur:e[54]||(e[54]=(...t)=>p(d).saveActive&&p(d).saveActive(...t)),class:"w-full p-2 bg-transparent border-b text-xl font-bold",placeholder:"Presentation Title"},null,544),[[$,g.value.title]])]),(s(!0),r(I,null,T(f.value.slides_data,(t,o)=>(s(),r("div",{key:t.id,class:"bg-white dark:bg-gray-800 p-6 shadow-md rounded-xl mb-8 border dark:border-gray-700 relative group"},[l("div",Os,[l("div",{class:S(t.layout==="TitleImageBody"?"w-1/2":"w-full")},[l("h3",Hs,y(t.title),1),l("ul",zs,[(s(!0),r(I,null,T(t.bullets,(u,w)=>(s(),r("li",{key:w},y(u),1))),128))])],2),t.layout==="TitleImageBody"?(s(),r("div",Fs,[l("div",Gs,[t.images&&t.images.length>0?(s(),_(P,{key:0,src:t.images[t.selected_image_index||0].path,class:"w-full h-full object-cover"},null,8,["src"])):(s(),r("div",Js,"No image generated"))])])):b("",!0)])]))),128))])):b("",!0)])):(s(),r("div",Ws,"No tab selected.")),V.value?b("",!0):(s(),r("div",Zs,[l("div",Ks,[e[104]||(e[104]=l("span",{class:"text-[10px] font-bold text-gray-400 uppercase flex-shrink-0 tracking-wider"},"Input Context",-1)),(s(!0),r(I,null,T(p(c).tabs,t=>(s(),r("div",{key:"ctx-"+t.id,onClick:o=>ft(t.id),class:S(["px-2 py-0.5 rounded text-[10px] cursor-pointer border transition-colors select-none whitespace-nowrap flex-shrink-0 uppercase font-bold",K.value.has(t.id)?"bg-blue-50 border-blue-200 text-blue-600":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-500"])},y(t.title),11,qs))),128))]),l("div",Xs,[l("div",Qs,[x(l("input",{"onUpdate:modelValue":e[55]||(e[55]=t=>C.value=t),placeholder:"Describe what you want to do...",class:"input-field w-full pr-32 !text-sm",onKeyup:Te(Q,["enter"])},null,544),[[$,C.value]]),l("div",Ys,[x(l("select",{"onUpdate:modelValue":e[56]||(e[56]=t=>k.value=t),class:"bg-gray-100 dark:bg-gray-700 border-none text-[10px] rounded px-2 py-1 outline-none cursor-pointer text-gray-600 dark:text-gray-300 font-bold uppercase h-full hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"},[(s(!0),r(I,null,T(Be.value,t=>(s(),r("option",{key:t.value,value:t.value},y(t.label),9,eo))),128))],512),[[Z,k.value]])])]),l("div",to,[x(l("input",{type:"checkbox",id:"modify-tab","onUpdate:modelValue":e[57]||(e[57]=t=>q.value=t),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,512),[[pe,q.value]]),e[105]||(e[105]=l("label",{for:"modify-tab",class:"ml-1 text-[10px] uppercase font-bold text-gray-500 cursor-pointer select-none"},"Update Active",-1))]),l("button",{onClick:Q,disabled:!!F.value,class:"btn btn-primary gap-2 w-20 flex-shrink-0 justify-center"},[i(ne,{class:"w-4 h-4"}),e[106]||(e[106]=N(" Go"))],8,lo)])]))]),l("div",ao,[l("div",so,[e[107]||(e[107]=l("span",{class:"font-black text-[10px] uppercase text-gray-500 tracking-widest"},"Sources",-1)),l("div",oo,[l("button",{onClick:nt,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-500",title:"Upload File"},[i($e,{class:"w-4 h-4"})]),l("input",{type:"file",ref_key:"fileInput",ref:Ue,onChange:it,multiple:"",class:"hidden"},null,544),l("button",{onClick:ut,class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-500",title:"Scrape URL"},[i(Gt,{class:"w-4 h-4"})])])]),l("div",ro,[(s(!0),r(I,null,T(p(c).artefacts,t=>(s(),r("div",{key:t.filename,class:"p-2.5 bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-700 shadow-sm group hover:shadow-md transition-shadow"},[l("div",no,[l("div",io,[i(Wt,{class:"w-3.5 h-3.5 text-blue-400 shrink-0"}),l("span",{class:"text-xs truncate font-bold text-gray-700 dark:text-gray-300",title:t.filename},y(t.filename),9,uo)]),l("div",co,[l("button",{onClick:o=>ot(t),class:"text-gray-400 hover:text-blue-500 mr-1 opacity-0 group-hover:opacity-100 transition-opacity",title:"View Content"},[i(ve,{class:"w-3.5 h-3.5"})],8,go),l("button",{onClick:o=>st(t.filename),class:"text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity"},[i(L,{class:"w-3.5 h-3.5"})],8,vo)])]),l("button",{onClick:o=>at(t),class:S(["w-full flex items-center justify-between text-[9px] font-bold uppercase tracking-tighter px-2 py-1 rounded transition-colors",t.is_loaded?"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700 text-gray-500"])},[l("span",null,y(t.is_loaded?"Active":"Inactive"),1),t.is_loaded?(s(),_(Zt,{key:0,class:"w-3 h-3"})):(s(),_(Kt,{key:1,class:"w-3 h-3"}))],10,po)]))),128)),p(c).artefacts.length===0?(s(),r("div",bo,"No sources added.")):b("",!0)])])])],32)):(s(),r("div",fo,[i(Jt,{class:"w-16 h-16 mb-4 text-gray-300 dark:text-gray-600"}),e[109]||(e[109]=l("p",{class:"text-lg font-medium"},"Select a notebook from the sidebar to begin.",-1)),l("button",{onClick:lt,class:"mt-4 btn btn-primary flex items-center gap-2"},[i(Y,{class:"w-4 h-4"}),e[108]||(e[108]=N(" Create New Notebook"))])])),ae.value?(s(),r("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:e[61]||(e[61]=W(t=>ae.value=!1,["self"]))},[l("div",yo,[l("button",{onClick:e[60]||(e[60]=t=>ae.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},[i(L,{class:"w-5 h-5"})]),e[110]||(e[110]=l("h2",{class:"text-xl font-bold mb-4 text-gray-900 dark:text-white"},"Choose Slide Template",-1)),l("div",xo,[(s(),r(I,null,T(Re,t=>l("button",{key:t.id,onClick:o=>mt(t),class:"flex flex-col items-start p-4 border dark:border-gray-700 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:border-blue-300 transition-colors group text-left"},[l("div",ho,[(s(),_(qt(t.icon),{class:"w-6 h-6"}))]),l("h3",ko,y(t.label),1),l("p",wo,y(t.description),1)],8,mo)),64))])])])):b("",!0),a.isPresenting?(s(),r("div",{key:5,class:"fixed inset-0 z-[100] bg-black text-white flex flex-col",onKeydown:e[65]||(e[65]=Te((...t)=>a.handlePresentationKeydown&&a.handlePresentationKeydown(...t),["window"]))},[l("div",_o,[l("div",Co,[f.value.mode==="image_only"||n.value.layout==="ImageOnly"?(s(),r("div",So,[he.value?(s(),_(P,{key:0,src:n.value.images[n.value.selected_image_index||0].path,class:"max-w-full max-h-full object-contain"},null,8,["src"])):(s(),r("div",Io,"No Image"))])):n.value.layout==="TitleOnly"?(s(),r("div",To,[l("h1",$o,y(n.value.title),1)])):(s(),r("div",No,[l("div",{class:S(n.value.layout==="TitleImageBody"?"col-span-1":"col-span-2 text-center")},[l("h2",Ao,y(n.value.title),1),l("ul",Vo,[(s(!0),r(I,null,T(n.value.bullets,(t,o)=>(s(),r("li",{key:o},y(t),1))),128))])],2),n.value.layout==="TitleImageBody"?(s(),r("div",Uo,[he.value?(s(),_(P,{key:0,src:n.value.images[n.value.selected_image_index||0].path,class:"max-w-full max-h-[70vh] object-contain rounded-lg shadow-2xl"},null,8,["src"])):b("",!0)])):b("",!0)]))]),l("div",jo,[l("button",{onClick:e[62]||(e[62]=(...t)=>a.prevSlide&&a.prevSlide(...t)),class:"text-white hover:text-blue-400 disabled:opacity-30",disabled:h.value===0},[i($e,{class:"w-8 h-8 -rotate-90"})],8,Do),l("span",Bo,y(h.value+1)+" / "+y(f.value.slides_data.length),1),l("button",{onClick:e[63]||(e[63]=(...t)=>a.nextSlide&&a.nextSlide(...t)),class:"text-white hover:text-blue-400 disabled:opacity-30",disabled:h.value===f.value.slides_data.length-1},[i($e,{class:"w-8 h-8 rotate-90"})],8,Ro),e[111]||(e[111]=l("div",{class:"w-px h-8 bg-gray-700 mx-2"},null,-1)),l("button",{onClick:e[64]||(e[64]=(...t)=>a.endPresentation&&a.endPresentation(...t)),class:"text-red-400 hover:text-red-300 font-bold uppercase text-sm tracking-wider"},"Exit")])])],32)):b("",!0)]))}};export{Oo as default};
