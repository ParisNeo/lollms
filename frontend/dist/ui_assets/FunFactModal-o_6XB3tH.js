import{K as w,c as d,s as c,w as S,n as C,l as f,g as y,e as t,j as N,t as b,H as h,z as x,d as k,F as M,i as V,R as L,L as B,f as E,al as T,m as p,E as m}from"./index-CEXks4lv.js";import{_ as U}from"./GenericModal-Br5hR2Sz.js";const $=["value"],D={class:"bg-blue-50 dark:bg-gray-900/50 rounded-xl p-4 border border-blue-100 dark:border-gray-700"},I={class:"flex items-center gap-2 mb-3 text-blue-700 dark:text-blue-400"},j={class:"flex justify-end gap-3"},q=["disabled"],G={__name:"FunFactModal",setup(R){const l=w(),i=d(()=>l.modalData("funFact")),o=d(()=>{var a;return(a=i.value)==null?void 0:a.fact}),F=d(()=>{var a;return(a=i.value)==null?void 0:a.preselectedCategoryId}),v=d(()=>{var a;return(a=i.value)==null?void 0:a.onSave}),s=c({content:"",category_id:null}),r=c(!1),u=c([]);async function _(){try{const a=await m.get("/api/admin/fun-facts/categories");u.value=a.data}catch(a){console.error("Failed to fetch categories:",a)}}S(i,async a=>{var e;a&&(await _(),o.value?s.value={content:o.value.content,category_id:o.value.category.id}:s.value={content:"",category_id:F.value||((e=u.value[0])==null?void 0:e.id)||null})},{immediate:!0});async function g(){if(!(!s.value.content.trim()||!s.value.category_id)){r.value=!0;try{o.value?(await m.put(`/api/admin/fun-facts/${o.value.id}`,s.value),l.addNotification("Fun fact updated.","success")):(await m.post("/api/admin/fun-facts",s.value),l.addNotification("Fun fact created.","success")),v.value&&v.value(),l.closeModal("funFact")}finally{r.value=!1}}}return(a,e)=>(f(),C(U,{modalName:"funFact",title:o.value?"Edit Fun Fact":"New Fun Fact"},{body:y(()=>[t("form",{onSubmit:h(g,["prevent"]),class:"p-6 space-y-6"},[t("div",null,[e[3]||(e[3]=t("label",{for:"fact-category",class:"block text-sm font-medium"},"Category",-1)),x(t("select",{id:"fact-category","onUpdate:modelValue":e[0]||(e[0]=n=>s.value.category_id=n),class:"input-field mt-1",required:""},[(f(!0),k(M,null,V(u.value,n=>(f(),k("option",{key:n.id,value:n.id},b(n.name),9,$))),128))],512),[[L,s.value.category_id]])]),t("div",null,[e[4]||(e[4]=t("label",{for:"fact-content",class:"block text-sm font-medium"},"Content (Markdown Supported)",-1)),x(t("textarea",{id:"fact-content","onUpdate:modelValue":e[1]||(e[1]=n=>s.value.content=n),rows:"6",class:"input-field mt-1",placeholder:"Enter the fun fact here...",required:""},null,512),[[B,s.value.content]])]),t("div",D,[t("div",I,[E(T,{class:"w-4 h-4"}),e[5]||(e[5]=t("span",{class:"text-xs font-black uppercase tracking-widest"},"Formatting Guide",-1))]),e[6]||(e[6]=t("ul",{class:"text-[11px] space-y-2 text-gray-600 dark:text-gray-400 font-mono"},[t("li",null,[t("span",{class:"font-sans font-bold text-gray-800 dark:text-gray-200"},"Link:"),p(),t("code",null,"[Site Name](https://...)")]),t("li",null,[t("span",{class:"font-sans font-bold text-gray-800 dark:text-gray-200"},"Image:"),p(),t("code",null,"![Alt Text](https://path/to/image.png)")]),t("li",null,[t("span",{class:"font-sans font-bold text-gray-800 dark:text-gray-200"},"Video:"),p(),t("code",null,"Just paste a YouTube URL on its own line")])],-1))])],32)]),footer:y(()=>[t("div",j,[t("button",{onClick:e[2]||(e[2]=n=>N(l).closeModal("funFact")),class:"btn btn-secondary"},"Cancel"),t("button",{onClick:g,class:"btn btn-primary",disabled:r.value},b(r.value?"Saving...":"Save Fact"),9,q)])]),_:1},8,["title"]))}};export{G as default};
