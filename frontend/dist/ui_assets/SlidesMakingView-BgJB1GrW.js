import{a4 as fe,L as r,m as te,l as ct,W as Ve,e as n,o as s,b as t,t as m,N as ve,Q as bt,u as gt,R as vt,i as ft,T as pt,c as w,f as o,a as _,w as Z,g as x,aE as Q,am as xt,F as I,r as V,n as S,ac as Y,z as F,cz as oe,a9 as Te,a2 as be,dg as mt,h as j,Y as ee,ay as Ie,D as $e,aF as Re,K as W,aL as yt,ax as kt,aA as ge,c$ as ht,aw as wt,G as _t,aG as ie,M as Ct,a0 as z,av as ze,an as G,d0 as St,aa as At,aq as Ge}from"./index-Htkm6tp6.js";import{_ as Tt}from"./AuthenticatedVideo-Cn6swBka.js";import{I as It}from"./IconMagic-CE0sXY_w.js";import{I as $t}from"./IconVideoCamera-C8nHMPW6.js";const Rt={class:"w-full flex items-center gap-2"},zt={key:0,class:"flex-grow h-8 bg-gray-200 dark:bg-gray-700 animate-pulse rounded-lg flex items-center px-4"},Gt=["src"],Nt={key:2,class:"flex-grow h-8 bg-red-50 dark:bg-red-900/20 rounded-lg flex items-center px-4 border border-red-200 dark:border-red-800"},Vt={class:"text-[10px] font-bold text-red-500 uppercase tracking-widest"},jt={__name:"AuthenticatedAudio",props:{src:{type:String,required:!0}},setup(N){const b=N,c=r(null),y=r(!0),D=r(!1),re=r(null);let A=null;async function H(){if(!b.src){y.value=!1;return}y.value=!0,D.value=!1,A&&(URL.revokeObjectURL(A),A=null);try{const g=await ve.get(b.src,{responseType:"blob",timeout:3e4});A=URL.createObjectURL(g.data),c.value=A}catch(g){console.error("Failed to fetch authenticated audio:",g),D.value=!0}finally{y.value=!1}}function de(g){console.error("Audio playback error:",g),D.value=!0}return te(()=>b.src,H),ct(H),Ve(()=>{A&&URL.revokeObjectURL(A)}),(g,U)=>(s(),n("div",Rt,[y.value?(s(),n("div",zt,U[0]||(U[0]=[t("span",{class:"text-[10px] font-bold text-gray-400 uppercase tracking-widest"},"Loading Audio...",-1)]))):c.value&&!D.value?(s(),n("audio",{key:1,ref_key:"audioRef",ref:re,controls:"",src:c.value,class:"w-full h-8",onError:de},null,40,Gt)):(s(),n("div",Nt,[t("span",Vt,m(D.value?"Audio Access Error":"No Audio Data"),1)]))]))}},Dt=fe(jt,[["__scopeId","data-v-950450fa"]]),Ut={},Et={width:"50px",height:"50px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function Mt(N,b){return s(),n("svg",Et,b[0]||(b[0]=[t("title",null,null,-1),t("g",{id:"Complete"},[t("g",{id:"bubble-square"},[t("path",{d:"M7.7,18.3H19.4a2.1,2.1,0,0,0,2.1-2.1V4.6a2.1,2.1,0,0,0-2.1-2.1H4.6A2.1,2.1,0,0,0,2.5,4.6V21.5Z",fill:"none",stroke:"#000000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})])],-1)]))}const Ne=fe(Ut,[["render",Mt]]),Lt={class:"flex flex-col h-full overflow-hidden bg-gray-100 dark:bg-gray-950 relative"},Ot={key:0,class:"absolute inset-0 z-50 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md flex flex-col p-10"},Pt={class:"max-w-4xl mx-auto w-full flex flex-col h-full animate-in fade-in zoom-in-95 duration-500"},Bt={class:"flex items-center justify-between mb-8"},Ft={class:"flex items-center gap-6"},Wt={class:"p-4 bg-blue-600 rounded-3xl shadow-xl shadow-blue-500/20"},Ht={class:"text-2xl font-black text-gray-900 dark:text-white uppercase tracking-tighter"},Kt={class:"text-sm font-bold text-blue-500 opacity-80 uppercase tracking-widest"},qt={class:"text-4xl font-black text-blue-600 font-mono"},Jt={class:"w-full bg-gray-200 dark:bg-gray-800 h-3 rounded-full overflow-hidden mb-10 shadow-inner"},Xt={class:"flex-grow flex flex-col min-h-0 bg-black rounded-3xl shadow-2xl border border-gray-800 overflow-hidden"},Zt={class:"text-gray-700 shrink-0 select-none"},Qt={class:"flex flex-col items-center"},Yt={class:"text-sm font-bold text-gray-800 dark:text-gray-100"},ea={class:"flex items-center gap-2 text-[10px] text-gray-500 dark:text-gray-400"},ta={class:"uppercase tracking-wide font-medium"},aa={class:"flex items-center gap-1"},la={class:"relative group/lang mr-2"},sa=["value"],na=["value"],oa=["disabled"],ia={class:"flex-grow flex flex-col md:flex-row overflow-hidden relative"},ra={key:0,class:"flex-grow flex items-center justify-center text-center"},da={class:"max-w-xs animate-in fade-in zoom-in duration-700"},ua={class:"w-full md:w-64 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 flex flex-col flex-shrink-0"},ca={class:"p-3 text-[10px] font-black uppercase text-gray-400 tracking-tighter border-b dark:border-gray-800 flex justify-between items-center"},ba={class:"flex gap-1"},ga={class:"flex-grow overflow-y-auto custom-scrollbar p-3 space-y-3 max-h-[50%] border-b dark:border-gray-800 bg-gray-50 dark:bg-gray-950"},va=["onClick"],fa={key:1,class:"w-full h-full bg-gray-200 dark:bg-gray-800 flex items-center justify-center text-gray-400"},pa={class:"absolute bottom-1 left-2 right-2 text-left pointer-events-none"},xa={class:"text-white text-[10px] font-black truncate uppercase tracking-tighter"},ma={class:"absolute top-1 left-1 bg-black/50 text-white text-[8px] px-1.5 py-0.5 rounded font-mono"},ya={class:"p-3 text-[10px] font-black uppercase text-gray-400 tracking-tighter border-b dark:border-gray-800 flex justify-between items-center"},ka=["onClick"],ha={class:"truncate flex-grow"},wa={class:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 bg-white/50 dark:bg-black/50 rounded px-1 backdrop-blur-sm"},_a=["onClick"],Ca=["onClick"],Sa=["onClick"],Aa={class:"flex-grow overflow-y-auto custom-scrollbar p-6 bg-gray-50/50 dark:bg-gray-950 relative"},Ta={class:"max-w-6xl mx-auto space-y-6 pb-20"},Ia={key:0,class:"relative group/video"},$a={class:"bg-white dark:bg-gray-900 p-4 rounded-xl shadow-sm border dark:border-gray-800 flex items-center gap-3"},Ra={class:"flex-grow"},za=["value"],Ga=["disabled"],Na={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Va={class:"lg:col-span-2 aspect-video bg-black rounded-2xl relative group overflow-hidden shadow-lg border dark:border-gray-800"},ja={class:"absolute top-3 left-3 z-10 flex gap-1"},Da=["src"],Ua={key:1,class:"w-full h-full bg-gray-200 dark:bg-gray-800 flex items-center justify-center text-gray-400"},Ea={class:"absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity"},Ma={class:"absolute bottom-3 left-3 bg-black/60 text-white text-[10px] px-2 py-1 rounded-full font-mono pointer-events-none"},La={class:"bg-white dark:bg-gray-900 rounded-2xl p-5 border dark:border-gray-800 shadow-sm flex flex-col"},Oa={class:"flex-grow space-y-4 overflow-y-auto max-h-[300px] custom-scrollbar pr-2"},Pa=["value","onChange"],Ba={class:"bg-white dark:bg-gray-900 rounded-2xl p-5 border dark:border-gray-800 shadow-sm relative group/notes"},Fa={class:"flex items-center justify-between mb-2"},Wa={class:"flex items-center gap-2"},Ha={class:"flex items-center gap-2"},Ka=["disabled"],qa=["disabled"],Ja=["value"],Xa={key:0,class:"mt-2 bg-gray-100 dark:bg-gray-800 rounded p-2 flex items-center gap-2"},Za={key:0,class:"absolute top-0 right-0 h-full w-80 bg-white dark:bg-gray-900 border-l border-gray-200 dark:border-gray-800 shadow-2xl z-50 flex flex-col"},Qa={class:"p-4 border-b dark:border-gray-800 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50"},Ya={class:"flex items-center gap-2"},el={key:0,class:"flex flex-col gap-1"},tl={class:"p-3 rounded-2xl text-xs max-w-[90%] bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"},al={class:"flex items-center gap-2"},ll={class:"p-4 border-t dark:border-gray-800 flex gap-2"},sl=["onKeyup","disabled"],nl=["disabled"],ol={class:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col overflow-hidden border dark:border-gray-800"},il={class:"p-4 border-b dark:border-gray-800 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50"},rl={class:"font-black text-sm uppercase tracking-widest flex items-center gap-2"},dl={class:"p-8 overflow-y-auto custom-scrollbar min-h-[450px]"},ul={key:0,class:"space-y-6"},cl={class:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto p-2 border rounded-xl dark:border-gray-800"},bl=["onClick"],gl={class:"truncate"},vl={key:1,class:"space-y-6"},fl={class:"grid grid-cols-3 gap-4"},pl=["onClick"],xl={class:"text-xs font-black truncate"},ml={key:2,class:"space-y-4"},yl={key:0},kl={class:"p-4 border-t dark:border-gray-800 flex justify-between gap-3 bg-gray-50 dark:bg-gray-900/50"},hl={key:1},wl={class:"flex gap-2"},_l=["disabled"],Cl=["disabled"],Sl={key:0,class:"fixed inset-0 z-[100] bg-gray-900/60 backdrop-blur-sm p-6 flex items-center justify-center"},Al={class:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-4xl h-full max-h-[80vh] flex flex-col overflow-hidden border dark:border-gray-800"},Tl={class:"p-4 border-b dark:border-gray-800 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50"},Il={class:"flex-grow p-6 flex flex-col gap-4 overflow-hidden"},$l={class:"flex-grow flex flex-col"},Rl={class:"p-4 border-t dark:border-gray-800 flex justify-end gap-3"},zl={class:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden border dark:border-gray-800 flex flex-col"},Gl={class:"p-4 border-b dark:border-gray-800 bg-gray-50 dark:bg-gray-800/50 flex justify-between items-center"},Nl={class:"font-black text-sm uppercase tracking-widest text-blue-600"},Vl={class:"p-6 space-y-4"},jl={class:"flex items-center justify-between"},Dl={class:"flex items-center gap-2"},Ul={key:0,class:"px-2 py-0.5 bg-green-100 text-green-700 rounded text-[10px] font-bold"},El={key:1,class:"text-[10px] text-gray-400 italic"},Ml=["disabled"],Ll={class:"p-4 border-t dark:border-gray-800 flex justify-end gap-2 bg-gray-50 dark:bg-gray-900/50"},Ol=["disabled"],Pl={class:"p-4 border-t dark:border-gray-800 bg-white dark:bg-gray-900 flex gap-4 shadow-2xl z-20"},Bl=["disabled"],Fl={__name:"SlidesMakingView",props:{notebook:{type:Object,required:!0}},setup(N){const b=N,c=bt(),y=gt(),D=vt(),re=ft(),{tasks:A}=pt(D),H=w(()=>re.user),de=r(0),g=r(0);r(null);const U=r(null),ae=r(null),K=r(!1),le=r(""),E=r(!1);r(!1);const pe=r(!1);r(!0);const L=r("image"),q=r(""),O=r(null),f=w(()=>{if(O.value){const e=A.value.find(v=>v.id===O.value);if(e)return e}const l=A.value.find(e=>(e.name.includes(b.notebook.title)||e.description.includes(b.notebook.id))&&(e.status==="running"||e.status==="pending"));return l&&l.id!==O.value&&(O.value=l.id),l});te(f,l=>{l&&(l.status==="completed"||l.status==="failed")&&setTimeout(()=>{O.value===l.id&&(O.value=null)},2e3)});const k=r([]),h=r(null),P=r(!1),C=r(1),se=r(!1),d=r({topic:"",title:"",layout:"TitleImageBody",bullets:[],image_prompt:"",selected_artefacts:[],author:""}),B=r(!1),ne=r("images"),$=r(""),ue=r(!1),J=r(!1);let T=null;const je=[{code:"en",name:"English"},{code:"fr",name:"French"},{code:"es",name:"Spanish"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"zh",name:"Chinese"},{code:"ja",name:"Japanese"},{code:"ru",name:"Russian"},{code:"ar",name:"Arabic"}],De=w(()=>(b.notebook.tabs||[]).filter(l=>l.type==="slides")),p=w(()=>De.value[de.value]),M=w(()=>{if(!p.value||!p.value.content)return{slides_data:[],mode:"hybrid",summary:""};try{return JSON.parse(p.value.content)}catch{return{slides_data:[],mode:"hybrid",summary:""}}}),i=w(()=>M.value.slides_data[g.value]||null),xe=w(()=>!i.value||!i.value.images||i.value.images.length===0?null:i.value.images[i.value.selected_image_index]||i.value.images[0]),Ue=w(()=>{var e;if(!((e=i.value)!=null&&e.html_content))return null;const l=new Blob([i.value.html_content],{type:"text/html"});return URL.createObjectURL(l)});te(()=>{var l;return(l=i.value)==null?void 0:l.html_content},l=>{l&&(L.value="html")});const Ee=w(()=>f.value&&f.value.name.includes("Summary")),Me=w(()=>f.value&&f.value.name==="AI Task: generate_notes"),me=w(()=>f.value&&f.value.name==="AI Task: generate_slide_title"),Le=w(()=>f.value&&f.value.name==="AI Task: generate_audio"),Oe=[{value:"TitleImageBody",label:"Standard (Text + Image)",desc:"Split screen with content and visual."},{value:"ImageOnly",label:"Big Visual (Image only)",desc:"High-impact full-screen image focus."},{value:"TextOnly",label:"Bullet Points (Text only)",desc:"Detailed factual information layout."},{value:"TitleOnly",label:"Hero / Title",desc:"Minimalist title for section breaks."},{value:"TwoColumn",label:"Comparison / Dual",desc:"Two columns for contrast or comparison."}];te(()=>{var l,e;return(e=(l=f.value)==null?void 0:l.logs)==null?void 0:e.length},()=>{Ge(()=>{U.value&&(U.value.scrollTop=U.value.scrollHeight)})}),te(()=>{var l,e;return(e=(l=i.value)==null?void 0:l.messages)==null?void 0:e.length},()=>{Ge(()=>{ae.value&&(ae.value.scrollTop=ae.value.scrollHeight)})});async function ye(l){if(!p.value)return;const e=b.notebook.tabs.findIndex(v=>v.id===p.value.id);e!==-1&&(b.notebook.tabs[e].content=JSON.stringify(l),await c.saveActive())}async function Pe(l){b.notebook.language=l,await c.saveActive()}async function Be(){await c.generateTitle()}async function ke(){const l=(q.value||"").trim();!l||!p.value||(await c.processWithAi(l,[],"generate_slides_text",p.value.id,!1,k.value),q.value="")}async function he(){const l=(le.value||"").trim();if(!(!l||E.value)){E.value=!0;try{await c.sendSlideMessage(p.value.id,i.value.id,l,k.value),le.value=""}finally{E.value=!1}}}function Fe(l){const e=k.value.indexOf(l);e===-1?k.value.push(l):k.value.splice(e,1)}function We(l){h.value={originalName:l.filename,name:l.filename,content:l.content}}function He(l){y.openModal("artefactViewer",{artefact:{title:l.filename,content:l.content}})}async function Ke(l){await c.deleteArtefact(l)}async function qe(){if(h.value)try{await c.updateArtefact(h.value.originalName,h.value.name,h.value.content),h.value=null}catch(l){console.error(l)}}const we=w(()=>k.value.length>0);function _e(){d.value={topic:"",title:"",layout:"TitleImageBody",bullets:[],image_prompt:"",selected_artefacts:[...k.value],author:H.value?H.value.username:""},C.value=1,P.value=!0}function Je(l){const e=d.value.selected_artefacts.indexOf(l);e===-1?d.value.selected_artefacts.push(l):d.value.selected_artefacts.splice(e,1)}async function Xe(){const l=(d.value.topic||"").trim();if(l){se.value=!0;try{const e=await c.brainstormSlide(l,d.value.layout,d.value.selected_artefacts,d.value.author);Object.assign(d.value,e),C.value=3}finally{se.value=!1}}}async function Ze(){P.value=!1,await c.processWithAi(JSON.stringify(d.value),[],"add_full_slide",p.value.id,!1,d.value.selected_artefacts)}function Qe(){y.openModal("artefactImportWizard",{notebookId:b.notebook.id})}function Ce(l){i.value&&(ne.value=l,l==="refine_image"?$.value=i.value.last_edit_prompt||i.value.image_prompt||"":$.value=i.value.last_prompt||i.value.image_prompt||"",B.value=!0)}async function Ye(){const l=($.value||"").trim();if(l){ue.value=!0;try{const e=await c.enhancePrompt(l,we.value?`Using ${k.value.length} selected artefacts.`:"");$.value=e}finally{ue.value=!1}}}async function et(){const l=($.value||"").trim();if(!l)return;const e={...M.value};ne.value==="refine_image"?e.slides_data[g.value].last_edit_prompt=l:e.slides_data[g.value].last_prompt=l,await ye(e),await c.processWithAi(`SLIDE_INDEX:${g.value}| ${l}`,[],ne.value,p.value.id,!1,k.value),B.value=!1}async function Se(){await c.generateSummary()}async function X(l,e){const v={...M.value};v.slides_data[g.value][l]=e,await ye(v)}async function tt(){const l=M.value.slides_data.map(e=>{var v,a;return{src:((a=(v=e.images)==null?void 0:v[e.selected_image_index||0])==null?void 0:a.path)||"",title:e.title}}).filter(e=>!!e.src);l.length!==0&&y.openSlideshow({slides:l,title:b.notebook.title,startIndex:g.value})}function at(l){if(J.value){T&&T.stop(),J.value=!1;return}const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){y.addNotification("Speech recognition not supported.","error");return}T=new e,T.lang=b.notebook.language==="zh"?"zh-CN":b.notebook.language||"en-US",T.continuous=!0,T.onstart=()=>{J.value=!0},T.onresult=v=>{for(let a=v.resultIndex;a<v.results.length;++a)if(v.results[a].isFinal){const u=(v.results[a][0].transcript||"").trim();if(u){const R=i.value[l]||"";X(l,R+(R?" ":"")+u)}}},T.start()}async function ce(l){pe.value=!0;try{const e=await ve.get(`/api/notebooks/${b.notebook.id}/export`,{params:{format:l},responseType:"blob"}),v=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=v,a.setAttribute("download",`${b.notebook.title||"presentation"}.${l}`),document.body.appendChild(a),a.click(),document.body.removeChild(a)}finally{pe.value=!1}}async function lt(){const{confirmed:l}=await y.showConfirmation({title:"Generate Video",message:"Render video using slide images and TTS voice-over?",confirmText:"Generate"});if(l)try{await ve.post(`/api/notebooks/${b.notebook.id}/generate_video`)}catch{y.addNotification("Failed to start.","error")}}async function st(){const{confirmed:l}=await y.showConfirmation({title:"Delete Video?",message:"This action cannot be undone.",confirmText:"Delete"});l&&await c.deleteGeneratedAsset("video",p.value.id)}async function nt(){const{confirmed:l,value:e}=await y.showConfirmation({title:"Generate Notes",message:"AI will analyze slide context to write a script. Instructions:",confirmText:"Generate",inputType:"text"});l&&await c.generateSlideNotes(g.value,e||"",p.value.id)}async function ot(){await c.generateSlideTitle(g.value,"",p.value.id)}async function it(){await c.generateSlideAudio(g.value,p.value.id)}async function rt(){const{confirmed:l}=await y.showConfirmation({title:"Delete Audio?",message:"Remove generated voice-over?",confirmText:"Delete"});l&&await c.deleteGeneratedAsset("audio",p.value.id,i.value.id)}async function dt(){const{confirmed:l,value:e}=await y.showConfirmation({title:"Generate Graphic",message:'Create an HTML/SVG graphic for this slide. Describe the desired visual (e.g., "A bar chart showing growth"):',confirmText:"Generate",inputType:"text"});l&&await c.processWithAi(`SLIDE_INDEX:${g.value}| ${e||"Create a relevant visual"}`,[],"generate_slide_html",p.value.id,!1,k.value)}return Ve(()=>{T&&J.value&&T.stop()}),(l,e)=>{var v;return s(),n("div",Lt,[o(Y,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Z(()=>[f.value?(s(),n("div",Ot,[t("div",Pt,[t("div",Bt,[t("div",Ft,[t("div",Wt,[o(Q,{class:"w-10 h-10 animate-spin text-white"})]),t("div",null,[t("h2",Ht,m(f.value.name),1),t("p",Kt,m(f.value.description),1)])]),t("div",qt,m(f.value.progress)+"%",1)]),t("div",Jt,[t("div",{class:"h-full bg-blue-600 transition-all duration-500 progress-bar-animated",style:xt({width:f.value.progress+"%"})},null,4)]),t("div",Xt,[e[33]||(e[33]=t("div",{class:"px-6 py-3 bg-gray-900 border-b border-gray-800 flex items-center justify-between"},[t("span",{class:"text-[10px] font-black uppercase text-gray-500 tracking-widest"},"Presentation Production Terminal"),t("div",{class:"flex gap-1.5"},[t("div",{class:"w-2 h-2 rounded-full bg-red-500/50"}),t("div",{class:"w-2 h-2 rounded-full bg-yellow-500/50"}),t("div",{class:"w-2 h-2 rounded-full bg-green-500/50"})])],-1)),t("div",{ref_key:"logsContainerRef",ref:U,class:"flex-grow overflow-y-auto p-6 font-mono text-xs text-gray-400 space-y-1.5 custom-scrollbar"},[(s(!0),n(I,null,V(f.value.logs,(a,u)=>(s(),n("div",{key:u,class:"flex gap-4"},[t("span",Zt,"["+m(new Date(a.timestamp).toLocaleTimeString())+"]",1),t("span",{class:S({"text-red-400 font-bold":a.level==="ERROR","text-blue-400":a.level==="INFO","text-yellow-400":a.level==="WARNING"})},m(a.message),3)]))),128))],512)])])])):x("",!0)]),_:1}),(s(),_(Te,{to:"#global-header-title-target"},[t("div",Qt,[t("div",{class:"flex items-center gap-2 group cursor-pointer",onClick:Be,title:"Click to auto-title"},[t("span",Yt,m(N.notebook.title),1),o(F,{class:"w-3 h-3 text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity"})]),t("div",ea,[o(oe,{class:"w-3 h-3"}),t("span",ta,m((v=p.value)==null?void 0:v.title),1)])])])),(s(),_(Te,{to:"#global-header-actions-target"},[t("div",aa,[t("div",la,[t("select",{value:N.notebook.language,onChange:e[0]||(e[0]=a=>Pe(a.target.value)),class:"bg-gray-100 dark:bg-gray-800 border-none rounded-lg text-[10px] font-black uppercase tracking-widest px-2 py-1 outline-none cursor-pointer focus:ring-1 ring-blue-500 transition-all"},[(s(),n(I,null,V(je,a=>t("option",{key:a.code,value:a.code},m(a.code),9,na)),64))],40,sa)]),t("button",{onClick:e[1]||(e[1]=a=>ce("pptx")),class:"btn-icon-flat text-orange-600",title:"Export PPTX"},[o(oe,{class:"w-4 h-4"})]),t("button",{onClick:e[2]||(e[2]=a=>ce("pdf")),class:"btn-icon-flat text-red-600",title:"Export PDF"},[o(be,{class:"w-4 h-4"})]),t("button",{onClick:e[3]||(e[3]=a=>ce("zip")),class:"btn-icon-flat text-blue-600",title:"Export ZIP"},[o(mt,{class:"w-4 h-4"})]),t("button",{onClick:lt,class:"btn-icon-flat text-pink-500",title:"Gen Video"},[o($t,{class:"w-4 h-4"})]),e[35]||(e[35]=t("div",{class:"w-px h-4 bg-gray-300 dark:bg-gray-700 mx-1"},null,-1)),t("button",{onClick:Se,class:"btn-icon-flat",title:"Summary",disabled:Ee.value},[o(F,{class:"w-4 h-4 text-purple-500"})],8,oa),t("button",{onClick:e[4]||(e[4]=a=>K.value=!K.value),class:S(["btn-icon-flat relative",{"bg-blue-50 dark:bg-blue-900/20 text-blue-500":K.value}])},[o(Ne,{class:"w-4 h-4"})],2),t("button",{onClick:tt,class:"btn-primary-flat"},[o(oe,{class:"w-4 h-4"}),e[34]||(e[34]=t("span",{class:"hidden sm:inline ml-1"},"Play",-1))])])])),t("div",ia,[i.value?(s(),n(I,{key:1},[t("div",ua,[t("div",ca,[e[38]||(e[38]=t("span",null,"Slides",-1)),t("div",ba,[t("button",{onClick:Se,class:"p-1 text-purple-500 hover:bg-purple-50 rounded",title:"Update Summary"},[o(F,{class:"w-4 h-4"})]),t("button",{onClick:_e,class:"p-1 text-blue-500 hover:bg-blue-50 rounded",title:"Add Slide"},[o(ee,{class:"w-4 h-4"})])])]),t("div",ga,[(s(!0),n(I,null,V(M.value.slides_data,(a,u)=>{var R;return s(),n("button",{key:a.id,onClick:Ae=>g.value=u,class:S(["w-full relative rounded-xl overflow-hidden border-2 transition-all block p-0 aspect-video",g.value===u?"border-blue-500 ring-2 ring-blue-500/20":"border-transparent hover:border-gray-300"])},[(R=a.images)!=null&&R.length?(s(),_(Ie,{key:0,src:a.images[a.selected_image_index||0].path,"img-class":"object-cover",class:"w-full h-full"},null,8,["src"])):(s(),n("div",fa,[o($e,{class:"w-8 h-8 opacity-20"})])),e[39]||(e[39]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-80"},null,-1)),t("div",pa,[t("p",xa,m(a.title),1)]),t("div",ma,m(u+1),1)],10,va)}),128))]),t("div",ya,[e[40]||(e[40]=t("span",null,"Artefacts",-1)),t("button",{onClick:Qe,class:"p-1 text-green-500 hover:bg-green-50 rounded"},[o(ee,{class:"w-3 h-3"})])]),(s(!0),n(I,null,V(N.notebook.artefacts,a=>(s(),n("div",{key:a.filename,onClick:u=>Fe(a.filename),class:S(["flex items-center gap-2 p-2 rounded-lg text-[10px] cursor-pointer group",k.value.includes(a.filename)?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-bold":"text-gray-500 hover:bg-gray-50 dark:hover:bg-gray-800"])},[k.value.includes(a.filename)?(s(),_(Re,{key:0,class:"w-3 h-3 flex-shrink-0 text-green-500"})):(s(),_(be,{key:1,class:"w-3 h-3 flex-shrink-0 opacity-50"})),t("span",ha,m(a.filename),1),t("div",wa,[t("button",{onClick:W(u=>He(a),["stop"]),class:"p-1 hover:text-blue-500",title:"View"},[o(yt,{class:"w-3 h-3"})],8,_a),t("button",{onClick:W(u=>We(a),["stop"]),class:"p-1 hover:text-orange-500",title:"Edit"},[o(kt,{class:"w-3 h-3"})],8,Ca),t("button",{onClick:W(u=>Ke(a.filename),["stop"]),class:"p-1 hover:text-red-500",title:"Delete"},[o(ge,{class:"w-3 h-3"})],8,Sa)])],10,ka))),128))]),t("div",Aa,[t("div",Ta,[M.value.video_src?(s(),n("div",Ia,[o(Tt,{src:M.value.video_src},null,8,["src"]),t("button",{onClick:st,class:"absolute top-4 right-4 btn btn-danger btn-sm opacity-0 group-hover/video:opacity-100 transition-opacity z-10 shadow-xl"},[o(ge,{class:"w-4 h-4 mr-1"}),e[41]||(e[41]=j(" Delete Video"))])])):x("",!0),t("div",$a,[t("div",Ra,[e[42]||(e[42]=t("label",{class:"text-[10px] font-black uppercase text-gray-400 block mb-1"},"Slide Title",-1)),t("input",{value:i.value.title,onChange:e[5]||(e[5]=a=>X("title",a.target.value)),class:"text-xl md:text-2xl font-bold bg-transparent border-none outline-none w-full text-gray-900 dark:text-white"},null,40,za)]),t("button",{onClick:ot,class:"btn btn-secondary btn-sm h-10 w-10 p-0 rounded-full",disabled:me.value},[me.value?(s(),_(Q,{key:0,class:"w-5 h-5 animate-spin"})):(s(),_(F,{key:1,class:"w-5 h-5 text-blue-500"}))],8,Ga)]),t("div",Na,[t("div",Va,[t("div",ja,[t("button",{onClick:e[6]||(e[6]=a=>L.value="image"),class:S(["px-2 py-1 text-[10px] font-bold rounded uppercase transition-colors",L.value==="image"?"bg-white text-black":"bg-black/50 text-white hover:bg-black/80"])},"Image",2),i.value.html_content?(s(),n("button",{key:0,onClick:e[7]||(e[7]=a=>L.value="html"),class:S(["px-2 py-1 text-[10px] font-bold rounded uppercase transition-colors",L.value==="html"?"bg-white text-black":"bg-black/50 text-white hover:bg-black/80"])},"Graphic",2)):x("",!0)]),L.value==="html"&&i.value.html_content?(s(),n("iframe",{key:0,src:Ue.value,class:"w-full h-full border-none bg-white"},null,8,Da)):(s(),n(I,{key:1},[xe.value?(s(),_(Ie,{key:0,src:xe.value.path,"img-class":"object-contain",class:"w-full h-full"},null,8,["src"])):(s(),n("div",Ua,[o($e,{class:"w-8 h-8 opacity-20"})]))],64)),t("div",Ea,[t("button",{onClick:dt,class:"p-2 bg-black/60 rounded-lg text-white hover:bg-blue-600",title:"Generate Graphic"},[o(ht,{class:"w-4 h-4"})]),t("button",{onClick:e[8]||(e[8]=a=>Ce("refine_image")),class:"p-2 bg-black/60 rounded-lg text-white hover:bg-purple-600",title:"Edit Image"},[o(It,{class:"w-4 h-4"})]),t("button",{onClick:e[9]||(e[9]=a=>Ce("images")),class:"p-2 bg-black/60 rounded-lg text-white hover:bg-green-600",title:"New Variant"},[o(wt,{class:"w-4 h-4"})])]),t("div",Ma,m(i.value.layout),1)]),t("div",La,[e[45]||(e[45]=t("h3",{class:"text-xs font-black uppercase text-gray-400 mb-4"},"Slide Content",-1)),t("div",Oa,[(s(!0),n(I,null,V(i.value.bullets||[],(a,u)=>(s(),n("div",{key:u,class:"flex items-start gap-2"},[e[43]||(e[43]=t("span",{class:"text-lg font-bold text-blue-500 mt-0.5"},"â€¢",-1)),t("textarea",{value:a,onChange:R=>X("bullets",i.value.bullets.map((Ae,ut)=>ut===u?R.target.value:Ae)),class:"flex-grow bg-transparent border-b border-dashed border-gray-200 dark:border-gray-700 outline-none text-sm resize-none"},null,40,Pa)]))),128)),t("button",{onClick:e[10]||(e[10]=a=>X("bullets",[...i.value.bullets||[],""])),class:"flex items-center gap-2 text-xs font-bold text-blue-500 mt-2"},[o(ee,{class:"w-3 h-3"}),e[44]||(e[44]=j(" Add Point"))])])])]),t("div",Ba,[t("div",Fa,[t("div",Wa,[e[46]||(e[46]=t("h3",{class:"text-xs font-black uppercase tracking-widest text-gray-400"},"Speaker Notes",-1)),t("button",{onClick:e[11]||(e[11]=a=>at("notes")),class:S(["p-1 rounded-full transition-all",J.value?"text-red-600 bg-red-100":"text-blue-500"])},[o(_t,{class:"w-4 h-4"})],2)]),t("div",Ha,[t("button",{onClick:it,class:"btn btn-secondary btn-sm",disabled:Le.value},"Audio",8,Ka),t("button",{onClick:nt,class:"btn btn-secondary btn-sm",disabled:Me.value},"Generate Text",8,qa)])]),t("textarea",{value:i.value.notes,onChange:e[12]||(e[12]=a=>X("notes",a.target.value)),class:"input-field w-full h-24 resize-none text-sm mb-2",placeholder:"Presenter script..."},null,40,Ja),i.value.audio_src?(s(),n("div",Xa,[o(Dt,{src:i.value.audio_src},null,8,["src"]),t("button",{onClick:rt,class:"text-red-500 p-1 flex-shrink-0"},[o(ge,{class:"w-4 h-4"})])])):x("",!0)])])])],64)):(s(),n("div",ra,[t("div",da,[o(oe,{class:"w-16 h-16 mx-auto mb-4 text-gray-300 opacity-20"}),e[37]||(e[37]=t("p",{class:"text-sm text-gray-400 font-bold uppercase tracking-widest mb-6"},"Empty Presentation Deck",-1)),t("button",{onClick:_e,class:"btn btn-secondary w-full rounded-2xl border-2 shadow-lg hover:shadow-blue-500/10 transition-all"},[o(ee,{class:"w-4 h-4 mr-2"}),e[36]||(e[36]=j(" Initialize Studio "))])])]))]),o(Y,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:Z(()=>{var a;return[K.value?(s(),n("div",Za,[t("div",Qa,[t("div",Ya,[o(Ne,{class:"w-4 h-4 text-blue-500"}),e[47]||(e[47]=t("h3",{class:"font-black text-xs uppercase tracking-widest"},"Intelligence",-1))]),t("button",{onClick:e[13]||(e[13]=u=>K.value=!1),class:"btn-icon-flat"},[o(ie,{class:"w-5 h-5"})])]),t("div",{class:"flex-grow overflow-y-auto p-4 space-y-4 custom-scrollbar",ref_key:"messagesContainerRef",ref:ae},[(s(!0),n(I,null,V((a=i.value)==null?void 0:a.messages,(u,R)=>(s(),n("div",{key:R,class:S(["flex flex-col gap-1",{"items-end":u.role==="user"}])},[t("div",{class:S(["p-3 rounded-2xl text-xs max-w-[90%]",u.role==="user"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"])},[o(Ct,{content:u.content},null,8,["content"])],2)],2))),128)),E.value?(s(),n("div",el,[t("div",tl,[t("div",al,[o(Q,{class:"w-4 h-4 animate-spin text-blue-500"}),e[48]||(e[48]=t("span",null,"Thinking...",-1))])])])):x("",!0)],512),t("div",ll,[z(t("textarea",{"onUpdate:modelValue":e[14]||(e[14]=u=>le.value=u),onKeyup:ze(W(he,["exact"]),["enter"]),class:"input-field w-full text-xs h-20 resize-none",placeholder:"Ask AI...",disabled:E.value},null,40,sl),[[G,le.value]]),t("button",{onClick:he,class:"btn btn-primary h-20",disabled:E.value},[E.value?(s(),_(Q,{key:0,class:"w-4 h-4 animate-spin"})):(s(),_(St,{key:1,class:"w-4 h-4"}))],8,nl)])])):x("",!0)]}),_:1}),o(Y,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:Z(()=>[P.value?(s(),n("div",{key:0,class:"fixed inset-0 z-[100] bg-gray-900/60 backdrop-blur-sm p-6 flex items-center justify-center",onClick:e[23]||(e[23]=W(a=>P.value=!1,["self"]))},[t("div",ol,[t("div",il,[t("h3",rl,[o(ee,{class:"w-4 h-4"}),e[49]||(e[49]=j(" New Slide"))]),t("button",{onClick:e[15]||(e[15]=a=>P.value=!1),class:"btn-icon-flat"},[o(ie,{class:"w-5 h-5"})])]),t("div",dl,[C.value===1?(s(),n("div",ul,[t("div",null,[e[50]||(e[50]=t("label",{class:"text-[10px] font-black uppercase text-blue-500 mb-2 block tracking-widest"},"1. Topic",-1)),z(t("textarea",{"onUpdate:modelValue":e[16]||(e[16]=a=>d.value.topic=a),class:"input-field w-full h-24 font-bold text-lg",placeholder:"Slide topic..."},null,512),[[G,d.value.topic]])]),t("div",null,[e[51]||(e[51]=t("label",{class:"text-[10px] font-black uppercase text-blue-500 mb-2 block tracking-widest"},"Author (Optional)",-1)),z(t("input",{"onUpdate:modelValue":e[17]||(e[17]=a=>d.value.author=a),class:"input-field w-full",placeholder:"Author Name"},null,512),[[G,d.value.author]])]),t("div",null,[e[52]||(e[52]=t("label",{class:"text-[10px] font-black uppercase text-gray-500 mb-2 block tracking-widest"},"2. Context Sources",-1)),t("div",cl,[(s(!0),n(I,null,V(N.notebook.artefacts,a=>(s(),n("button",{key:a.filename,onClick:u=>Je(a.filename),class:S(["p-2 rounded-lg text-[10px] flex items-center gap-2 text-left transition-all border",d.value.selected_artefacts.includes(a.filename)?"bg-green-50 border-green-500 text-green-700":"border-transparent hover:bg-gray-50 text-gray-500"])},[d.value.selected_artefacts.includes(a.filename)?(s(),_(Re,{key:0,class:"w-3 h-3 flex-shrink-0"})):(s(),_(be,{key:1,class:"w-3 h-3 opacity-30 flex-shrink-0"})),t("span",gl,m(a.filename),1)],10,bl))),128))])])])):x("",!0),C.value===2?(s(),n("div",vl,[e[53]||(e[53]=t("label",{class:"text-[10px] font-black uppercase text-blue-500 mb-4 block tracking-widest"},"3. Architecture",-1)),t("div",fl,[(s(),n(I,null,V(Oe,a=>t("button",{key:a.value,onClick:u=>d.value.layout=a.value,class:S(["p-4 rounded-xl border-2 transition-all text-left flex flex-col gap-3",d.value.layout===a.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-100 dark:border-gray-800"])},[t("p",xl,m(a.label),1)],10,pl)),64))])])):x("",!0),C.value===3?(s(),n("div",ml,[t("div",null,[e[54]||(e[54]=t("label",{class:"text-[10px] font-black text-gray-500 mb-1 block"},"Title",-1)),z(t("input",{"onUpdate:modelValue":e[18]||(e[18]=a=>d.value.title=a),class:"input-field w-full font-bold"},null,512),[[G,d.value.title]])]),d.value.layout!=="TextOnly"?(s(),n("div",yl,[e[55]||(e[55]=t("label",{class:"text-[10px] font-black text-gray-500 mb-1 block"},"Visual Strategy",-1)),z(t("textarea",{"onUpdate:modelValue":e[19]||(e[19]=a=>d.value.image_prompt=a),class:"input-field w-full h-20 text-xs italic resize-none"},null,512),[[G,d.value.image_prompt]])])):x("",!0)])):x("",!0)]),t("div",kl,[C.value>1?(s(),n("button",{key:0,onClick:e[20]||(e[20]=a=>C.value--),class:"btn btn-secondary"},"Back")):(s(),n("div",hl)),t("div",wl,[t("button",{onClick:e[21]||(e[21]=a=>P.value=!1),class:"btn btn-secondary"},"Cancel"),C.value===1?(s(),n("button",{key:0,onClick:e[22]||(e[22]=a=>C.value=2),class:"btn btn-primary",disabled:!d.value.topic},"Next",8,_l)):x("",!0),C.value===2?(s(),n("button",{key:1,onClick:Xe,class:"btn btn-primary",disabled:se.value},[se.value?(s(),_(Q,{key:0,class:"w-4 h-4 mr-2 animate-spin"})):x("",!0),e[56]||(e[56]=j("Brainstorm"))],8,Cl)):x("",!0),C.value===3?(s(),n("button",{key:2,onClick:Ze,class:"btn btn-primary"},"Add")):x("",!0)])])])])):x("",!0)]),_:1}),o(Y,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:Z(()=>[h.value?(s(),n("div",Sl,[t("div",Al,[t("div",Tl,[e[57]||(e[57]=t("h3",{class:"font-black text-sm uppercase tracking-widest"},"Edit Source",-1)),t("button",{onClick:e[24]||(e[24]=a=>h.value=null),class:"btn-icon-flat"},[o(ie,{class:"w-5 h-5"})])]),t("div",Il,[t("div",null,[e[58]||(e[58]=t("label",{class:"text-[10px] font-bold uppercase text-gray-500 mb-1 block"},"Title",-1)),z(t("input",{"onUpdate:modelValue":e[25]||(e[25]=a=>h.value.name=a),class:"input-field w-full font-bold"},null,512),[[G,h.value.name]])]),t("div",$l,[e[59]||(e[59]=t("label",{class:"text-[10px] font-bold uppercase text-gray-500 mb-1 block"},"Content",-1)),z(t("textarea",{"onUpdate:modelValue":e[26]||(e[26]=a=>h.value.content=a),class:"flex-grow input-field w-full font-mono text-xs resize-none"},null,512),[[G,h.value.content]])])]),t("div",Rl,[t("button",{onClick:e[27]||(e[27]=a=>h.value=null),class:"btn btn-secondary"},"Cancel"),t("button",{onClick:qe,class:"btn btn-primary"},[o(At,{class:"w-4 h-4 mr-2"}),e[60]||(e[60]=j(" Save"))])])])])):x("",!0)]),_:1}),o(Y,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:Z(()=>[B.value?(s(),n("div",{key:0,class:"fixed inset-0 z-[100] bg-gray-900/60 backdrop-blur-sm p-6 flex items-center justify-center",onClick:e[31]||(e[31]=W(a=>B.value=!1,["self"]))},[t("div",zl,[t("div",Gl,[t("h3",Nl,m(ne.value==="refine_image"?"Refine Image":"New Variant"),1),t("button",{onClick:e[28]||(e[28]=a=>B.value=!1),class:"btn-icon-flat"},[o(ie,{class:"w-5 h-5"})])]),t("div",Vl,[t("div",null,[e[61]||(e[61]=t("label",{class:"text-[10px] font-bold uppercase text-gray-500 mb-1 block"},"Prompt",-1)),z(t("textarea",{"onUpdate:modelValue":e[29]||(e[29]=a=>$.value=a),class:"input-field w-full h-32 resize-none",placeholder:"Describe the image..."},null,512),[[G,$.value]])]),t("div",jl,[t("div",Dl,[e[62]||(e[62]=t("span",{class:"text-xs font-bold text-gray-500"},"Research Context:",-1)),we.value?(s(),n("span",Ul,m(k.value.length)+" Active",1)):(s(),n("span",El,"None selected"))]),t("button",{onClick:Ye,class:"btn btn-secondary btn-sm",disabled:ue.value||!($.value||"").trim()},[o(F,{class:"w-3 h-3 mr-1"}),e[63]||(e[63]=j(" Enhance Prompt"))],8,Ml)])]),t("div",Ll,[t("button",{onClick:e[30]||(e[30]=a=>B.value=!1),class:"btn btn-secondary"},"Cancel"),t("button",{onClick:et,class:"btn btn-primary",disabled:!($.value||"").trim()},"Generate",8,Ol)])])])):x("",!0)]),_:1}),t("div",Pl,[z(t("input",{"onUpdate:modelValue":e[32]||(e[32]=a=>q.value=a),onKeyup:ze(ke,["enter"]),placeholder:"Describe additional slides or deck refinements...",class:"input-field flex-grow h-12 rounded-2xl"},null,544),[[G,q.value]]),t("button",{onClick:ke,class:"btn btn-primary px-8 h-12 rounded-2xl",disabled:!(q.value||"").trim()||f.value},[o(F,{class:"w-4 h-4 mr-2"}),e[64]||(e[64]=j(" Go "))],8,Bl)])])}}},Jl=fe(Fl,[["__scopeId","data-v-cec5230a"]]);export{Jl as default};
