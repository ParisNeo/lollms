const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["ui_assets/index-CGf9GErn.js","ui_assets/index-B6_qKhtB.css"])))=>i.map(i=>d[i]);
import{a4 as Un,u as On,a5 as En,r as i,a6 as za,l as Ra,a7 as Dn,g as e,W as La}from"./index-CGf9GErn.js";function Fa(o,r){try{const g=localStorage.getItem(o);if(g){const T=JSON.parse(g);return{...r,...T}}}catch{localStorage.removeItem(o)}return r}const Gn=(o,r)=>{if(r==="boolean")return typeof o=="string"?o.toLowerCase()==="true":!!o;if(r==="integer"){const g=parseInt(o,10);return isNaN(g)?null:g}if(r==="float"){const g=parseFloat(o);return isNaN(g)?null:g}return o},Vn=Un("admin",()=>{const o=On(),r=En(),{on:g}=Dn(),T=i(null),F=i(!1),Na=i([]),N=i(!1),ka=i(null),k=i(!1),P=i([]),Z=i(!1),A=i(null),I=i(!1),l=i([]),x=i(!1),M=i([]),d=i([]),C=i(!1),U=i([]),u=i([]),O=i(!1),E=i([]),p=i([]),D=i(!1),G=i([]),f=i([]),j=i(!1),V=i([]),J=i([]),y=i([]),Q=i(!1),v=i([]),W=i(!1),w=i([]),K=i(!1),h=i([]),q=i(!1),z=i({items:[],total:0,pages:1,categories:[]}),H=i(!1),R=i({items:[],total:0,pages:1,categories:[]}),X=i(!1),Y=i({items:[],total:0,pages:1,categories:[]}),aa=i(!1),ta=i({items:[],total:0,pages:1,categories:[]}),ea=i(!1),na=i([]),sa=i(!1),Pa=i(null),ia=i(!1),oa=i([]),ca=i(!1),ra=i(null),la=i(!1),L=i(null),da=i(!1),ua=i([]),pa=i(!1),S=i([]),fa=i(!1),ga=i([]),ma=i(!1),ya=i([]),va=i(!1),wa=i(!1),ha=i(!1),_a=i([]),ba=i(!1),Ta=i([]),Sa=i(!1),Za=za(Fa("lollms-app-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"last_update_date",sortOrder:"desc",currentPage:1,pageSize:24})),Ia=za(Fa("lollms-mcp-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"last_update_date",sortOrder:"desc",currentPage:1,pageSize:24})),xa=za(Fa("lollms-prompt-filters",{searchQuery:"",selectedCategory:"All",installationStatusFilter:"All",selectedRepository:"All",sortKey:"name",sortOrder:"asc",currentPage:1,pageSize:24}));Ra(Za,a=>{localStorage.setItem("lollms-app-filters",JSON.stringify(a))},{deep:!0}),Ra(Ia,a=>{localStorage.setItem("lollms-mcp-filters",JSON.stringify(a))},{deep:!0}),Ra(xa,a=>{localStorage.setItem("lollms-prompt-filters",JSON.stringify(a))},{deep:!0});async function Ga(a){var n;if(!a||!["completed","failed","cancelled"].includes(a.status))return;const t=(a.name||"").toLowerCase();if((t.includes("app")||t.includes("mcp"))&&($(!0),B(!0)),t.includes("prompt")&&$a({},!0),t.includes("personality")&&Da({},!0),t.includes("purge unused temporary files")&&a.status==="completed"){const s=((n=a.result)==null?void 0:n.message)||"Purge completed successfully.";o.addNotification(s,"success",6e3)}t.includes("generate self-signed certificate")&&a.status==="completed"&&(m(!0),o.addNotification("Certificate generated successfully. Reloading settings...","success",6e3)),t.includes("content")&&a.status==="completed"&&o.addNotification("Moderation task completed.","success",6e3)}g("task:completed",Ga);function ja(a){const t=n=>{if(Array.isArray(n)){const s=n.findIndex(c=>c.id===a.id);s!==-1&&Object.assign(n[s],a)}};a.item_type==="app"?t(z.value.items):a.item_type==="mcp"&&t(R.value.items)}async function Ma(){k.value=!0;try{const a=await e.get("/api/admin/services/dashboard");ka.value=a.data}finally{k.value=!1}}async function Va(){await e.post("/api/admin/services/reset-usage"),await Ma(),o.addNotification("Usage statistics reset.","success")}async function Ja(a){const t=await e.post("/api/admin/backup/create",{password:a});return r.addTask(t.data),t.data}async function Qa(){try{const a=await e.post("/api/admin/system/analyze-logs");return r.addTask(a.data),a.data}catch(a){throw o.addNotification("Failed to start log analysis.","error"),a}}async function Wa(){const a=await e.post("/api/admin/purge-unused-uploads");r.addTask(a.data)}async function Ka(){const a=await e.post("/api/admin/trigger-moderation");r.addTask(a.data)}async function qa(){const a=await e.post("/api/admin/trigger-full-remoderation");r.addTask(a.data)}async function Ha(a){await e.post("/api/admin/broadcast",{message:a})}async function Xa(a){await e.post("/api/admin/system/kill-process",{pid:a}),o.addNotification(`Process ${a} killed.`,"success"),Ca()}async function Ya(){F.value=!0;try{const a=await e.get("/api/admin/stats");T.value=a.data}catch{T.value=null}finally{F.value=!1}}async function at(){ca.value=!0;try{const a=await e.get("/api/admin/ws-connections");oa.value=a.data}catch{oa.value=[]}finally{ca.value=!1}}async function tt(){if(!L.value){da.value=!0;try{const a=await e.get("/api/admin/global-generation-stats");L.value=a.data}catch{L.value=null}finally{da.value=!1}}}async function Ca(){ia.value=!0;try{const a=await e.get("/api/admin/system-status");Pa.value=a.data}finally{ia.value=!1}}async function et(a=!1){if(!(!a&&Ta.value.length>0)){Sa.value=!0;try{const t=await e.get("/api/admin/system/logs");Ta.value=t.data}catch{o.addNotification("Failed to fetch system logs.","error")}finally{Sa.value=!1}}}async function nt(){if(!ra.value){la.value=!0;try{const a=await e.get("/api/admin/server-info");ra.value=a.data}finally{la.value=!1}}}async function st(){pa.value=!0;try{const a=await e.get("/api/admin/model-usage-stats");ua.value=a.data||[]}catch(a){console.error("Failed to fetch model usage stats:",a),ua.value=[]}finally{pa.value=!1}}async function m(a=!1){if(!(!a&&P.value.length>0)){Z.value=!0;try{const t=await e.get("/api/admin/settings");P.value=t.data.map(n=>({...n,value:Gn(n.value,n.type)}))}finally{Z.value=!1}}}async function it(a){await e.put("/api/admin/settings",{configs:a}),await m(!0),o.addNotification("Settings updated.","success")}async function ot(a=!1){if(!(!a&&A.value)){I.value=!0;try{const t=await e.get("/api/admin/ai-bot-settings");A.value=t.data}finally{I.value=!1}}}async function ct(a){const t=await e.put("/api/admin/ai-bot-settings",a);A.value=t.data,o.addNotification("AI Bot user settings updated.","success")}async function rt(a=!1){if(!(!a&&l.value.length>0)){x.value=!0;try{const t=await e.get("/api/admin/bindings");l.value=t.data}finally{x.value=!1}}}async function lt(a=!1){if(!a&&M.value.length>0)return;const t=await e.get("/api/admin/bindings/available_types");M.value=t.data}async function dt(a){const t=await e.post("/api/admin/bindings",a);l.value.push(t.data),o.addNotification(`Binding '${t.data.alias}' created.`,"success")}async function ut(a,t){const n=await e.put(`/api/admin/bindings/${a}`,t),s=l.value.findIndex(c=>c.id===a);s!==-1&&(l.value[s]=n.data),o.addNotification(`Binding '${n.data.alias}' updated.`,"success")}async function pt(a){await e.delete(`/api/admin/bindings/${a}`),l.value=l.value.filter(t=>t.id!==a),o.addNotification("Binding deleted.","success")}async function ft(a=!1){if(!(!a&&d.value.length>0)){C.value=!0;try{const t=await e.get("/api/admin/tti-bindings");d.value=t.data}finally{C.value=!1}}}async function gt(a=!1){if(!a&&U.value.length>0)return;const t=await e.get("/api/admin/tti-bindings/available_types");U.value=t.data}async function mt(a){const t=await e.post("/api/admin/tti-bindings",a);d.value.push(t.data),o.addNotification(`TTI Binding '${t.data.alias}' created.`,"success")}async function yt(a,t){const n=await e.put(`/api/admin/tti-bindings/${a}`,t),s=d.value.findIndex(c=>c.id===a);s!==-1&&(d.value[s]=n.data),o.addNotification(`TTI Binding '${n.data.alias}' updated.`,"success")}async function vt(a){await e.delete(`/api/admin/tti-bindings/${a}`),d.value=d.value.filter(t=>t.id!==a),o.addNotification("TTI Binding deleted.","success")}async function wt(a=!1){if(!(!a&&u.value.length>0)){O.value=!0;try{const t=await e.get("/api/admin/tts-bindings");u.value=t.data}finally{O.value=!1}}}async function ht(a=!1){if(!a&&E.value.length>0)return;const t=await e.get("/api/admin/tts-bindings/available_types");E.value=t.data}async function _t(a){const t=await e.post("/api/admin/tts-bindings",a);u.value.push(t.data),o.addNotification(`TTS Binding '${t.data.alias}' created.`,"success")}async function bt(a,t){const n=await e.put(`/api/admin/tts-bindings/${a}`,t),s=u.value.findIndex(c=>c.id===a);s!==-1&&(u.value[s]=n.data),o.addNotification(`TTS Binding '${n.data.alias}' updated.`,"success")}async function Tt(a){await e.delete(`/api/admin/tts-bindings/${a}`),u.value=u.value.filter(t=>t.id!==a),o.addNotification("TTS Binding deleted.","success")}async function St(a=!1){if(!(!a&&p.value.length>0)){D.value=!0;try{const t=await e.get("/api/admin/stt-bindings");p.value=t.data}finally{D.value=!1}}}async function $t(a=!1){if(!a&&G.value.length>0)return;const t=await e.get("/api/admin/stt-bindings/available_types");G.value=t.data}async function Bt(a){const t=await e.post("/api/admin/stt-bindings",a);p.value.push(t.data),o.addNotification(`STT Binding '${t.data.alias}' created.`,"success")}async function At(a,t){const n=await e.put(`/api/admin/stt-bindings/${a}`,t),s=p.value.findIndex(c=>c.id===a);s!==-1&&(p.value[s]=n.data),o.addNotification(`STT Binding '${n.data.alias}' updated.`,"success")}async function zt(a){await e.delete(`/api/admin/stt-bindings/${a}`),p.value=p.value.filter(t=>t.id!==a),o.addNotification("STT Binding deleted.","success")}async function Rt(a=!1){if(!(!a&&f.value.length>0)){j.value=!0;try{const t=await e.get("/api/admin/rag-bindings");f.value=t.data}catch(t){console.error(t)}finally{j.value=!1}}}async function Lt(a=!1){if(!(!a&&V.value.length>0))try{const t=await e.get("/api/admin/rag-bindings/available_types");V.value=t.data}catch(t){console.error(t)}}async function Ft(a){const t=await e.post("/api/admin/rag-bindings",a);f.value.push(t.data),o.addNotification(`RAG Binding '${t.data.alias}' created.`,"success")}async function Nt(a,t){const n=await e.put(`/api/admin/rag-bindings/${a}`,t),s=f.value.findIndex(c=>c.id===a);s!==-1&&(f.value[s]=n.data),o.addNotification(`RAG Binding '${n.data.alias}' updated.`,"success")}async function kt(a){await e.delete(`/api/admin/rag-bindings/${a}`),f.value=f.value.filter(t=>t.id!==a),o.addNotification("RAG Binding deleted.","success")}async function Pt(a){return(await e.get(`/api/admin/bindings/${a}/models`)).data}async function Zt(a,t){return(await e.post(`/api/admin/bindings/${a}/context-size`,{model_name:t})).data.ctx_size}async function It(a,t){const n=await e.put(`/api/admin/bindings/${a}/alias`,t),s=l.value.findIndex(c=>c.id===a);s!==-1&&(l.value[s]=n.data)}async function xt(a,t){const n=await e.delete(`/api/admin/bindings/${a}/alias`,{data:{original_model_name:t}}),s=l.value.findIndex(c=>c.id===a);s!==-1&&(l.value[s]=n.data)}async function Mt(a,t,n={}){return(await e.post(`/api/admin/bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function Ct(a){return(await e.get(`/api/admin/tti-bindings/${a}/models`)).data}async function Ut(a,t){const n=await e.put(`/api/admin/tti-bindings/${a}/alias`,t),s=d.value.findIndex(c=>c.id===a);s!==-1&&(d.value[s]=n.data)}async function Ot(a,t){const n=await e.delete(`/api/admin/tti-bindings/${a}/alias`,{data:{original_model_name:t}}),s=d.value.findIndex(c=>c.id===a);s!==-1&&(d.value[s]=n.data)}async function Et(a,t,n={}){return(await e.post(`/api/admin/tti-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function Dt(a){return(await e.get(`/api/admin/tts-bindings/${a}/models`)).data}async function Gt(a,t){const n=await e.put(`/api/admin/tts-bindings/${a}/alias`,t),s=u.value.findIndex(c=>c.id===a);s!==-1&&(u.value[s]=n.data)}async function jt(a,t){const n=await e.delete(`/api/admin/tts-bindings/${a}/alias`,{data:{original_model_name:t}}),s=u.value.findIndex(c=>c.id===a);s!==-1&&(u.value[s]=n.data)}async function Vt(a,t,n={}){return(await e.post(`/api/admin/tts-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function Jt(a){return(await e.get(`/api/admin/stt-bindings/${a}/models`)).data}async function Qt(a,t){const n=await e.put(`/api/admin/stt-bindings/${a}/alias`,t),s=p.value.findIndex(c=>c.id===a);s!==-1&&(p.value[s]=n.data)}async function Wt(a,t){const n=await e.delete(`/api/admin/stt-bindings/${a}/alias`,{data:{original_model_name:t}}),s=p.value.findIndex(c=>c.id===a);s!==-1&&(p.value[s]=n.data)}async function Kt(a,t,n={}){return(await e.post(`/api/admin/stt-bindings/${a}/execute_command`,{command_name:t,parameters:n})).data}async function qt(a){return(await e.get(`/api/admin/rag-bindings/${a}/models`)).data}async function Ht(a,t){const n=await e.put(`/api/admin/rag-bindings/${a}/alias`,t),s=f.value.findIndex(c=>c.id===a);s!==-1&&(f.value[s]=n.data)}async function Xt(a,t){const n=await e.delete(`/api/admin/rag-bindings/${a}/alias`,{data:{original_model_name:t}}),s=f.value.findIndex(c=>c.id===a);s!==-1&&(f.value[s]=n.data)}async function Yt(a){return(await e.get(`/api/admin/rag-bindings/models-for-type/${a}`)).data}async function ae(a){await e.post("/api/admin/rag/aliases",a),await m(!0),o.addNotification(`Alias '${a.alias_name}' saved.`,"success")}async function te(a){await e.delete("/api/admin/rag/aliases",{data:{alias_name:a}}),await m(!0),o.addNotification(`Alias '${a}' deleted.`,"success")}async function ee(a=!1){if(!(!a&&J.value.length>0))try{const t=await e.get("/api/admin/rag/available-vectorizers");J.value=t.data}catch(t){console.error(t)}}async function ne(a=!1){if(!(!a&&y.value.length>0)){Q.value=!0;try{const t=await e.get("/api/apps_zoo/repositories");y.value=t.data}finally{Q.value=!1}}}async function se(a){const t=await e.post("/api/apps_zoo/repositories",a);y.value.push(t.data)}async function ie(a){await e.delete(`/api/apps_zoo/repositories/${a}`),y.value=y.value.filter(t=>t.id!==a)}async function Ua(a){const t=await e.post(`/api/apps_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function oe(){for(const a of y.value)await Ua(a.id)}async function ce(a=!1){if(!(!a&&v.value.length>0)){W.value=!0;try{const t=await e.get("/api/mcps_zoo/repositories");v.value=t.data}finally{W.value=!1}}}async function re(a){const t=await e.post("/api/mcps_zoo/repositories",a);v.value.push(t.data)}async function le(a){await e.delete(`/api/mcps_zoo/repositories/${a}`),v.value=v.value.filter(t=>t.id!==a)}async function Oa(a){const t=await e.post(`/api/mcps_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function de(){for(const a of v.value)await Oa(a.id)}async function ue(a=!1){if(!(!a&&w.value.length>0)){K.value=!0;try{const t=await e.get("/api/prompts_zoo/repositories");w.value=t.data}finally{K.value=!1}}}async function pe(a){const t=await e.post("/api/prompts_zoo/repositories",a);w.value.push(t.data)}async function fe(a){await e.delete(`/api/prompts_zoo/repositories/${a}`),w.value=w.value.filter(t=>t.id!==a)}async function Ea(a){const t=await e.post(`/api/prompts_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function ge(){for(const a of w.value)await Ea(a.id)}async function me(a=!1){if(!(!a&&h.value.length>0)){q.value=!0;try{const t=await e.get("/api/personalities_zoo/repositories");h.value=t.data}catch(t){console.error(t)}finally{q.value=!1}}}async function ye(a){const t=await e.post("/api/personalities_zoo/repositories",a);h.value.push(t.data)}async function ve(a){await e.delete(`/api/personalities_zoo/repositories/${a}`),h.value=h.value.filter(t=>t.id!==a)}async function we(a){const t=await e.post(`/api/personalities_zoo/repositories/${a}/pull`);r.addTask(t.data)}async function $(a=!1){if(!(!a&&z.value.items.length>0)){H.value=!0;try{const[t,n]=await Promise.all([e.get("/api/apps_zoo/categories"),e.get("/api/apps_zoo/available")]);z.value={...n.data,categories:t.data}}finally{H.value=!1}}}async function he(a){const t=await e.post("/api/apps_zoo/install",a);r.addTask(t.data)}async function _e(a,t){return(await e.get("/api/apps_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function B(a=!1){if(!(!a&&R.value.items.length>0)){X.value=!0;try{const[t,n]=await Promise.all([e.get("/api/mcps_zoo/categories"),e.get("/api/mcps_zoo/available")]);R.value={...n.data,categories:t.data}}finally{X.value=!1}}}async function be(a){const t=await e.post("/api/mcps_zoo/install",a);r.addTask(t.data)}async function Te(a,t){return(await e.get("/api/mcps_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function $a(a={},t=!1){if(!(!t&&Y.value.items.length>0)){aa.value=!0;try{const[n,s]=await Promise.all([e.get("/api/prompts_zoo/categories"),e.get("/api/prompts_zoo/available",{params:a})]);Y.value={...s.data,categories:n.data}}finally{aa.value=!1}}}async function Se(a){const t=await e.post("/api/prompts_zoo/install",a);r.addTask(t.data)}async function $e(a,t){return(await e.get("/api/prompts_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function Da(a={},t=!1){if(!(!t&&ta.value.items.length>0)){ea.value=!0;try{const[n,s]=await Promise.all([e.get("/api/personalities_zoo/categories"),e.get("/api/personalities_zoo/available",{params:a})]);ta.value={...s.data,categories:n.data}}catch(n){console.error(n)}finally{ea.value=!1}}}async function Be(a){const t=await e.post("/api/personalities_zoo/install",a);r.addTask(t.data)}async function Ae(a,t){return(await e.get("/api/personalities_zoo/readme",{params:{repository:a,folder_name:t}})).data}async function ze(a){return(await e.get(`/api/admin/bindings/${a}/zoo`)).data}async function Re(a,t){const n=await e.post(`/api/admin/bindings/${a}/zoo/install`,{index:t});return r.addTask(n.data),n.data}async function Le(a){return(await e.get(`/api/admin/tti-bindings/${a}/zoo`)).data}async function Fe(a,t){const n=await e.post(`/api/admin/tti-bindings/${a}/zoo/install`,{index:t});return r.addTask(n.data),n.data}async function Ne(a){return(await e.get(`/api/admin/tts-bindings/${a}/zoo`)).data}async function ke(a,t){const n=await e.post(`/api/admin/tts-bindings/${a}/zoo/install`,{index:t});return r.addTask(n.data),n.data}async function Pe(a){return(await e.get(`/api/admin/stt-bindings/${a}/zoo`)).data}async function Ze(a,t){const n=await e.post(`/api/admin/stt-bindings/${a}/zoo/install`,{index:t});return r.addTask(n.data),n.data}async function Ie(a){const{usePromptsStore:t}=await La(async()=>{const{usePromptsStore:s}=await import("./index-CGf9GErn.js").then(c=>c.eu);return{usePromptsStore:s}},__vite__mapDeps([0,1])),n=await e.post("/api/prompts_zoo/installed",a);return await t().fetchPrompts(),n.data}async function xe(a,t){const{usePromptsStore:n}=await La(async()=>{const{usePromptsStore:s}=await import("./index-CGf9GErn.js").then(c=>c.eu);return{usePromptsStore:s}},__vite__mapDeps([0,1]));await e.put(`/api/prompts_zoo/installed/${a}`,t),await n().fetchPrompts()}async function Me(a){const{usePromptsStore:t}=await La(async()=>{const{usePromptsStore:n}=await import("./index-CGf9GErn.js").then(s=>s.eu);return{usePromptsStore:n}},__vite__mapDeps([0,1]));await e.delete(`/api/prompts_zoo/installed/${a}`),await t().fetchPrompts(),await $a({},!0)}async function Ce(a){const t=await e.post(`/api/prompts_zoo/installed/${a}/update`);r.addTask(t.data)}async function Ue(a){const t=await e.post("/api/prompts_zoo/generate_from_prompt",{prompt:a});return r.addTask(t.data),t.data}async function Oe(a=!1){if(!(!a&&na.value.length>0)){sa.value=!0;try{const t=await e.get("/api/apps_zoo/installed");na.value=t.data}finally{sa.value=!1}}}async function Ee(a=null){const t=a?{port:a}:{};return(await e.get("/api/apps_zoo/get-next-available-port",{params:t})).data.port}async function De(a){const t=await e.post(`/api/apps_zoo/installed/${a}/start`);r.addTask(t.data)}async function Ge(a){const t=await e.post(`/api/apps_zoo/installed/${a}/stop`);r.addTask(t.data)}async function je(a){const t=await e.post(`/api/apps_zoo/installed/${a}/restart`);r.addTask(t.data)}async function Ve(a){const t=await e.post(`/api/apps_zoo/installed/${a}/update`);r.addTask(t.data)}async function Je(a){await e.delete(`/api/apps_zoo/installed/${a}`),await $(!0),await B(!0),o.addNotification("Item uninstalled.","success")}async function Qe(a,t){await e.put(`/api/apps_zoo/installed/${a}`,t),await $(!0),await B(!0)}async function We(a){return(await e.get(`/api/apps_zoo/installed/${a}/logs`)).data.log_content}async function Ke(a){return(await e.get(`/api/apps_zoo/installed/${a}/config-schema`)).data}async function qe(a){return(await e.get(`/api/apps_zoo/installed/${a}/config`)).data}async function He(a,t){await e.put(`/api/apps_zoo/installed/${a}/config`,t)}async function Xe(a){return(await e.get(`/api/apps_zoo/installed/${a}/env`)).data}async function Ye(a,t){await e.put(`/api/apps_zoo/installed/${a}/env`,{content:t}),o.addNotification(".env file saved.","success")}async function an(a){await e.delete(`/api/apps/${a}`),await $(!0),o.addNotification("App registration removed.","success")}async function tn(a){await e.delete(`/api/mcps/${a}`),await B(!0),o.addNotification("MCP registration removed.","success")}async function en(){const a=await e.post("/api/apps_zoo/sync-installs");r.addTask(a.data)}async function nn(a){const t=await e.post("/api/apps_zoo/purge-broken",{item_type:a.item_type||"app",folder_name:a.folder_name});r.addTask(t.data)}async function sn(a){const t=await e.post("/api/apps_zoo/fix-broken",{item_type:a.item_type||"app",folder_name:a.folder_name});r.addTask(t.data)}async function _(a=!1){if(!(!a&&S.value.length>0)){fa.value=!0;try{const t=await e.get("/api/admin/fun-facts");S.value=t.data}finally{fa.value=!1}}}async function b(a=!1){if(!(!a&&ga.value.length>0)){ma.value=!0;try{const t=await e.get("/api/admin/fun-facts/categories");ga.value=t.data}finally{ma.value=!1}}}async function on(a){await e.post("/api/admin/fun-facts",a),await _(!0)}async function cn(a,t){await e.put(`/api/admin/fun-facts/${a}`,t),await _(!0)}async function rn(a){await e.delete(`/api/admin/fun-facts/${a}`),S.value=S.value.filter(t=>t.id!==a)}async function ln(a){await e.post("/api/admin/fun-facts/categories",a),await b(!0)}async function dn(a,t){await e.put(`/api/admin/fun-facts/categories/${a}`,t),await b(!0)}async function un(a){await e.delete(`/api/admin/fun-facts/categories/${a}`),await Promise.all([b(!0),_(!0)])}async function pn(){const a=await e.get("/api/admin/fun-facts/export",{responseType:"blob"}),t=URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=t,n.download="fun_facts_export.json",n.click(),URL.revokeObjectURL(t)}async function fn(a,t){const n=await e.get(`/api/admin/fun-facts/categories/${a}/export`,{responseType:"blob"}),s=URL.createObjectURL(new Blob([n.data])),c=document.createElement("a");c.href=s,c.download=`fun_facts_${t}.json`,c.click(),URL.revokeObjectURL(s)}async function gn(a){const t={fun_facts:a},n=await e.post("/api/admin/fun-facts/import",t);await Promise.all([_(!0),b(!0)]),o.addNotification(`Imported ${n.data.facts_created} facts and ${n.data.categories_created} new categories.`,"success")}async function mn(a){const t=new FormData;t.append("file",a);const n=await e.post("/api/admin/fun-facts/categories/import",t);await Promise.all([_(!0),b(!0)]),o.addNotification(`Imported ${n.data.facts_created} facts for category.`,"success")}async function yn(a,t){const n=await e.post("/api/admin/fun-facts/generate-from-prompt",{prompt:a,category:t});return r.addTask(n.data),n.data}async function Ba(a=!1){if(!(!a&&ya.value.length>0)){va.value=!0;try{const t=await e.get("/api/admin/news-articles");ya.value=t.data}finally{va.value=!1}}}async function vn(a,t){await e.put(`/api/admin/news-articles/${a}`,t),await Ba(!0),o.addNotification("Article updated.","success")}async function wn(a){await e.post("/api/admin/news-articles/batch-delete",{article_ids:a}),await Ba(!0),o.addNotification(`${a.length} article(s) deleted.`,"success")}async function Aa(a={}){N.value=!0;try{const t=await e.get("/api/admin/users",{params:a});Na.value=t.data}finally{N.value=!1}}async function hn(a){await e.post(`/api/admin/users/${a}/activate`),o.addNotification("User activated.","success"),Aa()}async function _n(a){try{return(await e.get(`/api/admin/users/${a}/stats`)).data}catch{return null}}async function bn(a){await e.post("/api/admin/users/batch-update-settings",a),await Aa()}async function Tn(a,t,n,s,c){const Cn=await e.post("/api/admin/email-users",{subject:a,body:t,user_ids:n,background_color:s,send_as_text:c});return r.addTask(Cn.data),!0}async function Sn(a,t,n,s){ha.value=!0;try{return(await e.post("/api/admin/enhance-email",{subject:a,body:t,background_color:n,prompt:s})).data}finally{ha.value=!1}}async function $n(a){const t=new FormData;t.append("file",a);const n=await e.post("/api/admin/upload-logo",t);await m(!0),o.addNotification(n.data.message,"success")}async function Bn(){await e.delete("/api/admin/remove-logo"),await m(!0),o.addNotification("Custom logo removed.","success")}async function An(a,t){const n=new FormData;n.append("file",a),n.append("file_type",t);const s=await e.post("/api/admin/upload-ssl-file",n,{headers:{"Content-Type":"multipart/form-data"}});return await m(!0),s.data.path}async function zn(){var a,t;try{const n=await e.post("/api/admin/generate-cert");return r.addTask(n.data),o.addNotification("Certificate generation task started. Check tasks for progress.","info"),n.data}catch(n){const s=((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.detail)||"Failed to start certificate task.";throw o.addNotification(s,"error"),n}}async function Rn(){try{const a=await e.get("/api/admin/download-cert",{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","lollms_cert.pem"),document.body.appendChild(n),n.click(),n.remove()}catch{o.addNotification("Failed to download certificate.","error")}}async function Ln(a){try{const t=await e.get("/api/admin/download-trust-script",{params:{script_type:a},responseType:"blob"}),n=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=n;const c=a==="windows"?"bat":"sh";s.setAttribute("download",`install_lollms_cert.${c}`),document.body.appendChild(s),s.click(),s.remove()}catch(t){console.error(t),o.addNotification("Failed to download trust script.","error")}}async function Fn(a){wa.value=!0;const t=new FormData;t.append("file",a);try{await e.post("/api/admin/import-openwebui",t)}finally{wa.value=!1}}async function Nn(a=!1){if(!(!a&&_a.value.length>0)){ba.value=!0;try{const t=await e.get("/api/admin/available-models");_a.value=t.data}finally{ba.value=!1}}}async function kn(a){const t=await e.post("/api/admin/bindings/generate_icon",{prompt:a});return r.addTask(t.data),t.data}async function Pn(){const a=await e.post("/api/admin/rss-feeds/scrape");return r.addTask(a.data),a.data}async function Zn(){const a=await e.post("/api/admin/refresh-zoo-cache");return r.addTask(a.data),a.data}async function In(a=null){const t={};return a&&(t.status_filter=a),(await e.get("/api/admin/moderation/queue",{params:t})).data}async function xn(a,t){await e.post(`/api/admin/moderation/${a}/${t}/approve`)}async function Mn(a,t){await e.delete(`/api/admin/moderation/${a}/${t}`)}return{dashboardStats:T,isLoadingDashboardStats:F,allUsers:Na,isLoadingUsers:N,serviceStats:ka,isLoadingServiceStats:k,globalSettings:P,isLoadingSettings:Z,aiBotSettings:A,isLoadingAiBotSettings:I,bindings:l,isLoadingBindings:x,availableBindingTypes:M,ttiBindings:d,isLoadingTtiBindings:C,availableTtiBindingTypes:U,ttsBindings:u,isLoadingTtsBindings:O,availableTtsBindingTypes:E,sttBindings:p,isLoadingSttBindings:D,availableSttBindingTypes:G,ragBindings:f,isLoadingRagBindings:j,availableRagBindingTypes:V,availableRagVectorizers:J,zooRepositories:y,isLoadingZooRepositories:Q,mcpZooRepositories:v,isLoadingMcpZooRepositories:W,promptZooRepositories:w,isLoadingPromptZooRepositories:K,personalityZooRepositories:h,isLoadingPersonalityZooRepositories:q,zooApps:z,isLoadingZooApps:H,zooMcps:R,isLoadingZooMcps:X,zooPrompts:Y,isLoadingZooPrompts:aa,zooPersonalities:ta,isLoadingZooPersonalities:ea,installedApps:na,isLoadingInstalledApps:sa,systemStatus:Pa,isLoadingSystemStatus:ia,connectedUsers:oa,isLoadingConnectedUsers:ca,serverInfo:ra,isLoadingServerInfo:la,globalGenerationStats:L,isLoadingGlobalGenerationStats:da,modelUsageStats:ua,isLoadingModelUsageStats:pa,funFacts:S,isLoadingFunFacts:fa,funFactCategories:ga,isLoadingFunFactCategories:ma,newsArticles:ya,isLoadingNewsArticles:va,isImporting:wa,isEnhancingEmail:ha,adminAvailableLollmsModels:_a,isLoadingLollmsModels:ba,appFilters:Za,mcpFilters:Ia,promptFilters:xa,systemLogs:Ta,isLoadingSystemLogs:Sa,fetchDashboardStats:Ya,fetchConnectedUsers:at,broadcastMessage:Ha,createBackup:Ja,analyzeSystemLogs:Qa,fetchServiceDashboard:Ma,resetServiceUsage:Va,fetchSystemStatus:Ca,killProcess:Xa,fetchModelUsageStats:st,fetchServerInfo:nt,purgeUnusedUploads:Wa,fetchAllUsers:Aa,activateUser:hn,fetchUserStats:_n,batchUpdateUsers:bn,fetchGlobalGenerationStats:tt,fetchGlobalSettings:m,updateGlobalSettings:it,fetchAiBotSettings:ot,updateAiBotSettings:ct,triggerBatchModeration:Ka,triggerFullRemoderation:qa,uploadWelcomeLogo:$n,removeWelcomeLogo:Bn,uploadSslFile:An,importOpenWebUIData:Fn,fetchAdminAvailableLollmsModels:Nn,generateIconForModel:kn,fetchBindings:rt,fetchAvailableBindingTypes:lt,addBinding:dt,updateBinding:ut,deleteBinding:pt,fetchBindingModels:Pt,getModelCtxSize:Zt,saveModelAlias:It,deleteModelAlias:xt,executeBindingCommand:Mt,fetchTtiBindings:ft,fetchAvailableTtiBindingTypes:gt,addTtiBinding:mt,updateTtiBinding:yt,deleteTtiBinding:vt,fetchTtiBindingModels:Ct,saveTtiModelAlias:Ut,deleteTtiModelAlias:Ot,executeTtiBindingCommand:Et,fetchTtsBindings:wt,fetchAvailableTtsBindingTypes:ht,addTtsBinding:_t,updateTtsBinding:bt,deleteTtsBinding:Tt,fetchTtsBindingModels:Dt,saveTtsModelAlias:Gt,deleteTtsModelAlias:jt,executeTtsBindingCommand:Vt,fetchSttBindings:St,fetchAvailableSttBindingTypes:$t,addSttBinding:Bt,updateSttBinding:At,deleteSttBinding:zt,fetchSttBindingModels:Jt,saveSttModelAlias:Qt,deleteSttModelAlias:Wt,executeSttBindingCommand:Kt,fetchRagBindings:Rt,fetchAvailableRagBindingTypes:Lt,addRagBinding:Ft,updateRagBinding:Nt,deleteRagBinding:kt,fetchRagBindingModels:qt,saveRagModelAlias:Ht,deleteRagModelAlias:Xt,fetchRagModelsForType:Yt,addOrUpdateRagAlias:ae,deleteRagAlias:te,fetchAvailableRagVectorizers:ee,fetchZooRepositories:ne,addZooRepository:se,deleteZooRepository:ie,pullZooRepository:Ua,pullAllZooRepositories:oe,fetchMcpZooRepositories:ce,addMcpZooRepository:re,deleteMcpZooRepository:le,pullMcpZooRepository:Oa,pullAllMcpZooRepositories:de,fetchPromptZooRepositories:ue,addPromptZooRepository:pe,deletePromptZooRepository:fe,pullPromptZooRepository:Ea,pullAllPromptZooRepositories:ge,fetchPersonalityZooRepositories:me,addPersonalityZooRepository:ye,deletePersonalityZooRepository:ve,pullPersonalityZooRepository:we,fetchZooApps:$,installZooApp:he,fetchAppReadme:_e,fetchZooMcps:B,installZooMcp:be,fetchMcpReadme:Te,fetchZooPrompts:$a,installZooPrompt:Se,fetchPromptReadme:$e,fetchZooPersonalities:Da,installZooPersonality:Be,fetchPersonalityReadme:Ae,createSystemPrompt:Ie,updateSystemPrompt:xe,deleteSystemPrompt:Me,updateSystemPromptFromZoo:Ce,generateSystemPrompt:Ue,fetchInstalledApps:Oe,fetchNextAvailablePort:Ee,startApp:De,stopApp:Ge,restartApp:je,updateApp:Ve,uninstallApp:Je,updateInstalledApp:Qe,fetchAppLog:We,fetchAppConfigSchema:Ke,fetchAppConfig:qe,updateAppConfig:He,fetchAppEnv:Xe,updateAppEnv:Ye,deleteRegisteredApp:an,deleteRegisteredMcp:tn,syncInstallations:en,purgeBrokenInstallation:nn,fixBrokenInstallation:sn,handleAppStatusUpdate:ja,fetchFunFacts:_,fetchFunFactCategories:b,createFunFact:on,updateFunFact:cn,deleteFunFact:rn,createFunFactCategory:ln,updateFunFactCategory:dn,deleteFunFactCategory:un,exportFunFacts:pn,exportCategory:fn,importFunFacts:gn,importCategoryFromFile:mn,generateFunFacts:yn,fetchNewsArticles:Ba,updateNewsArticle:vn,deleteBatchNewsArticles:wn,fetchSystemLogs:et,sendEmailToUsers:Tn,enhanceEmail:Sn,triggerRssScraping:Pn,refreshZooCache:Zn,generateSelfSignedCert:zn,downloadCertificate:Rn,downloadTrustScript:Ln,fetchBindingZoo:ze,installLlmFromZoo:Re,fetchTtiBindingZoo:Le,installTtiFromZoo:Fe,fetchTtsBindingZoo:Ne,installTtsFromZoo:ke,fetchSttBindingZoo:Pe,installSttFromZoo:Ze,fetchModerationQueue:In,approveContent:xn,deleteContent:Mn}});export{Vn as useAdminStore};
