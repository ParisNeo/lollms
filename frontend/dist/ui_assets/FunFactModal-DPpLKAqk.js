import{u as w,s as C,h as i,r as p,l as M,c as k,o as c,w as b,a as o,i as g,t as F,f as _,v as x,y as B,d as S,A,F as D,b as E}from"./index-BztlMlxc.js";import{_ as N}from"./GenericModal-DF57XP4_.js";import{useAdminStore as U}from"./admin-DdhxCg1C.js";const V=["value"],q=["disabled"],R={__name:"FunFactModal",setup(L){const n=w(),u=U(),{funFactCategories:d}=C(u),f=i(()=>n.modalData("funFact")),r=i(()=>{var t;return(t=f.value)==null?void 0:t.fact}),v=i(()=>{var t;return(t=f.value)==null?void 0:t.onSave}),a=p({content:"",category_id:null}),s=p(!1),m=i(()=>!!r.value);M(r,t=>{var e;t?a.value={content:t.content,category_id:t.category_id}:a.value={content:"",category_id:((e=d.value[0])==null?void 0:e.id)||null}},{immediate:!0});async function y(){if(!a.value.category_id){n.addNotification("Please select a category.","warning");return}s.value=!0;try{m.value?await u.updateFunFact(r.value.id,a.value):await u.createFunFact(a.value),v.value&&v.value(),n.closeModal("funFact")}finally{s.value=!1}}return(t,e)=>(c(),k(N,{modalName:"funFact",title:m.value?"Edit Fun Fact":"Add Fun Fact"},{body:b(()=>[o("form",{onSubmit:E(y,["prevent"]),class:"space-y-4"},[o("div",null,[e[3]||(e[3]=o("label",{for:"fact-content",class:"label"},"Content",-1)),_(o("textarea",{id:"fact-content","onUpdate:modelValue":e[0]||(e[0]=l=>a.value.content=l),rows:"4",class:"input-field",required:""},null,512),[[x,a.value.content]])]),o("div",null,[e[4]||(e[4]=o("label",{for:"fact-category",class:"label"},"Category",-1)),_(o("select",{id:"fact-category","onUpdate:modelValue":e[1]||(e[1]=l=>a.value.category_id=l),class:"input-field",required:""},[(c(!0),S(D,null,A(g(d),l=>(c(),S("option",{key:l.id,value:l.id},F(l.name),9,V))),128))],512),[[B,a.value.category_id]])])],32)]),footer:b(()=>[o("button",{type:"button",onClick:e[2]||(e[2]=l=>g(n).closeModal("funFact")),class:"btn btn-secondary"},"Cancel"),o("button",{type:"button",onClick:y,class:"btn btn-primary",disabled:s.value},F(s.value?"Saving...":"Save"),9,q)]),_:1},8,["title"]))}};export{R as default};
