const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["ui_assets/DataStoreGraphManager-DPmFSz6e.js","ui_assets/index-CpNEmBDf.js","ui_assets/index-wpwugJHo.css"])))=>i.map(i=>d[i]);
import{ad as vt,u as mt,aa as ft,i as pt,an as $e,N as i,c as W,l as gt,m as Y,$ as yt,e as n,b as t,f as y,g as c,F as M,a as _,C as ze,t as r,n as oe,a4 as je,Q as ht,a3 as bt,au as xt,aB as R,ax as qe,K as re,W as h,ak as C,d as ye,ap as Re,r as K,h as D,X as kt,ar as wt,aK as _t,aE as Le,as as St,aL as Ct,s as Dt,w as he,O as $t,H as zt,q as Vt,o as s,Z as Mt,aH as Tt,aI as Ft,aD as Ve,aG as It,U as At,aA as Nt,V as Ut}from"./index-CpNEmBDf.js";import{u as Et}from"./admin-BZkwaOa8.js";import{_ as Me}from"./JsonRenderer-BthKXhE6.js";import{_ as Pe}from"./GenericModal-DyRxZVIy.js";const jt={class:"flex flex-col h-full w-full"},qt={class:"flex items-center gap-4 h-full max-w-full overflow-hidden"},Rt={class:"flex items-center gap-2 min-w-0"},Lt={class:"text-lg font-bold text-gray-800 dark:text-gray-100 truncate max-w-[200px]"},Pt={class:"flex space-x-1 p-1 bg-gray-100 dark:bg-gray-700/50 rounded-lg"},Kt={class:"flex items-center gap-1"},Ot={class:"p-4 overflow-y-auto flex-grow h-full w-full"},Gt={key:0,class:"p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm"},Bt={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Qt=["label"],Ht=["value"],Wt={key:0,class:"text-xs text-red-500 mt-1"},Jt={key:1,class:"p-4 border dark:border-gray-700 rounded-lg space-y-4"},Xt={class:"font-medium text-lg"},Zt={class:"text-sm text-gray-500"},Yt={key:0,class:"space-y-4"},ea={key:0},ta=["for"],aa={key:0,class:"text-red-500"},la={class:"relative mt-1"},sa=["type","onUpdate:modelValue","placeholder"],na=["onClick","title"],oa={class:"flex justify-end gap-3"},ra=["disabled"],ia={key:1,class:"h-full flex items-center justify-center bg-white dark:bg-gray-800 rounded-lg shadow-sm"},da={class:"text-center"},ua={key:2,class:"text-center py-20 bg-white dark:bg-gray-800 rounded-lg shadow-sm"},ca={key:3,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md h-full overflow-hidden flex flex-col"},va={class:"p-6 flex-grow overflow-y-auto space-y-8"},ma={key:0,class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6 space-y-4"},fa={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pa={class:"relative flex items-start pt-7"},ga={class:"flex h-6 items-center"},ya={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-4"},ha={class:"flex justify-center gap-2 flex-wrap"},ba={class:"border rounded-lg p-6 bg-white dark:bg-gray-800 dark:border-gray-600 flex flex-col min-h-[180px]"},xa={class:"text-sm font-semibold mb-3 flex items-center gap-2"},ka={class:"space-y-3 flex-grow"},wa={class:"flex items-center gap-4"},_a={class:"flex-grow"},Sa={class:"self-end"},Ca=["disabled"],Da={key:0},$a={key:0,class:"mt-4"},za={class:"flex items-center gap-4 mt-1"},Va={class:"flex items-center"},Ma={class:"flex items-center"},Ta={key:1,class:"mt-4"},Fa={class:"text-sm font-medium mb-2"},Ia={class:"list-disc list-inside text-sm space-y-1 max-h-40 overflow-y-auto mb-4 p-2 bg-gray-100 dark:bg-gray-800 rounded-md"},Aa={class:"truncate"},Na=["onClick"],Ua={key:2,class:"space-y-4 mt-4 max-h-96 overflow-y-auto"},Ea={class:"flex justify-between items-start"},ja={class:"font-semibold text-sm truncate"},qa=["onClick"],Ra=["onUpdate:modelValue"],La={key:3,class:"mt-4"},Pa={class:"text-sm font-medium mb-2"},Ka={class:"space-y-1 max-h-40 overflow-y-auto"},Oa={class:"truncate"},Ga=["onClick"],Ba={key:1,class:"mt-4 text-center text-sm text-gray-500 italic p-4 border-2 border-dashed rounded-lg dark:border-gray-600"},Qa={class:"flex justify-end items-center mt-4"},Ha=["disabled"],Wa={key:1,class:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700 text-sm"},Ja={key:2,class:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-700 text-sm"},Xa={class:"text-xl font-semibold mb-4"},Za={key:0,class:"flex items-center justify-between bg-gray-50 dark:bg-gray-800/50 p-2 rounded-md mb-2"},Ya={class:"flex items-center"},el=["checked","indeterminate"],tl=["disabled"],al={key:1,class:"text-center py-10"},ll={key:2,class:"text-center py-10 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},sl={key:3,class:"divide-y divide-gray-200 dark:divide-gray-700"},nl=["onChange","checked"],ol={class:"flex-grow min-w-0"},rl={class:"flex items-center gap-2"},il=["onClick"],dl={key:0,class:"mt-2 text-xs"},ul={class:"mt-1 p-2 bg-gray-100 dark:bg-gray-700/50 rounded"},cl={key:0,class:"p-6 flex-grow overflow-y-auto flex flex-col"},vl={class:"flex-shrink-0 space-y-4"},ml={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},fl={class:"self-end"},pl=["disabled"],gl={class:"flex-grow min-h-0 mt-6 border-t dark:border-gray-700 pt-6"},yl={class:"flex justify-between items-center mb-4"},hl={class:"text-lg font-semibold"},bl={key:0,class:"flex items-center gap-2"},xl={class:"text-sm text-gray-500 font-mono"},kl={key:0,class:"text-center p-6 text-gray-500"},wl={key:1,class:"p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-md"},_l={key:2,class:"text-center p-6 text-gray-500"},Sl={key:3,class:"text-center p-6 text-gray-500"},Cl={key:4,class:"space-y-4 overflow-y-auto custom-scrollbar h-full pb-10"},Dl=["id"],$l={class:"flex justify-between items-center text-xs text-gray-500 dark:text-gray-400 mb-2"},zl=["title"],Vl=["title"],Ml=["innerHTML"],Tl={key:1,class:"p-6 flex-grow overflow-y-auto"},Fl={key:4,class:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm rounded-lg"},Il={key:0,class:"space-y-4"},Al={class:"text-sm text-gray-600 dark:text-gray-400"},Nl={class:"flex items-center gap-2 mt-1"},Ul={class:"text-sm"},El={class:"grid grid-cols-2 gap-4 bg-gray-50 dark:bg-gray-700/30 p-3 rounded-lg border dark:border-gray-600"},jl={class:"text-sm"},ql={class:"text-sm"},Rl={class:"max-h-60 overflow-y-auto border rounded dark:border-gray-600 p-2 bg-gray-50 dark:bg-gray-800"},Ll={key:0,class:"space-y-4"},Pl={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 flex flex-col gap-2"},Kl={class:"flex justify-between items-start"},Ol={class:"text-lg font-bold text-gray-900 dark:text-white break-all"},Gl={key:0,class:"text-sm text-gray-500 dark:text-gray-400 font-mono mt-1"},Bl={class:"text-right text-xs text-gray-500 dark:text-gray-400 space-y-1 flex-shrink-0 ml-4"},Ql={title:"Total characters"},Hl={class:"font-semibold"},Wl={title:"Approximate word count"},Jl={class:"font-semibold"},Xl={title:"Estimated tokens (char/4)"},Zl={class:"font-semibold"},Yl={key:0,class:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700"},es={class:"text-sm group"},ts={class:"mt-2 p-2 bg-white dark:bg-gray-900 rounded border dark:border-gray-700"},as={class:"relative group"},ls={class:"absolute top-2 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity z-10"},ss={class:"p-4 border rounded-lg dark:border-gray-700 bg-white dark:bg-gray-900 overflow-auto max-h-[60vh] whitespace-pre-wrap font-mono text-sm leading-relaxed"},us={__name:"DataStoresView",setup(ns){const Ke=Dt({loader:()=>zt(()=>import("./DataStoreGraphManager-DPmFSz6e.js"),__vite__mapDeps([0,1,2])),loadingComponent:null,delay:200,errorComponent:null,timeout:3e3}),$=vt(),g=mt(),be=ft();Et();const Oe=pt(),Ge=Vt(),{user:ie}=$e(Oe),{ownedDataStores:Be,sharedDataStores:Qe,availableVectorizers:He}=$e($),{tasks:We}=$e(be),L=i(null),S=i(null),T=i("documents"),O=i(!1),de=i(!1),v=i({name:"",description:"",selectedVectorizerKey:null,config:{},chunk_size:2048,chunk_overlap:256}),ee=i({}),A=i([]),ue=i(!1),x=i([]),ce=i(null),ve=i(null),N=i(null),me=i(null),U=i(null),te=i(!1),w=i(new Set),J=i(""),fe=i(0),ae=i(!1),le=i(!1),X=i(""),xe=i(10),ke=i(50),F=i([]),Z=i(!1),se=i(""),E=i(""),z=i([]),G=i(-1),b=i(null),B=i(null),j=i("none"),Q=i({}),we=i(!0),H=i("per-file"),ne=i(`title: 
subject: 
authors: `),Te=W(()=>A.value.length>0&&w.value.size===A.value.length),Je=W(()=>w.value.size>0&&!Te.value),_e=W(()=>He.value),q=W(()=>{if(!v.value.selectedVectorizerKey)return null;const l=v.value.selectedVectorizerKey.split("/");if(l.length<2)return null;const e=l[0],u=l.slice(1).join("/"),a=_e.value.find(o=>o.alias===e);return a?{...a,selectedModelName:u}:null}),Xe=W(()=>[...Be.value,...Qe.value].sort((l,e)=>l.name.localeCompare(e.name))),d=W(()=>Xe.value.find(l=>l.id===L.value)),pe=W(()=>!!N.value||!!me.value||!!U.value);function Ze(l){if(!l)return"";if(!E.value||z.value.length===0)return l;const e=E.value,u=new RegExp(`(${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return l.replace(u,'<mark class="bg-yellow-200 dark:bg-yellow-700 rounded">$1</mark>')}gt(()=>{$.fetchDataStores(),$.fetchAvailableVectorizers(),be.fetchTasks(),window.addEventListener("lollms:open-new-datastore",Fe)}),Y([L,O],([l,e])=>{l?g.setPageTitle({title:""}):e?g.setPageTitle({title:"New Data Store",icon:Ut}):g.setPageTitle({title:"Data Studio",icon:ze})},{immediate:!0}),yt(()=>{g.setPageTitle({title:""}),window.removeEventListener("lollms:open-new-datastore",Fe)}),Y(()=>Ge.currentRoute.value.query.storeId,l=>{l&&Se(l)},{immediate:!0}),Y(We,l=>{if(!d.value){N.value=null,me.value=null,U.value=null;return}const e=d.value.name,u=V=>l.filter(m=>m.name.startsWith(V)&&m.name.includes(e)&&(m.status==="running"||m.status==="pending")).sort((m,p)=>new Date(p.created_at)-new Date(m.created_at))[0]||null,a=u("Add files to DataStore:"),o=u("Generate Graph for:")||u("Update Graph for:"),f=u("Scrape URL to DataStore:");(N.value&&!a&&(N.value.status==="running"||N.value.status==="pending")||U.value&&!f&&(U.value.status==="running"||U.value.status==="pending"))&&De(d.value.id),N.value=a,me.value=o,U.value=f},{deep:!0}),Y(L,l=>{O.value=!1,w.value.clear(),l?(T.value="documents",De(l),X.value="",F.value=[],se.value=""):A.value=[]},{immediate:!0}),Y(q,l=>{v.value.config={},l&&(v.value.config={...l.vectorizer_config||{}},l.selectedModelName&&(v.value.config.model_name=l.selectedModelName))},{deep:!0}),Y(F,()=>{E.value="",z.value=[],G.value=-1});function Se(l){L.value=l}function Fe(){var l,e;O.value=!0,L.value=null,v.value={name:"",description:"",selectedVectorizerKey:null,config:{},chunk_size:((l=ie.value)==null?void 0:l.default_chunk_size)||1024,chunk_overlap:((e=ie.value)==null?void 0:e.default_chunk_overlap)||256}}async function Ye(){if(!v.value.name.trim()||!q.value){g.addNotification("Name and vectorizer are required.","warning");return}S.value="add_store";try{const l={name:v.value.name,description:v.value.description,vectorizer_name:q.value.vectorizer_name,vectorizer_config:v.value.config||{},chunk_size:v.value.chunk_size,chunk_overlap:v.value.chunk_overlap},e=await $.addDataStore(l);v.value={name:"",description:"",selectedVectorizerKey:null,config:{},chunk_size:1024,chunk_overlap:256},O.value=!1,await $.fetchDataStores(),e&&e.id&&Se(e.id)}finally{S.value=null}}function et(l){g.openModal("editDataStore",{store:l})}async function tt(l){const{confirmed:e}=await g.showConfirmation({title:`Delete Data Store '${l.name}'?`,message:"This will permanently delete the data store and all its indexed documents.",confirmText:"Delete"});if(e){S.value=`delete_store_${l.id}`;try{await $.deleteDataStore(l.id),L.value===l.id&&(L.value=null)}finally{S.value=null}}}function at(l){g.openModal("shareDataStore",{store:l})}async function lt(l){l.preventDefault(),te.value=!1;const e=l.dataTransfer.items,u=[];function a(m){return new Promise((p,k)=>{m.readEntries(p,k)})}async function o(m){const p=m.createReader();let k=[],I;do I=await a(p),k=k.concat(I);while(I.length>0);return k}async function f(m){if(m.isFile)await new Promise((p,k)=>m.file(I=>{u.push(I),p()},k));else if(m.isDirectory){const p=await o(directoryEntry);for(const k of p)await f(k)}}const V=[];for(let m=0;m<e.length;m++){const p=e[m].webkitGetAsEntry();p&&V.push(f(p))}await Promise.all(V),u.length>0&&Ae(u)}function Ie(l){Ae(Array.from(l.target.files))}function Ae(l){const e=new Set(x.value.map(o=>o.name+o.size)),u=[],a={};for(const o of l){const f=o.name+o.size;e.has(f)||(u.push(o),a[o.name]=`title: 
subject: 
authors: `,e.add(f))}u.length>0&&(x.value=[...x.value,...u],Q.value={...Q.value,...a}),u.length<l.length&&g.addNotification(`${l.length-u.length} duplicate files skipped.`,"info"),ce.value&&(ce.value.value=""),ve.value&&(ve.value.value="")}function Ce(l){const e=x.value.splice(l,1);e.length>0&&delete Q.value[e[0].name]}async function De(l){ue.value=!0;try{A.value=await $.fetchStoreFiles(l)}finally{ue.value=!1}}async function st(){if(!d.value||x.value.length===0){g.addNotification("Please select files to upload.","warning");return}if(pe.value){g.addNotification("A task is already running for this Data Store.","warning");return}ae.value=!0;try{const l=new FormData;if(x.value.forEach(e=>l.append("files",e)),l.append("metadata_option",j.value),l.append("vectorize_with_metadata",we.value),j.value==="manual"){let e={};const u=a=>{const o={};if(!a)return o;const f=a.split(`
`);for(const V of f){const m=V.split(":");if(m.length>=2){const p=m[0].trim(),k=m.slice(1).join(":").trim();p&&(["authors","tags","keywords"].includes(p.toLowerCase())?o[p]=k.split(",").map(I=>I.trim()).filter(Boolean):o[p]=k)}}return o};try{if(H.value==="all"){const a=ne.value.trim()?u(ne.value):{};for(const o of x.value)e[o.name]=a}else for(const a of x.value){const o=Q.value[a.name]||"";e[a.name]=o.trim()?u(o):{}}l.append("manual_metadata_json",JSON.stringify(e))}catch(a){g.addNotification("Invalid metadata format. Please use 'key: value' pairs, with one entry per line.","error"),console.error("Metadata parsing error:",a);return}}await $.uploadFilesToStore({storeId:d.value.id,formData:l}),x.value=[],Q.value={},ne.value=`title: 
subject: 
authors: `}finally{ae.value=!1}}async function nt(){if(!J.value.trim()){g.addNotification("Please enter a URL.","warning");return}if(pe.value){g.addNotification("A task is already running for this Data Store.","warning");return}le.value=!0;try{const e=(await $t.post(`/api/store/${d.value.id}/scrape-url`,{url:J.value,depth:fe.value})).data;g.addNotification(`Scrape task '${e.name}' started.`,"info"),be.addTask(e),J.value="",fe.value=0}catch(l){console.error("Scrape failed:",l)}finally{le.value=!1}}function ge(l){return l&&["owner","read_write","revectorize"].includes(l.permission_level)}function ot(l){w.value.has(l)?w.value.delete(l):w.value.add(l)}function rt(l){l.target.checked?w.value=new Set(A.value.map(e=>e.filename)):w.value.clear()}async function it(){if(w.value.size===0)return;const{confirmed:l}=await g.showConfirmation({title:`Delete ${w.value.size} file(s)?`,message:"This will permanently remove the selected documents and their data from the data store.",confirmText:"Delete"});if(l){S.value="delete_selected_files";try{const e=Array.from(w.value);await $.deleteFilesFromStore({storeId:d.value.id,filenames:e}),await De(d.value.id),w.value.clear()}finally{S.value=null}}}async function dt(){if(!(!X.value.trim()||!d.value)){Z.value=!0,se.value="",F.value=[];try{const l=await $.queryDataStore({storeId:d.value.id,query:X.value,top_k:xe.value,min_similarity_percent:ke.value});F.value=l}catch{se.value="An error occurred during the query."}finally{Z.value=!1}}}function Ne(){if(!E.value){z.value=[],G.value=-1,document.querySelectorAll(".current-search-highlight").forEach(u=>u.classList.remove("current-search-highlight"));return}const l=E.value,e=[];F.value.forEach((u,a)=>{const o=u.chunk_text||"",f=new RegExp(l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");let V;for(;(V=f.exec(o))!==null;)e.push({chunkIndex:a,matchIndexInText:V.index})}),z.value=e,e.length>0?(G.value=0,Ee(e[0])):(G.value=-1,g.addNotification("No matches found in results.","info"),document.querySelectorAll(".current-search-highlight").forEach(u=>u.classList.remove("current-search-highlight")))}function Ue(l){if(z.value.length===0)return;let e=G.value+l;e<0&&(e=z.value.length-1),e>=z.value.length&&(e=0),G.value=e,Ee(z.value[e])}function Ee(l){var u;const e=document.getElementById(`chunk-${l.chunkIndex}`);if(e){document.querySelectorAll(".current-search-highlight").forEach(o=>o.classList.remove("current-search-highlight"));const a=Array.from(e.querySelectorAll("mark"));if(a.length>0){let o=0;const f=((u=F.value[l.chunkIndex])==null?void 0:u.chunk_text)||"",V=E.value,m=new RegExp(V.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");let p=-1;const k=f.split(m);let I=0;for(let P=1;P<k.length;P+=2){if(I===l.matchIndexInText){p=o;break}I+=(k[P-1]?k[P-1].length:0)+k[P].length,o++}if(p!==-1&&a[p]){const P=a[p];P.classList.add("current-search-highlight"),P.scrollIntoView({behavior:"smooth",block:"center"})}else e.scrollIntoView({behavior:"smooth",block:"center"})}else e.scrollIntoView({behavior:"smooth",block:"center"})}}async function ut(l){if(!B.value){B.value=l.filename;try{const e=await $.fetchFileContent(d.value.id,l.filename);b.value={filename:l.filename,metadata:l.metadata,content:e},g.openModal("fileContent")}catch{}finally{B.value=null}}}function ct(){b.value&&b.value.content&&(navigator.clipboard.writeText(b.value.content),g.addNotification("Content copied to clipboard","success"))}return(l,e)=>{var u;return s(),n(M,null,[t("div",jt,[d.value&&!O.value?(s(),n(M,{key:0},[(s(),_(je,{to:"#global-header-title-target"},[t("div",qt,[t("div",Rt,[y(ze,{class:"w-5 h-5 text-green-500 flex-shrink-0"}),t("h2",Lt,r(d.value.name),1)]),e[33]||(e[33]=t("div",{class:"h-5 w-px bg-gray-300 dark:border-gray-600 hidden md:block"},null,-1)),t("nav",Pt,[t("button",{onClick:e[0]||(e[0]=a=>T.value="documents"),class:oe(["px-3 py-1 text-xs font-medium rounded-md transition-all",T.value==="documents"?"bg-white dark:bg-gray-600 shadow text-blue-600 dark:text-blue-100":"text-gray-500 dark:text-gray-400 hover:text-gray-700"])},"Documents",2),t("button",{onClick:e[1]||(e[1]=a=>T.value="query"),class:oe(["px-3 py-1 text-xs font-medium rounded-md transition-all",T.value==="query"?"bg-white dark:bg-gray-600 shadow text-blue-600 dark:text-blue-100":"text-gray-500 dark:text-gray-400 hover:text-gray-700"])},"Query",2),t("button",{onClick:e[2]||(e[2]=a=>T.value="graph"),class:oe(["px-3 py-1 text-xs font-medium rounded-md transition-all",T.value==="graph"?"bg-white dark:bg-gray-600 shadow text-blue-600 dark:text-blue-100":"text-gray-500 dark:text-gray-400 hover:text-gray-700"])},"Graph",2)])])])),(s(),_(je,{to:"#global-header-actions-target"},[t("div",Kt,[t("button",{onClick:e[3]||(e[3]=a=>de.value=!0),class:"btn-icon",title:"Store Info"},[y(ht,{class:"w-5 h-5"})]),e[34]||(e[34]=t("div",{class:"h-4 w-px bg-gray-300 dark:border-gray-600 mx-1"},null,-1)),d.value.permission_level==="owner"?(s(),n("button",{key:0,onClick:e[4]||(e[4]=a=>at(d.value)),class:"btn-icon",title:"Share"},[y(bt,{class:"w-5 h-5"})])):c("",!0),ge(d.value)?(s(),n("button",{key:1,onClick:e[5]||(e[5]=a=>et(d.value)),class:"btn-icon",title:"Edit"},[y(xt,{class:"w-5 h-5"})])):c("",!0),d.value.permission_level==="owner"?(s(),n("button",{key:2,onClick:e[6]||(e[6]=a=>tt(d.value)),class:"btn-icon-danger",title:"Delete"},[S.value===`delete_store_${d.value.id}`?(s(),_(R,{key:0,class:"w-5 h-5 animate-spin"})):(s(),_(qe,{key:1,class:"w-5 h-5"}))])):c("",!0)])]))],64)):c("",!0),t("div",Ot,[O.value?(s(),n("div",Gt,[e[43]||(e[43]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Data Store",-1)),e[44]||(e[44]=t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"A Data Store turns your documents into a queryable knowledge base.",-1)),t("form",{onSubmit:re(Ye,["prevent"]),class:"mt-6 space-y-6"},[t("div",null,[e[35]||(e[35]=t("label",{for:"new-ds-name",class:"block text-sm font-medium"},"Name",-1)),h(t("input",{id:"new-ds-name","onUpdate:modelValue":e[7]||(e[7]=a=>v.value.name=a),type:"text",class:"input-field mt-1",required:""},null,512),[[C,v.value.name]])]),t("div",null,[e[36]||(e[36]=t("label",{for:"new-ds-desc",class:"block text-sm font-medium"},"Description",-1)),h(t("textarea",{id:"new-ds-desc","onUpdate:modelValue":e[8]||(e[8]=a=>v.value.description=a),rows:"2",class:"input-field mt-1"},null,512),[[C,v.value.description]])]),ye(ie)&&ye(ie).allow_user_chunking_config?(s(),n("div",Bt,[t("div",null,[e[37]||(e[37]=t("label",{for:"new-ds-chunk-size",class:"block text-sm font-medium"},"Chunk Size",-1)),h(t("input",{id:"new-ds-chunk-size","onUpdate:modelValue":e[9]||(e[9]=a=>v.value.chunk_size=a),type:"number",min:"1",class:"input-field mt-1"},null,512),[[C,v.value.chunk_size,void 0,{number:!0}]]),e[38]||(e[38]=t("p",{class:"text-xs text-gray-500 mt-1"},"Number of characters per data chunk.",-1))]),t("div",null,[e[39]||(e[39]=t("label",{for:"new-ds-chunk-overlap",class:"block text-sm font-medium"},"Chunk Overlap",-1)),h(t("input",{id:"new-ds-chunk-overlap","onUpdate:modelValue":e[10]||(e[10]=a=>v.value.chunk_overlap=a),type:"number",min:"0",class:"input-field mt-1"},null,512),[[C,v.value.chunk_overlap,void 0,{number:!0}]]),e[40]||(e[40]=t("p",{class:"text-xs text-gray-500 mt-1"},"Number of overlapping characters between chunks.",-1))])])):c("",!0),t("div",null,[e[42]||(e[42]=t("label",{for:"new-ds-vectorizer",class:"block text-sm font-medium"},"Vectorizer",-1)),h(t("select",{id:"new-ds-vectorizer","onUpdate:modelValue":e[11]||(e[11]=a=>v.value.selectedVectorizerKey=a),class:"input-field mt-1"},[e[41]||(e[41]=t("option",{value:null,disabled:""},"-- Select a Vectorizer Model --",-1)),(s(!0),n(M,null,K(_e.value,a=>(s(),n("optgroup",{key:a.id,label:a.alias||a.vectorizer_name},[(s(!0),n(M,null,K(a.models,o=>(s(),n("option",{key:`${a.id}-${o.value}`,value:`${a.alias}/${o.value}`},r(o.name),9,Ht))),128))],8,Qt))),128))],512),[[Re,v.value.selectedVectorizerKey]]),_e.value.length===0?(s(),n("p",Wt," No active RAG bindings found. Please configure them in Settings. ")):c("",!0)]),q.value?(s(),n("div",Jt,[t("h4",Xt,r(q.value.title||q.value.name),1),t("p",Zt,r(q.value.description),1),((u=q.value.input_parameters)==null?void 0:u.length)>0?(s(),n("div",Yt,[(s(!0),n(M,null,K(q.value.input_parameters,a=>(s(),n("div",{key:a.name},[a.name!=="model"?(s(),n("div",ea,[t("label",{for:`param-${a.name}`,class:"block text-sm font-medium"},[D(r(a.name)+" ",1),a.mandatory?(s(),n("span",aa,"*")):c("",!0)],8,ta),t("div",la,[h(t("input",{type:(a.name.includes("key")||a.name.includes("token"))&&!ee.value[a.name]?"password":"text","onUpdate:modelValue":o=>v.value.config[a.name]=o,class:"input-field pr-10",placeholder:a.description},null,8,sa),[[Mt,v.value.config[a.name]]]),a.name.includes("key")||a.name.includes("token")?(s(),n("button",{key:0,type:"button",onClick:o=>ee.value[a.name]=!ee.value[a.name],class:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",title:ee.value[a.name]?"Hide":"Show"},[ee.value[a.name]?(s(),_(Tt,{key:0,class:"w-5 h-5"})):(s(),_(Ft,{key:1,class:"w-5 h-5"}))],8,na)):c("",!0)])])):c("",!0)]))),128))])):c("",!0)])):c("",!0),t("div",oa,[t("button",{type:"button",onClick:e[12]||(e[12]=a=>{var o;O.value=!1,Se((o=l.myDataStores[0])==null?void 0:o.id)}),class:"btn btn-secondary"},"Cancel"),t("button",{type:"submit",class:"btn btn-primary",disabled:S.value==="add_store"},[S.value==="add_store"?(s(),_(R,{key:0,class:"w-5 h-5 mr-2 animate-spin"})):c("",!0),D(" "+r(S.value==="add_store"?"Creating...":"Create Data Store"),1)],8,ra)])],32)])):L.value?d.value?(s(),n("div",ca,[h(t("div",va,[ge(d.value)?(s(),n("div",ma,[e[62]||(e[62]=t("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"},"Add Documents",-1)),t("div",fa,[t("div",null,[e[49]||(e[49]=t("label",{for:"metadata-option",class:"block text-sm font-medium"},"Metadata Handling",-1)),h(t("select",{id:"metadata-option","onUpdate:modelValue":e[13]||(e[13]=a=>j.value=a),class:"input-field mt-1"},e[48]||(e[48]=[t("option",{value:"none"},"None",-1),t("option",{value:"manual"},"Manual Entry",-1),t("option",{value:"auto-generate"},"Auto-generate for each file",-1),t("option",{value:"rewrite-chunk"},"Rewrite full content with metadata for each chunk",-1)]),512),[[Re,j.value]]),e[50]||(e[50]=t("p",{class:"text-xs text-gray-500 mt-1"},"Choose how to handle metadata for uploaded files.",-1))]),t("div",pa,[t("div",ga,[h(t("input",{id:"vectorize-with-metadata","onUpdate:modelValue":e[14]||(e[14]=a=>we.value=a),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-600"},null,512),[[wt,we.value]])]),e[51]||(e[51]=t("div",{class:"ml-3 text-sm leading-6"},[t("label",{for:"vectorize-with-metadata",class:"font-medium text-gray-900 dark:text-gray-100"},"Vectorize with Metadata"),t("p",{class:"text-gray-500 dark:text-gray-400"},"Include document metadata in the vectorization process for better context.")],-1))])]),t("div",ya,[t("div",{onDragover:e[17]||(e[17]=re(a=>te.value=!0,["prevent"])),onDragleave:e[18]||(e[18]=re(a=>te.value=!1,["prevent"])),onDrop:re(lt,["prevent"]),class:oe(["border-2 border-dashed rounded-lg p-6 text-center transition-colors flex flex-col justify-center min-h-[180px]",{"border-blue-500 bg-blue-50 dark:bg-blue-900/20":te.value,"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500":!te.value}])},[t("input",{type:"file",multiple:"",ref_key:"fileInputRef",ref:ce,onChange:Ie,class:"hidden",accept:".pdf,.docx,.pptx,.xlsx,.msg,.vcf,.txt,.md,.py,.js,.ts,.html,.css,.c,.cpp,.h,.hpp,.cs,.java,.json,.xml,.sh,.vhd,.v,.rb,.php,.go,.rs,.swift,.kt,.yaml,.yml,.sql,.log,.csv"},null,544),t("input",{type:"file",ref_key:"folderInputRef",ref:ve,onChange:Ie,class:"hidden",webkitdirectory:"",directory:"",multiple:""},null,544),e[52]||(e[52]=t("p",{class:"text-gray-600 dark:text-gray-300 font-medium mb-4"},"Drag & drop files here",-1)),t("div",ha,[t("button",{type:"button",onClick:e[15]||(e[15]=a=>ce.value.click()),class:"btn btn-secondary btn-sm"},"Select File(s)"),t("button",{type:"button",onClick:e[16]||(e[16]=a=>ve.value.click()),class:"btn btn-secondary btn-sm"},"Select Folder")])],34),t("div",ba,[t("h4",xa,[y(_t,{class:"w-4 h-4"}),e[53]||(e[53]=D(" Add from URL "))]),t("div",ka,[h(t("input",{type:"text","onUpdate:modelValue":e[19]||(e[19]=a=>J.value=a),placeholder:"https://example.com/docs",class:"input-field text-sm"},null,512),[[C,J.value]]),t("div",wa,[t("div",_a,[e[54]||(e[54]=t("label",{class:"text-xs text-gray-500 uppercase font-bold"},"Depth",-1)),h(t("input",{type:"number","onUpdate:modelValue":e[20]||(e[20]=a=>fe.value=a),min:"0",max:"5",class:"input-field text-sm mt-1"},null,512),[[C,fe.value,void 0,{number:!0}]])]),t("div",Sa,[t("button",{onClick:nt,class:"btn btn-primary btn-sm w-full",disabled:le.value||pe.value||!J.value},[le.value?(s(),_(R,{key:0,class:"w-4 h-4 mr-1 animate-spin"})):c("",!0),D(" "+r(le.value?"Scraping...":"Scrape & Add"),1)],8,Ca)])]),e[55]||(e[55]=t("p",{class:"text-xs text-gray-500"},"Depth 0 = single page. Depth > 0 follows internal links.",-1))])])]),x.value.length>0?(s(),n("div",Da,[j.value==="manual"?(s(),n("div",$a,[e[58]||(e[58]=t("label",{class:"block text-sm font-medium"},"Manual Metadata Mode",-1)),t("div",za,[t("label",Va,[h(t("input",{type:"radio","onUpdate:modelValue":e[21]||(e[21]=a=>H.value=a),value:"per-file",class:"radio-input"},null,512),[[Le,H.value]]),e[56]||(e[56]=t("span",{class:"ml-2"},"Per File",-1))]),t("label",Ma,[h(t("input",{type:"radio","onUpdate:modelValue":e[22]||(e[22]=a=>H.value=a),value:"all",class:"radio-input"},null,512),[[Le,H.value]]),e[57]||(e[57]=t("span",{class:"ml-2"},"For All Files",-1))])])])):c("",!0),j.value==="manual"&&H.value==="all"?(s(),n("div",Ta,[t("h4",Fa,"Selected Files ("+r(x.value.length)+")",1),t("ul",Ia,[(s(!0),n(M,null,K(x.value,(a,o)=>(s(),n("li",{key:o,class:"flex justify-between items-center"},[t("span",Aa,r(a.name),1),t("button",{onClick:f=>Ce(o),class:"text-red-500 hover:text-red-700 ml-2",title:"Remove"},[y(Ve,{class:"w-4 h-4"})],8,Na)]))),128))]),e[59]||(e[59]=t("label",{class:"block text-sm font-medium"},"Metadata for all files (Key: Value format)",-1)),h(t("textarea",{"onUpdate:modelValue":e[23]||(e[23]=a=>ne.value=a),rows:"4",class:"input-field mt-1 font-mono text-xs",placeholder:`title: My Document
subject: AI Research
authors: John Doe, Jane Smith`},null,512),[[C,ne.value]])])):j.value==="manual"&&H.value==="per-file"?(s(),n("div",Ua,[e[61]||(e[61]=t("h4",{class:"text-sm font-medium"},"Enter Metadata for Each File:",-1)),(s(!0),n(M,null,K(x.value,(a,o)=>(s(),n("div",{key:o,class:"p-3 border rounded-lg dark:border-gray-600 space-y-3"},[t("div",Ea,[t("p",ja,r(a.name),1),t("button",{onClick:f=>Ce(o),class:"text-red-500 hover:text-red-700",title:"Remove"},[y(Ve,{class:"w-5 h-5"})],8,qa)]),t("div",null,[e[60]||(e[60]=t("label",{class:"text-xs font-medium"},"Metadata (Key: Value format)",-1)),h(t("textarea",{"onUpdate:modelValue":f=>Q.value[a.name]=f,rows:"4",class:"input-field-sm w-full mt-1 font-mono text-xs",placeholder:"title: ..."},null,8,Ra),[[C,Q.value[a.name]]])])]))),128))])):j.value!=="manual"?(s(),n("div",La,[t("h4",Pa,"Selected for Upload ("+r(x.value.length)+")",1),t("ul",Ka,[(s(!0),n(M,null,K(x.value,(a,o)=>(s(),n("li",{key:o,class:"flex justify-between items-center bg-gray-100 dark:bg-gray-800 p-2 rounded text-sm"},[t("span",Oa,r(a.name)+" ("+r((a.size/1024/1024).toFixed(2))+" MB)",1),t("button",{onClick:f=>Ce(o),class:"text-red-500 hover:text-red-700 ml-2",title:"Remove"},[y(Ve,{class:"w-4 h-4"})],8,Ga)]))),128))])])):c("",!0)])):j.value==="manual"?(s(),n("div",Ba," Select files to enter their metadata manually. ")):c("",!0),t("div",Qa,[t("button",{onClick:st,class:"btn btn-primary",disabled:pe.value||x.value.length===0||ae.value},[ae.value?(s(),_(R,{key:0,class:"w-5 h-5 mr-2 animate-spin"})):(s(),_(It,{key:1,class:"w-5 h-5 mr-2"})),D(" "+r(ae.value?"Uploading...":`Add ${x.value.length} File(s)`),1)],8,Ha)])])):c("",!0),N.value?(s(),n("div",Wa,[e[63]||(e[63]=t("span",{class:"font-semibold text-blue-800 dark:text-blue-300"},"File Uploading:",-1)),D(" "+r(N.value.progress)+"% - "+r(N.value.description),1)])):c("",!0),U.value?(s(),n("div",Ja,[e[64]||(e[64]=t("span",{class:"font-semibold text-green-800 dark:text-green-300"},"Scraping:",-1)),D(" "+r(U.value.progress)+"% - "+r(U.value.description),1)])):c("",!0),t("div",null,[t("h3",Xa,"Indexed Documents ("+r(A.value.length)+")",1),!ue.value&&A.value.length>0&&ge(d.value)?(s(),n("div",Za,[t("div",Ya,[t("input",{type:"checkbox",onChange:rt,checked:Te.value,indeterminate:Je.value,id:"select-all-files-checkbox",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,40,el),e[65]||(e[65]=t("label",{for:"select-all-files-checkbox",class:"ml-2 text-sm select-none cursor-pointer"},"Select All",-1))]),t("button",{onClick:it,class:"btn btn-danger btn-sm",disabled:w.value.size===0||S.value==="delete_selected_files"},[S.value==="delete_selected_files"?(s(),_(R,{key:0,class:"w-4 h-4 mr-2 animate-spin"})):(s(),_(qe,{key:1,class:"w-4 h-4 mr-2"})),D(" Delete Selected ("+r(w.value.size)+") ",1)],8,tl)])):c("",!0),ue.value?(s(),n("div",al,e[66]||(e[66]=[t("p",null,"Loading documents...",-1)]))):A.value.length===0?(s(),n("div",ll,e[67]||(e[67]=[t("p",null,"No documents indexed.",-1)]))):(s(),n("ul",sl,[(s(!0),n(M,null,K(A.value,a=>(s(),n("li",{key:a.filename,class:"py-3 flex items-center"},[ge(d.value)?(s(),n("input",{key:0,type:"checkbox",onChange:o=>ot(a.filename),checked:w.value.has(a.filename),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-4 flex-shrink-0"},null,40,nl)):c("",!0),t("div",ol,[t("div",rl,[t("span",{class:oe(["text-sm font-medium truncate cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors",{"opacity-50 pointer-events-none":B.value&&B.value!==a.filename}]),onClick:o=>ut(a)},r(a.filename),11,il),B.value===a.filename?(s(),_(R,{key:0,class:"w-4 h-4 text-blue-500 animate-spin flex-shrink-0"})):c("",!0)]),a.metadata&&Object.keys(a.metadata).length>0?(s(),n("details",dl,[e[68]||(e[68]=t("summary",{class:"cursor-pointer text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"},"View Metadata",-1)),t("div",ul,[y(Me,{json:a.metadata},null,8,["json"])])])):c("",!0)])]))),128))]))])],512),[[kt,T.value==="documents"]]),T.value==="query"?(s(),n("div",cl,[t("div",vl,[e[72]||(e[72]=t("h3",{class:"text-xl font-semibold"},"Query Data Store",-1)),t("form",{onSubmit:re(dt,["prevent"]),class:"space-y-4"},[t("div",null,[e[69]||(e[69]=t("label",{for:"query-text",class:"block text-sm font-medium"},"Query Text",-1)),h(t("textarea",{id:"query-text","onUpdate:modelValue":e[24]||(e[24]=a=>X.value=a),rows:"3",class:"input-field mt-1",placeholder:"Enter your question..."},null,512),[[C,X.value]])]),t("div",ml,[t("div",null,[e[70]||(e[70]=t("label",{for:"query-topk",class:"block text-sm font-medium"},"Top K",-1)),h(t("input",{id:"query-topk","onUpdate:modelValue":e[25]||(e[25]=a=>xe.value=a),type:"number",min:"1",class:"input-field mt-1"},null,512),[[C,xe.value,void 0,{number:!0}]])]),t("div",null,[e[71]||(e[71]=t("label",{for:"query-minsim",class:"block text-sm font-medium"},"Min Similarity %",-1)),h(t("input",{id:"query-minsim","onUpdate:modelValue":e[26]||(e[26]=a=>ke.value=a),type:"number",min:"0",max:"100",step:"0.1",class:"input-field mt-1"},null,512),[[C,ke.value,void 0,{number:!0}]])]),t("div",fl,[t("button",{type:"submit",class:"btn btn-primary w-full",disabled:Z.value||!X.value.trim()},[Z.value?(s(),_(R,{key:0,class:"w-5 h-5 mr-2 animate-spin"})):c("",!0),D(" "+r(Z.value?"Querying...":"Query"),1)],8,pl)])])],32)]),t("div",gl,[t("div",yl,[t("h4",hl,"Results ("+r(F.value.length)+")",1),F.value.length>0?(s(),n("div",bl,[h(t("input",{type:"text","onUpdate:modelValue":e[27]||(e[27]=a=>E.value=a),onKeyup:St(Ne,["enter"]),placeholder:"Search in results...",class:"input-field !py-1.5 !text-sm"},null,544),[[C,E.value]]),t("button",{onClick:Ne,class:"btn btn-secondary btn-sm p-2"},[y(Ct,{class:"w-4 h-4"})]),z.value.length>0?(s(),n(M,{key:0},[t("button",{onClick:e[28]||(e[28]=a=>Ue(-1)),class:"btn btn-secondary btn-sm p-2",title:"Previous match"},"‹"),t("span",xl,r(G.value+1)+" / "+r(z.value.length),1),t("button",{onClick:e[29]||(e[29]=a=>Ue(1)),class:"btn btn-secondary btn-sm p-2",title:"Next match"},"›")],64)):c("",!0)])):c("",!0)]),Z.value?(s(),n("div",kl,[y(R,{class:"w-8 h-8 mx-auto animate-spin"}),e[73]||(e[73]=t("p",{class:"mt-2"},"Fetching results...",-1))])):se.value?(s(),n("div",wl,r(se.value),1)):F.value.length===0?(s(),n("div",_l," No results to display. Run a query to see matching text chunks. ")):E.value&&z.value.length===0?(s(),n("div",Sl," No chunks match your search term. ")):(s(),n("div",Cl,[(s(!0),n(M,null,K(F.value,(a,o)=>(s(),n("div",{key:o,id:`chunk-${o}`,class:"p-4 border rounded-lg dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},[t("div",$l,[t("span",{class:"font-mono truncate",title:a.file_path},".../"+r(a.file_path.split(/[/\\]/).pop()),9,zl),t("span",{class:"font-semibold",title:`Similarity: ${a.similarity_percent}`},r(a.similarity_percent.toFixed(2))+"%",9,Vl)]),t("pre",{class:"whitespace-pre-wrap font-sans text-sm",innerHTML:Ze(a.chunk_text)},null,8,Ml)],8,Dl))),128))]))])])):c("",!0),T.value==="graph"?(s(),n("div",Tl,[y(ye(Ke),{store:d.value,task:me.value},null,8,["store","task"])])):c("",!0)])):(s(),n("div",ua,e[47]||(e[47]=[t("h3",{class:"text-xl font-semibold text-gray-700 dark:text-gray-200"},"Data Store Not Found",-1),t("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"The selected data store could not be loaded.",-1)]))):(s(),n("div",ia,[t("div",da,[y(ze,{class:"mx-auto h-12 w-12 text-gray-400"}),e[45]||(e[45]=t("h3",{class:"mt-2 text-xl font-semibold text-gray-900 dark:text-white"},"Select a Data Store",-1)),e[46]||(e[46]=t("p",{class:"mt-1 text-sm text-gray-500"},"Choose a store from the sidebar or create a new one to begin.",-1))])])),B.value?(s(),n("div",Fl,[y(R,{class:"w-12 h-12 text-blue-600 dark:text-blue-400 mb-4 animate-spin"}),e[74]||(e[74]=t("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"},"Loading file content",-1)),e[75]||(e[75]=t("p",{class:"text-gray-600 dark:text-gray-300"},"Please stand by...",-1))])):c("",!0)])]),y(Pe,{modalName:"storeInfoModal",isOpen:de.value,onClose:e[31]||(e[31]=a=>de.value=!1),title:d.value?`${d.value.name} Details`:"Store Details"},{body:he(()=>[d.value?(s(),n("div",Il,[t("div",null,[e[76]||(e[76]=t("h4",{class:"font-semibold text-sm text-gray-700 dark:text-gray-300"},"Description",-1)),t("p",Al,r(d.value.description||"No description available."),1)]),t("div",null,[e[77]||(e[77]=t("h4",{class:"font-semibold text-sm text-gray-700 dark:text-gray-300"},"Owner",-1)),t("div",Nl,[y(At,{username:d.value.owner_username,"size-class":"h-6 w-6"},null,8,["username"]),t("span",Ul,r(d.value.owner_username),1)])]),t("div",El,[t("div",null,[e[78]||(e[78]=t("span",{class:"block text-xs font-semibold text-gray-500 uppercase"},"Vectorizer",-1)),t("span",jl,r(d.value.vectorizer_name),1)]),t("div",null,[e[79]||(e[79]=t("span",{class:"block text-xs font-semibold text-gray-500 uppercase"},"Chunking",-1)),t("span",ql,r(d.value.chunk_size)+" / "+r(d.value.chunk_overlap),1)])]),t("div",null,[e[80]||(e[80]=t("h4",{class:"font-semibold text-sm text-gray-700 dark:text-gray-300 mb-1"},"Configuration",-1)),t("div",Rl,[y(Me,{json:d.value.vectorizer_config},null,8,["json"])])])])):c("",!0)]),footer:he(()=>[t("button",{onClick:e[30]||(e[30]=a=>de.value=!1),class:"btn btn-primary"},"Close")]),_:1},8,["isOpen","title"]),y(Pe,{modalName:"fileContent",title:"Document Viewer",size:"4xl"},{body:he(()=>{var a,o,f;return[b.value?(s(),n("div",Ll,[t("div",Pl,[t("div",Kl,[t("div",null,[t("h3",Ol,r(((a=b.value.metadata)==null?void 0:a.title)||b.value.filename),1),(o=b.value.metadata)!=null&&o.title&&((f=b.value.metadata)==null?void 0:f.title)!==b.value.filename?(s(),n("p",Gl,r(b.value.filename),1)):c("",!0)]),t("div",Bl,[t("div",Ql,[t("span",Hl,r(b.value.content.length.toLocaleString()),1),e[81]||(e[81]=D(" chars"))]),t("div",Wl,[t("span",Jl,r(b.value.content.split(/\s+/).length.toLocaleString()),1),e[82]||(e[82]=D(" words"))]),t("div",Xl,[t("span",Zl,"~"+r(Math.ceil(b.value.content.length/4).toLocaleString()),1),e[83]||(e[83]=D(" tokens"))])])]),b.value.metadata&&Object.keys(b.value.metadata).length>0?(s(),n("div",Yl,[t("details",es,[e[84]||(e[84]=t("summary",{class:"cursor-pointer text-blue-600 dark:text-blue-400 font-medium select-none"},"Show Metadata",-1)),t("div",ts,[y(Me,{json:b.value.metadata},null,8,["json"])])])])):c("",!0)]),t("div",as,[t("div",ls,[t("button",{onClick:ct,class:"p-2 bg-white dark:bg-gray-800 border dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",title:"Copy Content"},[y(Nt,{class:"w-4 h-4"})])]),t("div",ss,r(b.value.content),1)])])):c("",!0)]}),footer:he(()=>[t("button",{onClick:e[32]||(e[32]=a=>ye(g).closeModal("fileContent")),class:"btn btn-primary"},"Close")]),_:1})],64)}}};export{us as default};
