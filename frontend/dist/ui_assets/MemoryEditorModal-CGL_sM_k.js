import{a as M,s as w,c as r,r as u,w as E,b as S,d as x,e as p,f as o,l as f,t as C,i as _,v as V,A as g,_ as k,j as D}from"./index-GJY6etPD.js";import{_ as U}from"./GenericModal-Cz02a-9C.js";const $=["disabled"],B=["disabled"],T={__name:"MemoryEditorModal",setup(I){const l=M(),b=w(),m=r(()=>l.modalData("memoryEditor")||{}),v=r(()=>m.value.discussionId),d=r(()=>m.value.memory),c=r(()=>{var a;return!!((a=d.value)!=null&&a.title)}),s=u(""),i=u(""),n=u(!1);E(()=>l.isModalOpen("memoryEditor"),a=>{var e,t;a&&(s.value=((e=d.value)==null?void 0:e.title)||"",i.value=((t=d.value)==null?void 0:t.content)||"")},{immediate:!0});async function y(){if(!(!s.value.trim()||!v.value)){n.value=!0;try{await b.createOrUpdateMemory({discussionId:v.value,title:s.value,content:i.value}),l.closeModal("memoryEditor")}finally{n.value=!1}}}return(a,e)=>(x(),S(U,{"modal-name":"memoryEditor",title:c.value?"Edit Memory":"Create New Memory",onClose:e[3]||(e[3]=t=>f(l).closeModal("memoryEditor")),"max-width-class":"max-w-3xl"},{body:p(()=>[o("form",{onSubmit:D(y,["prevent"]),class:"space-y-4"},[o("div",null,[e[4]||(e[4]=o("label",{for:"memory-title",class:"label"},"Title",-1)),_(o("input",{id:"memory-title",type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>s.value=t),class:"input-field",disabled:c.value,required:""},null,8,$),[[V,s.value]])]),o("div",null,[e[5]||(e[5]=o("label",{for:"memory-content",class:"label"},"Content",-1)),g(k,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value=t),class:"h-64"},null,8,["modelValue"])])],32)]),footer:p(()=>[o("button",{type:"button",onClick:e[2]||(e[2]=t=>f(l).closeModal("memoryEditor")),class:"btn btn-secondary"}," Cancel "),o("button",{type:"button",onClick:y,class:"btn btn-primary",disabled:n.value},C(n.value?"Saving...":"Save Memory"),9,B)]),_:1},8,["title"]))}};export{T as default};
